// Wrapper for webm-worker.js generated by Emscripten
// Provides CommonJS environment (exports, module) before loading the worker

// Create CommonJS shim
const exports = {};
const module = { exports };

// Load the Emscripten-generated worker
importScripts('webm-worker.js');

// Re-export the message handler
if (typeof module.exports === 'function') {
    self.onmessage = module.exports;
} else if (typeof exports.onmessage === 'function') {
    self.onmessage = exports.onmessage;
} else {
    console.error('[WebM Worker Wrapper] No valid onmessage handler found!');
}
