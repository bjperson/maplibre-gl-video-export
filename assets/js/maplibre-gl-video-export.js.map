{"version":3,"file":"maplibre-gl-video-export.js","sources":["../../src/utils.js","../../src/animations.js","../../src/controller.js","../../src/webm-encoder-wrapper.js","../../src/index.js","../../node_modules/mediabunny/dist/modules/src/misc.js","../../node_modules/mediabunny/dist/modules/src/tags.js","../../node_modules/mediabunny/dist/modules/src/codec.js","../../node_modules/mediabunny/dist/modules/src/muxer.js","../../node_modules/mediabunny/dist/modules/src/codec-data.js","../../node_modules/mediabunny/dist/modules/src/custom-coder.js","../../node_modules/mediabunny/dist/modules/src/packet.js","../../node_modules/mediabunny/dist/modules/src/sample.js","../../node_modules/mediabunny/dist/modules/src/matroska/ebml.js","../../node_modules/mediabunny/dist/modules/src/matroska/matroska-misc.js","../../node_modules/mediabunny/dist/modules/src/subtitles.js","../../node_modules/mediabunny/dist/modules/src/writer.js","../../node_modules/mediabunny/dist/modules/src/target.js","../../node_modules/mediabunny/dist/modules/src/matroska/matroska-muxer.js","../../node_modules/mediabunny/dist/modules/src/output-format.js","../../node_modules/mediabunny/dist/modules/src/encode.js","../../node_modules/mediabunny/dist/modules/src/media-source.js","../../node_modules/mediabunny/dist/modules/src/output.js","../../src/webcodecs-vp9-encoder.js"],"sourcesContent":["// ============================================================================\n// Geometric and Mathematical Utility Functions\n// ============================================================================\n\n/**\n * Calculate bearing between two points\n * @param {number} lng1 - Longitude of first point\n * @param {number} lat1 - Latitude of first point\n * @param {number} lng2 - Longitude of second point\n * @param {number} lat2 - Latitude of second point\n * @returns {number} Bearing in degrees (0-360)\n */\nexport function calculateBearing(lng1, lat1, lng2, lat2) {\n  const dLng = (lng2 - lng1) * Math.PI / 180;\n  const lat1Rad = lat1 * Math.PI / 180;\n  const lat2Rad = lat2 * Math.PI / 180;\n\n  const y = Math.sin(dLng) * Math.cos(lat2Rad);\n  const x = Math.cos(lat1Rad) * Math.sin(lat2Rad) -\n              Math.sin(lat1Rad) * Math.cos(lat2Rad) * Math.cos(dLng);\n\n  const bearing = Math.atan2(y, x) * 180 / Math.PI;\n  return (bearing + 360) % 360; // Normalize to 0-360\n}\n\n/**\n * Calculate distance between two points using Haversine formula\n * @param {number} lng1 - Longitude of first point\n * @param {number} lat1 - Latitude of first point\n * @param {number} lng2 - Longitude of second point\n * @param {number} lat2 - Latitude of second point\n * @returns {number} Distance in kilometers\n */\nexport function calculateDistance(lng1, lat1, lng2, lat2) {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLng = (lng2 - lng1) * Math.PI / 180;\n\n  const lat1Rad = lat1 * Math.PI / 180;\n  const lat2Rad = lat2 * Math.PI / 180;\n\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(lat1Rad) * Math.cos(lat2Rad) *\n              Math.sin(dLng / 2) * Math.sin(dLng / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c; // Distance in kilometers\n}\n\n/**\n * Calculate a point on a Catmull-Rom spline\n * @param {Array} p0 - Control point 0 [lng, lat]\n * @param {Array} p1 - Control point 1 [lng, lat] (curve starts here)\n * @param {Array} p2 - Control point 2 [lng, lat] (curve ends here)\n * @param {Array} p3 - Control point 3 [lng, lat]\n * @param {number} t - Parameter [0, 1]\n * @param {number} tension - Tension parameter (default 0.5 for standard Catmull-Rom)\n * @returns {Array} Interpolated point [lng, lat]\n */\nexport function catmullRomPoint(p0, p1, p2, p3, t, tension = 0.5) {\n  const t2 = t * t;\n  const t3 = t2 * t;\n\n  const v0 = (p2[0] - p0[0]) * tension;\n  const v1 = (p3[0] - p1[0]) * tension;\n  const lng = (2 * p1[0] - 2 * p2[0] + v0 + v1) * t3 +\n              (-3 * p1[0] + 3 * p2[0] - 2 * v0 - v1) * t2 +\n              v0 * t +\n              p1[0];\n\n  const w0 = (p2[1] - p0[1]) * tension;\n  const w1 = (p3[1] - p1[1]) * tension;\n  const lat = (2 * p1[1] - 2 * p2[1] + w0 + w1) * t3 +\n              (-3 * p1[1] + 3 * p2[1] - 2 * w0 - w1) * t2 +\n              w0 * t +\n              p1[1];\n\n  return [lng, lat];\n}\n\n/**\n * Calculate bounds that contain all waypoints\n * @param {Array} waypoints - Array of waypoint objects with center: [lng, lat]\n * @returns {Array|null} Bounds [[west, south], [east, north]] or null if no waypoints\n */\nexport function getWaypointsBounds(waypoints) {\n  if (!waypoints || waypoints.length === 0) return null;\n\n  let west = Infinity; let south = Infinity; let east = -Infinity; let north = -Infinity;\n\n  waypoints.forEach(wp => {\n    const [lng, lat] = wp.center;\n    west = Math.min(west, lng);\n    east = Math.max(east, lng);\n    south = Math.min(south, lat);\n    north = Math.max(north, lat);\n  });\n\n  // Add 10% padding\n  const padLng = (east - west) * 0.1;\n  const padLat = (north - south) * 0.1;\n\n  return [\n    [west - padLng, south - padLat],\n    [east + padLng, north + padLat]\n  ];\n}\n\n/**\n * Resample a path to have uniformly spaced points\n * This eliminates speed variations caused by irregular point spacing in OSM data\n * @param {Array<[number, number]>} coords - Array of [lng, lat] coordinates\n * @param {number} targetSpacingKm - Desired spacing between points in kilometers (default: 0.01 = 10m)\n * @returns {Array<[number, number]>} Resampled coordinates with uniform spacing\n */\nexport function resamplePath(coords, targetSpacingKm = 0.01) {\n  if (!coords || coords.length < 2) return coords;\n\n  const resampled = [coords[0]]; // Always keep first point\n  let accumulatedDistance = 0;\n\n  for (let i = 1; i < coords.length; i++) {\n    const [lng1, lat1] = coords[i - 1];\n    const [lng2, lat2] = coords[i];\n    const segmentDistance = calculateDistance(lng1, lat1, lng2, lat2);\n\n    accumulatedDistance += segmentDistance;\n\n    // If we've accumulated enough distance, add intermediate points\n    while (accumulatedDistance >= targetSpacingKm) {\n      // Calculate how far along this segment we need to go\n      const overshoot = accumulatedDistance - targetSpacingKm;\n      const t = 1 - (overshoot / segmentDistance); // Interpolation factor [0, 1]\n\n      // Linear interpolation\n      const newLng = lng1 + t * (lng2 - lng1);\n      const newLat = lat1 + t * (lat2 - lat1);\n      resampled.push([newLng, newLat]);\n\n      accumulatedDistance -= targetSpacingKm;\n    }\n  }\n\n  // Always keep last point\n  const lastOriginal = coords[coords.length - 1];\n  const lastResampled = resampled[resampled.length - 1];\n  if (lastOriginal[0] !== lastResampled[0] || lastOriginal[1] !== lastResampled[1]) {\n    resampled.push(lastOriginal);\n  }\n\n  return resampled;\n}\n\n/**\n * Resample path with Catmull-Rom spline interpolation for smooth curves\n * @param {Array} coords - Array of [lng, lat] coordinates\n * @param {number} targetSpacingKm - Target spacing between points in kilometers\n * @param {number} tension - Catmull-Rom tension (0.5 = standard, 0 = linear, 1 = tight curves)\n * @returns {Array} Resampled coordinates with smooth curves\n */\nexport function resamplePathCatmullRom(coords, targetSpacingKm = 0.01, tension = 0.3) {\n  if (!coords || coords.length < 2) return coords;\n  if (coords.length === 2) return resamplePath(coords, targetSpacingKm); // Fallback to linear for 2 points\n\n  // Step 1: Generate smooth curve using Catmull-Rom\n  const smoothCurve = [];\n  const pointsPerSegment = 30; // Generate 30 intermediate points per segment for smoother curves\n\n  for (let i = 0; i < coords.length - 1; i++) {\n    // Get 4 control points for Catmull-Rom\n    const p0 = coords[Math.max(0, i - 1)]; // Previous point (or duplicate first)\n    const p1 = coords[i]; // Current segment start\n    const p2 = coords[i + 1]; // Current segment end\n    const p3 = coords[Math.min(coords.length - 1, i + 2)]; // Next point (or duplicate last)\n\n    // Generate intermediate points along the curve\n    for (let j = 0; j < pointsPerSegment; j++) {\n      const t = j / pointsPerSegment;\n      const point = catmullRomPoint(p0, p1, p2, p3, t, tension);\n      smoothCurve.push(point);\n    }\n  }\n\n  // Always add the last point\n  smoothCurve.push(coords[coords.length - 1]);\n\n  // Step 2: Resample the smooth curve with uniform spacing\n  return resamplePath(smoothCurve, targetSpacingKm);\n}\n\n/**\n * Get optimal center and zoom to show all waypoints\n * Calculates the geographic center and appropriate zoom level to fit all waypoints in view\n * @param {Object} map - MapLibre map instance\n * @param {Object|Array} waypoints - GeoJSON FeatureCollection or Array of waypoint objects\n * @returns {Object|null} {center: [lng, lat], zoom: number} or null if no waypoints\n */\nexport function getOptimalViewForWaypoints(map, waypoints) {\n  if (!waypoints) return null;\n\n  // Handle GeoJSON FeatureCollection format\n  let waypointArray = [];\n  if (waypoints.type === 'FeatureCollection' && waypoints.features) {\n    waypointArray = waypoints.features.map(feature => ({\n      center: feature.geometry.coordinates\n    }));\n  } else if (Array.isArray(waypoints)) {\n    waypointArray = waypoints;\n  } else {\n    return null;\n  }\n\n  if (waypointArray.length === 0) return null;\n\n  // Single waypoint - return its center with current zoom\n  if (waypointArray.length === 1) {\n    return {\n      center: waypointArray[0].center,\n      zoom: map.getZoom()\n    };\n  }\n\n  // Multiple waypoints - calculate bounds\n  let west = Infinity; let south = Infinity; let east = -Infinity; let north = -Infinity;\n\n  waypointArray.forEach(wp => {\n    const [lng, lat] = wp.center;\n    west = Math.min(west, lng);\n    east = Math.max(east, lng);\n    south = Math.min(south, lat);\n    north = Math.max(north, lat);\n  });\n\n  // Calculate center\n  const centerLng = (west + east) / 2;\n  const centerLat = (south + north) / 2;\n\n  // Calculate zoom level to fit all waypoints\n  // Add 15% padding to ensure waypoints aren't at the edge\n  const bounds = [\n    [west, south],\n    [east, north]\n  ];\n\n  const canvas = map.getCanvas();\n  const padding = Math.min(canvas.width, canvas.height) * 0.15;\n\n  // Use MapLibre's cameraForBounds to get optimal zoom\n  const camera = map.cameraForBounds(bounds, {\n    padding: { top: padding, bottom: padding, left: padding, right: padding }\n  });\n\n  return {\n    center: [centerLng, centerLat],\n    zoom: camera ? camera.zoom : map.getZoom()\n  };\n}\n","/**\n * Animations for MapLibre GL\n *\n * Animation system that adapts to map content\n * Detects features like terrain, layers, and bounds to create cinematic sequences\n */\n\n// @ts-check\n/* global maplibregl */\n\n// Import geometric utility functions from utils.js\nimport { calculateBearing, calculateDistance, resamplePath, resamplePathCatmullRom, getOptimalViewForWaypoints } from './utils.js';\n\nconst sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n// ============================================================================\n// Road Following Utilities & Constants\n// ============================================================================\n\n/**\n * Standard filter for querying road features from vector tiles\n * Used for vehicle animations that follow roads (car, drone, helicopter, etc.)\n */\nconst ROAD_QUERY_FILTER = [\n  'all',\n  ['==', ['geometry-type'], 'LineString'],\n  ['in', ['get', 'class'], ['literal', [\n    'motorway', 'trunk', 'primary', 'secondary', 'tertiary',\n    'minor', 'service', 'track', 'path'\n  ]]]\n];\n\n/**\n * 8 cardinal directions for road searching and ray casting\n * Used for finding roads in all compass directions from a point\n */\nconst CARDINAL_DIRECTIONS_8 = [\n  { angle: 0, name: 'N' }, // North\n  { angle: 45, name: 'NE' }, // Northeast\n  { angle: 90, name: 'E' }, // East\n  { angle: 135, name: 'SE' }, // Southeast\n  { angle: 180, name: 'S' }, // South\n  { angle: 225, name: 'SW' }, // Southwest\n  { angle: 270, name: 'W' }, // West\n  { angle: 315, name: 'NW' } // Northwest\n];\n\n/**\n * Normalize bearing difference to range [-180, 180]\n * Ensures smallest angular difference is returned\n * @param {number} diff - Bearing difference in degrees\n * @returns {number} Normalized bearing difference in range [-180, 180]\n */\nconst normalizeBearingDiff = (diff) => {\n  while (diff > 180) diff -= 360;\n  while (diff < -180) diff += 360;\n  return diff;\n};\n\n/**\n * Validate that a coordinate is a valid [lng, lat] array with numbers\n * @param {Array} coord - Coordinate to validate\n * @returns {boolean} True if coordinate is valid [number, number] array\n */\nconst isValidCoordinate = (coord) => {\n  return coord &&\n           Array.isArray(coord) &&\n           typeof coord[0] === 'number' &&\n           typeof coord[1] === 'number';\n};\n\n/**\n * Cleanup map2 (helper map) and associated debug layers\n * @param {Object} options - Options object containing map2, div2, etc.\n * @param {Object} map - Main map instance for removing debug layers\n */\nconst cleanupMap2AndDebugLayer = (options, map) => {\n  // Remove helper map\n  if (options.map2) {\n    try { options.map2.remove(); } catch (e) {}\n  }\n\n  // Remove helper div\n  if (options.div2 && options.div2.parentNode) {\n    options.div2.parentNode.removeChild(options.div2);\n  }\n\n  // Remove debug visualization layers\n  try {\n    if (map.getLayer('drone-followed-segments-layer')) {\n      map.removeLayer('drone-followed-segments-layer');\n    }\n    if (map.getSource('drone-followed-segments')) {\n      map.removeSource('drone-followed-segments');\n    }\n  } catch (e) {}\n};\n\n/**\n * Convert degrees to meters (at equator)\n * @param {number} degrees - Distance in degrees\n * @param {number} precision - Decimal places (default: 0)\n * @returns {string} Distance in meters as formatted string\n */\n// eslint-disable-next-line no-unused-vars\nconst degreesToMeters = (degrees, precision = 0) => (degrees * 111000).toFixed(precision);\n\n/**\n * Calculate intersection distance between two line segments\n * Uses parametric line intersection algorithm\n * @param {Array} p1 - First point of first segment [x, y]\n * @param {Array} p2 - Second point of first segment [x, y]\n * @param {Array} p3 - First point of second segment [x, y]\n * @param {Array} p4 - Second point of second segment [x, y]\n * @returns {number|null} Distance from p1 to intersection point, or null if no intersection\n */\nconst segmentIntersection = (p1, p2, p3, p4) => {\n  const x1 = p1[0]; const y1 = p1[1];\n  const x2 = p2[0]; const y2 = p2[1];\n  const x3 = p3[0]; const y3 = p3[1];\n  const x4 = p4[0]; const y4 = p4[1];\n\n  const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n  if (Math.abs(denom) < 1e-10) return null; // Parallel lines\n\n  const t = ((x1 - x3) * (y3 - y4) - (y1 - y3) * (x3 - x4)) / denom;\n  const u = -((x1 - x2) * (y1 - y3) - (y1 - y2) * (x1 - x3)) / denom;\n\n  if (t >= 0 && t <= 1 && u >= 0 && u <= 1) {\n    // Intersection exists - calculate point and distance\n    const ix = x1 + t * (x2 - x1);\n    const iy = y1 + t * (y2 - y1);\n    const dx = ix - x1;\n    const dy = iy - y1;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n  return null; // No intersection\n};\n\n/**\n * AnimationConstraints class\n * Manages geographic and zoom constraints for animations\n * Ensures animations stay within specified bounds and zoom levels\n */\nexport class AnimationConstraints {\n  constructor(options = {}) {\n    this.maxBounds = options.maxBounds || null; // [[west, south], [east, north]]\n    this.minZoom = options.minZoom !== undefined ? options.minZoom : null;\n    this.maxZoom = options.maxZoom !== undefined ? options.maxZoom : null;\n    this.strictBounds = options.strictBounds || false;\n  }\n\n  /**\n     * Check if a center point is within bounds\n     * @param {Array|Object} center - [lng, lat] or {lng, lat}\n     * @returns {boolean}\n     */\n  isWithinBounds(center) {\n    if (!this.maxBounds) return true;\n\n    // Handle both array and LngLat object formats\n    const lng = Array.isArray(center) ? center[0] : center.lng;\n    const lat = Array.isArray(center) ? center[1] : center.lat;\n    const [[west, south], [east, north]] = this.maxBounds;\n\n    return lng >= west && lng <= east && lat >= south && lat <= north;\n  }\n\n  /**\n     * Constrain a center point to be within bounds\n     * @param {Array|Object} center - [lng, lat] or {lng, lat}\n     * @returns {Array|Object} Constrained center in same format as input\n     */\n  constrainCenter(center) {\n    if (!this.maxBounds) return center;\n\n    // Handle both array and LngLat object formats\n    const isArray = Array.isArray(center);\n    const lng = isArray ? center[0] : center.lng;\n    const lat = isArray ? center[1] : center.lat;\n    const [[west, south], [east, north]] = this.maxBounds;\n\n    const constrainedLng = Math.max(west, Math.min(east, lng));\n    const constrainedLat = Math.max(south, Math.min(north, lat));\n\n    // Return in the same format as input\n    if (isArray) {\n      return [constrainedLng, constrainedLat];\n    } else {\n      // Return as LngLat-like object\n      return {\n        lng: constrainedLng,\n        lat: constrainedLat,\n        // Preserve other properties if it's a full LngLat object\n        ...(center.toArray ? { toArray: () => [constrainedLng, constrainedLat] } : {})\n      };\n    }\n  }\n\n  /**\n     * Check if a zoom level is within limits\n     * @param {number} zoom\n     * @returns {boolean}\n     */\n  isWithinZoomLimits(zoom) {\n    if (this.minZoom !== null && zoom < this.minZoom) return false;\n    if (this.maxZoom !== null && zoom > this.maxZoom) return false;\n    return true;\n  }\n\n  /**\n     * Constrain a zoom level to be within limits\n     * @param {number} zoom\n     * @returns {number} Constrained zoom\n     */\n  constrainZoom(zoom) {\n    if (this.minZoom !== null && zoom < this.minZoom) return this.minZoom;\n    if (this.maxZoom !== null && zoom > this.maxZoom) return this.maxZoom;\n    return zoom;\n  }\n\n  /**\n     * Apply constraints to camera options (for flyTo, easeTo, etc.)\n     * @param {Object} options - Camera options\n     * @returns {Object} Constrained options\n     */\n  applyCameraConstraints(options) {\n    const constrained = { ...options };\n\n    // Constrain center - handle undefined, null, and various formats\n    if (options.center !== undefined && options.center !== null) {\n      constrained.center = this.constrainCenter(options.center);\n    }\n\n    // Constrain zoom\n    if (options.zoom !== undefined && options.zoom !== null) {\n      constrained.zoom = this.constrainZoom(options.zoom);\n    }\n\n    return constrained;\n  }\n\n  /**\n     * Calculate a safe animation path that respects bounds\n     * @param {Array|Object} fromCenter - Starting [lng, lat] or {lng, lat}\n     * @param {Array|Object} toCenter - Target [lng, lat] or {lng, lat}\n     * @param {number} steps - Number of intermediate steps\n     * @returns {Array} Array of [lng, lat] waypoints\n     */\n  calculateSafePath(fromCenter, toCenter, steps = 10) {\n    const path = [];\n\n    // Handle both array and LngLat object formats\n    const fromLng = Array.isArray(fromCenter) ? fromCenter[0] : fromCenter.lng;\n    const fromLat = Array.isArray(fromCenter) ? fromCenter[1] : fromCenter.lat;\n    const toLng = Array.isArray(toCenter) ? toCenter[0] : toCenter.lng;\n    const toLat = Array.isArray(toCenter) ? toCenter[1] : toCenter.lat;\n\n    for (let i = 0; i <= steps; i++) {\n      const t = i / steps;\n      const lng = fromLng + (toLng - fromLng) * t;\n      const lat = fromLat + (toLat - fromLat) * t;\n\n      if (this.strictBounds) {\n        // In strict mode, constrain every point\n        path.push(this.constrainCenter([lng, lat]));\n      } else {\n        // In non-strict mode, allow the path but warn if outside\n        path.push([lng, lat]);\n      }\n    }\n\n    return path;\n  }\n\n  /**\n     * Check if the current view respects all constraints\n     * @param {Object} map - MapLibre map instance\n     * @returns {Object} {valid: boolean, issues: Array}\n     */\n  validateCurrentView(map) {\n    const issues = [];\n    const center = map.getCenter().toArray();\n    const zoom = map.getZoom();\n\n    if (!this.isWithinBounds(center)) {\n      issues.push(`Center ${center} is outside bounds`);\n    }\n\n    if (!this.isWithinZoomLimits(zoom)) {\n      issues.push(`Zoom ${zoom} is outside limits [${this.minZoom}, ${this.maxZoom}]`);\n    }\n\n    return {\n      valid: issues.length === 0,\n      issues\n    };\n  }\n\n  /**\n     * Get safe bounds for animations, considering current constraints\n     * @param {Object} map - MapLibre map instance\n     * @returns {Object} Safe bounds object\n     */\n  getSafeBounds(map) {\n    if (!this.maxBounds) {\n      // If no constraints, use current viewport\n      return map.getBounds();\n    }\n\n    // Create bounds from constraints\n    const [[west, south], [east, north]] = this.maxBounds;\n\n    // Return as a bounds-like object\n    return {\n      getWest: () => west,\n      getEast: () => east,\n      getSouth: () => south,\n      getNorth: () => north,\n      getCenter: () => [(west + east) / 2, (south + north) / 2]\n    };\n  }\n\n  /**\n     * Wrap an animation function with constraints\n     * @param {Function} animationFn - Original animation function\n     * @returns {Function} Wrapped animation function that respects constraints\n     */\n  wrapAnimation(animationFn) {\n    return async (map, control) => {\n      // Store original methods\n      const originalFlyTo = map.flyTo.bind(map);\n      const originalEaseTo = map.easeTo.bind(map);\n      const originalJumpTo = map.jumpTo.bind(map);\n\n      // Override methods with constrained versions\n      map.flyTo = (options) => originalFlyTo(this.applyCameraConstraints(options));\n      map.easeTo = (options) => originalEaseTo(this.applyCameraConstraints(options));\n      map.jumpTo = (options) => originalJumpTo(this.applyCameraConstraints(options));\n\n      try {\n        // Run the original animation with constrained methods\n        await animationFn(map, control);\n      } finally {\n        // Restore original methods\n        map.flyTo = originalFlyTo;\n        map.easeTo = originalEaseTo;\n        map.jumpTo = originalJumpTo;\n      }\n    };\n  }\n}\n\n/**\n * Waypoint Helper Functions\n */\n\n/**\n * Fly to a waypoint with all its parameters\n * @param {Object} map - MapLibre map instance\n * @param {Object} waypoint - Waypoint object {center, zoom, bearing, pitch, duration, name}\n * @param {number} transitionDuration - Flight duration in milliseconds\n * @param {Object} options - {checkAbort, updateStatus}\n */\nasync function flyToWaypoint(map, waypoint, transitionDuration, { checkAbort, updateStatus } = {}) {\n  const wpName = waypoint.name || 'waypoint';\n\n  if (updateStatus) {\n    updateStatus(`Flying to ${wpName}...`);\n  }\n\n  // Build flyTo options with waypoint parameters\n  const flyToOptions = {\n    center: waypoint.center,\n    duration: transitionDuration,\n    essential: true\n  };\n\n  // Add optional parameters if defined\n  if (waypoint.zoom !== undefined) flyToOptions.zoom = waypoint.zoom;\n  if (waypoint.bearing !== undefined) flyToOptions.bearing = waypoint.bearing;\n  if (waypoint.pitch !== undefined) flyToOptions.pitch = waypoint.pitch;\n\n  // Handle zero duration case - use jumpTo instead of flyTo\n  if (transitionDuration === 0 || transitionDuration < 10) {\n    // Build jumpTo options (only include defined properties)\n    const jumpToOptions = { center: waypoint.center };\n    if (waypoint.zoom !== undefined) jumpToOptions.zoom = waypoint.zoom;\n    if (waypoint.bearing !== undefined) jumpToOptions.bearing = waypoint.bearing;\n    if (waypoint.pitch !== undefined) jumpToOptions.pitch = waypoint.pitch;\n\n    map.jumpTo(jumpToOptions);\n    // No need to wait for moveend with jumpTo - it's synchronous\n  } else {\n    map.flyTo(flyToOptions);\n    await map.once('moveend');\n  }\n\n  if (checkAbort) checkAbort();\n\n  // Pause at waypoint if duration is specified\n  if (waypoint.duration) {\n    if (updateStatus) {\n      updateStatus(`At ${wpName} (pausing ${waypoint.duration}ms)...`);\n    }\n    await sleep(waypoint.duration);\n    if (checkAbort) checkAbort();\n  }\n}\n\n/**\n * Create a tour plan from waypoints with calculated timings\n * Distributes total duration between transitions and pauses\n * @param {Array} waypoints - Array of waypoint objects\n * @param {number} totalDuration - Total duration in milliseconds\n * @returns {Array} Array of {waypoint, transitionDuration}\n */\nfunction createWaypointTour(waypoints, totalDuration) {\n  if (!waypoints || waypoints.length === 0) return [];\n\n  // Calculate total pause time from waypoint durations\n  const totalPauseTime = waypoints.reduce((sum, wp) => sum + (wp.duration || 0), 0);\n\n  // Remaining time for transitions\n  const transitionTime = Math.max(0, totalDuration - totalPauseTime);\n\n  // Time per transition (between waypoints)\n  const timePerTransition = waypoints.length > 0 ? transitionTime / waypoints.length : 0;\n\n  return waypoints.map(wp => ({\n    waypoint: wp,\n    transitionDuration: timePerTransition\n  }));\n}\n\n/**\n * Interpolate waypoints for geometric animations\n * Creates smooth path passing through waypoints\n * @param {Array} waypoints - Array of waypoint objects with center: [lng, lat]\n * @param {number} steps - Total number of points to generate (including waypoints)\n * @returns {Array} Array of [lng, lat] coordinates\n */\n// eslint-disable-next-line no-unused-vars\nfunction interpolateWaypoints(waypoints, steps) {\n  if (!waypoints || waypoints.length === 0) return [];\n  if (waypoints.length === 1) {\n    // Single waypoint, return it multiple times\n    return Array(steps).fill(waypoints[0].center);\n  }\n\n  const points = [];\n  const segmentSteps = Math.floor(steps / waypoints.length);\n\n  for (let i = 0; i < waypoints.length; i++) {\n    const start = waypoints[i].center;\n    const end = waypoints[(i + 1) % waypoints.length].center; // Loop back to first\n\n    for (let j = 0; j < segmentSteps; j++) {\n      const t = j / segmentSteps;\n      const lng = start[0] + (end[0] - start[0]) * t;\n      const lat = start[1] + (end[1] - start[1]) * t;\n      points.push([lng, lat]);\n    }\n  }\n\n  return points;\n}\n\n/**\n * Helper: Incremental 360¬∞ rotation that handles bearing normalization\n * MapLibre normalizes bearing to [-180, 180], so we need incremental steps\n *\n * @param {Object} map - MapLibre map instance\n * @param {number} duration - Total duration in milliseconds\n * @param {Object} options - Configuration options\n * @param {Function} options.checkAbort - Function to check for cancellation\n * @param {Function} options.updateStatus - Optional status update callback\n * @param {number} options.degreesPerStep - Degrees per rotation step (default: 2)\n * @param {number|Object} options.pitch - Pitch configuration:\n *   - number: Fixed pitch during rotation (e.g., 50)\n *   - {from: number, to: number}: Progressive pitch change (e.g., {from: 0, to: 75})\n *   - undefined: Keep current pitch\n * @param {Function} options.onStep - Optional callback(currentBearing, progress) called at each step\n */\n// @ts-ignore - Default empty object is fine, properties are destructured with defaults\nconst rotatePanorama360 = async (map, duration, { checkAbort, degreesPerStep = 2, pitch, onStep } = {}) => {\n  // Helper to increment bearing and handle -180/180 wrap\n  const nextBearing = (current, increment) => {\n    let next = current + increment;\n    if (next > 180) {\n      // Wrap from 180 to -180\n      next = -180 + (next - 180);\n    }\n    return next;\n  };\n\n  const totalSteps = 360 / degreesPerStep; // e.g., 180 steps for 2¬∞ increments\n  const msPerStep = duration / totalSteps;\n  let currentBearing = map.getBearing();\n\n  for (let i = 0; i < totalSteps; i++) {\n    // Check abort periodically\n    if (i % 20 === 0 && checkAbort) checkAbort();\n\n    currentBearing = nextBearing(currentBearing, degreesPerStep);\n\n    // Progress is 0.0 to 1.0\n    const progress = i / totalSteps;\n\n    // Calculate pitch for this step if configured\n    let currentPitch;\n    if (pitch !== undefined) {\n      if (typeof pitch === 'number') {\n        // Fixed pitch\n        currentPitch = pitch;\n      } else if (pitch.from !== undefined && pitch.to !== undefined) {\n        // Progressive pitch\n        currentPitch = pitch.from + (pitch.to - pitch.from) * progress;\n      }\n    }\n\n    // Build easeTo options\n    let easToOptions = {\n      bearing: currentBearing,\n      duration: msPerStep,\n      essential: true,\n      easing: t => t\n    };\n\n    // Add pitch if defined\n    if (currentPitch !== undefined) {\n      easToOptions.pitch = currentPitch;\n    }\n\n    // Call custom onStep callback if provided\n    if (onStep) {\n      const stepResult = onStep(currentBearing, progress);\n      // If onStep returns an object, merge it with easeTo options\n      if (stepResult && typeof stepResult === 'object') {\n        easToOptions = { ...easToOptions, ...stepResult };\n      }\n    }\n\n    map.easeTo(easToOptions);\n    await map.once('moveend');\n  }\n\n  if (checkAbort) checkAbort();\n};\n\n// Cache capabilities per map instance to avoid repeated detection\nconst capabilitiesCache = new WeakMap();\n\nexport class AnimationDirector {\n  constructor(map) {\n    this.map = map;\n    this.capabilities = this._detectCapabilities();\n  }\n\n  /**\n     * Detect what features are available in the current map\n     * Results are cached per map instance\n     * @param {boolean} forceDetect - If true, bypass cache and re-detect\n     */\n  _detectCapabilities(forceDetect = false) {\n    // Check cache first (unless forced)\n    if (!forceDetect && capabilitiesCache.has(this.map)) {\n      return capabilitiesCache.get(this.map);\n    }\n\n    const caps = {\n      // Visual features\n      hasTerrain: false,\n      hasHillshade: false,\n      has3DBuildings: false,\n      hasRasterLayers: false,\n      hasVectorLayers: false,\n\n      // Transportation networks\n      hasRoads: false,\n      hasRailways: false,\n      hasWaterways: false,\n      hasWater: false,\n\n      // Places and labels\n      hasPlaces: false,\n      hasLanduse: false,\n\n      // Resources\n      hasGlyphs: false,\n      hasSprites: false,\n\n      // Metadata\n      bounds: null,\n      center: this.map.getCenter(),\n      zoom: this.map.getZoom(),\n      maxZoomData: 14, // Default conservative value\n      /** @type {string | null} */\n      style: null,\n\n      // Vector source info for helper map (by feature type)\n      vectorSources: {\n        roads: { sourceId: null, sourceLayer: null },\n        railways: { sourceId: null, sourceLayer: null },\n        waterways: { sourceId: null, sourceLayer: null }\n      }\n    };\n\n    // Get style and sources\n    const style = this.map.getStyle();\n    const sources = style?.sources || {};\n\n    // Check for terrain support (raster-dem source)\n    Object.values(sources).forEach(source => {\n      if (source.type === 'raster-dem') {\n        caps.hasTerrain = true;\n      }\n\n      // Get max zoom from sources\n      if (source.maxzoom && source.maxzoom > caps.maxZoomData) {\n        caps.maxZoomData = source.maxzoom;\n      }\n    });\n\n    // Check for glyphs (fonts)\n    if (style?.glyphs) {\n      caps.hasGlyphs = true;\n    }\n\n    // Check for sprites\n    if (style?.sprite) {\n      caps.hasSprites = true;\n    }\n\n    // Collect all source-layers used in the style (especially from OpenMapTiles)\n    const sourceLayers = new Set();\n    const layers = style?.layers || [];\n\n    layers.forEach(layer => {\n      const layerId = layer.id.toLowerCase();\n      const sourceLayer = layer['source-layer'];\n\n      // Collect source-layers for OpenMapTiles detection\n      if (sourceLayer) {\n        sourceLayers.add(sourceLayer.toLowerCase());\n      }\n\n      // Visual features detection (layer-based)\n      if (layerId.includes('hillshad') || layer.type === 'hillshade') {\n        caps.hasHillshade = true;\n      }\n      if (layerId.includes('building') && layer.type === 'fill-extrusion') {\n        caps.has3DBuildings = true;\n      }\n      if (layer.type === 'raster') {\n        caps.hasRasterLayers = true;\n      }\n      if (['fill', 'line', 'symbol', 'circle'].includes(layer.type)) {\n        caps.hasVectorLayers = true;\n      }\n    });\n\n    // Detect capabilities from vector tile source-layers\n    // Supports: OpenMapTiles (https://openmaptiles.org/schema/)\n    //           Mapbox Streets v8+ (https://docs.mapbox.com/data/tilesets/reference/mapbox-streets-v8/)\n    console.log('üó∫Ô∏è Found source-layers:', Array.from(sourceLayers));\n\n    // === TRANSPORTATION (Roads & Railways) ===\n    // OpenMapTiles: 'transportation' contains BOTH roads and railways (differentiated by class)\n    // Mapbox Streets: 'road' contains BOTH roads and railways (class: major_rail, minor_rail, service_rail)\n    if (sourceLayers.has('transportation') || sourceLayers.has('road')) {\n      caps.hasRoads = true;\n      caps.hasRailways = true;\n\n      // Find which vector source contains transportation/road layer\n      for (const layer of layers) {\n        const sourceLayer = layer['source-layer'];\n        if (sourceLayer === 'transportation' || sourceLayer === 'road') {\n          const sourceId = layer.source;\n          const source = sources[sourceId];\n          if (source && source.type === 'vector') {\n            // Roads and railways share the same source in these schemas\n            caps.vectorSources.roads.sourceId = sourceId;\n            caps.vectorSources.roads.sourceLayer = sourceLayer;\n            caps.vectorSources.railways.sourceId = sourceId;\n            caps.vectorSources.railways.sourceLayer = sourceLayer;\n            break;\n          }\n        }\n      }\n    }\n\n    // === WATERWAYS ===\n    // Both schemas: 'waterway' (rivers, canals, streams)\n    if (sourceLayers.has('waterway')) {\n      caps.hasWaterways = true;\n\n      // Find which vector source contains waterway layer\n      for (const layer of layers) {\n        const sourceLayer = layer['source-layer'];\n        if (sourceLayer === 'waterway') {\n          const sourceId = layer.source;\n          const source = sources[sourceId];\n          if (source && source.type === 'vector') {\n            caps.vectorSources.waterways.sourceId = sourceId;\n            caps.vectorSources.waterways.sourceLayer = sourceLayer;\n            break;\n          }\n        }\n      }\n    }\n\n    // === WATER BODIES ===\n    // Both schemas: 'water' (lakes, oceans, reservoirs)\n    if (sourceLayers.has('water')) {\n      caps.hasWater = true;\n    }\n\n    // === PLACES ===\n    // OpenMapTiles: 'place' (cities, towns, villages)\n    // Mapbox Streets: 'place_label' (with _label suffix)\n    if (sourceLayers.has('place') || sourceLayers.has('place_label')) {\n      caps.hasPlaces = true;\n    }\n\n    // === LANDUSE ===\n    // OpenMapTiles: 'landuse' or 'landcover'\n    // Mapbox Streets: 'landuse'\n    if (sourceLayers.has('landuse') || sourceLayers.has('landcover')) {\n      caps.hasLanduse = true;\n    }\n\n    // === BUILDINGS ===\n    // Both schemas: 'building'\n    if (sourceLayers.has('building')) {\n      // Already detected via fill-extrusion above\n    }\n\n    // Get bounds\n    try {\n      caps.bounds = this.map.getBounds();\n    } catch (e) {\n      // Map might not have bounds yet\n    }\n\n    // Detect style type\n    const styleUrl = style?.sprite || '';\n    if (styleUrl.includes('satellite') || styleUrl.includes('aerial')) {\n      caps.style = 'satellite';\n    } else if (styleUrl.includes('outdoors') || styleUrl.includes('terrain')) {\n      caps.style = 'outdoors';\n    } else if (styleUrl.includes('dark')) {\n      caps.style = 'dark';\n    } else {\n      caps.style = 'standard';\n    }\n\n    console.log('üîç Detected capabilities:', caps);\n\n    // Store in cache\n    capabilitiesCache.set(this.map, caps);\n\n    return caps;\n  }\n\n  /**\n     * Position helper map ahead of current position based on bearing and search radius\n     * Uses bbox/fitBounds to ensure ALL tiles in the search area are loaded\n     * @param {Object} map2 - The helper map instance\n     * @param {Array} currentPos - Current [lng, lat] position\n     * @param {number} bearing - Current bearing in degrees\n     * @param {number} searchRadius - Search radius in degrees\n     * @returns {Promise} Resolves after map is repositioned and tiles loaded\n     */\n  static async _positionHelperMapAhead(map2, currentPos, bearing, searchRadius) {\n    try {\n      // Calculate position ahead based on bearing and searchRadius\n      const radians = (bearing * Math.PI) / 180;\n      const aheadLng = currentPos[0] + searchRadius * Math.sin(radians);\n      const aheadLat = currentPos[1] + searchRadius * Math.cos(radians);\n\n      // Create bbox that covers both current position and ahead position\n      // Plus extra margin to ensure we have tiles for nearby/lateral roads at intersections\n      const margin = searchRadius * 0.5; // 50% extra margin to catch adjacent roads\n\n      const minLng = Math.min(currentPos[0], aheadLng) - margin;\n      const maxLng = Math.max(currentPos[0], aheadLng) + margin;\n      const minLat = Math.min(currentPos[1], aheadLat) - margin;\n      const maxLat = Math.max(currentPos[1], aheadLat) + margin;\n\n      // Use fitBounds to ensure ALL tiles in this area are loaded\n      // This is more reliable than jumpTo(center) which might not load all tiles\n      map2.fitBounds([[minLng, minLat], [maxLng, maxLat]], {\n        linear: true, // No animation\n        padding: 0, // No padding needed for invisible map\n        duration: 0 // Instant\n      });\n\n      // Wait for tiles to load and index\n      // This is critical - without this delay, queries may return empty\n      await new Promise(resolve => setTimeout(resolve, 200));\n\n      console.log(`[HelperMap] Positioned map2 with bbox: [${minLng.toFixed(6)}, ${minLat.toFixed(6)}] to [${maxLng.toFixed(6)}, ${maxLat.toFixed(6)}]`);\n    } catch (error) {\n      console.error('[HelperMap] Failed to position helper map:', error);\n    }\n  }\n\n  /**\n     * Find interesting points on the map\n     */\n  async _findInterestingPoints() {\n    const points = [];\n    const bounds = this.map.getBounds();\n\n    if (!bounds) return points;\n\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    const center = bounds.getCenter();\n\n    // Add corners and center\n    points.push(\n      center,\n      ne,\n      sw,\n      [ne.lng, sw.lat],\n      [sw.lng, ne.lat]\n    );\n\n    // If we have terrain, try to find high points\n    if (this.capabilities.hasTerrain) {\n      // Sample points to find elevation variations\n      const samples = 5;\n      for (let i = 0; i < samples; i++) {\n        for (let j = 0; j < samples; j++) {\n          const lng = sw.lng + (ne.lng - sw.lng) * (i / samples);\n          const lat = sw.lat + (ne.lat - sw.lat) * (j / samples);\n          points.push([lng, lat]);\n        }\n      }\n    }\n\n    return points;\n  }\n\n  /**\n     * Generate an adaptive animation based on map content\n     */\n  createAdaptiveAnimation(control, options = {}) {\n    const duration = options.duration || 30000;\n\n    // Return { setup, animation } format like other animations\n    return {\n      setup: null, // No setup needed\n      animation: async (map, control) => {\n        const { updateStatus, checkAbort } = control;\n        console.log('üé¨ Creating adaptive animation for', duration, 'ms');\n\n        const animations = [];\n\n        // 1. Opening shot - establish the scene\n        animations.push(this._createOpeningShot());\n\n        // 2. Feature showcase based on capabilities\n        if (this.capabilities.hasTerrain) {\n          animations.push(this._createTerrainShowcase());\n        }\n\n        if (this.capabilities.has3DBuildings) {\n          animations.push(this._createBuildingFlythrough());\n        }\n\n        // 3. Exploration sequence\n        animations.push(this._createExplorationSequence());\n\n        // 4. Cinematic movements\n        animations.push(this._createCinematicSequence());\n\n        // 5. Closing shot\n        animations.push(this._createClosingShot());\n\n        // Execute animations\n        const timePerAnimation = duration / animations.length;\n\n        for (const animation of animations) {\n          await animation(control, timePerAnimation);\n          checkAbort(); // Check between major animation segments\n        }\n\n        updateStatus('‚úÖ Animation complete!');\n      }\n    };\n  }\n\n  /**\n     * Opening shot - zoom out to show the full area\n     */\n  _createOpeningShot() {\n    return async (control, duration) => {\n      const { updateStatus, checkAbort } = control;\n      updateStatus('üåç Opening shot...');\n\n      const currentZoom = this.map.getZoom();\n      const overviewZoom = Math.max(currentZoom - 4, 1);\n\n      // Reset to neutral position\n      this.map.easeTo({\n        zoom: overviewZoom,\n        pitch: 0,\n        bearing: 0,\n        duration: duration * 0.6,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n\n      // Gentle zoom in\n      this.map.easeTo({\n        zoom: currentZoom - 2,\n        duration: duration * 0.4,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n    };\n  }\n\n  /**\n     * Terrain showcase - if terrain is available\n     */\n  _createTerrainShowcase() {\n    return async (control, duration) => {\n      const { updateStatus, checkAbort } = control;\n      updateStatus('üèîÔ∏è Mountain vista...');\n\n      // Enable terrain if not already\n      if (!this.map.getTerrain()) {\n        const sources = this.map.getStyle()?.sources || {};\n        const terrainSource = Object.keys(sources).find(s =>\n          sources[s].type === 'raster-dem'\n        );\n\n        if (terrainSource) {\n          this.map.setTerrain({\n            source: terrainSource,\n            exaggeration: 1.5\n          });\n          await sleep(500);\n          checkAbort();\n        }\n      }\n\n      // Find highest visible area (simplified - just move to corners)\n      const points = await this._findInterestingPoints();\n\n      for (let i = 0; i < Math.min(3, points.length); i++) {\n        this.map.flyTo({\n          center: points[i],\n          zoom: 14,\n          pitch: 75,\n          bearing: i * 120,\n          duration: duration / 3,\n          essential: true\n        });\n        await this.map.once('moveend');\n        checkAbort();\n      }\n    };\n  }\n\n  /**\n     * Building flythrough - for urban areas with 3D buildings\n     */\n  _createBuildingFlythrough() {\n    return async (control, duration) => {\n      const { updateStatus, checkAbort } = control;\n      updateStatus('üè¢ City flythrough...');\n\n      // Tilt for dramatic effect\n      this.map.easeTo({\n        pitch: 60,\n        zoom: this.map.getZoom() + 1,\n        duration: duration * 0.3,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n\n      // Sweep through the city\n      this.map.easeTo({\n        bearing: this.map.getBearing() + 180,\n        duration: duration * 0.7,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n    };\n  }\n\n  /**\n     * Exploration sequence - move through interesting points\n     */\n  _createExplorationSequence() {\n    return async (control, duration) => {\n      const { updateStatus, checkAbort } = control;\n      updateStatus('üîç Exploring area...');\n\n      const bounds = this.map.getBounds();\n      if (!bounds) {\n        await sleep(duration);\n        return;\n      }\n\n      const ne = bounds.getNorthEast();\n      const sw = bounds.getSouthWest();\n      const center = bounds.getCenter();\n\n      // Create a path through the map\n      const path = [\n        center,\n        [ne.lng * 0.7 + sw.lng * 0.3, ne.lat * 0.7 + sw.lat * 0.3],\n        [ne.lng * 0.3 + sw.lng * 0.7, ne.lat * 0.3 + sw.lat * 0.7],\n        center\n      ];\n\n      const stepDuration = duration / path.length;\n\n      for (let i = 0; i < path.length; i++) {\n        this.map.flyTo({\n          center: path[i],\n          zoom: this.map.getZoom() + (i % 2 ? 0.5 : -0.5),\n          bearing: i * 45,\n          pitch: 20 + (i * 10),\n          duration: stepDuration,\n          essential: true\n        });\n        await this.map.once('moveend');\n        checkAbort();\n      }\n    };\n  }\n\n  /**\n     * Cinematic sequence - smooth camera movements\n     */\n  _createCinematicSequence() {\n    return async (control, duration) => {\n      const { updateStatus, checkAbort } = control;\n      updateStatus('üé¨ Cinematic view...');\n\n      // Orbit around center\n      const startBearing = this.map.getBearing();\n\n      this.map.easeTo({\n        bearing: startBearing + 360,\n        duration: duration * 0.6,\n        essential: true,\n        easing: t => t * (2 - t) // Smooth easing\n      });\n      await this.map.once('moveend');\n      checkAbort();\n\n      // Tilt shift effect\n      this.map.easeTo({\n        pitch: 45,\n        zoom: this.map.getZoom() + 1,\n        duration: duration * 0.2,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n\n      this.map.easeTo({\n        pitch: 0,\n        zoom: this.map.getZoom() - 1,\n        duration: duration * 0.2,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n    };\n  }\n\n  /**\n     * Closing shot - return to a nice overview\n     */\n  _createClosingShot() {\n    return async (control, duration) => {\n      const { updateStatus, checkAbort } = control;\n      updateStatus('üé• Closing shot...');\n\n      const initialState = {\n        center: this.capabilities.center,\n        zoom: this.capabilities.zoom,\n        bearing: 0,\n        pitch: 0\n      };\n\n      // Dramatic pullback\n      this.map.flyTo({\n        ...initialState,\n        zoom: initialState.zoom - 2,\n        pitch: 30,\n        bearing: -30,\n        duration: duration * 0.7,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n\n      // Final position\n      this.map.easeTo({\n        ...initialState,\n        duration: duration * 0.3,\n        essential: true\n      });\n      await this.map.once('moveend');\n      checkAbort();\n    };\n  }\n}\n\n/**\n * Extract minimal style for secondary query-only map\n * Includes ALL detected vector sources for roads, railways, waterways\n * @param {Object} map - MapLibre map instance\n * @param {boolean} forceDetect - If true, bypass cache and re-detect capabilities\n * @returns {Object|null} { vectorSources, style } or null if not found\n */\nfunction _extractMinimalStyle(map, forceDetect = false) {\n  try {\n    const style = map.getStyle();\n    if (!style) {\n      console.warn('[HelperMap] No style found');\n      return null;\n    }\n\n    // Use cached capabilities to get ALL vector source info\n    let caps = forceDetect ? null : capabilitiesCache.get(map);\n    if (!caps) {\n      // Detect capabilities if not in cache yet or if forced\n      const director = new AnimationDirector(map);\n      if (forceDetect) {\n        caps = director._detectCapabilities(true);\n      } else {\n        caps = director.capabilities;\n      }\n    }\n\n    const sources = style.sources || {};\n\n    // Collect all unique vector sources\n    const uniqueSources = new Set();\n    Object.values(caps.vectorSources).forEach(info => {\n      if (info.sourceId) uniqueSources.add(info.sourceId);\n    });\n\n    if (uniqueSources.size === 0) {\n      console.warn('[HelperMap] No vector sources found for roads/railways/waterways');\n      console.warn('[HelperMap] Available source-layers:', Array.from(new Set(\n        (style.layers || [])\n          .filter(l => l['source-layer'])\n          .map(l => l['source-layer'])\n      )));\n      return null;\n    }\n\n    // Create minimal style with ALL detected vector sources\n    const minimalSources = {};\n    uniqueSources.forEach(sourceId => {\n      const vectorSource = sources[sourceId];\n      if (vectorSource && vectorSource.type === 'vector') {\n        minimalSources[sourceId] = {\n          type: vectorSource.type,\n          ...(vectorSource.tiles && { tiles: vectorSource.tiles }),\n          ...(vectorSource.url && { url: vectorSource.url }),\n          ...(vectorSource.minzoom !== undefined && { minzoom: vectorSource.minzoom }),\n          ...(vectorSource.maxzoom !== undefined && { maxzoom: vectorSource.maxzoom }),\n          ...(vectorSource.attribution && { attribution: vectorSource.attribution }),\n          ...(vectorSource.bounds && { bounds: vectorSource.bounds })\n        };\n      }\n    });\n\n    console.log(`[HelperMap] Created minimal style with ${Object.keys(minimalSources).length} vector source(s):`, Object.keys(minimalSources));\n    console.log('[HelperMap] Available features:', {\n      roads: caps.vectorSources.roads.sourceLayer || 'none',\n      railways: caps.vectorSources.railways.sourceLayer || 'none',\n      waterways: caps.vectorSources.waterways.sourceLayer || 'none'\n    });\n\n    // Create minimal invisible layers to force MapLibre to load features\n    // Without layers, querySourceFeatures returns nothing even if sources are defined!\n    const minimalLayers = [];\n\n    // Add invisible layer for roads/transportation\n    // NOTE: NO visibility:none! MapLibre only loads tiles for visible layers!\n    if (caps.vectorSources.roads.sourceId && caps.vectorSources.roads.sourceLayer) {\n      minimalLayers.push({\n        id: 'helper-roads',\n        type: 'line',\n        source: caps.vectorSources.roads.sourceId,\n        'source-layer': caps.vectorSources.roads.sourceLayer,\n        paint: {\n          'line-opacity': 0,\n          'line-width': 0\n        }\n      });\n    }\n\n    // Add invisible layer for railways\n    if (caps.vectorSources.railways.sourceId && caps.vectorSources.railways.sourceLayer) {\n      minimalLayers.push({\n        id: 'helper-railways',\n        type: 'line',\n        source: caps.vectorSources.railways.sourceId,\n        'source-layer': caps.vectorSources.railways.sourceLayer,\n        paint: {\n          'line-opacity': 0,\n          'line-width': 0\n        }\n      });\n    }\n\n    // Add invisible layer for waterways\n    if (caps.vectorSources.waterways.sourceId && caps.vectorSources.waterways.sourceLayer) {\n      minimalLayers.push({\n        id: 'helper-waterways',\n        type: 'line',\n        source: caps.vectorSources.waterways.sourceId,\n        'source-layer': caps.vectorSources.waterways.sourceLayer,\n        paint: {\n          'line-opacity': 0,\n          'line-width': 0\n        }\n      });\n    }\n\n    console.log(`[HelperMap] Created ${minimalLayers.length} invisible layer(s) to force feature loading`);\n\n    const minimalStyle = {\n      version: 8,\n      sources: minimalSources,\n      layers: minimalLayers, // Minimal invisible layers to force feature loading\n      glyphs: style.glyphs,\n      sprite: style.sprite,\n      id: style.id || 'helper-map'\n    };\n\n    console.log('[HelperMap] Minimal style.json:', minimalStyle);\n\n    return {\n      vectorSources: caps.vectorSources, // Return all source/layer mappings\n      style: minimalStyle\n    };\n  } catch (error) {\n    console.error('[HelperMap] Failed to extract minimal style:', error);\n    return null;\n  }\n}\n\n/**\n * Find a nearby road when no connected segment is found\n * Searches in 8 cardinal directions (N, NE, E, SE, S, SW, W, NW)\n * @param {Array} fromPoint - [lng, lat] current endpoint\n * @param {number} currentBearing - Current direction of travel\n * @param {Set} usedSegmentIds - Already used road IDs\n * @param {Array} roads2 - Available roads to search from map2\n * @param {Object} options - Search options\n * @param {string|Array} options.prefer - Road class(es) to prefer (e.g., 'motorway', ['motorway', 'trunk', 'primary'])\n * @param {number} options.searchRadius - Search radius in degrees (default: 0.002 ‚âà 200m)\n * @returns {Object|null} Best road found or null\n */\nfunction _findNearbyRoadInCardinalDirections(fromPoint, currentBearing, usedSegmentIds, roads2, options = {}) {\n  const { prefer = null, searchRadius = 0.002 } = options;\n  const preferredClasses = prefer ? (Array.isArray(prefer) ? prefer : [prefer]) : [];\n\n  console.log('[RoadSearch] Searching nearby roads in cardinal directions...' +\n        (preferredClasses.length ? ` (prefer: ${preferredClasses.join(', ')})` : ''));\n\n  // Search in 8 cardinal directions (N, NE, E, SE, S, SW, W, NW)\n  const searchDirections = CARDINAL_DIRECTIONS_8.map(d => d.angle);\n\n  // Convert searchRadius from degrees to km for distance comparison\n  // At equator: 1 degree ‚âà 111 km\n  const searchRadiusKm = searchRadius * 111;\n\n  let bestRoad = null;\n  let bestScore = Infinity;\n\n  for (const direction of searchDirections) {\n    // Calculate search point in this direction\n    const radians = (direction * Math.PI) / 180;\n    const searchLng = fromPoint[0] + searchRadius * Math.sin(radians);\n    const searchLat = fromPoint[1] + searchRadius * Math.cos(radians);\n\n    // Find closest road to this search point\n    for (const road of roads2) {\n      if (!road.geometry || !road.geometry.coordinates) continue;\n      if (usedSegmentIds.has(road.id)) continue;\n\n      const roadStart = road.geometry.coordinates[0];\n      const roadEnd = road.geometry.coordinates[road.geometry.coordinates.length - 1];\n\n      // Calculate distance from ACTUAL position (fromPoint), not from search point\n      // This gives us the real distance we'll jump\n      const distStartFromActual = calculateDistance(fromPoint[0], fromPoint[1], roadStart[0], roadStart[1]);\n      const distEndFromActual = calculateDistance(fromPoint[0], fromPoint[1], roadEnd[0], roadEnd[1]);\n      const actualDist = Math.min(distStartFromActual, distEndFromActual);\n\n      // Also calculate distance from search point for scoring\n      const distStart = calculateDistance(searchLng, searchLat, roadStart[0], roadStart[1]);\n      const distEnd = calculateDistance(searchLng, searchLat, roadEnd[0], roadEnd[1]);\n      const minDist = Math.min(distStart, distEnd);\n\n      if (minDist > searchRadiusKm) continue; // Too far from search point\n\n      // Prefer roads in forward direction\n      const bearingDiff = Math.abs(normalizeBearingDiff(direction - currentBearing));\n\n      // Base score = distance + bearing penalty\n      let score = minDist + (bearingDiff / 180) * 0.001;\n\n      // Bonus if this road class is preferred\n      const roadClass = road.properties?.class || 'unknown';\n      if (preferredClasses.length > 0 && preferredClasses.includes(roadClass)) {\n        score *= 0.5; // 50% bonus for preferred road types\n        console.log(`[RoadSearch]   ‚ú® Found preferred ${roadClass} at ${direction}¬∞ (bonus applied)`);\n      }\n\n      if (score < bestScore) {\n        bestScore = score;\n        const shouldReverse = distEndFromActual < distStartFromActual;\n        bestRoad = {\n          road,\n          coords: shouldReverse ? [...road.geometry.coordinates].reverse() : road.geometry.coordinates,\n          reversed: shouldReverse,\n          distance: actualDist, // Store ACTUAL distance from current position\n          direction,\n          bearingDiff\n        };\n      }\n    }\n  }\n\n  // Safety check: reject roads that are too far away to avoid huge jumps\n  // Maximum 250m jump for road following (allows rural roads while preventing huge jumps)\n  // Using actualDist which is calculated from fromPoint\n  const maxJumpDistanceKm = 0.250; // 250m maximum (allows sparse rural roads)\n  if (bestRoad && bestRoad.distance > maxJumpDistanceKm) {\n    console.log(`[RoadSearch] ‚ö†Ô∏è Found road but too far (${(bestRoad.distance * 1000).toFixed(0)}m > 250m) - rejecting to avoid huge jump`);\n    bestRoad = null;\n  }\n\n  if (bestRoad) {\n    const roadClass = bestRoad.road.properties?.class || 'unknown';\n    const isPreferred = preferredClasses.includes(roadClass);\n    // bestRoad.distance is in km, convert to meters for display\n    console.log(`[RoadSearch] üîç Found ${isPreferred ? '‚ú® preferred ' : ''}${roadClass} at ${bestRoad.direction}¬∞ ` +\n            `(${(bestRoad.distance * 1000).toFixed(0)}m away, bearing Œî${bestRoad.bearingDiff.toFixed(1)}¬∞)`);\n  } else {\n    // searchRadiusKm is in km, convert to meters for display\n    console.log(`[RoadSearch] No roads found within ${(searchRadiusKm * 1000).toFixed(0)}m in any direction`);\n  }\n\n  return bestRoad;\n}\n\n/**\n * Preset animations that work on any map\n */\nexport const PresetAnimations = {\n  /**\n     * Simple 360 orbit\n     */\n  orbit360: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 10000;\n    const waypoints = options.waypoints || null;\n\n    // If waypoints exist, position map to show all of them\n    if (waypoints) {\n      const optimalView = getOptimalViewForWaypoints(map, waypoints);\n      if (optimalView) {\n        updateStatus('üîÑ Positioning to show all waypoints...');\n        map.jumpTo({\n          center: optimalView.center,\n          zoom: optimalView.zoom\n        });\n        await sleep(500); // Brief pause for map to settle\n      }\n    }\n\n    updateStatus('üîÑ 360¬∞ orbit...');\n    const startBearing = map.getBearing();\n\n    map.easeTo({\n      bearing: startBearing + 360,\n      duration,\n      essential: true,\n      easing: t => t // Linear\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Zoom pulse\n     */\n  zoomPulse: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 5000;\n    const waypoints = options.waypoints || null;\n\n    // If waypoints exist, position map to show all of them\n    if (waypoints) {\n      const optimalView = getOptimalViewForWaypoints(map, waypoints);\n      if (optimalView) {\n        updateStatus('üîç Positioning to show all waypoints...');\n        map.jumpTo({\n          center: optimalView.center,\n          zoom: optimalView.zoom\n        });\n        await sleep(500);\n      }\n    }\n\n    updateStatus('üîç Zoom pulse...');\n    const startZoom = map.getZoom();\n\n    map.easeTo({\n      zoom: startZoom + 2,\n      duration: duration / 2,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    map.easeTo({\n      zoom: startZoom,\n      duration: duration / 2,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Figure-8 movement\n     */\n  figure8: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 15000;\n    const waypoints = options.waypoints || null;\n\n    // If waypoints exist, position map to show all of them\n    if (waypoints) {\n      const optimalView = getOptimalViewForWaypoints(map, waypoints);\n      if (optimalView) {\n        updateStatus('‚àû Positioning to show all waypoints...');\n        map.jumpTo({\n          center: optimalView.center,\n          zoom: optimalView.zoom\n        });\n        await sleep(500);\n      }\n    }\n\n    updateStatus('‚àû Figure-8 pattern...');\n    const center = map.getCenter();\n    const bounds = map.getBounds();\n\n    if (!bounds) return;\n\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    const width = ne.lng - sw.lng;\n    const height = ne.lat - sw.lat;\n\n    const points = [\n      [center.lng + width * 0.2, center.lat],\n      [center.lng + width * 0.2, center.lat + height * 0.2],\n      [center.lng, center.lat],\n      [center.lng - width * 0.2, center.lat - height * 0.2],\n      [center.lng - width * 0.2, center.lat],\n      [center.lng, center.lat]\n    ];\n\n    for (const point of points) {\n      map.flyTo({\n        center: point,\n        duration: duration / points.length,\n        essential: true\n      });\n      await map.once('moveend');\n      checkAbort();\n    }\n  },\n\n  /**\n     * Spiral zoom\n     */\n  spiralZoom: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 12000;\n\n    updateStatus('üåÄ Spiral zoom...');\n    const steps = 8;\n    const startZoom = map.getZoom();\n\n    for (let i = 0; i < steps; i++) {\n      map.easeTo({\n        bearing: map.getBearing() + 45,\n        zoom: startZoom + (i / steps) * 2,\n        pitch: (i / steps) * 45,\n        duration: duration / steps,\n        essential: true\n      });\n      await map.once('moveend');\n      checkAbort();\n    }\n\n    // Return to start\n    map.flyTo({\n      zoom: startZoom,\n      bearing: 0,\n      pitch: 0,\n      duration: duration / 4,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Neighborhood exploration - Perfect for real estate use cases\n     * Shows the immediate area, nearby amenities, and context\n     */\n  neighborhood: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 25000;\n\n    updateStatus('üèòÔ∏è Exploring neighborhood...');\n    const center = map.getCenter();\n    const startZoom = map.getZoom();\n    const startBearing = map.getBearing();\n    const startPitch = map.getPitch();\n\n    // 1. Wide context view - show the broader area\n    updateStatus('üó∫Ô∏è Showing area context...');\n    map.flyTo({\n      center,\n      zoom: Math.max(startZoom - 3, 10),\n      bearing: 0,\n      pitch: 0,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 2. Zoom to neighborhood level with rotation\n    updateStatus('üèòÔ∏è Neighborhood overview...');\n    map.flyTo({\n      center,\n      zoom: Math.min(startZoom, 14),\n      bearing: 0,\n      pitch: 35,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 3. 360¬∞ rotation to show all around\n    updateStatus('üîÑ Scanning surroundings...');\n    map.easeTo({\n      bearing: 360,\n      duration: duration * 0.25,\n      essential: true,\n      easing: t => t // Linear rotation\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 4. Closer view of immediate vicinity\n    updateStatus('üîç Examining nearby area...');\n    map.flyTo({\n      zoom: Math.min(startZoom + 1, 16),\n      bearing: 0,\n      pitch: 45,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 5. Smooth 180¬∞ pan to show both sides\n    map.easeTo({\n      bearing: 180,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 6. Return to original view\n    updateStatus('üìç Returning to property...');\n    map.flyTo({\n      center,\n      zoom: startZoom,\n      bearing: startBearing,\n      pitch: startPitch,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Property showcase - Focused presentation of a specific location\n     */\n  propertyShowcase: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 20000;\n\n    updateStatus('üè° Property showcase...');\n    const center = map.getCenter();\n    const startZoom = map.getZoom();\n\n    // 1. Dramatic reveal from above\n    updateStatus('üé¨ Opening shot...');\n    map.flyTo({\n      center,\n      zoom: startZoom - 2,\n      bearing: 0,\n      pitch: 60,\n      duration: duration * 0.2,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 2. Zoom to property level\n    updateStatus('üè† Focusing on property...');\n    map.flyTo({\n      zoom: Math.min(startZoom + 1, 17),\n      bearing: -45,\n      pitch: 55,\n      duration: duration * 0.2,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // 3. Orbit around the property (4 angles)\n    updateStatus('üì∏ Viewing from all angles...');\n    const angles = [0, 90, 180, 270];\n    for (const angle of angles) {\n      map.easeTo({\n        bearing: angle,\n        duration: duration * 0.12,\n        essential: true\n      });\n      await map.once('moveend');\n      checkAbort();\n    }\n\n    // 4. Final wide shot\n    updateStatus('üåÖ Final view...');\n    map.flyTo({\n      zoom: startZoom,\n      bearing: 0,\n      pitch: 30,\n      duration: duration * 0.16,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Panoramic sweep - Smooth cinematic panorama\n     */\n  panorama: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 15000;\n    updateStatus('üì∑ Panoramic view...');\n    const startPitch = map.getPitch();\n\n    // 360¬∞ panorama with bell-curve pitch: tilt up, rotate, tilt back down\n    updateStatus('üé• Sweeping panorama...');\n    // @ts-ignore - degreesPerStep and pitch have defaults\n    await rotatePanorama360(map, duration, {\n      checkAbort,\n      updateStatus,\n      onStep: (currentBearing, progress) => {\n        // Create a smooth up-then-down pitch curve (bell curve)\n        // Peak at 50% progress (50¬∞), then return to startPitch at 100%\n        const pitchCurve = progress < 0.5\n          ? startPitch + (50 - startPitch) * (progress * 2) // 0‚Üí0.5: rise to 50¬∞\n          : 50 - (50 - startPitch) * ((progress - 0.5) * 2); // 0.5‚Üí1.0: back to start\n\n        return { pitch: pitchCurve };\n      }\n    });\n  },\n\n  /**\n     * Explore around - Radial exploration pattern\n     */\n  exploreAround: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 20000;\n    updateStatus('üß≠ Exploring surroundings...');\n    const center = map.getCenter();\n    const bounds = map.getBounds();\n\n    if (!bounds) return;\n\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    const offsetLng = (ne.lng - sw.lng) * 0.25;\n    const offsetLat = (ne.lat - sw.lat) * 0.25;\n\n    // Define cardinal directions\n    const points = [\n      { pos: [center.lng, center.lat + offsetLat], name: 'North' },\n      { pos: [center.lng + offsetLng, center.lat], name: 'East' },\n      { pos: [center.lng, center.lat - offsetLat], name: 'South' },\n      { pos: [center.lng - offsetLng, center.lat], name: 'West' }\n    ];\n\n    const stepDuration = duration / (points.length + 1);\n\n    // Visit each direction\n    for (const point of points) {\n      updateStatus(`üß≠ Checking ${point.name}...`);\n      map.flyTo({\n        center: point.pos,\n        duration: stepDuration * 0.8,\n        essential: true\n      });\n      await map.once('moveend');\n      checkAbort();\n      await sleep(stepDuration * 0.2); // Brief pause\n      checkAbort();\n    }\n\n    // Return to center\n    updateStatus('üéØ Returning to center...');\n    map.flyTo({\n      center,\n      duration: stepDuration,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Aerial Sweep - Seamless looping aerial view\n     * 1. Vertical rise, 2. Tilt to 85¬∞, 3. 360¬∞ panorama, 4. Final 15%: descend + level\n     * Perfect for hero headers (loops seamlessly)\n     */\n  aerialSweep: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 15000;\n    updateStatus('üöÅ Aerial sweep...');\n\n    // Save initial state for perfect loop\n    const initialZoom = map.getZoom();\n    const initialPitch = map.getPitch();\n\n    // Terrain-aware zoom calculation\n    // If 3D terrain is loaded, adjust zoom to avoid mountain collisions\n    let terrainSafeZoom = 3; // Default minimum zoom\n\n    if (map.getTerrain && map.getTerrain()) {\n      // Sample terrain elevation at multiple points around the view\n      // This prevents collisions during 360¬∞ rotations over mountains\n      const center = map.getCenter();\n      const bounds = map.getBounds();\n      const latSpan = bounds.getNorth() - bounds.getSouth();\n      const lngSpan = bounds.getEast() - bounds.getWest();\n\n      // Sample 9 points in a grid (center + 8 around it)\n      const samplePoints = [\n        center, // Center\n        { lng: center.lng, lat: center.lat + latSpan * 0.3 }, // North\n        { lng: center.lng, lat: center.lat - latSpan * 0.3 }, // South\n        { lng: center.lng + lngSpan * 0.3, lat: center.lat }, // East\n        { lng: center.lng - lngSpan * 0.3, lat: center.lat }, // West\n        { lng: center.lng + lngSpan * 0.25, lat: center.lat + latSpan * 0.25 }, // NE\n        { lng: center.lng - lngSpan * 0.25, lat: center.lat + latSpan * 0.25 }, // NW\n        { lng: center.lng + lngSpan * 0.25, lat: center.lat - latSpan * 0.25 }, // SE\n        { lng: center.lng - lngSpan * 0.25, lat: center.lat - latSpan * 0.25 } // SW\n      ];\n\n      // Find maximum elevation among all sample points\n      let maxElevation = 0;\n      for (const point of samplePoints) {\n        const elevation = map.queryTerrainElevation(point);\n        if (elevation !== null && elevation > maxElevation) {\n          maxElevation = elevation;\n        }\n      }\n\n      if (maxElevation > 0) {\n        // Heuristic: Higher elevation needs higher zoom level to stay above terrain\n        // At pitch 75¬∞, we need more clearance\n        // Rough formula: elevation in meters ‚Üí minimum zoom adjustment\n        const elevationKm = maxElevation / 1000;\n        const safetyMargin = 2.0; // Increased safety margin (was 1.5)\n        terrainSafeZoom = Math.max(3, Math.log2(elevationKm + 1) * 2 + safetyMargin);\n        console.log(`üèîÔ∏è Terrain detected: max elevation ${maxElevation.toFixed(0)}m ‚Üí safe zoom ${terrainSafeZoom.toFixed(1)}`);\n      }\n    }\n\n    // Phase 1 (15%): Vertical zoom out (keep current pitch)\n    updateStatus('‚¨ÜÔ∏è Rising...');\n    const zoomOutLevel = Math.max(initialZoom - 4, terrainSafeZoom);\n    map.easeTo({\n      zoom: zoomOutLevel,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // Phase 2 (10%): Tilt to 75¬∞ pitch\n    updateStatus('üìê Tilting view...');\n    map.easeTo({\n      pitch: 75,\n      duration: duration * 0.10,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // Phase 3 (75%): 360¬∞ panoramic sweep\n    // First 85% at fixed pitch 75¬∞, final 15% descends back to initial state\n    updateStatus('üåç 360¬∞ panorama...');\n    // @ts-ignore - degreesPerStep has default\n    await rotatePanorama360(map, duration * 0.75, {\n      checkAbort,\n      updateStatus,\n      pitch: 75, // Fixed pitch during first 85% of rotation\n      onStep: (currentBearing, progress) => {\n        // After 85% of panorama, start descending and leveling\n        if (progress >= 0.85) {\n          // Map 0.85-1.0 progress to 0.0-1.0 descent progress\n          const descentProgress = (progress - 0.85) / 0.15;\n\n          // Interpolate zoom back to initial\n          const currentZoom = zoomOutLevel + (initialZoom - zoomOutLevel) * descentProgress;\n\n          // Interpolate pitch back to initial\n          const currentPitch = 75 + (initialPitch - 75) * descentProgress;\n\n          // Update status when descent starts\n          if (descentProgress > 0.1) {\n            updateStatus('üåÄ Descending spiral...');\n          }\n\n          // Override pitch from default and add zoom\n          return {\n            zoom: currentZoom,\n            pitch: currentPitch\n          };\n        }\n        // First 85%: pitch is handled by the pitch parameter above\n      }\n    });\n  },\n\n  /**\n     * Drone Shot - Realistic drone flight simulation\n     * Spiraling ascent, 360¬∞ survey, spiraling descent\n     */\n  droneShot: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 20000;\n    updateStatus('üõ∏ Drone takeoff...');\n\n    const initialZoom = map.getZoom();\n    const initialPitch = map.getPitch();\n    const initialBearing = map.getBearing();\n\n    // Phase 1 (30%): Spiral ascent - rise while rotating\n    updateStatus('üìà Ascending spiral...');\n    const ascentSteps = 90; // Quarter rotation during ascent\n    const ascentDuration = duration * 0.30;\n    const msPerAscentStep = ascentDuration / ascentSteps;\n    const zoomOutLevel = Math.max(initialZoom - 5, 2);\n\n    for (let i = 0; i < ascentSteps; i++) {\n      if (i % 15 === 0) checkAbort();\n\n      const progress = i / ascentSteps;\n      const currentZoom = initialZoom - (initialZoom - zoomOutLevel) * progress;\n      const currentPitch = initialPitch + (65 - initialPitch) * progress;\n      const bearingIncrement = 90 * progress;\n\n      map.easeTo({\n        zoom: currentZoom,\n        pitch: currentPitch,\n        bearing: initialBearing + bearingIncrement,\n        duration: msPerAscentStep,\n        essential: true,\n        easing: t => t\n      });\n\n      await map.once('moveend');\n    }\n    checkAbort();\n\n    // Phase 2 (40%): High-altitude 360¬∞ survey\n    updateStatus('üåç 360¬∞ survey...');\n    // @ts-ignore - degreesPerStep and onStep have defaults\n    await rotatePanorama360(map, duration * 0.40, {\n      checkAbort,\n      updateStatus,\n      pitch: 65\n    });\n\n    // Phase 3 (30%): Spiral descent - descend while rotating back\n    updateStatus('üìâ Landing approach...');\n    const descentSteps = 90;\n    const descentDuration = duration * 0.30;\n    const msPerDescentStep = descentDuration / descentSteps;\n    const currentBearing = map.getBearing();\n\n    for (let i = 0; i < descentSteps; i++) {\n      if (i % 15 === 0) checkAbort();\n\n      const progress = i / descentSteps;\n      const currentZoom = zoomOutLevel + (initialZoom - zoomOutLevel) * progress;\n      const currentPitch = 65 - (65 - initialPitch) * progress;\n      const bearingProgress = currentBearing - 90 * progress;\n\n      map.easeTo({\n        zoom: currentZoom,\n        pitch: currentPitch,\n        bearing: bearingProgress,\n        duration: msPerDescentStep,\n        essential: true,\n        easing: t => t\n      });\n\n      await map.once('moveend');\n    }\n    checkAbort();\n  },\n\n  /**\n     * Orbit Zoom - Rotate while progressively zooming in\n     * Creates a vortex/spiral effect focusing on center\n     */\n  orbitZoom: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 15000;\n    updateStatus('üåÄ Orbit zoom...');\n\n    const initialZoom = map.getZoom();\n    const targetZoom = Math.min(initialZoom + 4, 18);\n\n    // @ts-ignore - degreesPerStep has default\n    await rotatePanorama360(map, duration, {\n      checkAbort,\n      updateStatus,\n      pitch: 45, // Moderate tilt for dramatic effect\n      onStep: (bearing, progress) => {\n        // Zoom in progressively during rotation\n        const currentZoom = initialZoom + (targetZoom - initialZoom) * progress;\n        return { zoom: currentZoom };\n      }\n    });\n  },\n\n  /**\n     * Wave Motion - Rotation with oscillating pitch like ocean waves\n     * Creates hypnotic, fluid movement\n     */\n  waveMotion: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 18000;\n    updateStatus('üåä Wave motion...');\n\n    const basePitch = map.getPitch();\n    const waveFrequency = 3; // Number of wave cycles during rotation\n\n    // @ts-ignore - degreesPerStep and pitch have defaults\n    await rotatePanorama360(map, duration, {\n      checkAbort,\n      updateStatus,\n      onStep: (bearing, progress) => {\n        // Sine wave: oscillates between basePitch and basePitch+60\n        const waveProgress = progress * waveFrequency * Math.PI * 2;\n        const pitchWave = basePitch + 30 + Math.sin(waveProgress) * 30;\n        return { pitch: pitchWave };\n      }\n    });\n  },\n\n  /**\n     * Pendulum - Swinging back and forth with variable pitch\n     * Like a pendulum slowing at the extremes\n     */\n  pendulum: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 15000;\n    updateStatus('‚è±Ô∏è Pendulum motion...');\n\n    const initialBearing = map.getBearing();\n    const initialPitch = map.getPitch();\n    const swingAngle = 120; // Total swing arc (¬±60¬∞)\n    const swings = 3; // Number of back-and-forth cycles\n\n    for (let swing = 0; swing < swings; swing++) {\n      checkAbort();\n\n      // Swing right\n      updateStatus(`‚è±Ô∏è Swing ${swing + 1}/${swings}...`);\n      map.easeTo({\n        bearing: initialBearing + swingAngle / 2,\n        pitch: 55, // Higher pitch at extremes\n        duration: duration / (swings * 2),\n        essential: true,\n        easing: t => 1 - Math.cos(t * Math.PI / 2) // Ease out (slower at end)\n      });\n      await map.once('moveend');\n      checkAbort();\n\n      // Brief pause at extreme\n      await sleep(200);\n\n      // Swing left\n      map.easeTo({\n        bearing: initialBearing - swingAngle / 2,\n        pitch: 55,\n        duration: duration / (swings * 2),\n        essential: true,\n        easing: t => 1 - Math.cos(t * Math.PI / 2)\n      });\n      await map.once('moveend');\n      checkAbort();\n\n      // Brief pause at extreme\n      await sleep(200);\n    }\n\n    // Return to center\n    updateStatus('‚è±Ô∏è Settling...');\n    map.easeTo({\n      bearing: initialBearing,\n      pitch: initialPitch,\n      duration: duration * 0.15,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Spotlight Scan - Rotation with rhythmic zoom pulse\n     * Like a radar or searchlight scanning the area\n     */\n  spotlightScan: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 15000;\n    updateStatus('üî¶ Spotlight scan...');\n\n    const initialZoom = map.getZoom();\n    const pulseFrequency = 4; // Number of zoom pulses during rotation\n    const pulseIntensity = 1.5; // Zoom variation amplitude\n\n    // @ts-ignore - degreesPerStep has default\n    await rotatePanorama360(map, duration, {\n      checkAbort,\n      updateStatus,\n      pitch: 50,\n      onStep: (bearing, progress) => {\n        // Pulse zoom in/out rhythmically\n        const pulseProgress = progress * pulseFrequency * Math.PI * 2;\n        const zoomPulse = initialZoom + Math.sin(pulseProgress) * pulseIntensity;\n        return { zoom: zoomPulse };\n      }\n    });\n  },\n\n  /**\n     * Butterfly (Figure-8 3D) - Enhanced figure-8 with pitch variation\n     * Creates a smooth, flowing 3D path\n     */\n  butterfly: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 20000;\n    updateStatus('ü¶ã Butterfly pattern...');\n\n    const center = map.getCenter();\n    const bounds = map.getBounds();\n\n    if (!bounds) return;\n\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    const width = ne.lng - sw.lng;\n    const height = ne.lat - sw.lat;\n\n    // Define figure-8 path with 16 points for smooth curve\n    const points = [];\n    for (let i = 0; i < 16; i++) {\n      const t = (i / 16) * Math.PI * 2;\n      // Lissajous curve (figure-8): x = sin(t), y = sin(2t)/2\n      const x = Math.sin(t) * width * 0.25;\n      const y = Math.sin(2 * t) / 2 * height * 0.25;\n\n      points.push({\n        pos: [center.lng + x, center.lat + y],\n        // Pitch varies with vertical position (higher y = higher pitch)\n        pitch: 20 + Math.abs(y / (height * 0.25)) * 40,\n        // Bearing follows the curve direction\n        bearing: (t * 180 / Math.PI) % 360\n      });\n    }\n\n    const stepDuration = duration / points.length;\n\n    for (const point of points) {\n      map.flyTo({\n        center: point.pos,\n        pitch: point.pitch,\n        bearing: point.bearing,\n        duration: stepDuration * 0.9,\n        essential: true,\n        easing: t => t // Linear for smooth continuous motion\n      });\n      await map.once('moveend');\n      checkAbort();\n    }\n\n    // Return to center\n    updateStatus('ü¶ã Returning...');\n    map.flyTo({\n      center,\n      pitch: map.getPitch(),\n      bearing: 0,\n      duration: stepDuration * 2,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Waypoint Tour - Visit each waypoint sequentially\n     * Perfect for guided tours and storytelling\n     */\n  waypointTour: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 30000;\n    const waypoints = options.waypoints || null;\n\n    // Extract waypoint array from GeoJSON if needed\n    let waypointArray = [];\n    if (waypoints) {\n      if (waypoints.type === 'FeatureCollection' && waypoints.features) {\n        waypointArray = waypoints.features.map(feature => ({\n          center: feature.geometry.coordinates,\n          zoom: feature.properties.zoom,\n          bearing: feature.properties.bearing,\n          pitch: feature.properties.pitch,\n          duration: feature.properties.duration,\n          name: feature.properties.name\n        }));\n      } else if (Array.isArray(waypoints)) {\n        waypointArray = waypoints;\n      }\n    }\n\n    if (waypointArray.length === 0) {\n      updateStatus('‚ö†Ô∏è No waypoints defined for tour');\n      await sleep(2000);\n      return;\n    }\n\n    updateStatus(`üéØ Starting tour of ${waypointArray.length} waypoints...`);\n\n    // Create tour plan with timing\n    const tour = createWaypointTour(waypointArray, duration);\n\n    // Visit each waypoint\n    for (let i = 0; i < tour.length; i++) {\n      const { waypoint, transitionDuration } = tour[i];\n\n      await flyToWaypoint(map, waypoint, transitionDuration, {\n        checkAbort,\n        updateStatus: (msg) => updateStatus(`üìç ${i + 1}/${tour.length}: ${msg}`)\n      });\n    }\n\n    updateStatus('‚úÖ Tour complete!');\n  },\n\n  /**\n     * Terrain Following - Low-altitude flight following terrain contours\n     * Maintains constant height above ground while rotating 360¬∞\n     * Perfect for mountainous areas with 3D terrain\n     */\n  terrainFollowing: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 20000;\n    updateStatus('üöÅ Terrain following flight...');\n\n    // Check if terrain is available\n    if (!map.getTerrain || !map.getTerrain()) {\n      updateStatus('‚ö†Ô∏è No 3D terrain - using standard rotation');\n      // Fallback to simple rotation\n      await PresetAnimations.orbit360(map, { updateStatus, checkAbort }, options);\n      return;\n    }\n\n    const initialBearing = map.getBearing();\n    const initialPitch = map.getPitch();\n    const center = map.getCenter();\n\n    // Set cinematic pitch for terrain following\n    const targetPitch = 60;\n    updateStatus('üìê Setting terrain view angle...');\n    map.easeTo({\n      pitch: targetPitch,\n      duration: 1000,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n\n    // Configuration\n    const steps = 120; // 3¬∞ per step for smooth motion\n    const degreesPerStep = 360 / steps;\n    const msPerStep = (duration * 0.95) / steps; // 95% for rotation, 5% for return\n\n    // Smoothing buffer for zoom values\n    const zoomBuffer = [];\n    const bufferSize = 5;\n\n    updateStatus('üèîÔ∏è Following terrain contours...');\n\n    // Main rotation loop with terrain following\n    for (let step = 0; step < steps; step++) {\n      if (step % 20 === 0) checkAbort();\n\n      const progress = step / steps;\n      const currentBearing = initialBearing + (degreesPerStep * step);\n\n      // Sample terrain elevation at current position and ahead\n\n      // Sample terrain directly AT the center point (where camera is positioned)\n      // Not ahead - the center IS the camera position\n      const centerElevation = map.queryTerrainElevation(center);\n\n      // Calculate target zoom based on terrain elevation AT camera position\n      let targetZoom = map.getZoom();\n      if (centerElevation !== null && centerElevation >= 0) {\n        // LOW-ALTITUDE FLIGHT: We want to stay VERY close to the ground\n        // Zoom 14 = ~1km altitude, Zoom 15 = ~500m, Zoom 16 = ~250m, Zoom 17 = ~125m\n        // Formula: Higher zoom = closer to ground\n        // We add terrain elevation to maintain constant height above ground\n\n        const elevationKm = centerElevation / 1000;\n\n        // Base zoom for very low flight, then adjust down based on terrain elevation\n        // Higher terrain = lower zoom (zoom out) to maintain clearance\n        const baseZoom = 17; // Very close to ground\n        const elevationAdjustment = elevationKm * 1.5; // Zoom out ~1.5 levels per km of elevation\n\n        targetZoom = Math.max(10, baseZoom - elevationAdjustment);\n      }\n\n      // Add to smoothing buffer\n      zoomBuffer.push(targetZoom);\n      if (zoomBuffer.length > bufferSize) {\n        zoomBuffer.shift();\n      }\n\n      // Use smoothed zoom (average of buffer)\n      const smoothedZoom = zoomBuffer.reduce((a, b) => a + b, 0) / zoomBuffer.length;\n\n      // Update camera\n      map.easeTo({\n        bearing: currentBearing,\n        zoom: smoothedZoom,\n        pitch: targetPitch,\n        duration: msPerStep,\n        essential: true,\n        easing: t => t // Linear for smooth continuous motion\n      });\n\n      await map.once('moveend');\n\n      // Update status every 25%\n      if (step % 30 === 0) {\n        const percent = Math.round(progress * 100);\n        updateStatus(`üèîÔ∏è Terrain following: ${percent}%`);\n      }\n    }\n\n    // Return to initial state smoothly\n    updateStatus('üéØ Returning to start...');\n    map.easeTo({\n      bearing: initialBearing,\n      pitch: initialPitch,\n      duration: duration * 0.05,\n      essential: true\n    });\n    await map.once('moveend');\n    checkAbort();\n  },\n\n  /**\n     * Setup function for road following - returns { setup, animation }\n     * This allows setup (positioning) to run before recording starts\n     */\n  _followPathWithVehicleSetup: (map, control, options = {}, vehicleProfile) => {\n    // Default transport classes (roads) if not specified\n    const transportClasses = vehicleProfile.transportClasses || [\n      'motorway', 'trunk', 'primary', 'secondary', 'tertiary',\n      'minor', 'service', 'track', 'path'\n    ];\n\n    // Variables shared between setup and animation phases\n    let map2 = null;\n    let div2 = null;\n    let sourceId2 = 'openmaptiles'; // Default fallback\n    let sourceLayer2 = 'transportation'; // Default fallback\n    const debugFeatures = []; // Track followed segments for visualization\n\n    return {\n      setup: async (map, control, { updateStatus, checkAbort }) => {\n        // This is the setup phase - runs BEFORE recording starts\n        // 1. Create helper map for queries (invisible, positioned ahead)\n        // 2. Find nearest path (road/rail/etc) at current position\n        // 3. Position camera at start\n\n        // Try to create helper map for better road queries\n        console.log('[HelperMap] Creating invisible query map...');\n        try {\n          // Extract minimal style from main map\n          const styleInfo = _extractMinimalStyle(map);\n\n          if (styleInfo && styleInfo.vectorSources.roads.sourceId) {\n            // Use roads source for vehicle navigation\n            sourceId2 = styleInfo.vectorSources.roads.sourceId;\n            sourceLayer2 = styleInfo.vectorSources.roads.sourceLayer;\n\n            // Remove any existing helper div\n            const existingDiv = document.getElementById('maplibre-query-helper');\n            if (existingDiv && existingDiv.parentNode) {\n              existingDiv.parentNode.removeChild(existingDiv);\n            }\n\n            // Create invisible div with SAME dimensions as main map\n            const mainContainer = map.getContainer();\n            const width = mainContainer.offsetWidth;\n            const height = mainContainer.offsetHeight;\n\n            div2 = document.createElement('div');\n            div2.id = 'maplibre-query-helper';\n            div2.style.cssText = `\n                            position: absolute;\n                            top: -9999px;\n                            left: -9999px;\n                            width: ${width}px;\n                            height: ${height}px;\n                            visibility: hidden;\n                            pointer-events: none;\n                        `;\n            document.body.appendChild(div2);\n\n            console.log('styleInfo', styleInfo);\n\n            // Create helper map with minimal style\n            map2 = new maplibregl.Map({\n              container: div2,\n              style: styleInfo.style,\n              center: map.getCenter(),\n              zoom: 15, // Optimal zoom for vector tile data (14-18 range)\n              bearing: map.getBearing(),\n              pitch: 0,\n              preserveDrawingBuffer: false,\n              interactive: false\n            });\n\n            // Wait for helper map to load\n            await new Promise(resolve => map2.once('load', resolve));\n            console.log('[HelperMap] Helper map ready for queries');\n          } else {\n            console.warn('[HelperMap] Could not extract style, will use main map');\n          }\n        } catch (error) {\n          console.error('[HelperMap] Failed to create helper map:', error);\n          // Cleanup on error\n          if (map2) {\n            try { map2.remove(); } catch (e) {}\n            map2 = null;\n          }\n          if (div2 && div2.parentNode) {\n            div2.parentNode.removeChild(div2);\n            div2 = null;\n          }\n        }\n\n        const pathType = vehicleProfile.transportClasses ? 'path' : 'road';\n        updateStatus(`üõ£Ô∏è Finding nearest ${pathType}...`);\n\n        // Check if helper map is available\n        if (!map2) {\n          console.error('[Setup] Helper map not available - cannot query roads');\n          return;\n        }\n\n        // Check if source exists\n        const source = map.getSource(sourceId2);\n        if (!source) {\n          console.log(`[Setup] No vector source '${sourceId2}' found - skipping path positioning`);\n          return;\n        }\n\n        const initialBearing = map.getBearing();\n        const center = map.getCenter();\n\n        // Use map2 for all road queries\n        // Query roads around current position at current zoom\n        const availableRoads2 = map2.querySourceFeatures(sourceId2, {\n          sourceLayer: sourceLayer2,\n          filter: [\n            'all',\n            ['==', ['geometry-type'], 'LineString'],\n            ['in', ['get', 'class'], ['literal', transportClasses]]\n          ]\n        });\n\n        console.log(`[Setup] Found ${availableRoads2 ? availableRoads2.length : 0} road segments nearby`);\n\n        if (!availableRoads2 || availableRoads2.length === 0) {\n          console.log('[Setup] No roads found');\n          return;\n        }\n\n        // Find closest road using directional ray intersection\n        // Create 8 virtual rays in cardinal directions from center\n        updateStatus('üîç Detecting road by intersection...');\n\n        const rayLength = 0.002; // ~200m at equator\n\n        let closestIntersection = null;\n        let minIntersectionDistance = Infinity;\n\n        // Test each ray direction\n        for (const dir of CARDINAL_DIRECTIONS_8) {\n          const angleRad = (dir.angle * Math.PI) / 180;\n          const rayEnd = [\n            center.lng + rayLength * Math.sin(angleRad),\n            center.lat + rayLength * Math.cos(angleRad)\n          ];\n          const rayStart = [center.lng, center.lat];\n\n          // Check intersection with all road segments\n          for (const road of availableRoads2) {\n            if (!road.geometry || !road.geometry.coordinates) continue;\n            const coords = road.geometry.coordinates;\n\n            for (let i = 1; i < coords.length; i++) {\n              const roadSegStart = coords[i - 1];\n              const roadSegEnd = coords[i];\n\n              const dist = segmentIntersection(rayStart, rayEnd, roadSegStart, roadSegEnd);\n              if (dist !== null && dist < minIntersectionDistance) {\n                minIntersectionDistance = dist;\n                closestIntersection = {\n                  road,\n                  direction: dir.name,\n                  distance: dist,\n                  roadClass: road.properties?.class || 'unknown'\n                };\n              }\n            }\n          }\n        }\n\n        if (!closestIntersection) {\n          console.log('[Setup] No road intersection found with rays - falling back to closest point');\n          // Fallback: simple closest point search\n          let closestRoad = null;\n          let minDistance = Infinity;\n          for (const road of availableRoads2) {\n            if (!road.geometry || !road.geometry.coordinates) continue;\n            for (const coord of road.geometry.coordinates) {\n              const [lng, lat] = coord;\n              const dx = lng - center.lng;\n              const dy = lat - center.lat;\n              const distance = Math.sqrt(dx * dx + dy * dy);\n              if (distance < minDistance) {\n                minDistance = distance;\n                closestRoad = road;\n              }\n            }\n          }\n          if (!closestRoad) {\n            console.log('[Setup] No valid road found');\n            return;\n          }\n          closestIntersection = {\n            road: closestRoad,\n            direction: 'fallback',\n            distance: minDistance,\n            roadClass: closestRoad.properties?.class || 'unknown'\n          };\n        }\n\n        const closestRoad = closestIntersection.road;\n        const detectedClass = closestIntersection.roadClass;\n\n        console.log(`[Setup] Found road by intersection: ${detectedClass} at ${(closestIntersection.distance * 111000).toFixed(1)}m (direction: ${closestIntersection.direction})`);\n\n        // Keep ALL road classes for fluid exploration in dense areas\n        // This allows transitions between minor ‚Üí primary ‚Üí tertiary etc.\n        console.log(`[Setup] Keeping all ${availableRoads2.length} road segments (all classes) for fluid exploration`);\n\n        let roadCoords = closestRoad.geometry.coordinates;\n\n        // Determine road direction based on user's view\n        if (roadCoords.length >= 2) {\n          const [firstLng, firstLat] = roadCoords[0];\n          const [lastLng, lastLat] = roadCoords[roadCoords.length - 1];\n          const roadBearing = calculateBearing(firstLng, firstLat, lastLng, lastLat);\n          const bearingDiff = normalizeBearingDiff(roadBearing - initialBearing);\n          if (Math.abs(bearingDiff) > 90) {\n            roadCoords = [...roadCoords].reverse();\n          }\n        }\n\n        // No longer need to simulate path - segments will be loaded dynamically during animation\n\n        // Position camera at road start\n        updateStatus(`${vehicleProfile.icon} Positioning at road start...`);\n\n        const targetPitch = vehicleProfile.pitch;\n        map.easeTo({ pitch: targetPitch, duration: 1000, essential: true });\n        await map.once('moveend');\n        checkAbort();\n\n        const [firstLng, firstLat] = roadCoords[0];\n        const firstPoint = { lng: firstLng, lat: firstLat };\n\n        let initialPositionBearing = initialBearing;\n        if (roadCoords.length >= 2) {\n          const [secondLng, secondLat] = roadCoords[1];\n          initialPositionBearing = calculateBearing(firstLng, firstLat, secondLng, secondLat);\n        }\n\n        const vehicleAltitude = vehicleProfile.altitude || 10;\n        const cameraZoom = vehicleProfile.zoom || Math.max(10, Math.min(22, 22 - Math.log2(vehicleAltitude)));\n\n        map.easeTo({\n          center: firstPoint,\n          bearing: initialPositionBearing,\n          zoom: cameraZoom,\n          pitch: targetPitch,\n          duration: 2000,\n          essential: true,\n          easing: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n          noMoveStart: true,\n          delayEndEvents: 0\n        });\n        await map.once('moveend');\n        checkAbort();\n\n        // Wait for map to be completely idle (all rendering finished)\n        await map.once('idle');\n        checkAbort();\n\n        console.log('[Setup] Initial position set, ready to record');\n      },\n      animation: async (map, control) => {\n        // This is the actual animation - runs AFTER recording starts\n        // Segments will be loaded dynamically during animation\n        // Pass helper map and source info via options\n        const animOptions = {\n          ...options,\n          map2,\n          div2,\n          sourceId2,\n          sourceLayer2,\n          debugFeatures\n        };\n        await PresetAnimations._followPathWithVehicle(map, control, animOptions, vehicleProfile);\n      },\n      supportsExploration: vehicleProfile.supportsExploration\n    };\n  },\n\n  /**\n     * Generic road following with vehicle profile\n     * Used by all vehicle-specific animations (car, plane, helicopter, drone, bird)\n     * Segments are loaded dynamically during animation at current zoom level\n     */\n  _followPathWithVehicle: async (map, { updateStatus, checkAbort }, options = {}, vehicleProfile) => {\n    const duration = options.duration || 20000;\n    updateStatus('üõ£Ô∏è Finding nearest road...');\n\n    // Debug: Check state of options.map2\n    console.log('[HelperMap] Debug - options.map2:', options.map2);\n    console.log('[HelperMap] Debug - typeof options.map2:', typeof options.map2);\n\n    // Create helper map if not already created (for Explore mode)\n    if (!options.map2) {\n      console.log('[HelperMap] Creating invisible query map...');\n      try {\n        const styleInfo = _extractMinimalStyle(map);\n\n        if (!styleInfo) {\n          console.error('[HelperMap] Failed to extract style info from main map');\n        } else if (!styleInfo.vectorSources.roads.sourceId) {\n          console.error('[HelperMap] No roads source found in style');\n          console.error('[HelperMap] Available sources:', styleInfo.vectorSources);\n        }\n\n        if (styleInfo && styleInfo.vectorSources.roads.sourceId) {\n          options.sourceId2 = styleInfo.vectorSources.roads.sourceId;\n          options.sourceLayer2 = styleInfo.vectorSources.roads.sourceLayer;\n\n          // Remove any existing helper div\n          const existingDiv = document.getElementById('maplibre-query-helper');\n          if (existingDiv && existingDiv.parentNode) {\n            existingDiv.parentNode.removeChild(existingDiv);\n          }\n\n          // Create invisible div\n          const mainContainer = map.getContainer();\n          const width = mainContainer.offsetWidth;\n          const height = mainContainer.offsetHeight;\n\n          options.div2 = document.createElement('div');\n          options.div2.id = 'maplibre-query-helper';\n          options.div2.style.cssText = `\n                        position: absolute;\n                        top: -9999px;\n                        left: -9999px;\n                        width: ${width}px;\n                        height: ${height}px;\n                        visibility: hidden;\n                        pointer-events: none;\n                    `;\n          document.body.appendChild(options.div2);\n\n          // Create helper map\n          options.map2 = new maplibregl.Map({\n            container: options.div2,\n            style: styleInfo.style,\n            center: map.getCenter(),\n            zoom: 18,\n            bearing: map.getBearing(),\n            pitch: 0,\n            interactive: false\n          });\n\n          await new Promise(resolve => options.map2.once('load', resolve));\n          console.log('[HelperMap] Helper map ready for queries');\n\n          // Create GeoJSON visualization layer\n          console.log('[Debug] Creating visualization layer for followed segments...');\n          try {\n            const debugSourceId = 'drone-followed-segments';\n            const debugLayerId = 'drone-followed-segments-layer';\n\n            // Remove existing source/layer if any\n            if (map.getLayer(debugLayerId)) {\n              map.removeLayer(debugLayerId);\n            }\n            if (map.getSource(debugSourceId)) {\n              map.removeSource(debugSourceId);\n            }\n\n            // Add empty GeoJSON source\n            map.addSource(debugSourceId, {\n              type: 'geojson',\n              data: {\n                type: 'FeatureCollection',\n                features: []\n              }\n            });\n\n            // Add line layer (magenta, 4px wide)\n            map.addLayer({\n              id: debugLayerId,\n              type: 'line',\n              source: debugSourceId,\n              layout: {\n                'line-join': 'round',\n                'line-cap': 'round'\n              },\n              paint: {\n                'line-color': '#FF00FF', // Magenta\n                'line-width': 4,\n                'line-opacity': 0.8\n              }\n            });\n\n            console.log('[Debug] Visualization layer created successfully');\n          } catch (layerError) {\n            console.warn('[Debug] Could not create visualization layer:', layerError);\n          }\n        }\n      } catch (error) {\n        console.error('[HelperMap] Failed to create helper map:', error);\n      }\n    }\n\n    // Initialize debug features array if not exists\n    if (!options.debugFeatures) {\n      options.debugFeatures = [];\n    }\n\n    // Extract map2 and source info from options\n    const map2 = options.map2;\n    const sourceId2 = options.sourceId2 || 'openmaptiles';\n    const sourceLayer2 = options.sourceLayer2 || 'transportation';\n\n    // Check if map2 exists\n    if (!map2) {\n      console.error('[Animation] map2 is not available - cannot query roads');\n      updateStatus('‚ö†Ô∏è Helper map not available - using terrain following');\n      await PresetAnimations.terrainFollowing(map, { updateStatus, checkAbort }, options);\n      return;\n    }\n\n    // Check if source exists\n    const source = map.getSource(sourceId2);\n    if (!source) {\n      updateStatus('‚ö†Ô∏è No vector source - using terrain following');\n      // Cleanup helper map and debug layer before fallback\n      cleanupMap2AndDebugLayer(options, map);\n      await PresetAnimations.terrainFollowing(map, { updateStatus, checkAbort }, options);\n      return;\n    }\n\n    const initialBearing = map.getBearing();\n    const center = map.getCenter();\n\n    // Query roads around current position to find initial segment\n    const roads2 = map2.querySourceFeatures(sourceId2, {\n      sourceLayer: sourceLayer2,\n      filter: ROAD_QUERY_FILTER\n    });\n\n    if (!roads2 || roads2.length === 0) {\n      updateStatus('‚ö†Ô∏è No roads found - using terrain following');\n      // Cleanup helper map and debug layer before fallback\n      cleanupMap2AndDebugLayer(options, map);\n      await PresetAnimations.terrainFollowing(map, { updateStatus, checkAbort }, options);\n      return;\n    }\n\n    // Find closest road to center\n    let closestRoad = null;\n    let minDistance = Infinity;\n\n    for (const road of roads2) {\n      if (!road.geometry || !road.geometry.coordinates) continue;\n\n      // Check distance to first point of each road segment\n      for (const coord of road.geometry.coordinates) {\n        const [lng, lat] = coord;\n        const dx = lng - center.lng;\n        const dy = lat - center.lat;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance < minDistance) {\n          minDistance = distance;\n          closestRoad = road;\n        }\n      }\n    }\n\n    if (!closestRoad) {\n      updateStatus('‚ö†Ô∏è No valid road found - using terrain following');\n      // Cleanup helper map and debug layer before fallback\n      cleanupMap2AndDebugLayer(options, map);\n      await PresetAnimations.terrainFollowing(map, { updateStatus, checkAbort }, options);\n      return;\n    }\n\n    let roadCoords = closestRoad.geometry.coordinates;\n    const roadClass = closestRoad.properties?.class || 'road';\n\n    // Determine road direction based on user's initial map orientation\n    // If the road naturally goes in the opposite direction to where the user is looking,\n    // reverse it so the animation follows the user's intended direction\n    if (roadCoords.length >= 2) {\n      const [firstLng, firstLat] = roadCoords[0];\n      const [lastLng, lastLat] = roadCoords[roadCoords.length - 1];\n      const roadBearing = calculateBearing(firstLng, firstLat, lastLng, lastLat);\n\n      // Calculate the angular difference between road direction and user's view\n      // Normalize to [-180, 180] range\n      const bearingDiff = normalizeBearingDiff(roadBearing - initialBearing);\n\n      // If the difference is > 90¬∞ or < -90¬∞, the road goes in the opposite direction\n      // Reverse the coordinates to follow the road in the user's intended direction\n      if (Math.abs(bearingDiff) > 90) {\n        roadCoords = [...roadCoords].reverse();\n        console.log(`[RoadFollow] Reversed road direction to match user's view (bearingDiff: ${bearingDiff.toFixed(1)}¬∞)`);\n      } else {\n        console.log(`[RoadFollow] Following road in natural direction (bearingDiff: ${bearingDiff.toFixed(1)}¬∞)`);\n      }\n    }\n\n    // Helper function to find next connected segment\n    // Returns null if no valid connection found\n    // Queries roads dynamically around current position at animation zoom level\n    const findNextSegment = async (lastPoint, secondLastPoint, usedIds) => {\n      const currentBearing = calculateBearing(\n        secondLastPoint[0], secondLastPoint[1],\n        lastPoint[0], lastPoint[1]\n      );\n\n      // Get current road properties for continuity scoring\n      const currentRoadName = currentSegmentCoords.roadName;\n      const currentRoadRef = currentSegmentCoords.roadRef;\n      const currentRoadClass = currentSegmentCoords.roadClass;\n\n      // If using helper map, position it ahead before querying\n      if (options.map2 && vehicleProfile.searchRadius) {\n        await AnimationDirector._positionHelperMapAhead(\n          options.map2,\n          lastPoint,\n          currentBearing,\n          vehicleProfile.searchRadius\n        );\n      }\n\n      // Query roads dynamically around current position\n      // Uses animation zoom level (18.5 for drone) = ultra-detailed geometry with all tiny segments\n      const currentRoads2 = map2.querySourceFeatures(sourceId2, {\n        sourceLayer: sourceLayer2,\n        filter: ROAD_QUERY_FILTER\n      });\n\n      let bestNextSegment = null;\n      let bestScore = Infinity; // Lower score is better\n      let candidateCount = 0; // Track how many candidates we evaluate\n\n      // Connection threshold: back to 50m to avoid jumping between roads\n      const connectionThreshold = 0.0005;\n\n      console.log(`[RoadChain] Searching for next segment from ${currentRoadClass}${currentRoadName ? ' (' + currentRoadName + ')' : ''}${currentRoadRef ? ' [' + currentRoadRef + ']' : ''}, bearing: ${currentBearing.toFixed(1)}¬∞`);\n      console.log(`[RoadChain] Total segments in cache: ${currentRoads2.length}`);\n      console.log(`[RoadChain] Connection threshold: ${(connectionThreshold * 111000).toFixed(0)}m`);\n\n      for (const road of currentRoads2) {\n        if (!road.geometry || !road.geometry.coordinates) {\n          continue;\n        }\n\n        if (usedIds.has(road.id)) {\n          continue;\n        }\n\n        const roadStart = road.geometry.coordinates[0];\n        const roadEnd = road.geometry.coordinates[road.geometry.coordinates.length - 1];\n\n        // Check if this segment starts near our current endpoint\n        const dxStart = roadStart[0] - lastPoint[0];\n        const dyStart = roadStart[1] - lastPoint[1];\n        const distanceToStart = Math.sqrt(dxStart * dxStart + dyStart * dyStart);\n\n        // Check if segment end is near our endpoint (for reversed connection)\n        const dxEnd = roadEnd[0] - lastPoint[0];\n        const dyEnd = roadEnd[1] - lastPoint[1];\n        const distanceToEnd = Math.sqrt(dxEnd * dxEnd + dyEnd * dyEnd);\n\n        const minDist = Math.min(distanceToStart, distanceToEnd);\n\n        if (minDist >= connectionThreshold) {\n          continue; // Too far\n        }\n\n        // Within threshold - evaluate this segment as a candidate\n        // Determine if we need to reverse this segment\n        const shouldReverse = distanceToEnd < distanceToStart;\n        const effectiveCoords = shouldReverse ? [...road.geometry.coordinates].reverse() : road.geometry.coordinates;\n\n        // Need at least 2 points to calculate bearing\n        if (effectiveCoords.length < 2) continue;\n\n        const effectiveStart = effectiveCoords[0];\n        const effectiveSecond = effectiveCoords[1];\n\n        // Validate coordinates are valid numbers\n        if (!isValidCoordinate(effectiveStart) || !isValidCoordinate(effectiveSecond)) {\n          console.warn(`[RoadChain] Invalid coordinates for road ${road.id}, skipping`);\n          continue;\n        }\n\n        // Calculate bearing of this potential next segment\n        const nextSegmentBearing = calculateBearing(\n          effectiveStart[0], effectiveStart[1],\n          effectiveSecond[0], effectiveSecond[1]\n        );\n\n        // Skip if bearing calculation failed (NaN)\n        if (isNaN(nextSegmentBearing)) {\n          console.warn(`[RoadChain] NaN bearing for road ${road.id}, skipping`);\n          continue;\n        }\n\n        // Calculate angular difference (prefer segments that continue in similar direction)\n        const bearingDiff = Math.abs(normalizeBearingDiff(nextSegmentBearing - currentBearing));\n\n        // Skip if bearingDiff is NaN\n        if (isNaN(bearingDiff)) {\n          console.warn(`[RoadChain] NaN bearingDiff for road ${road.id}, skipping`);\n          continue;\n        }\n\n        // Reject U-turns (> 150¬∞) completely - never acceptable\n        if (bearingDiff > 150) continue;\n\n        const distance = Math.min(distanceToStart, distanceToEnd);\n\n        // === HIERARCHICAL PRIORITY SYSTEM ===\n        // Priority order: roadRef > roadName > roadClass > position\n        // Lower score = better choice\n\n        const roadName = road.properties?.name;\n        const roadRef = road.properties?.ref;\n        const roadClass = road.properties?.class;\n\n        const isSameRef = roadRef && currentRoadRef && roadRef === currentRoadRef;\n        const isSameName = roadName && currentRoadName && roadName === currentRoadName;\n        const isSameClass = roadClass && currentRoadClass && roadClass === currentRoadClass;\n\n        let score = 0;\n\n        // PRIORITY 1: Same roadRef (D123, A1, etc.) ‚Üí ALWAYS WIN\n        if (isSameRef) {\n          score = 0 + distance * 10 + bearingDiff * 0.01; // Range: 0-10\n        } else if (isSameName) {\n          // PRIORITY 2: Same roadName (Rue Gambetta, etc.) ‚Üí ALMOST ALWAYS WIN\n          score = 100 + distance * 10 + bearingDiff * 0.01; // Range: 100-110\n        } else if (isSameClass) {\n          // PRIORITY 3: Same roadClass (no name) ‚Üí STRONGLY PREFER STRAIGHT\n          score = 1000 + distance * 10 + bearingDiff * 50; // bearingDiff is KEY!\n          // 5¬∞ vs 90¬∞ = 1250 vs 5500 ‚Üí 4x better score for going straight\n        } else {\n          // PRIORITY 4: Different road ‚Üí VERY STRONGLY PREFER STRAIGHT\n          score = 10000 + distance * 100 + bearingDiff * 200;\n          // bearingDiff CRITICAL - strongly favor continuing straight\n        }\n\n        candidateCount++;\n\n        // Log every candidate segment for debugging\n        const candidateLabel = roadRef ? `[${roadRef}]` : (roadName || roadClass);\n        const priorityLabel = isSameRef ? 'P1-SameRef' : (isSameName ? 'P2-SameName' : (isSameClass ? 'P3-SameClass' : 'P4-Different'));\n        console.log(`[RoadChain]   Candidate #${candidateCount}: ${candidateLabel} (${priorityLabel}) bearing Œî${bearingDiff.toFixed(1)}¬∞, dist ${(distance * 111000).toFixed(1)}m, score ${score.toFixed(1)}`);\n\n        if (score < bestScore) {\n          bestScore = score;\n          bestNextSegment = {\n            road,\n            coords: effectiveCoords,\n            reversed: shouldReverse,\n            bearingDiff,\n            distance,\n            score, // For debugging\n            roadName, // Store for logging\n            roadRef\n          };\n        }\n      }\n\n      console.log(`[RoadChain] Evaluated ${candidateCount} candidate segments, best score: ${bestScore === Infinity ? 'none found' : bestScore.toFixed(1)}`);\n\n      // If no segment found and we have a helper map, try adjusting zoom\n      if (!bestNextSegment && options.map2 && vehicleProfile.searchRadius) {\n        const currentZoom2 = options.map2.getZoom();\n        // Vector tile data is typically in zoom 14-18, try different levels\n        const zoomsToTry = currentZoom2 === 18 ? [16, 17] : []; // Try wider views\n\n        for (const zoomLevel of zoomsToTry) {\n          console.log(`[RoadChain] No segment found at zoom ${currentZoom2.toFixed(1)}, retrying at zoom ${zoomLevel}...`);\n\n          // Adjust helper map zoom\n          options.map2.setZoom(zoomLevel);\n          await new Promise(resolve => setTimeout(resolve, 200)); // Wait for tiles to load\n\n          // Re-query with new zoom\n          const retryRoads2 = map2.querySourceFeatures(sourceId2, {\n            sourceLayer: sourceLayer2,\n            filter: ROAD_QUERY_FILTER\n          });\n\n          console.log(`[RoadChain] Retry found ${retryRoads2.length} segments at zoom ${zoomLevel}`);\n\n          // Re-run scoring logic (simplified - just find ANY connected segment)\n          for (const road of retryRoads2) {\n            if (!road.geometry || !road.geometry.coordinates) continue;\n            if (usedIds.has(road.id)) continue;\n\n            const roadStart = road.geometry.coordinates[0];\n            const roadEnd = road.geometry.coordinates[road.geometry.coordinates.length - 1];\n\n            const dxStart = roadStart[0] - lastPoint[0];\n            const dyStart = roadStart[1] - lastPoint[1];\n            const distanceToStart = Math.sqrt(dxStart * dxStart + dyStart * dyStart);\n\n            const dxEnd = roadEnd[0] - lastPoint[0];\n            const dyEnd = roadEnd[1] - lastPoint[1];\n            const distanceToEnd = Math.sqrt(dxEnd * dxEnd + dyEnd * dyEnd);\n\n            const minDist = Math.min(distanceToStart, distanceToEnd);\n\n            if (minDist < connectionThreshold) {\n              // Found a connected segment!\n              const shouldReverse = distanceToEnd < distanceToStart;\n              const effectiveCoords = shouldReverse ? [...road.geometry.coordinates].reverse() : road.geometry.coordinates;\n\n              if (effectiveCoords.length >= 2) {\n                const effectiveStart = effectiveCoords[0];\n                const effectiveSecond = effectiveCoords[1];\n                const nextSegmentBearing = calculateBearing(\n                  effectiveStart[0], effectiveStart[1],\n                  effectiveSecond[0], effectiveSecond[1]\n                );\n                const bearingDiff = Math.abs(normalizeBearingDiff(nextSegmentBearing - currentBearing));\n\n                if (bearingDiff <= 150) { // Not a U-turn\n                  console.log(`[RoadChain] ‚úÖ Found segment at zoom ${zoomLevel}: bearingDiff ${bearingDiff.toFixed(1)}¬∞`);\n                  bestNextSegment = {\n                    road,\n                    coords: effectiveCoords,\n                    reversed: shouldReverse,\n                    bearingDiff,\n                    distance: minDist,\n                    score: 1000 + bearingDiff * 50, // Simple score\n                    roadName: road.properties?.name,\n                    roadRef: road.properties?.ref\n                  };\n                  break;\n                }\n              }\n            }\n          }\n\n          if (bestNextSegment) {\n            // Restore original zoom\n            options.map2.setZoom(18);\n            break;\n          }\n        }\n\n        // Restore original zoom if we didn't find anything\n        if (!bestNextSegment && options.map2) {\n          options.map2.setZoom(18);\n        }\n      }\n\n      return bestNextSegment;\n    };\n\n    console.log(`[RoadChain] Starting with ${roadClass}: ${roadCoords.length} points`);\n\n    updateStatus(`${vehicleProfile.icon} Following ${roadClass} (${roadCoords.length} points)...`);\n\n    // Set pitch from vehicle profile\n    const targetPitch = vehicleProfile.pitch;\n    map.easeTo({ pitch: targetPitch, duration: 1000, essential: true });\n    await map.once('moveend');\n    checkAbort();\n\n    // Configuration from vehicle profile\n    // Define realistic speed in km/h (will be used to calculate duration based on distance)\n    const vehicleSpeedKmh = vehicleProfile.speedKmh || 30; // Default: 30 km/h\n    const maxSegments = 10000; // Very high limit just to prevent infinite loops in case of bugs\n\n    console.log(`[RoadFollow] Vehicle speed: ${vehicleSpeedKmh} km/h`);\n\n    // NOTE: Initial positioning is now done in the setup phase (before recording starts)\n    // This function only handles the actual road following animation\n\n    // Track animation state (works in both test and recording modes)\n    // Use maplibregl.now() which returns virtual time when frozen, real time otherwise\n    // @ts-ignore - timeControl API may not exist in older versions\n    const startTime = maplibregl.now();\n\n    // Resample initial segment for uniform point spacing (smoother speed)\n    // Use Catmull-Rom spline if smoothPath is enabled for natural curves\n    let currentSegmentCoords = vehicleProfile.smoothPath\n      ? resamplePathCatmullRom(roadCoords, 0.01) // Smooth curves with Catmull-Rom\n      : resamplePath(roadCoords, 0.01); // Linear interpolation (10m spacing)\n\n    // Store initial road properties for continuity tracking\n    currentSegmentCoords.roadClass = closestRoad.properties?.class;\n    currentSegmentCoords.roadName = closestRoad.properties?.name;\n    currentSegmentCoords.roadRef = closestRoad.properties?.ref;\n\n    // Smoothing buffer for zoom\n    const zoomBuffer = [];\n    const bufferSize = vehicleProfile.smoothing;\n\n    updateStatus(`${vehicleProfile.icon} Following road network...`);\n\n    // Main animation loop: follow points and chain segments dynamically\n    const usedSegmentIds = new Set([closestRoad.id]);\n    let currentSegmentIndex = 1; // Start at second point since camera is already at first point\n    let segmentCount = 1;\n    let totalPointsVisited = 1; // We've already visited the first point\n\n    try {\n      while (true) {\n        checkAbort();\n\n        // Calculate elapsed time (works with both real and virtual time)\n        // @ts-ignore - timeControl API may not exist in older versions\n        const elapsed = maplibregl.now() - startTime;\n\n        // Check duration only if time is NOT frozen (test mode)\n        // During recording, time is frozen and the recording system manages duration\n        if (!maplibregl.isTimeFrozen || !maplibregl.isTimeFrozen()) {\n          if (elapsed >= duration) {\n            console.log(`[RoadChain] Animation complete: ${(elapsed / 1000).toFixed(1)}s, ${totalPointsVisited} points, ${segmentCount} segments`);\n            break;\n          }\n        }\n\n        // Check if we've reached the end of the current segment\n        if (currentSegmentIndex >= currentSegmentCoords.length) {\n          console.log(`[RoadChain] End of segment #${segmentCount} reached (index ${currentSegmentIndex} >= ${currentSegmentCoords.length} points)`);\n\n          // Try to find the next connecting segment\n          if (segmentCount >= maxSegments) {\n            console.log(`[RoadChain] Max segments (${maxSegments}) reached`);\n            break;\n          }\n\n          const lastPoint = currentSegmentCoords[currentSegmentCoords.length - 1];\n          const secondLastPoint = currentSegmentCoords[currentSegmentCoords.length - 2];\n\n          // Safety check: we need at least 2 points for bearing calculation\n          if (!secondLastPoint) {\n            console.error('[RoadChain] ‚ùå ERROR: Segment has only 1 point, cannot calculate bearing!');\n            console.error(`[RoadChain] currentSegmentCoords.length = ${currentSegmentCoords.length}`);\n            console.error('[RoadChain] This is a bug - segments should always have ‚â•2 points');\n            break;\n          }\n\n          console.log(`[RoadChain] Searching for segment #${segmentCount + 1} from point [${lastPoint[0].toFixed(6)}, ${lastPoint[1].toFixed(6)}]`);\n\n          // Segments are loaded dynamically in findNextSegment\n          let nextSegment = await findNextSegment(lastPoint, secondLastPoint, usedSegmentIds);\n          console.log(`[RoadChain] Search result: ${nextSegment ? 'FOUND' : 'NOT FOUND'}`);\n\n          // If STILL no connected segment, search in cardinal directions for nearby roads\n          if (!nextSegment) {\n            const currentBearing = calculateBearing(\n              secondLastPoint[0], secondLastPoint[1],\n              lastPoint[0], lastPoint[1]\n            );\n\n            // Determine preferred road class based on current segment\n            const currentClass = currentSegmentCoords.roadClass || closestRoad.properties?.class;\n            const prefer = currentClass ? [currentClass] : []; // Prefer same road type\n\n            // Use smaller searchRadius for cardinal search (200m max instead of vehicle's searchRadius)\n            // This prevents huge jumps when no road is directly connected\n            const cardinalSearchRadius = Math.min(0.002, vehicleProfile.searchRadius || 0.002); // Max 200m\n            nextSegment = _findNearbyRoadInCardinalDirections(\n              lastPoint,\n              currentBearing,\n              usedSegmentIds,\n              roads2,\n              { prefer, searchRadius: cardinalSearchRadius }\n            );\n\n            if (nextSegment) {\n              console.log('[RoadChain] Cardinal search: FOUND road in direction');\n              updateStatus(`${vehicleProfile.icon} Jumping to nearby road...`);\n            } else {\n              console.log('[RoadChain] Cardinal search: NOT FOUND');\n            }\n          }\n\n          // If STILL no segment found AND in Explore mode, continue forward to find next road\n          if (!nextSegment && vehicleProfile.supportsExploration) {\n            console.log('[RoadSearch] Explore mode: searching forward for next road...');\n\n            const currentBearing = calculateBearing(\n              secondLastPoint[0], secondLastPoint[1],\n              lastPoint[0], lastPoint[1]\n            );\n\n            const stepDistance = 0.0005; // ~50m per step\n            const maxSteps = 4; // Search only 200m forward (reduced from 1km to avoid huge jumps)\n            let foundRoad = null;\n\n            for (let step = 1; step <= maxSteps && !foundRoad; step++) {\n              // Calculate search point at this distance\n              const radians = (currentBearing * Math.PI) / 180;\n              const searchLng = lastPoint[0] + (stepDistance * step) * Math.sin(radians);\n              const searchLat = lastPoint[1] + (stepDistance * step) * Math.cos(radians);\n\n              // Search for road at this point\n              const currentClass = currentSegmentCoords.roadClass || closestRoad.properties?.class;\n              foundRoad = _findNearbyRoadInCardinalDirections(\n                [searchLng, searchLat],\n                currentBearing,\n                usedSegmentIds,\n                roads2,\n                {\n                  prefer: currentClass ? [currentClass] : [],\n                  searchRadius: (vehicleProfile.searchRadius || 0.002) * 0.5 // Half radius for exploration mode\n                }\n              );\n\n              if (foundRoad) {\n                console.log(`[RoadSearch] ‚úÖ Found road after ${step} steps (${(step * 50).toFixed(0)}m forward)`);\n\n                // Create intermediate points for smooth transition\n                const intermediatePoints = [];\n                for (let i = 1; i <= step; i++) {\n                  const lng = lastPoint[0] + (stepDistance * i) * Math.sin(radians);\n                  const lat = lastPoint[1] + (stepDistance * i) * Math.cos(radians);\n                  intermediatePoints.push([lng, lat]);\n                }\n\n                // Combine transition points + new road\n                nextSegment = {\n                  ...foundRoad,\n                  coords: [...intermediatePoints, ...foundRoad.coords]\n                };\n\n                updateStatus(`${vehicleProfile.icon} Crossing terrain to next road...`);\n              }\n            }\n\n            if (!foundRoad) {\n              console.log('[RoadSearch] No road found within 200m forward - generating synthetic segment to continue');\n\n              // Plan B: Generate straight-line path to continue exploration\n              // This prevents getting stuck when roads are sparse or disconnected\n              const straightAheadDistance = stepDistance * maxSteps; // Continue same distance we searched\n              const radians = (currentBearing * Math.PI) / 180;\n\n              // Create a synthetic path with intermediate points for smooth movement\n              const intermediateSteps = 10;\n              const syntheticCoords = [];\n              for (let i = 1; i <= intermediateSteps; i++) {\n                const progress = i / intermediateSteps;\n                const lng = lastPoint[0] + straightAheadDistance * progress * Math.sin(radians);\n                const lat = lastPoint[1] + straightAheadDistance * progress * Math.cos(radians);\n                syntheticCoords.push([lng, lat]);\n              }\n\n              nextSegment = {\n                road: { id: `synthetic-${segmentCount}`, properties: { class: 'aerial' } },\n                coords: syntheticCoords,\n                reversed: false,\n                bearingDiff: 0,\n                distance: 0,\n                synthetic: true // Mark as synthetic for debugging\n              };\n\n              updateStatus(`${vehicleProfile.icon} Flying over terrain (no roads)...`);\n            }\n          }\n\n          if (nextSegment) {\n            // Chain to the next segment\n            // Resample segment for uniform point spacing (smoother speed)\n            // Skip first point (already at it) ONLY if we have more than 2 points\n            // We need at least 2 points to calculate bearing for the NEXT segment\n            if (nextSegment.coords.length > 2) {\n              currentSegmentCoords = vehicleProfile.smoothPath\n                ? resamplePathCatmullRom(nextSegment.coords.slice(1), 0.01) // Smooth curves\n                : resamplePath(nextSegment.coords.slice(1), 0.01); // Linear (10m spacing)\n            } else {\n              // Keep all points if segment is very short (2 points)\n              // This ensures we always have at least 2 points for bearing calculation\n              currentSegmentCoords = vehicleProfile.smoothPath\n                ? resamplePathCatmullRom(nextSegment.coords, 0.01) // Smooth curves\n                : resamplePath(nextSegment.coords, 0.01); // Linear (10m spacing)\n              console.log(`[RoadChain] Short segment - keeping all ${nextSegment.coords.length} points for bearing calc`);\n            }\n            // Store road properties for continuity tracking\n            currentSegmentCoords.roadClass = nextSegment.road.properties?.class;\n            currentSegmentCoords.roadName = nextSegment.road.properties?.name;\n            currentSegmentCoords.roadRef = nextSegment.road.properties?.ref;\n\n            currentSegmentIndex = 0;\n            segmentCount++;\n            usedSegmentIds.add(nextSegment.road.id);\n\n            const segmentClass = nextSegment.road.properties?.class || 'road';\n            const segmentName = nextSegment.road.properties?.name;\n            const segmentRef = nextSegment.road.properties?.ref;\n            const roadIdentity = segmentRef || segmentName || segmentClass;\n\n            // nextSegment.distance is in km (from calculateDistance), convert to meters\n            const distanceM = nextSegment.distance ? (nextSegment.distance * 1000).toFixed(1) : '0.0';\n            console.log(`[RoadChain] ‚úÖ Segment #${segmentCount}: ${roadIdentity} ` +\n                        `(${nextSegment.coords.length} pts, ${nextSegment.reversed ? 'reversed' : 'forward'}, ` +\n                        `bearing Œî${nextSegment.bearingDiff.toFixed(1)}¬∞, ${distanceM}m)` +\n                        (nextSegment.score ? `, score: ${nextSegment.score.toFixed(1)}` : ''));\n            console.log(`[RoadChain] After processing: ${currentSegmentCoords.length} points remaining for animation`);\n\n            // Add segment to visualization\n            if (options.debugFeatures) {\n              try {\n                // @ts-ignore - timeControl API may not exist in older versions\n                const elapsedMs = maplibregl.now() - startTime;\n\n                options.debugFeatures.push({\n                  type: 'Feature',\n                  properties: {\n                    name: segmentName || 'unnamed',\n                    ref: segmentRef || '',\n                    class: segmentClass,\n                    segmentNum: segmentCount,\n                    reversed: nextSegment.reversed,\n                    bearingDiff: parseFloat(nextSegment.bearingDiff.toFixed(1)),\n                    distanceM: parseFloat(distanceM),\n                    score: nextSegment.score ? parseFloat(nextSegment.score.toFixed(1)) : null,\n                    numPoints: nextSegment.coords.length,\n                    roadId: nextSegment.road.id,\n                    timestampMs: Math.round(elapsedMs),\n                    zoom2: options.map2 ? parseFloat(options.map2.getZoom().toFixed(1)) : null\n                  },\n                  geometry: {\n                    type: 'LineString',\n                    coordinates: nextSegment.coords\n                  }\n                });\n\n                // Update GeoJSON source\n                const debugSource = map.getSource('drone-followed-segments');\n                if (debugSource) {\n                  debugSource.setData({\n                    type: 'FeatureCollection',\n                    features: options.debugFeatures\n                  });\n                  console.log(`[Debug] Added segment #${segmentCount} to visualization (total: ${options.debugFeatures.length} segments)`);\n                }\n              } catch (error) {\n                console.error('[Debug] Failed to update visualization:', error);\n              }\n            }\n\n            updateStatus(`${vehicleProfile.icon} Following ${roadIdentity} (segment ${segmentCount})...`);\n          } else {\n            // Really no roads found anywhere nearby\n            console.error(`[RoadChain] ‚ùå STOPPING: No roads found in any direction after ${segmentCount} segments`);\n            console.error('[RoadChain] This should NEVER happen in exploration mode with synthetic segments!');\n            console.error(`[RoadChain] Last position: [${lastPoint[0].toFixed(6)}, ${lastPoint[1].toFixed(6)}]`);\n            console.error(`[RoadChain] supportsExploration: ${vehicleProfile.supportsExploration}`);\n            usedSegmentIds.clear(); // Reset cache for next exploration\n            break;\n          }\n        }\n\n        // Follow the current point\n        const [lng, lat] = currentSegmentCoords[currentSegmentIndex];\n        const currentPoint = { lng, lat };\n\n        // Calculate distance to next point and duration based on vehicle speed\n        let moveDuration = 100; // Default fallback\n        let bearing = initialBearing;\n\n        if (currentSegmentIndex < currentSegmentCoords.length - 1) {\n          const [nextLng, nextLat] = currentSegmentCoords[currentSegmentIndex + 1];\n          bearing = calculateBearing(lng, lat, nextLng, nextLat);\n\n          // Calculate actual distance using Haversine formula\n          const distanceKm = calculateDistance(lng, lat, nextLng, nextLat);\n\n          // Calculate duration: time = distance / speed (in hours), then convert to ms\n          // duration (ms) = (distance_km / speed_kmh) * 3600 * 1000\n          moveDuration = (distanceKm / vehicleSpeedKmh) * 3600 * 1000;\n\n          // Only clamp minimum to avoid render issues with extremely close points\n          // No maximum clamp - respect the actual physics for constant speed\n          moveDuration = Math.max(20, moveDuration);\n        } else if (currentSegmentIndex > 0) {\n          // Use bearing from previous point if we're at the end\n          const [prevLng, prevLat] = currentSegmentCoords[currentSegmentIndex - 1];\n          bearing = calculateBearing(prevLng, prevLat, lng, lat);\n        }\n\n        // Sample terrain elevation at current road point\n        const elevation = map.queryTerrainElevation(currentPoint);\n        let targetZoom = vehicleProfile.zoom;\n\n        if (elevation !== null && elevation >= 0) {\n          const elevationKm = elevation / 1000;\n          const baseZoom = vehicleProfile.zoom;\n          const elevationAdjustment = elevationKm * 1.5;\n          targetZoom = Math.max(10, baseZoom - elevationAdjustment);\n        }\n\n        // Smoothing\n        zoomBuffer.push(targetZoom);\n        if (zoomBuffer.length > bufferSize) {\n          zoomBuffer.shift();\n        }\n        const smoothedZoom = zoomBuffer.reduce((a, b) => a + b, 0) / zoomBuffer.length;\n\n        // Move camera to road point with duration based on actual distance\n        map.easeTo({\n          center: currentPoint,\n          bearing,\n          zoom: smoothedZoom,\n          pitch: targetPitch,\n          duration: moveDuration,\n          essential: true,\n          easing: t => t, // Linear for smooth continuous motion\n          noMoveStart: true, // Don't trigger movestart event for smoother transitions\n          delayEndEvents: 0 // Don't delay end events\n        });\n\n        await map.once('moveend');\n\n        currentSegmentIndex++;\n        totalPointsVisited++;\n\n        // Update status every ~1 second\n        if (totalPointsVisited % 30 === 0) {\n          const percent = Math.min(99, Math.round((elapsed / duration) * 100));\n          updateStatus(`${vehicleProfile.icon} Following road network: ${percent}% (${segmentCount} segments)`);\n        }\n      }\n\n      updateStatus(`‚úÖ ${vehicleProfile.name} complete!`);\n    } finally {\n      // Log final GeoJSON for debugging/export (always executed, even on abort)\n      if (options.debugFeatures && options.debugFeatures.length > 0) {\n        const finalGeoJSON = {\n          type: 'FeatureCollection',\n          features: options.debugFeatures\n        };\n        console.log('[Debug] Final followed path GeoJSON (' + options.debugFeatures.length + ' segments):');\n        console.log(JSON.stringify(finalGeoJSON, null, 2));\n      }\n\n      // Cleanup helper map if it exists\n      console.log('[HelperMap] Cleaning up helper map...');\n      cleanupMap2AndDebugLayer(options, map);\n\n      // Cleanup debug visualization layer\n      console.log('[Debug] Cleaning up visualization layer...');\n      try {\n        const debugLayerId = 'drone-followed-segments-layer';\n        const debugSourceId = 'drone-followed-segments';\n\n        if (map.getLayer(debugLayerId)) {\n          map.removeLayer(debugLayerId);\n        }\n        if (map.getSource(debugSourceId)) {\n          map.removeSource(debugSourceId);\n        }\n        console.log('[Debug] Visualization layer cleaned up');\n      } catch (error) {\n        console.error('[Debug] Error cleaning up visualization layer:', error);\n      }\n    }\n  },\n\n  /**\n     * üöú Tractor Road Trip - Follow roads at tractor pace\n     * Close zoom for slow rural driving, follows small roads\n     */\n  tractorRoadTrip: (map, control, options = {}) => {\n    const profile = {\n      altitude: 8,\n      zoom: 20, // Very close for slow speed\n      pitch: 60,\n      smoothing: 5,\n      speedKmh: 30, // Slow tractor speed\n      searchRadius: 0.002, // 200m search radius for ground vehicle\n      preloadDistance: 0.002, // 200m preload for slow vehicle\n      icon: 'üöú',\n      name: 'Tractor Road Trip',\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * üöó Car Road Trip - Follow roads at car dashcam level\n     * Medium zoom for realistic highway driving\n     */\n  carRoadTrip: (map, control, options = {}) => {\n    const profile = {\n      altitude: 15,\n      zoom: 19, // Medium distance for car speed\n      pitch: 60,\n      smoothing: 5,\n      speedKmh: 70, // Highway driving speed\n      searchRadius: 0.002, // 200m search radius for ground vehicle\n      preloadDistance: 0.005, // 500m preload for car speed\n      icon: 'üöó',\n      name: 'Car Road Trip',\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * üèéÔ∏è Sports Car - Follow roads at racing speed\n     * Higher zoom for high-speed driving, wider view ahead\n     */\n  sportsCarRace: (map, control, options = {}) => {\n    const profile = {\n      altitude: 25,\n      zoom: 17.5, // Higher up to see further ahead at high speed\n      pitch: 60,\n      smoothing: 5,\n      speedKmh: 130, // Sports car racing speed\n      searchRadius: 0.003, // 300m search radius for fast vehicle\n      preloadDistance: 0.010, // 1km preload for high speed\n      icon: 'üèéÔ∏è',\n      name: 'Sports Car Race',\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * ‚úàÔ∏è Plane Flight - Follow roads at plane altitude\n     * High altitude (200m), wide view for aerial perspective\n     */\n  planeFlight: (map, control, options = {}) => {\n    const profile = {\n      altitude: 200,\n      zoom: 15,\n      pitch: 45,\n      smoothing: 8,\n      speedKmh: 200, // Plane cruising speed\n      searchRadius: 0.01, // 1km search radius for high altitude\n      preloadDistance: 0.015, // 1.5km preload for plane speed\n      icon: '‚úàÔ∏è',\n      name: 'Plane Flight',\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * üöÅ Helicopter Tour - Follow roads at helicopter altitude\n     * Medium altitude (50m), dynamic view with steep pitch\n     */\n  helicopterTour: (map, control, options = {}) => {\n    const profile = {\n      altitude: 50,\n      zoom: 17.5,\n      pitch: 70,\n      smoothing: 6,\n      speedKmh: 60, // Helicopter touring speed\n      searchRadius: 0.005, // 500m search radius for medium altitude\n      preloadDistance: 0.005, // 500m preload for helicopter\n      icon: 'üöÅ',\n      name: 'Helicopter Tour',\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * üõ∏ Drone Follow - Follow roads at drone altitude\n     * Low altitude (30m), cinematic view with responsive movements\n     */\n  droneFollow: (map, control, options = {}) => {\n    const profile = {\n      altitude: 30,\n      zoom: 18.5,\n      pitch: 65,\n      smoothing: 4,\n      speedKmh: 60, // Drone filming speed (increased for better pacing)\n      searchRadius: 0.005, // 500m search radius for drone (larger than ground vehicles)\n      preloadDistance: 0.004, // 400m preload for drone\n      icon: 'üõ∏',\n      name: 'Drone Follow',\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * ü¶Ö Bird's Eye Road - Follow roads from bird's perspective\n     * High altitude (100m), natural bird flight view\n     */\n  birdsEyeRoad: (map, control, options = {}) => {\n    const profile = {\n      altitude: 100,\n      zoom: 16,\n      pitch: 40,\n      smoothing: 7,\n      speedKmh: 50, // Bird flight speed\n      searchRadius: 0.01, // 1km search radius for high altitude flight\n      preloadDistance: 0.004, // 400m preload for bird\n      icon: 'ü¶Ö',\n      name: \"Bird's Eye Road\",\n      supportsExploration: true, // Road-aware animation\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * üöÇ Train Ride - Follow railway tracks at train speed\n     * Low altitude, steady camera movement, smooth ride\n     */\n  trainRide: (map, control, options = {}) => {\n    const profile = {\n      altitude: 12,\n      zoom: 19,\n      pitch: 55,\n      smoothing: 8, // Trains are very smooth and stable\n      speedKmh: 70, // Moderate train speed\n      searchRadius: 0.002, // 200m search radius for ground transport\n      preloadDistance: 0.005, // 500m preload for train\n      icon: 'üöÇ',\n      name: 'Train Ride',\n      supportsExploration: true, // Path-aware animation\n      transportClasses: ['rail', 'transit'], // Follow railway tracks instead of roads\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  speedboat: (map, control, options = {}) => {\n    const profile = {\n      altitude: 8,\n      zoom: 18,\n      pitch: 55,\n      smoothing: 4, // Agile and responsive\n      speedKmh: 90, // Fast speedboat\n      searchRadius: 0.005, // 500m search radius for fast watercraft\n      preloadDistance: 0.007, // 700m preload for speedboat\n      icon: 'üö§',\n      name: 'Speedboat',\n      supportsExploration: true, // Path-aware animation\n      transportClasses: ['river', 'canal', 'stream'], // Follow all waterways\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  sailboat: (map, control, options = {}) => {\n    const profile = {\n      altitude: 10,\n      zoom: 17,\n      pitch: 55,\n      smoothing: 7, // Stable but not too rigid\n      speedKmh: 28, // Moderate sailing speed\n      searchRadius: 0.004, // 400m search radius for waterways\n      preloadDistance: 0.002, // 200m preload for sailboat\n      icon: '‚õµ',\n      name: 'Sailboat',\n      supportsExploration: true, // Path-aware animation\n      transportClasses: ['river', 'canal'], // Follow rivers and canals (not small streams)\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  cruiseShip: (map, control, options = {}) => {\n    const profile = {\n      altitude: 18,\n      zoom: 15,\n      pitch: 45,\n      smoothing: 11, // Very smooth and stable\n      speedKmh: 22, // Slow cruise ship\n      searchRadius: 0.004, // 400m search radius for waterways\n      preloadDistance: 0.002, // 200m preload for cruise ship\n      icon: 'üõ•Ô∏è',\n      name: 'Cruise Ship',\n      supportsExploration: true, // Path-aware animation\n      transportClasses: ['river', 'canal'], // Follow major waterways only\n      smoothPath: true // Smooth Catmull-Rom curves\n    };\n    return PresetAnimations._followPathWithVehicleSetup(map, control, options, profile);\n  },\n\n  /**\n     * ‚úàÔ∏è Free Flight - Straight cruise with natural variations\n     * No road following, just flies in current direction with subtle changes\n     * Perfect for landscape overview, ocean crossing, or zen mode\n     */\n  freeFlight: async (map, { updateStatus, checkAbort }, options = {}) => {\n    const duration = options.duration || 60000;\n    const speedKmh = options.speedKmh || 80; // 80 km/h cruise speed\n    const pitch = options.pitch || 50;\n\n    updateStatus('‚úàÔ∏è Free flight - cruising forward...');\n\n    // @ts-ignore\n    const startTime = maplibregl.now();\n    const initialBearing = map.getBearing();\n    const initialCenter = map.getCenter();\n\n    // Gently ease to flight altitude and pitch\n    map.easeTo({ pitch, duration: 2000, essential: true });\n    await map.once('moveend');\n    checkAbort();\n\n    // Calculate distance per step based on speed\n    const speedMs = speedKmh * 1000 / 3600; // km/h to m/s\n    const stepInterval = 100; // Update every 100ms for smooth motion\n    const distancePerStep = speedMs * (stepInterval / 1000); // meters per step\n    const degreesPerStep = distancePerStep / 111000; // roughly 111km per degree\n\n    let currentLng = initialCenter.lng;\n    let currentLat = initialCenter.lat;\n    let currentBearing = initialBearing;\n\n    // Natural variation parameters\n    let bearingDrift = 0;\n\n    updateStatus('‚úàÔ∏è Cruising...');\n\n    while (true) {\n      checkAbort();\n\n      // @ts-ignore\n      const elapsed = maplibregl.now() - startTime;\n      // @ts-ignore\n      if (!maplibregl.isTimeFrozen || !maplibregl.isTimeFrozen()) {\n        if (elapsed >= duration) {\n          console.log(`[FreeFlight] Cruise complete: ${(elapsed / 1000).toFixed(1)}s`);\n          break;\n        }\n      }\n\n      // Add natural bearing variations (gentle sine wave + noise)\n      const t = elapsed / 1000;\n      bearingDrift += (Math.sin(t * 0.1) * 0.02) + (Math.random() - 0.5) * 0.05;\n      bearingDrift = Math.max(-5, Math.min(5, bearingDrift)); // ¬±5¬∞ max drift\n\n      currentBearing = initialBearing + bearingDrift;\n\n      // Move forward in current bearing direction\n      const radians = (currentBearing * Math.PI) / 180;\n      currentLng += degreesPerStep * Math.sin(radians);\n      currentLat += degreesPerStep * Math.cos(radians);\n\n      // Smooth camera movement\n      map.easeTo({\n        center: [currentLng, currentLat],\n        bearing: currentBearing,\n        duration: stepInterval,\n        essential: true\n      });\n\n      await sleep(stepInterval);\n    }\n\n    updateStatus('‚úàÔ∏è Free flight complete');\n  }\n};\n","/**\n * Animation Controller\n *\n * Clean and modern animation control system using AbortController\n * Handles cancellation, state management, and position restoration\n */\n\nexport class AnimationController {\n  constructor() {\n    this.abortController = null;\n    this.isRunning = false;\n    this.initialPosition = null;\n  }\n\n  /**\n     * Run an animation with cancellation support\n     * @param {Object} map - MapLibre GL map instance\n     * @param {Function} animation - Animation function to run\n     * @param {Object} options - Options including updateStatus callback\n     * @returns {Promise<{success?: boolean, cancelled?: boolean}>}\n     */\n  async run(map, animation, options = {}) {\n    // If already running, cancel current animation\n    if (this.isRunning) {\n      this.cancel(map);\n      return { cancelled: true };\n    }\n\n    // Initialize animation state\n    this.isRunning = true;\n    this.abortController = new AbortController();\n    this.initialPosition = this._capturePosition(map);\n\n    // Capture the signal reference to avoid context issues\n    const signal = this.abortController.signal;\n\n    try {\n      // Run animation with abort signal\n      await animation(map, {\n        signal,\n        updateStatus: options.updateStatus || (() => {}),\n        checkAbort: () => {\n          if (signal.aborted) {\n            throw new DOMException('Animation aborted', 'AbortError');\n          }\n        }\n      });\n\n      return { success: true };\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        return { cancelled: true };\n      }\n      throw error;\n    } finally {\n      this.cleanup();\n    }\n  }\n\n  /**\n     * Cancel the current animation and restore initial position\n     */\n  cancel(map) {\n    if (this.abortController) {\n      this.abortController.abort();\n    }\n\n    // Restore initial position if map is provided\n    if (map && this.initialPosition) {\n      map.jumpTo(this.initialPosition);\n    }\n\n    this.cleanup();\n  }\n\n  /**\n     * Stop the current animation without restoring position\n     * (useful after recording completes)\n     */\n  stop() {\n    if (this.abortController) {\n      this.abortController.abort();\n    }\n\n    this.cleanup();\n  }\n\n  /**\n     * Check if animation is currently running\n     */\n  get running() {\n    return this.isRunning;\n  }\n\n  /**\n     * Check if the animation has been aborted\n     */\n  get aborted() {\n    return this.abortController?.signal.aborted ?? false;\n  }\n\n  /**\n     * Clean up internal state\n     */\n  cleanup() {\n    this.isRunning = false;\n    this.abortController = null;\n    this.initialPosition = null;\n  }\n\n  /**\n     * Capture current map position\n     */\n  _capturePosition(map) {\n    return {\n      center: map.getCenter(),\n      zoom: map.getZoom(),\n      bearing: map.getBearing(),\n      pitch: map.getPitch()\n    };\n  }\n\n  /**\n     * Create a helper for animations to check abort status between steps\n     * Returns a function that throws AbortError if cancelled\n     */\n  createAbortChecker() {\n    // Capture the signal reference when the checker is created\n    const signal = this.abortController ? this.abortController.signal : null;\n    return () => {\n      if (signal && signal.aborted) {\n        throw new DOMException('Animation aborted', 'AbortError');\n      }\n    };\n  }\n\n  /**\n     * Helper to wait for map movement with abort support\n     * Automatically checks for abort after movement completes\n     */\n  async waitForMove(map, movePromise) {\n    await movePromise;\n    await map.once('moveend');\n\n    // Check for abort after movement\n    const signal = this.abortController ? this.abortController.signal : null;\n    if (signal && signal.aborted) {\n      throw new DOMException('Animation aborted', 'AbortError');\n    }\n  }\n}\n","/**\n * Wrapper for webm-wasm encoder that provides a unified API\n * similar to mp4-h264 encoder\n *\n * This wrapper encapsulates the complexity of the Web Worker-based\n * webm-wasm encoder and exposes a Promise-based API that matches\n * the synchronous mp4-h264 encoder API.\n *\n * IMPORTANT: Requires local webm-wasm files (vendor/webm/) to be deployed\n * alongside the plugin. Does NOT support CDN loading.\n */\nexport class WebmEncoderWrapper {\n  constructor() {\n    this.worker = null;\n    this.resolveEnd = null;\n    this.videoChunks = []; // Collect chunks (realtime) or single final video (non-realtime)\n    this.frameCount = 0;\n    this.realtimeMode = false; // Track encoding mode\n  }\n\n  /**\n     * Create and initialize the encoder\n     * @param {Object} options - Configuration object\n     * @param {number} options.width - Video width in pixels\n     * @param {number} options.height - Video height in pixels\n     * @param {number} options.fps - Frames per second\n     * @param {number} options.bitrate - Bitrate in kbps\n     * @param {string} options.wasmUrl - URL to webm-wasm.wasm file (must be local/same-origin)\n     * @param {string} options.workerUrl - URL to webm-worker.js file (must be local/same-origin)\n     * @param {boolean} options.realtime - Enable realtime mode for faster encoding (default: false)\n     * @returns {Promise<WebmEncoderWrapper>} This instance\n     */\n  async create(options) {\n    const { width, height, fps, bitrate, wasmUrl, workerUrl, realtime = false } = options;\n\n    // Store realtime mode for later\n    this.realtimeMode = realtime;\n\n    console.log('[WebM Encoder] Initializing with:', {\n      width,\n      height,\n      fps,\n      bitrate: `${bitrate} kbps`,\n      realtime: realtime ? 'enabled (fast)' : 'disabled (high quality)',\n      wasmUrl,\n      workerUrl\n    });\n\n    // Validate worker URL before creating Worker (security: prevent code injection)\n    let validatedWorkerUrl;\n    try {\n      const workerUrlObj = new URL(workerUrl, window.location.href);\n\n      // Security check: Worker must be same-origin\n      if (workerUrlObj.origin !== window.location.origin) {\n        throw new Error(\n          `Worker URL must be same-origin. Expected: ${window.location.origin}, Got: ${workerUrlObj.origin}`\n        );\n      }\n\n      // Security check: Worker URL must end with expected filename\n      if (!workerUrlObj.pathname.endsWith('webm-worker.js')) {\n        throw new Error(\n          `Invalid worker URL pattern. Expected path ending with 'webm-worker.js', Got: ${workerUrlObj.pathname}`\n        );\n      }\n\n      validatedWorkerUrl = workerUrlObj.href;\n    } catch (error) {\n      throw new Error(\n        `Worker URL validation failed: ${error.message}\\n` +\n                `Provided URL: ${workerUrl}`\n      );\n    }\n\n    // Create worker from wrapper file (provides CommonJS shim)\n    // The wrapper loads webm-worker.js with importScripts() after setting up exports/module\n    const wrapperUrl = validatedWorkerUrl.replace('webm-worker.js', 'webm-worker-wrapper.js');\n    try {\n      console.log('[WebM Encoder] Creating worker from wrapper:', wrapperUrl);\n      this.worker = new Worker(wrapperUrl);\n    } catch (error) {\n      throw new Error(\n        'Failed to create WebM worker. Make sure vendor/webm/ files are deployed alongside the plugin.\\n' +\n                `Worker URL: ${wrapperUrl}\\n` +\n                `Error: ${error.message}`\n      );\n    }\n\n    // Setup message handler\n    this.worker.onmessage = (e) => {\n      // Log what we receive (less verbose for chunks)\n      if (e.data instanceof ArrayBuffer) {\n        console.log(`[WebM Encoder] Chunk received: ${e.data.byteLength} bytes (total: ${this.videoChunks.length + 1})`);\n      } else {\n        console.log('[WebM Encoder] Worker message:',\n          typeof e.data === 'object' ? JSON.stringify(e.data) : e.data);\n      }\n\n      if (e.data instanceof ArrayBuffer) {\n        // Realtime mode: multiple chunks sent progressively\n        // Non-realtime mode: single complete video sent at end\n        this.videoChunks.push(e.data);\n        console.log(`[WebM Encoder] Collected chunk ${this.videoChunks.length}: ${e.data.byteLength} bytes`);\n\n        // In non-realtime mode, this single ArrayBuffer is the complete video\n        // Resolve immediately if we're waiting in end()\n        if (!this.realtimeMode && this.resolveEnd) {\n          console.log('[WebM Encoder] Non-realtime mode: received final video');\n          this.resolveEnd(e.data);\n          this.resolveEnd = null;\n        }\n      } else if (e.data === 'ready' || e.data === 'READY') {\n        console.log('[WebM Encoder] Worker ready');\n        // Call ready callback if set (during initialization)\n        if (this.resolveReady) {\n          this.resolveReady();\n          this.resolveReady = null;\n        }\n      } else if (e.data === null || e.data === undefined) {\n        // Realtime mode: null signals end of encoding, concatenate all chunks\n        console.log('[WebM Encoder] End signal (null) received - finalizing video');\n\n        // If we're waiting in end(), resolve now\n        if (this.resolveEnd) {\n          console.log(`[WebM Encoder] Realtime mode: concatenating ${this.videoChunks.length} chunks...`);\n\n          // Calculate total size\n          const totalSize = this.videoChunks.reduce((sum, chunk) => sum + chunk.byteLength, 0);\n          console.log(`[WebM Encoder] Total size: ${totalSize} bytes`);\n\n          // Concatenate all chunks into final video\n          const finalVideo = new Uint8Array(totalSize);\n          let offset = 0;\n          for (const chunk of this.videoChunks) {\n            finalVideo.set(new Uint8Array(chunk), offset);\n            offset += chunk.byteLength;\n          }\n\n          console.log(`[WebM Encoder] Video finalized: ${finalVideo.byteLength} bytes`);\n          this.resolveEnd(finalVideo.buffer);\n          this.resolveEnd = null;\n        }\n      } else if (typeof e.data === 'object' && e.data.error) {\n        console.error('[WebM Encoder] Worker error:', e.data.error);\n        if (this.resolveEnd) {\n          this.resolveEnd(null);\n          this.resolveEnd = null;\n        }\n      } else {\n        console.log('[WebM Encoder] Unexpected worker message:', e.data);\n      }\n    };\n\n    // Setup error handler\n    this.worker.onerror = (error) => {\n      console.error('[WebM Encoder] Worker error:', error);\n      if (this.resolveEnd) {\n        this.resolveEnd(null); // Signal error\n        this.resolveEnd = null;\n      }\n    };\n\n    // Send WASM path to worker\n    console.log('[WebM Encoder] Sending WASM path to worker');\n    this.worker.postMessage(wasmUrl);\n\n    // Wait for worker to be ready\n    await new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        this.resolveReady = null;\n        reject(new Error(\n          'WebM worker initialization timeout. ' +\n                    'Make sure vendor/webm/ files are correctly deployed.'\n        ));\n      }, 30000); // 30 seconds timeout\n\n      // Set the callback that will be called when 'ready' message is received\n      this.resolveReady = () => {\n        clearTimeout(timeout);\n        resolve();\n      };\n    });\n\n    // Send encoder configuration (webm-wasm expects exactly: width, height, bitrate, realtime)\n    console.log('[WebM Encoder] Configuring encoder');\n    const config = {\n      width,\n      height,\n      bitrate, // bitrate in kbps\n      realtime // Realtime mode: false = high quality (slower), true = fast encoding\n    };\n    console.log('[WebM Encoder] Configuration:', config);\n    this.worker.postMessage(config);\n\n    // Wait a bit for the worker to process the configuration\n    await new Promise(resolve => setTimeout(resolve, 100));\n\n    console.log('[WebM Encoder] Initialization complete, ready to receive frames');\n    return this;\n  }\n\n  /**\n     * Add an RGBA frame to the video\n     * @param {Uint8Array} rgbaBuffer - RGBA pixel data (width * height * 4 bytes)\n     */\n  addFrame(rgbaBuffer) {\n    this.frameCount++;\n    if (this.frameCount % 30 === 0) {\n      console.log(`[WebM Encoder] Encoding frame ${this.frameCount}`);\n    }\n\n    // Debug first frame\n    if (this.frameCount === 1) {\n      console.log(`[WebM Encoder] First frame - buffer size: ${rgbaBuffer.byteLength} bytes`);\n    }\n\n    // IMPORTANT: webm-wasm expects ArrayBuffer, not Uint8Array\n    // AND it needs to be transferred properly\n    // Create a new ArrayBuffer and copy the data\n    const buffer = new ArrayBuffer(rgbaBuffer.byteLength);\n    const view = new Uint8Array(buffer);\n    view.set(rgbaBuffer);\n\n    // Send the ArrayBuffer WITHOUT transfer (copy instead)\n    // This avoids potential issues with worker message queue blocking\n    this.worker.postMessage(buffer);\n  }\n\n  /**\n     * Finalize encoding and get the WebM file\n     * @returns {Promise<ArrayBuffer>} The complete WebM video data\n     */\n  async end() {\n    console.log(`[WebM Encoder] Finalizing encoding (${this.frameCount} total frames, ${this.videoChunks.length} chunks collected so far)`);\n\n    // Signal end of stream to worker\n    console.log('[WebM Encoder] Sending null to signal end of stream');\n    try {\n      this.worker.postMessage(null);\n    } catch (error) {\n      console.error('[WebM Encoder] Error sending null:', error);\n      return Promise.reject(new Error('Failed to signal end of stream'));\n    }\n\n    // Wait for worker to send the final null signal\n    return new Promise((resolve, reject) => {\n      // Set timeout - give more time for large videos\n      const timeout = setTimeout(() => {\n        console.error('[WebM Encoder] Timeout waiting for end signal from worker');\n        console.error(`[WebM Encoder] Chunks collected: ${this.videoChunks.length}`);\n        reject(new Error('WebM encoding failed - timeout waiting for end signal'));\n      }, 30000); // 30 seconds timeout for large videos\n\n      // Set the resolver that will be called when null is received\n      this.resolveEnd = (videoData) => {\n        clearTimeout(timeout);\n        if (videoData) {\n          console.log(`[WebM Encoder] Successfully finalized video: ${videoData.byteLength} bytes`);\n          resolve(videoData);\n        } else {\n          reject(new Error('WebM encoding failed - no video data'));\n        }\n      };\n    });\n  }\n\n  /**\n     * Cleanup and terminate the worker\n     */\n  destroy() {\n    console.log('[WebM Encoder] Destroying encoder');\n    if (this.worker) {\n      this.worker.terminate();\n      this.worker = null;\n    }\n    this.videoChunks = [];\n    this.resolveEnd = null;\n    this.frameCount = 0;\n  }\n}\n","/**\n * MapLibre GL Video Export Plugin\n *\n * Main entry point for the video export control\n */\n\n// @ts-check - Enable TypeScript checking for this file\n/* global maplibregl, __VERSION__ */\n\n/**\n * @callback AnimationFunction\n * @param {any} map - MapLibre map instance\n * @param {any} control - VideoExportControl instance\n * @param {VideoExportOptions} options - Export options\n * @param {any} [director] - AnimationDirector instance (optional)\n * @returns {Promise<any>}\n */\n\n/**\n * @callback AnimationWithSetup\n * @param {any} map - MapLibre map instance\n * @param {any} control - VideoExportControl instance\n * @param {VideoExportOptions} options - Export options\n * @returns {{ setup: Function, animation: Function, supportsExploration: boolean }}\n */\n\n/**\n * Helper to cast EventTarget to HTMLInputElement\n * @param {EventTarget | null} target\n * @returns {HTMLInputElement | null}\n */\n/**\n * @typedef {Object} VideoExportOptions\n * @property {Object|null} [resolution] - Video resolution\n * @property {number} [fps] - Frames per second\n * @property {number} [bitrate] - Video bitrate\n * @property {number} [speedMultiplier] - Animation speed multiplier\n * @property {boolean} [waitForTiles] - Wait for tiles to load\n * @property {string} [position] - Control position on map\n * @property {boolean} [collapsed] - Start collapsed\n * @property {string} [compactPosition] - Compact mode position\n * @property {string|Function} [animation] - Animation type or function\n * @property {number} [duration] - Animation duration in ms\n * @property {boolean|string} [loop] - Loop mode\n * @property {boolean} [explorationLimitEnabled] - Enable exploration duration limit\n * @property {number} [explorationMaxDuration] - Maximum exploration duration in ms\n * @property {any[]|null} [maxBounds] - Geographic bounds\n * @property {number|null} [minZoom] - Minimum zoom level\n * @property {number|null} [maxZoom] - Maximum zoom level\n * @property {boolean} [strictBounds] - Strict bounds enforcement\n * @property {boolean} [showBoundsOverlay] - Show bounds overlay\n * @property {any} [waypoints] - Animation waypoints (GeoJSON FeatureCollection)\n * @property {string} [format] - Video format (webm/mp4)\n * @property {string} [encoderPath] - Path to encoder\n * @property {string} [encoderCdn] - CDN URL for encoder\n * @property {Function} [onStart] - Start callback\n * @property {Function} [onProgress] - Progress callback\n * @property {Function} [onComplete] - Complete callback\n * @property {Function} [onError] - Error callback\n */\n\n// Import modules\nimport { AnimationConstraints, AnimationDirector, PresetAnimations } from './animations.js';\nimport { AnimationController } from './controller.js';\nimport { WebmEncoderWrapper } from './webm-encoder-wrapper.js';\n\nconst asInput = (target) => /** @type {HTMLInputElement | null} */(target);\n\n/**\n * Helper to cast EventTarget to HTMLSelectElement\n * @param {EventTarget | null} target\n * @returns {HTMLSelectElement | null}\n */\nconst asSelect = (target) => /** @type {HTMLSelectElement | null} */(target);\n\n/**\n * Helper to cast Element to HTMLElement\n * @param {Element | null} element\n * @returns {HTMLElement | null}\n */\nconst asHTMLElement = (element) => /** @type {HTMLElement | null} */(element);\n\n/**\n * Helper to cast Element to HTMLButtonElement\n * @param {Element | null} element\n * @returns {HTMLButtonElement | null}\n */\nconst asButton = (element) => /** @type {HTMLButtonElement | null} */(element);\n\n// ============================================================================\n\n// CDN URLs for dependencies (using jsDelivr for better CORS support)\nconst MP4_ENCODER_CDN = 'https://unpkg.com/mp4-h264@1.0.7/build/';\nconst WASM_FEATURE_DETECT_URL = 'https://unpkg.com/wasm-feature-detect?module';\n\n// Auto-detect plugin directory from import.meta.url\n// e.g. if plugin is at /js/video-export/index.js, pluginDir will be /js/video-export/\nconst getPluginDirectory = () => {\n  try {\n    const url = new URL(import.meta.url);\n    const path = url.pathname;\n    return path.substring(0, path.lastIndexOf('/') + 1);\n  } catch (e) {\n    return null;\n  }\n};\n\n// Detect if VP9 is supported in this browser\nconst isVP9Supported = () => {\n  return typeof VideoEncoder !== 'undefined' &&\n           typeof VideoFrame !== 'undefined';\n};\n\n// Get default format based on browser capabilities\nconst getDefaultFormat = () => {\n  if (isVP9Supported()) {\n    console.log('‚úì VP9 supported - using VP9 as default format (better quality/compression)');\n    return 'webm-vp9';\n  }\n  console.log('‚úì VP9 not available - using VP8 as default format');\n  return 'webm-vp8';\n};\n\n/**\n * Animation profiles with metadata\n * Structure: { key: { label, supportsExploration, group, requires, func } }\n *\n * requires: Array of capability names that this animation needs to work properly\n * Optional capabilities can be prefixed with '?' to indicate they enhance but aren't required\n */\nconst ANIMATION_PROFILES = {\n  // üß† Auto\n  smart: {\n    label: 'üß† Smart (Try to auto-detect map features)',\n    description: 'Animation that adapts to your map. Visits all waypoints if present, otherwise creates a dynamic tour based on detected features (roads, water, terrain).',\n    supportsExploration: false,\n    group: 'auto',\n    requires: [], // Smart adapts to whatever is available\n    /** @type {AnimationFunction} */\n    func: (map, control, options, director) => director.createAdaptiveAnimation(control, options)\n  },\n\n  // ‚ü≥ Seamless Loops ready\n  orbit: {\n    label: 'üîÑ 360¬∞ Orbit',\n    description: 'Smooth circular rotation around the center point. Perfect for creating seamless looping videos of a location from all angles.',\n    supportsExploration: false,\n    group: 'loops',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({\n      animation: async (m, callbacks, opts) => PresetAnimations.orbit360(m, callbacks, opts)\n    })\n  },\n  pulse: {\n    label: 'üíì Zoom Pulse',\n    description: 'Rhythmic zoom in and out from the center. Creates a breathing effect that draws attention to a specific area.',\n    supportsExploration: false,\n    group: 'loops',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({\n      animation: async (m, callbacks, opts) => PresetAnimations.zoomPulse(m, callbacks, opts)\n    })\n  },\n  orbitZoom: {\n    label: 'üåç Orbit Zoom',\n    description: 'Combines orbital rotation with gradual zoom. Reveals the location from wide view to close-up while circling around.',\n    supportsExploration: false,\n    group: 'loops',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({\n      animation: async (m, callbacks, opts) => PresetAnimations.orbitZoom(m, callbacks, opts)\n    })\n  },\n  waveMotion: {\n    label: 'üåä Wave Motion',\n    description: 'Flowing side-to-side motion with smooth camera movement. Especially effective for coastal areas and waterways.',\n    supportsExploration: false,\n    group: 'loops',\n    requires: ['?hasWater'], // Better with water\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({\n      animation: async (m, callbacks, opts) => PresetAnimations.waveMotion(m, callbacks, opts)\n    })\n  },\n  pendulum: {\n    label: '‚è±Ô∏è Pendulum',\n    description: 'Gentle swing motion back and forth. Creates a contemplative, hypnotic effect ideal for atmospheric backgrounds.',\n    supportsExploration: false,\n    group: 'loops',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({\n      animation: async (m, callbacks, opts) => PresetAnimations.pendulum(m, callbacks, opts)\n    })\n  },\n\n  // üé¨ Cinematic & POI\n  neighborhood: {\n    label: 'üèòÔ∏è Neighborhood Explorer',\n    description: 'Explores a neighborhood area with multiple perspectives and angles. Ideal for showcasing residential areas, community spaces, and local amenities.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: ['?hasPlaces', '?hasRoads'], // Better with places and roads\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.neighborhood(m, callbacks, opts) })\n  },\n  property: {\n    label: 'üè° Property Showcase',\n    description: 'Professional real estate presentation that circles around a property with strategic viewpoints. Perfect for property listings and architectural showcases.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: ['?has3DBuildings'], // Better with 3D buildings\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.propertyShowcase(m, callbacks, opts) })\n  },\n  explore: {\n    label: 'üß≠ Explore Around',\n    description: 'Dynamic exploration that moves through and around the area in all directions. Great for discovering locations and showing spatial relationships.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.exploreAround(m, callbacks, opts) })\n  },\n  panorama: {\n    label: 'üì∑ Panoramic Sweep',\n    description: 'Smooth horizontal sweep across the landscape. Captures wide vistas and creates a cinematic establishing shot effect.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.panorama(m, callbacks, opts) })\n  },\n  aerial: {\n    label: 'üöÅ Aerial Sweep',\n    description: 'High-altitude sweep with bird\\'s eye perspective. Excellent for showing large areas, urban layouts, and geographic context.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.aerialSweep(m, callbacks, opts) })\n  },\n  droneShot: {\n    label: 'üõ∏ Drone Shot',\n    description: 'Simulates professional drone cinematography with ascending and descending movements. Creates dramatic reveals and dynamic perspectives.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.droneShot(m, callbacks, opts) })\n  },\n  terrainFollowing: {\n    label: 'üèîÔ∏è Terrain Following',\n    description: 'Follows the natural contours of the landscape at low altitude. Spectacular for mountainous regions, valleys, and dramatic topography.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: ['?hasTerrain', '?hasHillshade'], // Better with terrain\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.terrainFollowing(m, callbacks, opts) })\n  },\n  spotlightScan: {\n    label: 'üî¶ Spotlight Scan',\n    description: 'Systematic scanning movement that reveals the area section by section. Perfect for methodical exploration and attention-grabbing presentations.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.spotlightScan(m, callbacks, opts) })\n  },\n  butterfly: {\n    label: 'ü¶ã Butterfly',\n    description: 'Graceful figure-8 pattern with smooth flowing movements. Creates an elegant, organic feel ideal for natural landscapes and parks.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.butterfly(m, callbacks, opts) })\n  },\n  figure8: {\n    label: '‚àû Figure-8',\n    description: 'Classic infinity-shaped path around two focal points. Versatile pattern that works well for comparing two areas or showing connections.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.figure8(m, callbacks, opts) })\n  },\n  spiral: {\n    label: 'üåÄ Spiral Zoom',\n    description: 'Spiraling motion while zooming in or out. Creates hypnotic, attention-drawing effect perfect for dramatic openings or closings.',\n    supportsExploration: false,\n    group: 'cinematic',\n    requires: [],\n    /** @type {AnimationFunction} */\n    func: (_map, _control, _options) => ({ animation: async (m, callbacks, opts) => PresetAnimations.spiralZoom(m, callbacks, opts) })\n  },\n\n  // üõ£Ô∏è Road Following (exploration-capable)\n  tractorRoadTrip: {\n    label: 'üöú Tractor Road Trip',\n    description: 'Leisurely journey along roads at tractor speed with smooth curves. Perfect for rural routes, countryside tours, and relaxed explorations.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.tractorRoadTrip(map, control, options)\n  },\n  carRoadTrip: {\n    label: 'üöó Car Road Trip',\n    description: 'Moderate-speed road journey that follows streets and highways naturally. Great for urban navigation and everyday road perspectives.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.carRoadTrip(map, control, options)\n  },\n  sportsCarRace: {\n    label: 'üèéÔ∏è Sports Car Race',\n    description: 'High-speed chase along roads with dynamic banking angles. Thrilling and fast-paced for action-oriented presentations.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.sportsCarRace(map, control, options)\n  },\n  trainRide: {\n    label: 'üöÇ Train Ride',\n    description: 'Follows railway tracks at steady train speed with authentic rail perspective. Requires railways on the map.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRailways'], // REQUIRES railways\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.trainRide(map, control, options)\n  },\n  speedboat: {\n    label: 'üö§ Speedboat',\n    description: 'Fast-paced journey along waterways with dynamic low angle. Exciting for rivers, canals, and coastal routes.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasWaterways'], // REQUIRES waterways\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.speedboat(map, control, options)\n  },\n  sailboat: {\n    label: '‚õµ Sailboat',\n    description: 'Graceful navigation across water bodies at sailing speed. Peaceful and scenic for lakes, bays, and open water.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasWater'], // REQUIRES water bodies\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.sailboat(map, control, options)\n  },\n  cruiseShip: {\n    label: 'üõ•Ô∏è Cruise Ship',\n    description: 'Stately movement across large water bodies with elevated viewpoint. Majestic perspective for oceans, large lakes, and harbors.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasWater'], // REQUIRES water bodies\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.cruiseShip(map, control, options)\n  },\n  droneFollow: {\n    label: 'üõ∏ Drone Follow',\n    description: 'Aerial tracking that follows roads from above with varying altitude. Modern perspective for documenting routes and infrastructure.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.droneFollow(map, control, options)\n  },\n  helicopterTour: {\n    label: 'üöÅ Helicopter Tour',\n    description: 'High-altitude road following with sweeping movements and wide views. Professional aerial tour perspective.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.helicopterTour(map, control, options)\n  },\n  birdsEyeRoad: {\n    label: 'ü¶Ö Bird\\'s Eye Road',\n    description: 'Top-down road following that maintains vertical perspective. Ideal for showing route patterns and spatial relationships.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (map, control, options) => PresetAnimations.birdsEyeRoad(map, control, options)\n  },\n  planeFlight: {\n    label: '‚úàÔ∏è Plane Flight',\n    description: 'High-altitude journey with plane-like speed and perspective. Covers large distances quickly for regional overviews.',\n    supportsExploration: true,\n    group: 'road',\n    requires: ['hasRoads'], // REQUIRES roads\n    /** @type {AnimationWithSetup} */\n    func: (_map, _control, options) => ({ animation: async (m, callbacks) => PresetAnimations.waypointTour(m, callbacks, options) })\n  },\n\n  // üéØ Waypoint Tour\n  waypointTour: {\n    label: 'üó∫Ô∏è Visit All Waypoints',\n    description: 'Travels through your custom waypoints in order with smooth transitions. Perfect for guided tours, storytelling, and showcasing specific locations in sequence.',\n    supportsExploration: false,\n    group: 'waypoint',\n    requires: [], // Works with user-provided waypoints\n    /** @type {AnimationFunction} */\n    func: (_map, _control, options) => ({ animation: async (m, callbacks) => PresetAnimations.waypointTour(m, callbacks, options) })\n  }\n};\n\n// Group labels for the dropdown\nconst ANIMATION_GROUPS = {\n  auto: 'üß† Auto',\n  loops: '‚ü≥ Seamless Loops ready',\n  cinematic: 'üé¨ Cinematic & POI',\n  road: 'üõ£Ô∏è Road Following',\n  waypoint: 'üéØ Waypoint Tour'\n};\n\n/**\n * @class VideoExportControl\n * @property {string} _waypointsLayerId - MapLibre layer ID for waypoints\n * @property {string} _waypointsSourceId - MapLibre source ID for waypoints\n */\nclass VideoExportControl {\n  // Default settings for all inputs\n  static DEFAULT_SETTINGS = {\n    // Video settings\n    've-resolution': 'auto',\n    've-cinematic-bars': 'none',\n    've-duration': '30',\n    've-speed': '1',\n    've-fps': 60,\n    've-format': 'webm-vp9',\n    've-bitrate': 'auto',\n    've-wait-tiles': true,\n    've-format-advanced-toggle': false,\n\n    // Animation\n    've-animation': 'smart',\n    've-loop': 'false',\n    've-show-labels-toggle': false,\n    've-icon-size-slider': 1.0,\n\n    // Constraints\n    've-bounds-west': '',\n    've-bounds-east': '',\n    've-bounds-south': '',\n    've-bounds-north': '',\n    've-zoom-min': '',\n    've-zoom-max': '',\n    've-strict-bounds': false,\n    've-show-bounds': true,\n\n    // Format-specific settings\n    've-mp4-speed': '5',\n    've-mp4-qp': '10,42',\n    've-mp4-gop': '30',\n    've-vp8-bitrate-custom': '',\n    've-vp9-quality': 'high',\n    've-vp9-latency': 'quality',\n    've-vp9-bitrate-mode': 'variable',\n    've-vp9-keyframe': 120,\n    've-vp9-content-hint': ''\n  };\n\n  /**\n     * @param {VideoExportOptions} [options={}] - Configuration options\n     */\n  constructor(options = {}) {\n    this.options = {\n      // Video settings\n      resolution: options.resolution || 'auto', // 'auto', 'fullhd', 'hd', '4k', '8k', or {width, height}\n      fps: options.fps || 60,\n      bitrate: options.bitrate !== undefined ? options.bitrate : 'auto', // 'auto' or kbps value\n      speedMultiplier: options.speedMultiplier || 1, // Animation speed multiplier (1 = real-time)\n      waitForTiles: options.waitForTiles !== undefined ? options.waitForTiles : true, // Wait for tiles to load before each frame\n\n      // UI settings\n      position: options.position || 'top-left',\n      collapsed: options.collapsed !== false,\n      compactPosition: options.compactPosition || 'top-left', // Position when in compact mode: 'top-left', 'top-right', 'bottom-left', 'bottom-right'\n\n      // Animation\n      animation: options.animation || 'smart', // 'smart', 'orbit', 'pulse', or function\n      duration: options.duration || 30000, // Total animation duration in ms\n      loop: options.loop || false, // false, true/'instant', or 'smooth'\n\n      // Exploration limits\n      explorationLimitEnabled: options.explorationLimitEnabled !== undefined ? options.explorationLimitEnabled : false, // Enable/disable exploration duration limit\n      explorationMaxDuration: options.explorationMaxDuration || 300000, // Maximum exploration duration in ms (default: 5 minutes)\n\n      // Geographic constraints\n      maxBounds: options.maxBounds || null, // [[west, south], [east, north]] or LngLatBounds\n      minZoom: options.minZoom !== undefined ? options.minZoom : null, // Minimum zoom level (null = no limit)\n      maxZoom: options.maxZoom !== undefined ? options.maxZoom : null, // Maximum zoom level (null = no limit)\n      strictBounds: options.strictBounds || false, // If true, strictly enforce bounds (no partial view outside)\n      showBoundsOverlay: options.showBoundsOverlay !== undefined ? options.showBoundsOverlay : false, // Show visual bounds on map\n\n      // Waypoints (Points of Interest)\n      waypoints: options.waypoints || null, // Array of waypoint objects [{center: [lng, lat], zoom, duration, bearing, pitch, name, icon}]\n\n      // Video format - auto-detects VP9 support and uses it by default for better quality\n      format: options.format || getDefaultFormat(), // 'webm-vp8', 'webm-vp9' (default if supported), or 'mp4'\n\n      // Encoder paths - auto-detects plugin location first, then CDN fallback for MP4\n      encoderPath: options.encoderPath || null, // Custom path (optional)\n      encoderCdn: options.encoderCdn || MP4_ENCODER_CDN, // MP4 CDN fallback\n\n      // Callbacks\n      onStart: options.onStart || (() => {}),\n      onProgress: options.onProgress || (() => {}),\n      onComplete: options.onComplete || (() => {}),\n      onError: options.onError || ((err) => console.error('Video export error:', err))\n    };\n\n    this._map = null;\n    this._container = null;\n    this._animationController = new AnimationController();\n    this._encoder = null;\n    this._encoderLoaded = false;\n\n    // Waypoint icons from map sprite\n    /** @type {any[]} */\n    this._spriteIcons = [];\n    /** @type {any[]} */\n    this._waypointMarkers = []; // Array of maplibregl.Marker instances (draggable)\n    this._isRecording = false; // Flag to prevent marker recreation during recording\n    this._savedWaypointsVisibility = undefined; // Saved state during recording\n    this._waypointsLayerId = 've-waypoints-recording-layer'; // MapLibre layer ID for waypoints\n    this._waypointsSourceId = 've-waypoints-recording-source'; // MapLibre source ID for waypoints\n\n    // Initialize waypoints as GeoJSON FeatureCollection\n    if (!this.options.waypoints || !(this.options.waypoints).type) {\n      /** @type {any} */\n      this.options.waypoints = this._loadWaypoints();\n    }\n\n    // Sprite visual data\n    this._spriteImage = null; // PNG image complete\n    this._spriteData = null; // JSON metadata\n    this._spritePngUrl = null; // URL du sprite PNG pour CSS background-image\n\n    // Icon size multiplier for waypoints on map\n    this._iconSize = 1.0; // Default size multiplier\n\n    // Font management for waypoint labels\n    /** @type {string[]} */\n    this._availableFonts = []; // List of available fonts from fontstacks.json\n    this._selectedFont = null; // Currently selected font\n    this._showWaypointLabels = false; // Whether to show text labels on waypoints (default: icons only)\n\n    // Recording time tracking for ETA\n    this._recordingStartTime = null;\n  }\n\n  onAdd(map) {\n    this._map = map;\n\n    // Check MapLibre GL JS version for timeControl API support\n    this._checkMapLibreVersion();\n    this._container = document.createElement('div');\n    this._container.className = 'maplibregl-ctrl maplibre-gl-video-export-ctrl';\n\n    this._createUI();\n    // Encoder loaded on-demand when recording starts\n\n    // Load sprite icons and default waypoint icon when map style is ready\n    if (map.isStyleLoaded()) {\n      console.log('[VideoExport] Map style already loaded, loading sprites and default icon now');\n      this._checkMapCapabilities();\n      this._loadSpriteIcons();\n      this._addDefaultWaypointIcon();\n      // Create waypoints layer if we have waypoints\n      if (this.options.waypoints && this.options.waypoints.features && this.options.waypoints.features.length > 0) {\n        setTimeout(() => {\n          this._createWaypointsLayer();\n          this._createWaypointMarkers();\n          this._updateWaypointsUI();\n        }, 500); // Small delay to ensure sprites are loaded\n      }\n    } else {\n      console.log('[VideoExport] Waiting for map style to load...');\n      map.once('load', () => {\n        console.log('[VideoExport] Map style loaded, loading sprites and default icon now');\n        this._checkMapCapabilities();\n        this._loadSpriteIcons();\n        this._addDefaultWaypointIcon();\n        // Create waypoints layer if we have waypoints\n        if (this.options.waypoints && this.options.waypoints.features && this.options.waypoints.features.length > 0) {\n          setTimeout(() => {\n            this._createWaypointsLayer();\n            this._createWaypointMarkers();\n            this._updateWaypointsUI();\n          }, 500); // Small delay to ensure sprites are loaded\n        }\n      });\n    }\n\n    return this._container;\n  }\n\n  onRemove() {\n    // Cleanup encoder if exists\n    if (this._encoder) {\n      if (this._encoder.destroy) {\n        this._encoder.destroy(); // WebM encoder\n      } else if (this._encoder.delete) {\n        this._encoder.delete(); // MP4 encoder\n      }\n      this._encoder = null;\n    }\n\n    // Remove overlay and panel from map container\n    const mapContainer = this._map?.getContainer();\n    if (mapContainer) {\n      if (this._overlay && this._overlay.parentNode) {\n        this._overlay.parentNode.removeChild(this._overlay);\n      }\n      if (this._panel && this._panel.parentNode) {\n        this._panel.parentNode.removeChild(this._panel);\n      }\n    }\n\n    // Remove control button container\n    if (this._container && this._container.parentNode) {\n      this._container.parentNode.removeChild(this._container);\n    }\n\n    this._overlay = null;\n    this._panel = null;\n    this._container = null;\n    this._map = null;\n  }\n\n  /**\n     * Check MapLibre GL JS version and warn if timeControl API is not available\n     */\n  _checkMapLibreVersion() {\n    // Check if timeControl API is available (added in v5.10.0)\n    // Note: maplibregl.now() is not exported in official v5.10.0 (see https://github.com/maplibre/maplibre-gl-js/issues/6643)\n    // but we need it for animations. Check for the 3 functions that ARE exported.\n    const hasTimeControl = typeof maplibregl !== 'undefined' &&\n                              // @ts-ignore - timeControl API properties may not exist in older versions\n                              typeof maplibregl.setNow === 'function' &&\n                              typeof maplibregl.restoreNow === 'function' &&\n                              typeof maplibregl.isTimeFrozen === 'function';\n\n    if (!hasTimeControl) {\n      // @ts-ignore - version property exists at runtime but not in type definitions\n      const version = this._map && this._map.version ? this._map.version : 'unknown';\n      throw new Error(\n        'MapLibre GL JS v5.10.0 or higher is required for video recording. ' +\n                'The timeControl API (setNow, restoreNow, isTimeFrozen) is missing. ' +\n                'Please upgrade to MapLibre GL JS v5.10.0+. ' +\n                'Current version: ' + version\n      );\n    }\n\n    // Check if now() is available (required for animations but not exported in official v5.10.0)\n    // @ts-ignore\n    const hasNow = typeof maplibregl.now === 'function';\n    if (!hasNow) {\n      // @ts-ignore - version property exists at runtime but not in type definitions\n      const version = this._map && this._map.version ? this._map.version : 'unknown';\n      throw new Error(\n        'MapLibre GL JS with exported now() function is required for vehicle animations. ' +\n                'The official v5.10.0 does not export now() - see https://github.com/maplibre/maplibre-gl-js/issues/6643. ' +\n                'Please use a custom build of MapLibre that exports now() from time_control.ts. ' +\n                'Current version: ' + version\n      );\n    }\n\n    console.log('[VideoExport] ‚úì MapLibre GL JS timeControl API detected (including now())');\n  }\n\n  /**\n     * Generates HTML options for animation dropdown from ANIMATION_PROFILES\n     * @returns {string} HTML string with optgroups and options\n     */\n  _generateAnimationOptions() {\n    const groupedAnimations = {};\n\n    // Group animations by their group property\n    Object.entries(ANIMATION_PROFILES).forEach(([key, profile]) => {\n      if (!groupedAnimations[profile.group]) {\n        groupedAnimations[profile.group] = [];\n      }\n      groupedAnimations[profile.group].push({ key, ...profile });\n    });\n\n    // Generate HTML for each group\n    let html = '';\n    Object.entries(ANIMATION_GROUPS).forEach(([groupKey, groupLabel]) => {\n      if (groupedAnimations[groupKey]) {\n        // Special handling for road group - initially hidden\n        const groupStyle = groupKey === 'road' ? ' style=\"display: none;\"' : '';\n        const groupId = groupKey === 'road' ? ' id=\"ve-road-animations-group\"' : '';\n\n        html += `<optgroup label=\"${groupLabel}\"${groupId}${groupStyle}>`;\n\n        groupedAnimations[groupKey].forEach(anim => {\n          const selected = anim.key === this.options.animation ? ' selected' : '';\n          html += `<option value=\"${anim.key}\"${selected}>&nbsp;&nbsp;${anim.label}</option>`;\n        });\n\n        html += '</optgroup>';\n      }\n    });\n\n    return html;\n  }\n\n  /**\n     * Load settings from localStorage or return defaults\n     * @returns {Object} Settings object\n     */\n  _loadSettings() {\n    const saved = localStorage.getItem('maplibre-video-export-settings');\n    return saved ? JSON.parse(saved) : VideoExportControl.DEFAULT_SETTINGS;\n  }\n\n  /**\n     * Apply settings to UI inputs and trigger change events\n     * Handles smart sequencing for select/custom field pairs using naming convention\n     * @param {Object} settings - Settings object with input IDs as keys\n     */\n  _applySettings(settings) {\n    // First pass: force parent selects to 'custom' when custom values are present\n    Object.entries(settings).forEach(([id, value]) => {\n      // Skip empty/null values\n      if (value === '' || value === undefined || value === null) return;\n\n      // Detect custom fields by naming convention: *-custom\n      if (id.endsWith('-custom')) {\n        // Extract parent select ID\n        // Examples:\n        //   've-speed-custom' ‚Üí 've-speed'\n        //   've-duration-custom' ‚Üí 've-duration'\n        //   've-resolution-width-custom' ‚Üí 've-resolution'\n        //   've-resolution-height-custom' ‚Üí 've-resolution'\n        let parentId = id.replace(/-custom$/, '');\n\n        // Special handling for resolution: remove -width/-height suffixes\n        parentId = parentId.replace(/-(width|height)$/, '');\n\n        // Find and update parent select\n        const selectEl = document.getElementById(parentId);\n        if (selectEl && selectEl.tagName === 'SELECT') {\n          selectEl.value = 'custom';\n        }\n      }\n    });\n\n    // Second pass: apply all values and trigger change events\n    Object.entries(settings).forEach(([id, value]) => {\n      const el = document.getElementById(id);\n      if (!el) return;\n\n      if (el.type === 'checkbox') {\n        el.checked = value;\n      } else {\n        el.value = value;\n      }\n\n      // Trigger change event to update dependent UI elements\n      el.dispatchEvent(new Event('change'));\n    });\n  }\n\n  /**\n     * Save current settings to localStorage\n     * Scans all input/select/textarea elements with IDs starting with \"ve-\"\n     * Only saves -custom values when their parent select is set to 'custom'\n     */\n  _saveSettings() {\n    const settings = {};\n\n    // Scanner uniquement les inputs/selects/textarea avec ID ve-*\n    this._panel.querySelectorAll('input[id^=\"ve-\"], select[id^=\"ve-\"], textarea[id^=\"ve-\"]').forEach(el => {\n      if (el.type === 'checkbox') {\n        settings[el.id] = el.checked;\n      } else if (el.value !== '') {\n        // Si c'est un champ -custom, v√©rifier que le select parent est sur 'custom'\n        if (el.id.endsWith('-custom')) {\n          let parentId = el.id.replace(/-custom$/, '');\n          // Special handling for resolution: remove -width/-height suffixes\n          parentId = parentId.replace(/-(width|height)$/, '');\n          const selectEl = document.getElementById(parentId);\n\n          // Sauvegarder seulement si le parent est sur 'custom'\n          if (selectEl?.value === 'custom') {\n            settings[el.id] = el.value;\n          }\n        } else {\n          settings[el.id] = el.value;\n        }\n      }\n    });\n\n    localStorage.setItem('maplibre-video-export-settings', JSON.stringify(settings));\n  }\n\n  /**\n   * Load waypoints from localStorage or return empty collection\n   * @returns {Object} GeoJSON FeatureCollection\n   */\n  _loadWaypoints() {\n    const saved = localStorage.getItem('maplibre-video-export-waypoints');\n    if (saved) {\n      try {\n        return JSON.parse(saved);\n      } catch (e) {\n        console.warn('[Waypoints] Failed to parse saved waypoints:', e);\n      }\n    }\n    return {\n      type: 'FeatureCollection',\n      features: []\n    };\n  }\n\n  /**\n   * Save waypoints to localStorage\n   */\n  _saveWaypoints() {\n    if (!this.options.waypoints) return;\n    try {\n      localStorage.setItem('maplibre-video-export-waypoints', JSON.stringify(this.options.waypoints));\n      console.log(`[Waypoints] Saved ${this.options.waypoints.features?.length || 0} waypoints to localStorage`);\n    } catch (e) {\n      console.error('[Waypoints] Failed to save waypoints:', e);\n    }\n  }\n\n  /**\n   * Load section collapse states from localStorage\n   * @returns {Object} Section states\n   */\n  _loadSectionStates() {\n    const saved = localStorage.getItem('maplibre-video-export-sections');\n    const defaults = {\n      'video-settings': false, // Open by default\n      movie: false, // Open by default\n      'points-of-interest': true, // Collapsed by default\n      'geographic-constraints': true // Collapsed by default\n    };\n    return saved ? { ...defaults, ...JSON.parse(saved) } : defaults;\n  }\n\n  /**\n   * Save section collapse states to localStorage\n   */\n  _saveSectionStates() {\n    if (!this._sectionStates) return;\n    localStorage.setItem('maplibre-video-export-sections', JSON.stringify(this._sectionStates));\n  }\n\n  /**\n   * Toggle a collapsible section\n   * @param {string} sectionId - Section identifier\n   */\n  _toggleSection(sectionId) {\n    if (!this._sectionStates) this._sectionStates = this._loadSectionStates();\n\n    const header = this._panel?.querySelector(`[data-section=\"${sectionId}\"]`);\n    const content = this._panel?.querySelector(`[data-section-content=\"${sectionId}\"]`);\n    const indicator = header?.querySelector('.section-indicator');\n\n    if (!header || !content) return;\n\n    // Toggle state\n    const isCollapsed = !this._sectionStates[sectionId];\n    this._sectionStates[sectionId] = isCollapsed;\n\n    // Update UI\n    if (content instanceof HTMLElement) {\n      content.style.display = isCollapsed ? 'none' : 'block';\n    }\n    if (indicator) indicator.textContent = isCollapsed ? '‚ñ∂' : '‚ñº';\n\n    // Save to localStorage\n    this._saveSectionStates();\n\n    console.log(`[UI] Section \"${sectionId}\" ${isCollapsed ? 'collapsed' : 'expanded'}`);\n  }\n\n  _collapseSection(sectionId) {\n    if (!this._sectionStates) this._sectionStates = this._loadSectionStates();\n\n    const header = this._panel?.querySelector(`[data-section=\"${sectionId}\"]`);\n    const content = this._panel?.querySelector(`[data-section-content=\"${sectionId}\"]`);\n    const indicator = header?.querySelector('.section-indicator');\n\n    if (!header || !content) return;\n\n    // Force collapse\n    this._sectionStates[sectionId] = true;\n\n    // Update UI\n    if (content instanceof HTMLElement) {\n      content.style.display = 'none';\n    }\n    if (indicator) indicator.textContent = '‚ñ∂';\n\n    // Save to localStorage\n    this._saveSectionStates();\n\n    console.log(`[UI] Section \"${sectionId}\" collapsed`);\n  }\n\n  _createUI() {\n    if (!this._container) return;\n\n    // Button group (like NavigationControl)\n    const group = document.createElement('div');\n    group.className = 'maplibregl-ctrl-group';\n\n    const button = document.createElement('button');\n    button.className = 'maplibregl-ctrl-icon';\n    button.type = 'button';\n    button.title = 'Export Video';\n    button.innerHTML = `\n            <svg width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"2\"/>\n                <path d=\"M10 8l6 4-6 4V8z\" fill=\"currentColor\"/>\n                <circle cx=\"18\" cy=\"6\" r=\"3\" fill=\"#ef4444\" stroke=\"#b91c1c\" stroke-width=\"1\"/>\n            </svg>\n        `;\n\n    button.addEventListener('click', () => this._togglePanel());\n    group.appendChild(button);\n\n    // Create progress widget in ctrl-group\n    this._progressWidget = document.createElement('div');\n    this._progressWidget.className = 'maplibregl-ctrl-progress-widget';\n    this._progressWidget.style.display = 'none';\n    this._progressWidget.innerHTML = `\n            <style>\n                .maplibregl-ctrl-progress-widget {\n                    background: rgba(255, 255, 255, 0.95);\n                    border-radius: 6px;\n                    padding: 12px;\n                    margin-top: 12px;\n                    border: 1px solid rgba(0, 0, 0, 0.1);\n                    font-size: 12px;\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n                    line-height: 1.5;\n                    color: #333;\n                }\n                .maplibregl-ctrl-progress-widget .progress-status {\n                    color: #555;\n                    font-weight: 500;\n                    font-size: 11px;\n                    text-transform: uppercase;\n                    letter-spacing: 0.5px;\n                }\n                .maplibregl-ctrl-progress-widget .progress-percent {\n                    color: #4CAF50;\n                    font-weight: 600;\n                    font-size: 14px;\n                }\n                .maplibregl-ctrl-progress-widget .progress-time {\n                    color: #1976D2;\n                    font-weight: 500;\n                }\n                .maplibregl-ctrl-progress-widget .progress-secondary {\n                    color: #888;\n                }\n                .maplibregl-ctrl-progress-widget .progress-separator {\n                    color: #888;\n                }\n                /* Override MapLibre popup constraints for waypoint popups */\n                .maplibregl-popup-content:has(.ve-waypoint-popup) {\n                    max-width: none !important;\n                    padding: 10px !important;\n                }\n                .maplibregl-popup {\n                    max-width: none !important;\n                }\n                .ve-waypoint-popup {\n                    box-sizing: border-box;\n                }\n                .ve-waypoint-popup h3 {\n                    margin: 0 0 8px 0 !important;\n                }\n\n                @media (prefers-color-scheme: dark) {\n                    .maplibregl-ctrl-progress-widget {\n                        background: rgba(42, 42, 42, 0.95);\n                        color: #e0e0e0;\n                        border-color: rgba(255, 255, 255, 0.1);\n                    }\n                    .maplibregl-ctrl-progress-widget .progress-status {\n                        color: #999;\n                    }\n                }\n            </style>\n            <div style=\"margin-bottom: 3px;\">\n                <span class=\"progress-status\" id=\"ve-progress-status\">Recording</span>\n            </div>\n            <div>\n                <span class=\"progress-percent\" id=\"ve-progress-percent\">0% complete</span>\n                <span class=\"progress-separator\" style=\"margin: 0 4px;\">‚Ä¢</span>\n                <span class=\"progress-secondary\" id=\"ve-progress-frames\">Frame 0 of 0</span>\n            </div>\n            <div style=\"margin-top: 2px; font-size: 11px;\">\n                <span class=\"progress-secondary\" id=\"ve-progress-size\">Size: ~0 MB</span>\n                <span class=\"progress-separator\" style=\"margin: 0 4px;\">‚Ä¢</span>\n                <span class=\"progress-time\" id=\"ve-progress-time\">calculating time...</span>\n            </div>\n            <!-- Final stats summary (hidden during recording, shown at end) -->\n            <div id=\"ve-progress-summary\" style=\"display: none; margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(0,0,0,0.1);\">\n                <div style=\"margin-bottom: 4px;\">\n                    <span class=\"progress-status\">‚úÖ Export Complete</span>\n                </div>\n                <div style=\"font-size: 11px; line-height: 1.6;\">\n                    <div><strong>Video:</strong> <span id=\"ve-summary-video\">-</span></div>\n                    <div><strong>Real time:</strong> <span id=\"ve-summary-realtime\">-</span></div>\n                    <div><strong>Speed:</strong> <span id=\"ve-summary-speed\">-</span></div>\n                    <div><strong>Size:</strong> <span id=\"ve-summary-size\">-</span></div>\n                </div>\n            </div>\n        `;\n    // Don't add to group - will be added to panel instead\n\n    this._container.appendChild(group);\n\n    // Create hidden panel\n    this._panel = document.createElement('div');\n    this._panel.className = 'maplibre-gl-video-export-panel';\n    this._panel.style.display = 'none';\n    this._panel.innerHTML = `\n            <style>\n                /* Invisible overlay to capture clicks outside panel */\n                .maplibre-gl-video-export-overlay {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    z-index: 999;\n                    opacity: 0;\n                    pointer-events: none;\n                }\n\n                .maplibre-gl-video-export-overlay[data-visible=\"true\"] {\n                    opacity: 1;\n                    pointer-events: auto;\n                }\n\n                /* Centered panel within map container */\n                .maplibre-gl-video-export-panel {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, calc(-50% + 20px)) scale(0.95);\n                    background: rgba(255, 255, 255, 0.95);\n                    border-radius: 12px;\n                    box-shadow: 0 8px 32px rgba(0,0,0,0.3);\n                    padding: 20px;\n                    width: 420px;\n                    max-width: 90%;\n                    max-height: 90%;\n                    overflow-y: auto;\n                    z-index: 1000;\n                    opacity: 0;\n                    transition: opacity 0.3s ease-out, transform 0.3s ease-out;\n                    pointer-events: none;\n                    height: auto;\n                }\n\n                .maplibre-gl-video-export-panel[data-visible=\"true\"] {\n                    opacity: 1;\n                    transform: translate(-50%, -50%) scale(1);\n                    pointer-events: auto;\n                }\n\n                /* Compact mode: panel positioning during test/record */\n                .maplibre-gl-video-export-panel.compact-top-left {\n                    top: 10px;\n                    left: 10px;\n                    transform: translate(-20px, -20px) scale(0.95);\n                    min-width: 280px;\n                    max-width: 320px;\n                }\n\n                .maplibre-gl-video-export-panel.compact-top-left[data-visible=\"true\"] {\n                    transform: translate(0, 0) scale(1);\n                }\n\n                .maplibre-gl-video-export-panel.compact-top-right {\n                    top: 10px;\n                    right: 10px;\n                    left: auto;\n                    transform: translate(20px, -20px) scale(0.95);\n                    min-width: 280px;\n                    max-width: 320px;\n                }\n\n                .maplibre-gl-video-export-panel.compact-top-right[data-visible=\"true\"] {\n                    transform: translate(0, 0) scale(1);\n                }\n\n                .maplibre-gl-video-export-panel.compact-bottom-left {\n                    bottom: 10px;\n                    left: 10px;\n                    top: auto;\n                    transform: translate(-20px, 20px) scale(0.95);\n                    min-width: 280px;\n                    max-width: 320px;\n                }\n\n                .maplibre-gl-video-export-panel.compact-bottom-left[data-visible=\"true\"] {\n                    transform: translate(0, 0) scale(1);\n                }\n\n                .maplibre-gl-video-export-panel.compact-bottom-right {\n                    bottom: 10px;\n                    right: 10px;\n                    top: auto;\n                    left: auto;\n                    transform: translate(20px, 20px) scale(0.95);\n                    min-width: 280px;\n                    max-width: 320px;\n                }\n\n                .maplibre-gl-video-export-panel.compact-bottom-right[data-visible=\"true\"] {\n                    transform: translate(0, 0) scale(1);\n                }\n\n                /* Smooth scrollbar for panel content */\n                .maplibre-gl-video-export-panel::-webkit-scrollbar {\n                    width: 8px;\n                }\n\n                .maplibre-gl-video-export-panel::-webkit-scrollbar-track {\n                    background: rgba(0, 0, 0, 0.05);\n                    border-radius: 4px;\n                }\n\n                .maplibre-gl-video-export-panel::-webkit-scrollbar-thumb {\n                    background: rgba(0, 0, 0, 0.2);\n                    border-radius: 4px;\n                }\n\n                .maplibre-gl-video-export-panel::-webkit-scrollbar-thumb:hover {\n                    background: rgba(0, 0, 0, 0.3);\n                }\n\n                @media (prefers-color-scheme: dark) {\n                    .maplibre-gl-video-export-panel {\n                        background: rgba(40, 40, 40, 0.95);\n                        color: #e0e0e0;\n                    }\n                    .maplibre-gl-video-export-panel::-webkit-scrollbar-track {\n                        background: rgba(255, 255, 255, 0.05);\n                    }\n                    .maplibre-gl-video-export-panel::-webkit-scrollbar-thumb {\n                        background: rgba(255, 255, 255, 0.2);\n                    }\n                    .maplibre-gl-video-export-panel::-webkit-scrollbar-thumb:hover {\n                        background: rgba(255, 255, 255, 0.3);\n                    }\n                }\n                .maplibre-gl-video-export-panel h3 {\n                    margin: 0 0 10px 0;\n                    font-size: 14px;\n                    color: #333;\n                }\n                .maplibre-gl-video-export-panel .form-group {\n                    margin-bottom: 10px;\n                }\n                .maplibre-gl-video-export-panel label {\n                    display: block;\n                    font-size: 12px;\n                    margin-bottom: 3px;\n                    color: #666;\n                }\n                .maplibre-gl-video-export-panel select,\n                .maplibre-gl-video-export-panel input[type=\"number\"],\n                .maplibre-gl-video-export-panel input[type=\"text\"] {\n                    width: 100%;\n                    padding: 5px;\n                    border: 1px solid #ddd;\n                    border-radius: 3px;\n                    font-size: 12px;\n                }\n                .maplibre-gl-video-export-panel input[type=\"checkbox\"] {\n                    margin: 0 6px 0 0;\n                    padding: 0;\n                    vertical-align: middle;\n                }\n                .maplibre-gl-video-export-panel label:has(input[type=\"checkbox\"]) {\n                    display: block;\n                    cursor: pointer;\n                    margin-bottom: 5px;\n                    line-height: 1.4;\n                }\n\n                /* Timing Table - Style 2 (Subtle Background) */\n                .ve-timing-table {\n                    width: 100%;\n                    border-collapse: collapse;\n                    border: 1px solid #dee2e6;\n                    border-radius: 4px;\n                    overflow: hidden;\n                }\n                .ve-timing-table th {\n                    font-size: 11px;\n                    font-weight: 500;\n                    padding: 8px 10px;\n                    text-align: left;\n                    background: #f8f9fa;\n                    border-bottom: 1px solid #dee2e6;\n                    color: #495057;\n                }\n                .ve-timing-table td {\n                    padding: 8px 10px;\n                    background: white;\n                }\n                .ve-timing-table th + th,\n                .ve-timing-table td + td {\n                    border-left: 1px solid #dee2e6;\n                }\n                /* Column widths (anti-jumping) */\n                .ve-timing-table th:nth-child(1),\n                .ve-timing-table td:nth-child(1) {\n                    width: 50%;\n                }\n                .ve-timing-table th:nth-child(2),\n                .ve-timing-table td:nth-child(2) {\n                    width: 30%;\n                }\n                .ve-timing-table th:nth-child(3),\n                .ve-timing-table td:nth-child(3) {\n                    width: 20%;\n                }\n                .ve-timing-table select,\n                .ve-timing-table input[type=\"number\"] {\n                    padding: 4px 6px;\n                    font-size: 12px;\n                    border: 1px solid #ccc;\n                    border-radius: 3px;\n                }\n                .ve-timing-table abbr {\n                    text-decoration: none;\n                    border-bottom: 1px dotted #999;\n                    cursor: help;\n                }\n\n                .maplibre-gl-video-export-panel .recording-time-display {\n                    text-align: center;\n                    padding: 10px;\n                    margin-top: 15px;\n                    margin-bottom: 10px;\n                    background: #e3f2fd;\n                    border-radius: 4px;\n                    font-size: 14px;\n                    color: #1976d2;\n                }\n                .maplibre-gl-video-export-panel .button-group {\n                    display: flex;\n                    gap: 10px;\n                }\n                .maplibre-gl-video-export-panel button {\n                    flex: 1;\n                    padding: 8px;\n                    border: none;\n                    border-radius: 4px;\n                    font-size: 12px;\n                    cursor: pointer;\n                    transition: background 0.2s;\n                    min-height: 36px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n                .maplibre-gl-video-export-panel .btn-primary {\n                    background: #3887be;\n                    color: white;\n                }\n                .maplibre-gl-video-export-panel .btn-primary:hover {\n                    background: #2e7bb3;\n                }\n                .maplibre-gl-video-export-panel .btn-secondary {\n                    background: #f0f0f0;\n                    color: #333;\n                }\n                .maplibre-gl-video-export-panel .btn-secondary:hover {\n                    background: #e0e0e0;\n                }\n                .maplibre-gl-video-export-panel .btn-compact {\n                    padding: 6px !important; /* Smaller buttons for compact areas */\n                    font-size: 11px;\n                }\n                .maplibre-gl-video-export-panel .btn-mini {\n                    padding: 4px !important; /* Mini buttons for tight spaces */\n                    font-size: 11px;\n                }\n                .maplibre-gl-video-export-panel .status {\n                    margin-top: 10px;\n                    padding: 8px;\n                    background: #f0f0f0;\n                    border-radius: 3px;\n                    font-size: 11px;\n                    text-align: center;\n                    color: #666;\n                }\n                .maplibre-gl-video-export-ctrl > .maplibregl-ctrl-group {\n                    border-bottom-right-radius: unset;\n                    border-bottom-left-radius: unset;\n                }\n                .maplibre-gl-video-export-panel .status.recording {\n                    background: #ffebee;\n                    color: #c62828;\n                    animation: pulse 1s infinite;\n                }\n                .maplibre-gl-video-export-panel .status.success {\n                    background: #e8f5e9;\n                    color: #2e7d32;\n                }\n                .maplibre-gl-video-export-panel .status.error {\n                    background: #ffebee;\n                    color: #c62828;\n                }\n                small {\n                    font-size: 0.9em;\n                }\n                @keyframes pulse {\n                    0%, 100% { opacity: 1; }\n                    50% { opacity: 0.7; }\n                }\n\n                /* Dark mode support */\n                @media (prefers-color-scheme: dark) {\n                    /* Control group and button dark mode */\n                    .maplibre-gl-video-export-ctrl .maplibregl-ctrl-group {\n                        background: #2d2d2d;\n                    }\n                    .maplibre-gl-video-export-ctrl .maplibregl-ctrl-group button {\n                        background: transparent;\n                        border: none;\n                        color: #e0e0e0;  /* currentColor h√©rite de cette couleur */\n                    }\n                    .maplibre-gl-video-export-ctrl .maplibregl-ctrl-group button:hover {\n                        background: rgba(255, 255, 255, 0.1);\n                    }\n\n                    /* Panel dark mode */\n                    .maplibre-gl-video-export-panel {\n                        background: #2d2d2d;\n                        box-shadow: 0 2px 8px rgba(0,0,0,0.5);\n                    }\n                    .maplibre-gl-video-export-panel h3 {\n                        color: #e0e0e0;\n                    }\n                    .maplibre-gl-video-export-panel label {\n                        color: #b0b0b0;\n                    }\n                    .maplibre-gl-video-export-panel select,\n                    .maplibre-gl-video-export-panel input {\n                        background: #3d3d3d;\n                        border: 1px solid #555;\n                        color: #e0e0e0;\n                    }\n                    .maplibre-gl-video-export-panel select option {\n                        background: #3d3d3d;\n                        color: #e0e0e0;\n                    }\n                    .maplibre-gl-video-export-panel .btn-secondary {\n                        background: #3d3d3d;\n                        color: #e0e0e0;\n                    }\n                    .maplibre-gl-video-export-panel .btn-secondary:hover {\n                        background: #4d4d4d;\n                    }\n                    .maplibre-gl-video-export-panel .status {\n                        background: #3d3d3d;\n                        color: #b0b0b0;\n                    }\n                    .maplibre-gl-video-export-panel .status.recording {\n                        background: #4d2020;\n                        color: #ff8a80;\n                    }\n                    .maplibre-gl-video-export-panel .status.success {\n                        background: #1b4d1b;\n                        color: #81c784;\n                    }\n                    .maplibre-gl-video-export-panel .status.error {\n                        background: #4d2020;\n                        color: #ff8a80;\n                    }\n                    .maplibre-gl-video-export-panel small {\n                        color: #888 !important;\n                    }\n                    .maplibre-gl-video-export-panel .recording-time-display {\n                        background: #1e3a5f;\n                        color: #64b5f6;\n                    }\n                    /* Additional dark mode support for waypoints */\n                    .ve-waypoint-item {\n                        background: #2a2a2a !important;\n                        color: #e0e0e0 !important;\n                    }\n                    #ve-icon-size-control {\n                        background: rgba(42, 42, 42, 0.8) !important;\n                    }\n                    #ve-waypoint-editor {\n                        border-top-color: #444 !important;\n                    }\n                    #ve-icon-preview {\n                        background: #333 !important;\n                        border-color: #444 !important;\n                    }\n                    #ve-waypoints-list {\n                        background: transparent !important;\n                    }\n                    .ve-wp-edit {\n                        background: #1a5490 !important;\n                    }\n                    .ve-wp-delete {\n                        background: #aa3333 !important;\n                    }\n                    #ve-wp-save {\n                        background: #2a6b2a !important;\n                    }\n                    #ve-icon-size-value {\n                        color: #b0b0b0 !important;\n                    }\n                    /* Section groups dark mode */\n                    #ve-video-settings-group,\n                    #ve-movie-group,\n                    #ve-waypoints-group,\n                    #ve-constraints-group {\n                        background: rgba(255, 255, 255, 0.03) !important;\n                        border-color: #444 !important;\n                        box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important;\n                    }\n                    #ve-waypoints-group > div:first-child span {\n                        color: #b0b0b0 !important;\n                    }\n                    #ve-waypoints-group > div:first-child {\n                        border-bottom-color: rgba(255,255,255,0.1) !important;\n                    }\n                    #ve-constraints-group > div:first-child span {\n                        color: #b0b0b0 !important;\n                    }\n                    #ve-constraints-group > div:first-child {\n                        border-bottom-color: rgba(255,255,255,0.1) !important;\n                    }\n                    /* Timing table dark mode */\n                    .ve-timing-table {\n                        border-color: #444;\n                    }\n                    .ve-timing-table th {\n                        background: #3d3d3d;\n                        border-bottom-color: #444;\n                        color: #b0b0b0;\n                    }\n                    .ve-timing-table td {\n                        background: #2a2a2a;\n                    }\n                    .ve-timing-table th + th,\n                    .ve-timing-table td + td {\n                        border-left-color: #444;\n                    }\n                    #ve-real-time {\n                        color: #888 !important;\n                    }\n                    /* Waypoint popup dark mode */\n                    .maplibregl-popup-content {\n                        background: #2d2d2d !important;\n                        color: #e0e0e0 !important;\n                    }\n                    .maplibregl-popup-content h3 {\n                        color: #e0e0e0 !important;\n                    }\n                    .maplibregl-popup-content label {\n                        color: #b0b0b0 !important;\n                    }\n                    .maplibregl-popup-content small {\n                        color: #888 !important;\n                    }\n                    .maplibregl-popup-content input,\n                    .maplibregl-popup-content select {\n                        background: #3d3d3d !important;\n                        color: #e0e0e0 !important;\n                        border-color: #555 !important;\n                    }\n                    .maplibregl-popup-content input:disabled {\n                        background: #2a2a2a !important;\n                        color: #666 !important;\n                    }\n                    .maplibregl-popup-content input::placeholder {\n                        color: #666 !important;\n                    }\n                    /* Popup icon preview dark mode */\n                    .maplibregl-popup-content [id^=\"ve-popup-icon-preview-\"] {\n                        background: #3d3d3d !important;\n                        border-color: #555 !important;\n                    }\n                    /* Popup buttons dark mode */\n                    .maplibregl-popup-content .ve-popup-save {\n                        background: #2e7d32 !important;\n                    }\n                    .maplibregl-popup-content .ve-popup-cancel {\n                        background: #666 !important;\n                    }\n                    .maplibregl-popup-content .ve-popup-delete {\n                        background: #c62828 !important;\n                    }\n                    .maplibregl-popup-tip {\n                        border-top-color: #2d2d2d !important;\n                        border-bottom-color: #2d2d2d !important;\n                    }\n                    /* Popup scrollbar dark mode */\n                    .ve-waypoint-popup::-webkit-scrollbar {\n                        width: 8px;\n                    }\n                    .ve-waypoint-popup::-webkit-scrollbar-track {\n                        background: rgba(255, 255, 255, 0.05);\n                        border-radius: 4px;\n                    }\n                    .ve-waypoint-popup::-webkit-scrollbar-thumb {\n                        background: rgba(255, 255, 255, 0.2);\n                        border-radius: 4px;\n                    }\n                    .ve-waypoint-popup::-webkit-scrollbar-thumb:hover {\n                        background: rgba(255, 255, 255, 0.3);\n                    }\n                }\n            </style>\n\n            <!-- Reset button -->\n            <div style=\"margin-bottom: 15px; text-align: right;\">\n                <a href=\"#\" id=\"ve-reset-defaults\" style=\"font-size: 11px; color: #666; text-decoration: none; padding: 4px 8px; border: 1px solid #ddd; border-radius: 3px; display: inline-block;\">‚Üª Reset to Defaults</a>\n            </div>\n\n            <!-- Reset message (hidden by default) -->\n            <div id=\"ve-reset-message\" style=\"display: none; background: #fff3cd; border: 1px solid #ffc107; color: #856404; padding: 10px; border-radius: 4px; margin-bottom: 15px; font-size: 12px;\">\n                Settings reset to defaults. <a href=\"#\" id=\"ve-cancel-reset\" style=\"color: #856404; font-weight: bold;\">Cancel</a> or Run to save.\n            </div>\n\n            <!-- VIDEO SETTINGS Section -->\n\n            <h3 data-section=\"video-settings\" style=\"cursor: pointer; user-select: none;\">\n              <span class=\"section-indicator\">‚ñº</span> üé¨ VIDEO SETTINGS\n            </h3>\n\n            <div data-section-content=\"video-settings\">\n\n              <div id=\"ve-video-settings-group\" style=\"padding: 15px; background: rgba(0,0,0,0.05); border: 1px solid #ddd; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);\">\n\n                  <!-- Section Header -->\n                  <div style=\"margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(0,0,0,0.1);\">\n                      <span style=\"font-size: 11px; font-weight: 600; color: #555; text-transform: uppercase; letter-spacing: 0.5px;\">\n                        Configuration\n                      </span>\n                  </div>\n\n              <div class=\"form-group\">\n                  <label for=\"ve-resolution\"><h4>Resolution</h4></label>\n                  <select id=\"ve-resolution\">\n                      <option value=\"auto\" selected>Auto (Current Size)</option>\n                      <option value=\"hd\">HD (1280√ó720)</option>\n                      <option value=\"fullhd\">Full HD (1920√ó1080)</option>\n                      <option value=\"4k\">4K (3840√ó2160)</option>\n                      <option value=\"8k\">8K (7680√ó4320)</option>\n                      <option value=\"custom\">Custom...</option>\n                  </select>\n              </div>\n\n              <div class=\"form-group\">\n                  <label for=\"ve-cinematic-bars\"><h4>Cinematic Bars</h4></label>\n                  <select id=\"ve-cinematic-bars\">\n                      <option value=\"none\" selected>None</option>\n                      <option value=\"2.39\">2.39:1 (Scope)</option>\n                      <option value=\"1.85\">1.85:1 (Cinema)</option>\n                      <option value=\"2.33\">21:9 (Ultrawide)</option>\n                  </select>\n                  <small style=\"color: #999;\">Add black bars for cinematic aspect ratios</small>\n              </div>\n\n              <div class=\"form-group\" id=\"ve-resolution-custom-group\" style=\"display:none;\">\n                  <label>Custom Resolution</label>\n                  <div style=\"display: flex; gap: 5px; align-items: center;\">\n                      <input type=\"number\" id=\"ve-resolution-width-custom\" value=\"1920\" step=\"16\" placeholder=\"Width\" style=\"flex: 1;\">\n                      <span style=\"color: #999;\">√ó</span>\n                      <input type=\"number\" id=\"ve-resolution-height-custom\" value=\"1080\" step=\"16\" placeholder=\"Height\" style=\"flex: 1;\">\n                  </div>\n                  <small style=\"color: #999;\">Dimensions should be multiples of 16</small>\n              </div>\n\n              <!-- Timing Table -->\n              <div class=\"form-group\" style=\"margin-top: 12px;\">\n                  <label style=\"margin-bottom: 6px;\"><h4>Timing</h4></label>\n                  <table class=\"ve-timing-table\">\n                      <thead>\n                          <tr>\n                              <th>Virtual time</th>\n                              <th>Speed</th>\n                              <th><abbr title=\"Frames per second\">FPS</abbr></th>\n                          </tr>\n                      </thead>\n                      <tbody>\n                          <tr>\n                              <td>\n                                  <select id=\"ve-duration\" style=\"width: 100%;\">\n                                      <option value=\"3\">3s</option>\n                                      <option value=\"5\">5s</option>\n                                      <option value=\"10\">10s</option>\n                                      <option value=\"15\">15s</option>\n                                      <option value=\"30\" selected>30s</option>\n                                      <option value=\"60\">1m</option>\n                                      <option value=\"custom\">Custom...</option>\n                                  </select>\n                              </td>\n                              <td>\n                                  <select id=\"ve-speed\" style=\"width: 100%;\">\n                                      <option value=\"0.25\">0.25x</option>\n                                      <option value=\"0.5\">0.5x</option>\n                                      <option value=\"1\" selected>1x</option>\n                                      <option value=\"2\">2x</option>\n                                      <option value=\"4\">4x</option>\n                                      <option value=\"custom\">Custom...</option>\n                                  </select>\n                              </td>\n                              <td>\n                                  <input type=\"number\" id=\"ve-fps\" value=\"60\" min=\"1\" max=\"120\" step=\"0.01\" style=\"width: 100%; text-align: center;\">\n                              </td>\n                          </tr>\n                      </tbody>\n                  </table>\n                  <div id=\"ve-real-time\" style=\"font-size: 11px; color: #666; font-style: italic; margin-top: 6px;\">\n                      Real capture time: ~30s\n                  </div>\n              </div>\n\n              <!-- Custom duration input (hidden) -->\n              <div class=\"form-group\" id=\"ve-duration-custom-group\" style=\"display:none;\">\n                  <label>Custom Virtual Time (seconds)</label>\n                  <input type=\"number\" id=\"ve-duration-custom\" value=\"30\" min=\"1\">\n              </div>\n\n              <!-- Custom speed input (hidden) -->\n              <div class=\"form-group\" id=\"ve-speed-custom-group\" style=\"display:none;\">\n                  <label>Custom Speed Multiplier</label>\n                  <input type=\"number\" id=\"ve-speed-custom\" value=\"1\" step=\"0.1\" min=\"0.1\">\n                  <small style=\"color: #999;\">1.0 = real-time, 2.0 = twice as fast</small>\n              </div>\n\n              <!-- Video Format Section -->\n              <div class=\"form-group\" style=\"margin-top: 12px;\">\n                  <label for=\"ve-format\"><h4>Format</h4></label>\n                  <select id=\"ve-format\">\n                      <option value=\"webm-vp8\">WebM (VP8) - Good Compatibility</option>\n                      <option value=\"webm-vp9\" id=\"ve-format-vp9\">WebM (VP9) ‚≠ê Recommended - Best Quality [Auto-selected if supported]</option>\n                      <option value=\"mp4\">MP4 (H.264) - Legacy Compatibility</option>\n                  </select>\n                  <small id=\"ve-format-info\" style=\"display:block; margin-top: 6px; color: #666; line-height: 1.4;\"></small>\n              </div>\n\n              <div class=\"form-group\">\n                  <label for=\"ve-bitrate\"><h4>Bitrate</h4></label>\n                  <select id=\"ve-bitrate\">\n                      <option value=\"auto\" selected>Auto</option>\n                      <option value=\"5000\">5 Mbps (HD)</option>\n                      <option value=\"8000\">8 Mbps (Full HD)</option>\n                      <option value=\"12000\">12 Mbps (2K)</option>\n                      <option value=\"20000\">20 Mbps (4K)</option>\n                      <option value=\"custom\">Custom...</option>\n                  </select>\n              </div>\n\n              <div class=\"form-group\" id=\"ve-bitrate-custom-group\" style=\"display:none;\">\n                  <label>Custom Bitrate (kbps)</label>\n                  <input type=\"number\" id=\"ve-bitrate-custom\" value=\"8000\" step=\"1000\" min=\"100\">\n                  <small style=\"color: #999;\">Higher = better quality but larger file</small>\n              </div>\n\n              <!-- Format-specific settings -->\n              <div class=\"form-group\">\n                  <label>\n                      <input type=\"checkbox\" id=\"ve-format-advanced-toggle\">\n                      Format-specific settings\n                  </label>\n              </div>\n\n              <div id=\"ve-format-advanced-group\" style=\"display:none; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 4px; margin-top: -5px;\">\n                  <!-- MP4 Advanced Settings -->\n                  <div id=\"ve-mp4-advanced\" style=\"display:none;\">\n                      <div class=\"form-group\">\n                          <label>Encoding Speed</label>\n                          <select id=\"ve-mp4-speed\">\n                              <option value=\"10\">Fast (default)</option>\n                              <option value=\"5\" selected>Balanced</option>\n                              <option value=\"0\">Best Quality (slow)</option>\n                          </select>\n                          <small style=\"color: #999;\">Slower = better compression</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Quality (QP)</label>\n                          <select id=\"ve-mp4-qp\">\n                              <option value=\"10,42\" selected>Standard</option>\n                              <option value=\"5,35\">High Quality</option>\n                              <option value=\"15,45\">Smaller File</option>\n                          </select>\n                          <small style=\"color: #999;\">Lower QP = better quality</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Keyframe Interval</label>\n                          <select id=\"ve-mp4-gop\">\n                              <option value=\"30\" selected>Standard (30)</option>\n                              <option value=\"10\">Frequent (10)</option>\n                              <option value=\"60\">Sparse (60)</option>\n                          </select>\n                          <small style=\"color: #999;\">More keyframes = easier editing</small>\n                      </div>\n                  </div>\n\n                  <!-- WebM VP8 Settings -->\n                  <div id=\"ve-webm-vp8-advanced\" style=\"display:none;\">\n                      <div style=\"padding: 8px; background: rgba(46, 125, 50, 0.1); border-radius: 4px; margin-bottom: 10px;\">\n                          <small style=\"color: #2e7d32;\">‚ÑπÔ∏è VP8 optimized for broad compatibility. Bitrate auto-adjusted for quality.</small>\n                      </div>\n                      <div class=\"form-group\">\n                          <label>Bitrate Override</label>\n                          <input type=\"number\" id=\"ve-vp8-bitrate-custom\" placeholder=\"Auto\" step=\"1000\" min=\"1000\">\n                          <small style=\"color: #999;\">Leave empty for auto (recommended). Custom bitrate in kbps.</small>\n                      </div>\n                      <small style=\"color: #999;\">üí° For advanced controls, use WebM VP9 format (Modern browsers).</small>\n                  </div>\n\n                  <!-- WebM VP9 Settings -->\n                  <div id=\"ve-webm-vp9-advanced\" style=\"display:none;\">\n                      <div style=\"padding: 8px; background: rgba(25, 118, 210, 0.1); border-radius: 4px; margin-bottom: 10px;\">\n                          <small style=\"color: #1976d2;\">üåü VP9 High Quality - Hardware Accelerated (WebCodecs)</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Quality Preset</label>\n                          <select id=\"ve-vp9-quality\">\n                              <option value=\"medium\">Medium (fast, smaller)</option>\n                              <option value=\"high\" selected>High (balanced)</option>\n                              <option value=\"very-high\">Very High (best quality)</option>\n                          </select>\n                          <small style=\"color: #999;\">Higher quality = larger file & slower encoding</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Encoding Mode</label>\n                          <select id=\"ve-vp9-latency\">\n                              <option value=\"quality\" selected>Quality (slower, better)</option>\n                              <option value=\"realtime\">Realtime (faster, good)</option>\n                          </select>\n                          <small style=\"color: #999;\">Realtime mode useful for long videos</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Bitrate Mode</label>\n                          <select id=\"ve-vp9-bitrate-mode\">\n                              <option value=\"variable\" selected>Variable (VBR) - Recommended</option>\n                              <option value=\"constant\">Constant (CBR)</option>\n                          </select>\n                          <small style=\"color: #999;\">VBR gives better quality at same file size</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Keyframe Interval (frames)</label>\n                          <input type=\"number\" id=\"ve-vp9-keyframe\" value=\"120\" min=\"10\" max=\"300\" step=\"10\">\n                          <small style=\"color: #999;\">Lower = better seeking, larger file. Default: 120 (2s @ 60fps)</small>\n                      </div>\n\n                      <div class=\"form-group\">\n                          <label>Content Optimization</label>\n                          <select id=\"ve-vp9-content-hint\">\n                              <option value=\"\" selected>Auto</option>\n                              <option value=\"motion\">Motion (aerial views, animations)</option>\n                              <option value=\"detail\">Detail (fine map details)</option>\n                              <option value=\"text\">Text (overlays, labels)</option>\n                          </select>\n                          <small style=\"color: #999;\">Optimizes encoder for content type</small>\n                      </div>\n                  </div>\n              </div>\n\n              <div class=\"form-group\">\n                  <label>\n                      <input type=\"checkbox\" id=\"ve-wait-tiles\" checked>\n                      Wait for tiles to load\n                  </label>\n                  <small style=\"color: #999;\">Try to ensures all tiles are loaded (slower but better quality)</small>\n              </div>\n\n              </div> <!-- End ve-video-settings-group -->\n\n            </div>\n\n            <!-- Section Separator -->\n            <hr style=\"border: none; border-top: 1px solid #ddd; margin: 20px 0;\">\n\n            <!-- MOVIE Section -->\n\n            <h3 data-section=\"movie\" style=\"cursor: pointer; user-select: none;\">\n              <span class=\"section-indicator\">‚ñº</span> üéûÔ∏è MOVIE\n            </h3>\n\n            <div data-section-content=\"movie\">\n\n              <div id=\"ve-movie-group\" style=\"padding: 15px; background: rgba(0,0,0,0.05); border: 1px solid #ddd; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);\">\n\n                  <!-- Section Header -->\n                  <div style=\"margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(0,0,0,0.1);\">\n                      <span style=\"font-size: 11px; font-weight: 600; color: #555; text-transform: uppercase; letter-spacing: 0.5px;\">\n                        Configuration\n                      </span>\n                  </div>\n\n              <div class=\"form-group\">\n                  <label for=\"ve-animation\"><h4>Animation</h4></label>\n                  <select id=\"ve-animation\">\n                      ${this._generateAnimationOptions()}\n                  </select>\n                  <small style=\"color: #999; display: block; margin-top: 3px;\">\n                      üí° Tip: Most animations adapt to show all waypoints when present (happily or not)\n                  </small>\n\n                  <!-- Animation Description -->\n                  <div id=\"ve-animation-description\" style=\"display: none; margin-top: 8px; padding: 10px; background: rgba(33, 150, 243, 0.08); border-left: 3px solid #2196F3; border-radius: 4px;\">\n                      <span style=\"color: #1976D2; font-size: 13px; line-height: 1.5;\"></span>\n                  </div>\n\n                  <!-- Capability Feedback UI -->\n                  <div id=\"ve-capability-feedback\" style=\"display: none; margin-top: 8px;\">\n                      <!-- Dynamically filled with capability analysis -->\n                  </div>\n              </div>\n\n              <div class=\"form-group\">\n                  <label for=\"ve-loop\"><h4>Loop Animation</h4></label>\n                  <select id=\"ve-loop\">\n                      <option value=\"false\">No loop</option>\n                      <option value=\"true\">Loop (instant jump)</option>\n                      <option value=\"smooth\">Loop (smooth transition)</option>\n                  </select>\n                  <small style=\"color: #999;\">Return to start position for seamless video loops (some does not need this param)</small>\n              </div>\n\n              </div> <!-- End ve-movie-group -->\n\n            </div>\n\n            <hr style=\"border: none; border-top: 1px solid #ddd; margin: 20px 0;\">\n\n            <!-- Waypoints Section -->\n\n            <h3 data-section=\"points-of-interest\" style=\"cursor: pointer; user-select: none;\">\n              <span class=\"section-indicator\">‚ñº</span>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" style=\"vertical-align: middle; margin-right: 4px;\">\n                <defs>\n                  <linearGradient id=\"poi-star-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                    <stop offset=\"0%\" style=\"stop-color:#ffd700;stop-opacity:1\" />\n                    <stop offset=\"100%\" style=\"stop-color:#ffed4e;stop-opacity:1\" />\n                  </linearGradient>\n                </defs>\n                <path d=\"M12 2 L15 9 L22 10 L17 15 L18 22 L12 18 L6 22 L7 15 L2 10 L9 9 Z\"\n                      fill=\"url(#poi-star-gradient)\" stroke=\"#d4af37\" stroke-width=\"1\"/>\n              </svg> POINTS OF INTEREST\n            </h3>\n\n            <div data-section-content=\"points-of-interest\">\n\n              <div id=\"ve-waypoints-group\" style=\"padding: 15px; background: rgba(0,0,0,0.05); border: 1px solid #ddd; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);\">\n\n                  <!-- Section Header -->\n                  <div style=\"margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(0,0,0,0.1);\">\n                      <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                          <span style=\"font-size: 11px; font-weight: 600; color: #555; text-transform: uppercase; letter-spacing: 0.5px;\">\n                            Configuration\n                          </span>\n                          <small id=\"ve-icon-mode-status\" style=\"font-size: 10px; color: #666;\">\n                              Checking for map icons...\n                          </small>\n                      </div>\n                  </div>\n\n                  <!-- Waypoint Labels Toggle -->\n                  <div style=\"margin-bottom: 10px; padding: 8px; border-radius: 3px;\">\n                      <label style=\"display: flex; align-items: center; gap: 5px; font-size: 11px; cursor: pointer; color: #555;\">\n                          <input type=\"checkbox\" id=\"ve-show-labels-toggle\" style=\"margin: 0;\">\n                          <span style=\"color: #555; font-weight: 500;\">Show Waypoint Labels</span>\n                      </label>\n                      <small style=\"color: #666; display: block; margin-top: 3px;\">\n                          Display text labels on waypoints (requires fonts)\n                      </small>\n\n                      <!-- Font Selection (visible only if labels enabled) -->\n                      <div id=\"ve-font-select-container\" style=\"display: none; margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(0,0,0,0.1);\">\n                          <label style=\"font-size: 10px; color: #666; display: block; margin-bottom: 4px;\">\n                              Font Family:\n                          </label>\n                          <select id=\"ve-font-select\" style=\"width: 100%; padding: 4px; font-size: 11px; border: 1px solid #ccc; border-radius: 3px;\">\n                              <option value=\"\">Loading fonts...</option>\n                          </select>\n                          <small id=\"ve-font-status\" style=\"color: #666; display: block; margin-top: 3px;\">\n                              No fonts available\n                          </small>\n                      </div>\n                  </div>\n\n                  <!-- Icon Size Slider -->\n                  <div id=\"ve-icon-size-control\" style=\"margin-bottom: 10px; padding: 8px; background: rgba(255,255,255,0.5); border-radius: 3px;\">\n                      <label style=\"font-size: 11px; color: #333; font-weight: 500; display: block; margin-bottom: 6px;\">\n                          Icon Size: <span id=\"ve-icon-size-value\">1.0√ó</span>\n                      </label>\n                      <input type=\"range\" id=\"ve-icon-size-slider\"\n                            min=\"0.5\" max=\"3\" step=\"0.1\" value=\"1.0\"\n                            style=\"width: 100%; margin: 0;\">\n                  </div>\n\n                  <!-- Waypoints List -->\n                  <div id=\"ve-waypoints-list\" style=\"max-height: 200px; overflow-y: auto; margin-bottom: 10px;\">\n                      <!-- Dynamically filled with waypoints -->\n                      <div style=\"text-align: center; color: #999; font-size: 12px; padding: 20px 0;\">\n                          No waypoints yet. Click \"Add draggable Icon\" to start.\n                      </div>\n                  </div>\n\n                  <!-- Action Buttons -->\n                  <div style=\"display: flex; gap: 5px; margin-bottom: 10px;\">\n                      <button type=\"button\" id=\"ve-waypoint-add\" class=\"btn-secondary btn-compact\" style=\"flex: 1;\">\n                          üìç Add draggable Icon\n                      </button>\n                      <button type=\"button\" id=\"ve-waypoint-import\" class=\"btn-secondary btn-compact\" style=\"flex: 1;\">\n                          üì• Import JSON\n                      </button>\n                      <button type=\"button\" id=\"ve-waypoint-export\" class=\"btn-secondary btn-compact\" style=\"flex: 1;\" disabled>\n                          üì§ Export\n                      </button>\n                  </div>\n\n              </div>\n\n            </div>\n\n            <hr style=\"border: none; border-top: 1px solid #ddd; margin: 20px 0;\">\n\n            <!-- Geographic Constraints Section -->\n\n            <h3 data-section=\"geographic-constraints\" style=\"cursor: pointer; user-select: none;\">\n              <span class=\"section-indicator\">‚ñº</span> üó∫Ô∏è GEOGRAPHIC CONSTRAINTS\n            </h3>\n\n            <div data-section-content=\"geographic-constraints\">\n\n              <div id=\"ve-constraints-group\" style=\"padding: 15px; background: rgba(0,0,0,0.05); border: 1px solid #ddd; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);\">\n\n                  <!-- Section Header -->\n                  <div style=\"margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(0,0,0,0.1);\">\n                      <span style=\"font-size: 11px; font-weight: 600; color: #555; text-transform: uppercase; letter-spacing: 0.5px;\">\n                        Configuration\n                      </span>\n                  </div>\n\n                  <!-- Bounding Box -->\n                  <div class=\"form-group\">\n                      <label>Bounding Box (Longitude, Latitude)</label>\n                      <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 5px;\">\n                          <input type=\"number\" id=\"ve-bounds-west\" placeholder=\"West\" step=\"0.001\">\n                          <input type=\"number\" id=\"ve-bounds-east\" placeholder=\"East\" step=\"0.001\">\n                          <input type=\"number\" id=\"ve-bounds-south\" placeholder=\"South\" step=\"0.001\">\n                          <input type=\"number\" id=\"ve-bounds-north\" placeholder=\"North\" step=\"0.001\">\n                      </div>\n                      <div style=\"margin-top: 5px; display: flex; gap: 5px;\">\n                          <button type=\"button\" id=\"ve-bounds-current\" class=\"btn-secondary btn-mini\" style=\"flex: 1;\">\n                              üó∫Ô∏è Use Current View\n                          </button>\n                          <button type=\"button\" id=\"ve-bounds-waypoints\" class=\"btn-secondary btn-mini\" style=\"flex: 1;\">\n                              üìê From POIs\n                          </button>\n                      </div>\n                      <small style=\"color: #999;\">Animation will stay within these bounds</small>\n                  </div>\n\n                  <!-- Zoom Limits -->\n                  <div class=\"form-group\">\n                      <label>Zoom Limits</label>\n                      <div style=\"display: flex; gap: 5px; align-items: center;\">\n                          <input type=\"number\" id=\"ve-zoom-min\" placeholder=\"Min\" min=\"0\" max=\"24\" step=\"0.5\" style=\"flex: 1;\">\n                          <span style=\"color: #999;\">to</span>\n                          <input type=\"number\" id=\"ve-zoom-max\" placeholder=\"Max\" min=\"0\" max=\"24\" step=\"0.5\" style=\"flex: 1;\">\n                      </div>\n                      <small style=\"color: #999;\">Zoom will stay between these levels (0-24)</small>\n                  </div>\n\n                  <!-- Strict Mode -->\n                  <div class=\"form-group\">\n                      <label>\n                          <input type=\"checkbox\" id=\"ve-strict-bounds\">\n                          Strict Bounds\n                      </label>\n                      <small style=\"color: #999;\">Strictly enforce bounds (no partial view outside)</small>\n                  </div>\n\n                  <!-- Show Overlay -->\n                  <div class=\"form-group\">\n                      <label>\n                          <input type=\"checkbox\" id=\"ve-show-bounds\">\n                          Show Bounds Overlay\n                      </label>\n                      <small style=\"color: #999;\">Display visual boundary on map during recording</small>\n                  </div>\n              </div>\n\n            </div>\n\n            <!-- Section Separator -->\n            <hr style=\"border: none; border-top: 1px solid #ddd; margin: 20px 0;\">\n\n            <div class=\"recording-time-display\">\n                üìπ <strong>Recording time: <span id=\"ve-recording-time\">30s</span></strong>\n            </div>\n\n            <div style=\"margin-bottom: 8px;\" id=\"ve-exploration-limit-container\">\n                <label style=\"display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;\">\n                    <input type=\"checkbox\" id=\"ve-exploration-limit\" style=\"cursor: pointer;\">\n                    <span>Limit exploration duration (<span id=\"ve-exploration-max-duration\">300</span>s)</span>\n                </label>\n            </div>\n\n            <div class=\"button-group\">\n                <button class=\"btn-secondary\" id=\"ve-test\">‚ñ∂Ô∏è Test</button>\n                <button class=\"btn-secondary\" id=\"ve-explore\" style=\"display: none;\">üó∫Ô∏è Explore</button>\n                <button class=\"btn-primary\" id=\"ve-record\">üî¥ Record</button>\n            </div>\n\n            <div class=\"status\" id=\"ve-status\">Ready</div>\n        `;\n\n    // Create invisible overlay to capture clicks outside panel\n    this._overlay = document.createElement('div');\n    this._overlay.className = 'maplibre-gl-video-export-overlay';\n    this._overlay.style.display = 'none';\n    this._overlay.addEventListener('click', () => this._togglePanel());\n\n    // Append overlay and panel to map container instead of control container\n    // This allows them to be centered within the map using absolute positioning\n    const mapContainer = this._map.getContainer();\n\n    // Ensure map container has position: relative for absolute positioning to work\n    const computedStyle = window.getComputedStyle(mapContainer);\n    if (computedStyle.position === 'static') {\n      mapContainer.style.position = 'relative';\n    }\n\n    mapContainer.appendChild(this._overlay);\n    mapContainer.appendChild(this._panel);\n\n    // Add progress widget to panel (will be shown/hidden as needed)\n    this._panel.appendChild(this._progressWidget);\n\n    // Initialize waypoints icon select\n    this._initWaypointsIconSelect();\n\n    // Load and apply saved settings (or defaults if first time)\n    const settings = this._loadSettings();\n    this._applySettings(settings);\n\n    this._bindEvents();\n\n    // Initialize animation description display\n    this._updateAnimationDescription();\n  }\n\n  _bindEvents() {\n    if (!this._panel) return;\n\n    // Initialize collapsible sections\n    this._sectionStates = this._loadSectionStates();\n\n    // Bind section toggle listeners\n    ['video-settings', 'movie', 'points-of-interest', 'geographic-constraints'].forEach(sectionId => {\n      const header = this._panel.querySelector(`[data-section=\"${sectionId}\"]`);\n      const content = this._panel.querySelector(`[data-section-content=\"${sectionId}\"]`);\n      const indicator = header?.querySelector('.section-indicator');\n\n      if (header && content) {\n        // Initialize section state\n        const isCollapsed = this._sectionStates[sectionId];\n        content.style.display = isCollapsed ? 'none' : 'block';\n        if (indicator) indicator.textContent = isCollapsed ? '‚ñ∂' : '‚ñº';\n\n        // Add click listener\n        header.addEventListener('click', () => this._toggleSection(sectionId));\n      }\n    });\n\n    this._panel.querySelector('#ve-test')?.addEventListener('click', () => this._testAnimation());\n    this._panel.querySelector('#ve-explore')?.addEventListener('click', () => this._startExploration());\n    this._panel.querySelector('#ve-record')?.addEventListener('click', () => this._startRecording());\n\n    // Reset to defaults button\n    this._panel.querySelector('#ve-reset-defaults')?.addEventListener('click', (e) => {\n      e.preventDefault();\n      if (!confirm('Reset all settings to default values?')) return;\n\n      // Apply defaults to UI\n      this._applySettings(VideoExportControl.DEFAULT_SETTINGS);\n\n      // Show reset message\n      const resetMessage = this._panel.querySelector('#ve-reset-message');\n      if (resetMessage) resetMessage.style.display = 'block';\n    });\n\n    // Cancel reset button\n    this._panel.querySelector('#ve-cancel-reset')?.addEventListener('click', (e) => {\n      e.preventDefault();\n\n      // Reload settings from localStorage\n      const savedSettings = this._loadSettings();\n      this._applySettings(savedSettings);\n\n      // Hide reset message\n      const resetMessage = this._panel.querySelector('#ve-reset-message');\n      if (resetMessage) resetMessage.style.display = 'none';\n    });\n\n    // Helper to update recording time display\n    const updateRecordingTime = () => {\n      if (!this._panel) return;\n      const recordingDuration = this.options.duration / this.options.speedMultiplier;\n      const seconds = Math.round(recordingDuration / 1000);\n      const timeDisplay = this._panel.querySelector('#ve-recording-time');\n      if (timeDisplay) {\n        timeDisplay.textContent = `${seconds}s`;\n      }\n    };\n\n    // Update options when form changes\n    this._panel.querySelector('#ve-animation')?.addEventListener('change', (e) => {\n      this.options.animation = asSelect(e.target)?.value || 'orbit';\n\n      // Update animation description\n      this._updateAnimationDescription();\n\n      // Show/hide Explore button and Auto-continue checkbox based on animation type\n      this._updateExplorationUI();\n    });\n\n    // Check for OpenMapTiles and show/hide road animations (wait for style to be loaded)\n    // Check capabilities once when map is idle (all sources loaded)\n    this._map.once('idle', () => {\n      this._checkMapCapabilities();\n    });\n\n    const resolutionSelect = asSelect(this._panel.querySelector('#ve-resolution'));\n    const resolutionCustomGroup = asHTMLElement(this._panel.querySelector('#ve-resolution-custom-group'));\n    const resolutionWidthInput = asInput(this._panel.querySelector('#ve-resolution-width-custom'));\n    const resolutionHeightInput = asInput(this._panel.querySelector('#ve-resolution-height-custom'));\n\n    resolutionSelect?.addEventListener('change', (e) => {\n      if (asSelect(e.target)?.value === 'custom') {\n        if (resolutionCustomGroup) resolutionCustomGroup.style.display = 'block';\n        this.options.resolution = {\n          width: parseInt(resolutionWidthInput?.value || '1920', 10),\n          height: parseInt(resolutionHeightInput?.value || '1080', 10)\n        };\n      } else {\n        if (resolutionCustomGroup) resolutionCustomGroup.style.display = 'none';\n        this.options.resolution = asSelect(e.target)?.value || '1920x1080';\n      }\n    });\n\n    resolutionWidthInput?.addEventListener('input', (e) => {\n      if (resolutionSelect?.value === 'custom') {\n        this.options.resolution = {\n          width: parseInt(asInput(e.target)?.value || '1920', 10),\n          height: parseInt(resolutionHeightInput?.value || '1080', 10)\n        };\n      }\n    });\n\n    resolutionHeightInput?.addEventListener('input', (e) => {\n      if (resolutionSelect?.value === 'custom') {\n        this.options.resolution = {\n          width: parseInt(resolutionWidthInput?.value || '1920', 10),\n          height: parseInt(asInput(e.target)?.value || '1080', 10)\n        };\n      }\n    });\n\n    // Duration select (new timing table)\n    const durationSelect = asSelect(this._panel.querySelector('#ve-duration'));\n    const durationCustomGroup = asHTMLElement(this._panel.querySelector('#ve-duration-custom-group'));\n    const durationInput = asInput(this._panel.querySelector('#ve-duration-custom'));\n    const realTimeDisplay = asHTMLElement(this._panel.querySelector('#ve-real-time'));\n\n    // Initialize duration from UI value\n    if (durationSelect) {\n      if (durationSelect.value === 'custom') {\n        this.options.duration = parseFloat(durationInput?.value || '30') * 1000;\n      } else {\n        this.options.duration = parseFloat(durationSelect.value || '30') * 1000;\n      }\n    }\n\n    // Helper to update real-time display\n    const updateRealTimeDisplay = () => {\n      const virtualTime = this.options.duration / 1000; // in seconds\n      const speed = this.options.speedMultiplier;\n      const realTime = virtualTime / speed;\n\n      if (realTimeDisplay) {\n        let timeStr;\n        if (realTime < 60) {\n          timeStr = `~${Math.round(realTime)}s`;\n        } else {\n          const mins = Math.floor(realTime / 60);\n          const secs = Math.round(realTime % 60);\n          timeStr = secs > 0 ? `~${mins}m ${secs}s` : `~${mins}m`;\n        }\n        realTimeDisplay.textContent = `Real capture time: ${timeStr}`;\n      }\n      updateRecordingTime();\n    };\n\n    if (durationSelect) {\n      durationSelect.addEventListener('change', (e) => {\n        const value = asSelect(e.target)?.value;\n        if (value === 'custom') {\n          if (durationCustomGroup) durationCustomGroup.style.display = 'block';\n          this.options.duration = parseFloat(durationInput?.value || '30') * 1000;\n        } else {\n          if (durationCustomGroup) durationCustomGroup.style.display = 'none';\n          this.options.duration = parseFloat(value || '30') * 1000;\n        }\n        updateRealTimeDisplay();\n      });\n    }\n\n    if (durationInput) {\n      durationInput.addEventListener('input', (e) => {\n        this.options.duration = parseFloat(asInput(e.target)?.value || '30') * 1000;\n        updateRealTimeDisplay();\n      });\n    }\n\n    this._panel.querySelector('#ve-fps')?.addEventListener('input', (e) => {\n      this.options.fps = parseFloat(asInput(e.target)?.value || '30');\n    });\n\n    this._panel.querySelector('#ve-wait-tiles')?.addEventListener('change', (e) => {\n      this.options.waitForTiles = asInput(e.target)?.checked ?? true;\n    });\n\n    this._panel.querySelector('#ve-loop')?.addEventListener('change', (e) => {\n      const value = asSelect(e.target)?.value;\n      if (value === 'false') {\n        this.options.loop = false;\n      } else if (value === 'true') {\n        this.options.loop = true;\n      } else {\n        this.options.loop = 'smooth';\n      }\n    });\n\n    this._panel.querySelector('#ve-format')?.addEventListener('change', (e) => {\n      if (!this._panel) return;\n      this.options.format = asSelect(e.target)?.value || 'webm-vp8'; // 'webm-vp8', 'webm-vp9', or 'mp4'\n      console.log('üìπ Format changed to:', this.options.format);\n\n      // Update format info message\n      const formatInfo = asHTMLElement(this._panel.querySelector('#ve-format-info'));\n      if (formatInfo) {\n        if (this.options.format === 'webm-vp8') {\n          formatInfo.innerHTML = '‚úì Free & open-source (no licensing issues)<br>‚úì Works on all modern browsers<br>‚úì Good quality for most use cases';\n          formatInfo.style.color = '#2e7d32'; // green\n        } else if (this.options.format === 'webm-vp9') {\n          formatInfo.innerHTML = '‚úì Free & open-source<br>‚úì Best compression & quality<br>‚ö† Modern browsers only (WebCodecs API)';\n          formatInfo.style.color = '#1976d2'; // blue\n        } else if (this.options.format === 'mp4') {\n          formatInfo.innerHTML = '‚ö† Patent-encumbered codec<br>‚ö† May require licensing for commercial use<br>‚úì Maximum compatibility';\n          formatInfo.style.color = '#d32f2f'; // red\n        }\n      }\n\n      // Show/hide format-specific advanced options\n      const mp4Advanced = asHTMLElement(this._panel.querySelector('#ve-mp4-advanced'));\n      const vp8Advanced = asHTMLElement(this._panel.querySelector('#ve-webm-vp8-advanced'));\n      const vp9Advanced = asHTMLElement(this._panel.querySelector('#ve-webm-vp9-advanced'));\n\n      if (mp4Advanced && vp8Advanced && vp9Advanced) {\n        mp4Advanced.style.display = 'none';\n        vp8Advanced.style.display = 'none';\n        vp9Advanced.style.display = 'none';\n\n        if (this.options.format === 'mp4') {\n          mp4Advanced.style.display = 'block';\n        } else if (this.options.format === 'webm-vp8') {\n          vp8Advanced.style.display = 'block';\n        } else if (this.options.format === 'webm-vp9') {\n          vp9Advanced.style.display = 'block';\n        }\n      }\n    });\n\n    // WebCodecs detection - disable VP9 if not supported\n    const vp9Option = /** @type {HTMLOptionElement | null} */(this._panel.querySelector('#ve-format-vp9'));\n    const formatSelect = asSelect(this._panel.querySelector('#ve-format'));\n    const supportsWebCodecs = typeof VideoEncoder !== 'undefined' && typeof VideoFrame !== 'undefined';\n\n    if (!supportsWebCodecs && vp9Option) {\n      vp9Option.disabled = true;\n      vp9Option.textContent = 'WebM (VP9) - Not supported in this browser';\n      console.log('‚ö†Ô∏è WebCodecs not supported - VP9 option disabled');\n\n      // If VP9 was somehow selected, switch to VP8\n      if (this.options.format === 'webm-vp9') {\n        this.options.format = 'webm-vp8';\n        if (formatSelect) formatSelect.value = 'webm-vp8';\n      }\n    } else if (supportsWebCodecs) {\n      console.log('‚úì WebCodecs supported - VP9 high quality encoding available');\n\n      // Set formatSelect to match the auto-detected format from options\n      if (formatSelect) formatSelect.value = this.options.format;\n    }\n\n    // Trigger format change to show initial info message\n    formatSelect?.dispatchEvent(new Event('change'));\n\n    // Initialize real-time display with default values\n    // Use setTimeout to ensure all UI updates and events have completed\n    setTimeout(() => {\n      updateRealTimeDisplay();\n    }, 0);\n\n    // Format-specific advanced settings toggle\n    const formatAdvancedToggle = asInput(this._panel.querySelector('#ve-format-advanced-toggle'));\n    const formatAdvancedGroup = asHTMLElement(this._panel.querySelector('#ve-format-advanced-group'));\n\n    formatAdvancedToggle?.addEventListener('change', (e) => {\n      if (!this._panel) return;\n      if (formatAdvancedGroup) formatAdvancedGroup.style.display = asInput(e.target)?.checked ? 'block' : 'none';\n      // Show the correct format options\n      const mp4Advanced = asHTMLElement(this._panel.querySelector('#ve-mp4-advanced'));\n      const vp8Advanced = asHTMLElement(this._panel.querySelector('#ve-webm-vp8-advanced'));\n      const vp9Advanced = asHTMLElement(this._panel.querySelector('#ve-webm-vp9-advanced'));\n\n      if (asInput(e.target)?.checked && mp4Advanced && vp8Advanced && vp9Advanced) {\n        mp4Advanced.style.display = 'none';\n        vp8Advanced.style.display = 'none';\n        vp9Advanced.style.display = 'none';\n\n        if (this.options.format === 'mp4') {\n          mp4Advanced.style.display = 'block';\n        } else if (this.options.format === 'webm-vp8') {\n          vp8Advanced.style.display = 'block';\n        } else if (this.options.format === 'webm-vp9') {\n          vp9Advanced.style.display = 'block';\n        }\n      }\n    });\n\n    const speedSelect = asSelect(this._panel.querySelector('#ve-speed'));\n    const speedCustomGroup = asHTMLElement(this._panel.querySelector('#ve-speed-custom-group'));\n    const speedCustomInput = asInput(this._panel.querySelector('#ve-speed-custom'));\n\n    // Initialize speedMultiplier from UI value\n    if (speedSelect) {\n      if (speedSelect.value === 'custom') {\n        this.options.speedMultiplier = parseFloat(speedCustomInput?.value || '1');\n      } else {\n        this.options.speedMultiplier = parseFloat(speedSelect.value || '1');\n      }\n    }\n\n    speedSelect?.addEventListener('change', (e) => {\n      if (asSelect(e.target)?.value === 'custom') {\n        if (speedCustomGroup) speedCustomGroup.style.display = 'block';\n        this.options.speedMultiplier = parseFloat(speedCustomInput?.value || '1');\n      } else {\n        if (speedCustomGroup) speedCustomGroup.style.display = 'none';\n        this.options.speedMultiplier = parseFloat(asSelect(e.target)?.value || '1');\n      }\n      updateRealTimeDisplay();\n    });\n\n    speedCustomInput?.addEventListener('input', (e) => {\n      this.options.speedMultiplier = parseFloat(asInput(e.target)?.value || '1');\n      updateRealTimeDisplay();\n    });\n\n    // Bitrate control\n    const bitrateSelect = asSelect(this._panel.querySelector('#ve-bitrate'));\n    const bitrateCustomGroup = asHTMLElement(this._panel.querySelector('#ve-bitrate-custom-group'));\n    const bitrateCustomInput = asInput(this._panel.querySelector('#ve-bitrate-custom'));\n\n    bitrateSelect?.addEventListener('change', (e) => {\n      if (asSelect(e.target)?.value === 'custom') {\n        if (bitrateCustomGroup) bitrateCustomGroup.style.display = 'block';\n        this.options.bitrate = parseInt(bitrateCustomInput?.value || '5000', 10);\n      } else if (asSelect(e.target)?.value === 'auto') {\n        if (bitrateCustomGroup) bitrateCustomGroup.style.display = 'none';\n        this.options.bitrate = 'auto';\n      } else {\n        if (bitrateCustomGroup) bitrateCustomGroup.style.display = 'none';\n        this.options.bitrate = parseInt(asSelect(e.target)?.value || '5000', 10);\n      }\n    });\n\n    bitrateCustomInput?.addEventListener('input', (e) => {\n      this.options.bitrate = parseInt(asInput(e.target)?.value || '5000', 10);\n    });\n\n    // Geographic Constraints event listeners\n    // Note: Constraints section is now always visible (controlled by collapsible section)\n\n    // Use Current View button\n    const boundsCurrentBtn = this._panel.querySelector('#ve-bounds-current');\n    if (boundsCurrentBtn) {\n      boundsCurrentBtn.addEventListener('click', () => {\n        if (!this._panel) return;\n        if (this._map) {\n          const bounds = this._map.getBounds();\n          const west = asInput(this._panel.querySelector('#ve-bounds-west'));\n          const east = asInput(this._panel.querySelector('#ve-bounds-east'));\n          const south = asInput(this._panel.querySelector('#ve-bounds-south'));\n          const north = asInput(this._panel.querySelector('#ve-bounds-north'));\n\n          if (west) west.value = bounds.getWest().toFixed(6);\n          if (east) east.value = bounds.getEast().toFixed(6);\n          if (south) south.value = bounds.getSouth().toFixed(6);\n          if (north) north.value = bounds.getNorth().toFixed(6);\n\n          // Also set current zoom limits\n          const currentZoom = this._map.getZoom();\n          const minZoomInput = asInput(this._panel.querySelector('#ve-zoom-min'));\n          const maxZoomInput = asInput(this._panel.querySelector('#ve-zoom-max'));\n\n          if (minZoomInput && !minZoomInput.value) {\n            minZoomInput.value = Math.max(0, currentZoom - 2).toFixed(1);\n          }\n          if (maxZoomInput && !maxZoomInput.value) {\n            maxZoomInput.value = Math.min(24, currentZoom + 2).toFixed(1);\n          }\n\n          this._updateBoundsFromUI();\n          this._updateBoundsOverlay();\n        }\n      });\n    }\n\n    // Suggest Bounds from Waypoints button\n    const boundsWaypointsBtn = this._panel.querySelector('#ve-bounds-waypoints');\n    if (boundsWaypointsBtn) {\n      boundsWaypointsBtn.addEventListener('click', () => {\n        if (!this._panel) return;\n        const features = this.options.waypoints?.features || [];\n\n        if (features.length === 0) {\n          alert('No waypoints available.\\n\\nAdd some waypoints first using the Waypoints section above.');\n          return;\n        }\n\n        // Calculate bounds from all waypoints\n        let west = Infinity; let south = Infinity; let east = -Infinity; let north = -Infinity;\n\n        features.forEach(feature => {\n          const [lng, lat] = feature.geometry.coordinates;\n          west = Math.min(west, lng);\n          east = Math.max(east, lng);\n          south = Math.min(south, lat);\n          north = Math.max(north, lat);\n        });\n\n        // Add 10% padding\n        const padLng = (east - west) * 0.1;\n        const padLat = (north - south) * 0.1;\n\n        west -= padLng;\n        east += padLng;\n        south -= padLat;\n        north += padLat;\n\n        // Update UI\n        const westInput = asInput(this._panel.querySelector('#ve-bounds-west'));\n        const eastInput = asInput(this._panel.querySelector('#ve-bounds-east'));\n        const southInput = asInput(this._panel.querySelector('#ve-bounds-south'));\n        const northInput = asInput(this._panel.querySelector('#ve-bounds-north'));\n\n        if (westInput) westInput.value = west.toFixed(6);\n        if (eastInput) eastInput.value = east.toFixed(6);\n        if (southInput) southInput.value = south.toFixed(6);\n        if (northInput) northInput.value = north.toFixed(6);\n\n        // Calculate optimal zoom based on bounds\n        if (this._map) {\n          const canvas = this._map.getCanvas();\n          const padding = Math.min(canvas.width, canvas.height) * 0.15;\n          const camera = this._map.cameraForBounds(\n            [[west, south], [east, north]],\n            { padding: { top: padding, bottom: padding, left: padding, right: padding } }\n          );\n\n          if (camera) {\n            const minZoomInput = asInput(this._panel.querySelector('#ve-zoom-min'));\n            const maxZoomInput = asInput(this._panel.querySelector('#ve-zoom-max'));\n\n            if (minZoomInput && !minZoomInput.value) {\n              minZoomInput.value = Math.max(0, camera.zoom - 2).toFixed(1);\n            }\n            if (maxZoomInput && !maxZoomInput.value) {\n              maxZoomInput.value = Math.min(24, camera.zoom + 2).toFixed(1);\n            }\n          }\n        }\n\n        this._updateBoundsFromUI();\n        this._updateBoundsOverlay();\n\n        console.log(`‚úÖ Suggested bounds from ${features.length} waypoints: [${west.toFixed(4)}, ${south.toFixed(4)}] to [${east.toFixed(4)}, ${north.toFixed(4)}]`);\n      });\n    }\n\n    // Bounds input listeners\n    const boundInputs = ['#ve-bounds-west', '#ve-bounds-east', '#ve-bounds-south', '#ve-bounds-north'];\n    boundInputs.forEach(selector => {\n      const input = this._panel?.querySelector(selector);\n      if (input) {\n        input.addEventListener('input', () => {\n          this._updateBoundsFromUI();\n          this._updateBoundsOverlay();\n        });\n      }\n    });\n\n    // Zoom limit listeners\n    const zoomInputs = ['#ve-zoom-min', '#ve-zoom-max'];\n    zoomInputs.forEach(selector => {\n      const input = this._panel?.querySelector(selector);\n      if (input) {\n        input.addEventListener('input', () => {\n          this._updateZoomLimitsFromUI();\n        });\n      }\n    });\n\n    // Strict bounds listener\n    const strictBoundsCheck = asInput(this._panel.querySelector('#ve-strict-bounds'));\n    if (strictBoundsCheck) {\n      strictBoundsCheck.addEventListener('change', (e) => {\n        this.options.strictBounds = asInput(e.target)?.checked ?? false;\n      });\n    }\n\n    // Show bounds overlay listener\n    const showBoundsCheck = asInput(this._panel.querySelector('#ve-show-bounds'));\n    if (showBoundsCheck) {\n      showBoundsCheck.addEventListener('change', (e) => {\n        const checked = asInput(e.target)?.checked ?? false;\n        this.options.showBoundsOverlay = checked;\n        if (checked) {\n          this._updateBoundsOverlay();\n        } else {\n          this._removeBoundsOverlay();\n        }\n      });\n    }\n\n    // Waypoints event listeners\n    // Note: Waypoints section is now always visible (controlled by collapsible section)\n\n    // Icon mode: sprite only (emoji mode removed)\n\n    // Show waypoint labels toggle\n    const showLabelsToggle = asInput(this._panel.querySelector('#ve-show-labels-toggle'));\n    const fontSelectContainer = asHTMLElement(this._panel.querySelector('#ve-font-select-container'));\n    if (showLabelsToggle && fontSelectContainer) {\n      showLabelsToggle.addEventListener('change', (e) => {\n        const checked = asInput(e.target)?.checked ?? false;\n        this._showWaypointLabels = checked;\n        console.log(`[Waypoints] Show labels changed to: ${this._showWaypointLabels}`);\n\n        // Show/hide font select\n        fontSelectContainer.style.display = checked ? 'block' : 'none';\n\n        // Update map layer\n        this._updateWaypointsLayer();\n      });\n    }\n\n    // Font select\n    const fontSelect = asSelect(this._panel.querySelector('#ve-font-select'));\n    if (fontSelect) {\n      fontSelect.addEventListener('change', (e) => {\n        this._selectedFont = asSelect(e.target)?.value || 'Roboto';\n        console.log(`[Waypoints] Font changed to: ${this._selectedFont}`);\n\n        // Update map layer\n        this._updateWaypointsLayer();\n      });\n    }\n\n    // Icon size slider\n    const iconSizeSlider = asInput(this._panel.querySelector('#ve-icon-size-slider'));\n    const iconSizeValue = asHTMLElement(this._panel.querySelector('#ve-icon-size-value'));\n    if (iconSizeSlider && iconSizeValue) {\n      iconSizeSlider.addEventListener('input', (e) => {\n        this._iconSize = parseFloat(asInput(e.target)?.value || '1');\n        iconSizeValue.textContent = `${this._iconSize.toFixed(1)}√ó`;\n\n        // Update the layer if it exists\n        if (this._map && this._map.getLayer(this._waypointsLayerId)) {\n          this._updateWaypointsLayer();\n        }\n      });\n    }\n\n    const addWaypointBtn = this._panel.querySelector('#ve-waypoint-add');\n    if (addWaypointBtn) {\n      addWaypointBtn.addEventListener('click', () => this._addWaypoint());\n    }\n\n    const importWaypointsBtn = this._panel.querySelector('#ve-waypoint-import');\n    if (importWaypointsBtn) {\n      importWaypointsBtn.addEventListener('click', () => this._importWaypoints());\n    }\n\n    const exportWaypointsBtn = this._panel.querySelector('#ve-waypoint-export');\n    if (exportWaypointsBtn) {\n      exportWaypointsBtn.addEventListener('click', () => this._exportWaypoints());\n    }\n  }\n\n  _updateBoundsFromUI() {\n    if (!this._panel) return;\n    const west = parseFloat(asInput(this._panel.querySelector('#ve-bounds-west'))?.value || '');\n    const east = parseFloat(asInput(this._panel.querySelector('#ve-bounds-east'))?.value || '');\n    const south = parseFloat(asInput(this._panel.querySelector('#ve-bounds-south'))?.value || '');\n    const north = parseFloat(asInput(this._panel.querySelector('#ve-bounds-north'))?.value || '');\n\n    if (!isNaN(west) && !isNaN(east) && !isNaN(south) && !isNaN(north)) {\n      this.options.maxBounds = [[west, south], [east, north]];\n    } else {\n      this.options.maxBounds = null;\n    }\n  }\n\n  _updateZoomLimitsFromUI() {\n    if (!this._panel) return;\n    const minZoom = parseFloat(asInput(this._panel.querySelector('#ve-zoom-min'))?.value || '');\n    const maxZoom = parseFloat(asInput(this._panel.querySelector('#ve-zoom-max'))?.value || '');\n\n    this.options.minZoom = !isNaN(minZoom) ? minZoom : null;\n    this.options.maxZoom = !isNaN(maxZoom) ? maxZoom : null;\n  }\n\n  _updateBoundsOverlay() {\n    if (!this._map || !this.options.maxBounds || !this.options.showBoundsOverlay) {\n      this._removeBoundsOverlay();\n      return;\n    }\n\n    const bounds = this.options.maxBounds;\n    const sourceId = 'video-export-bounds-overlay';\n    const layerId = 'video-export-bounds-overlay-layer';\n\n    // Remove existing if any\n    if (this._map.getLayer(layerId)) {\n      this._map.removeLayer(layerId);\n    }\n    if (this._map.getSource(sourceId)) {\n      this._map.removeSource(sourceId);\n    }\n\n    // Add new source and layer\n    this._map.addSource(sourceId, {\n      type: 'geojson',\n      data: {\n        type: 'Feature',\n        geometry: {\n          type: 'Polygon',\n          coordinates: [[\n            [bounds[0][0], bounds[0][1]],\n            [bounds[1][0], bounds[0][1]],\n            [bounds[1][0], bounds[1][1]],\n            [bounds[0][0], bounds[1][1]],\n            [bounds[0][0], bounds[0][1]]\n          ]]\n        }\n      }\n    });\n\n    this._map.addLayer({\n      id: layerId,\n      type: 'fill',\n      source: sourceId,\n      paint: {\n        'fill-color': '#3887be',\n        'fill-opacity': 0.1\n      }\n    });\n\n    this._map.addLayer({\n      id: layerId + '-outline',\n      type: 'line',\n      source: sourceId,\n      paint: {\n        'line-color': '#3887be',\n        'line-width': 2,\n        'line-dasharray': [2, 2]\n      }\n    });\n  }\n\n  _removeBoundsOverlay() {\n    if (!this._map) return;\n\n    const layerId = 'video-export-bounds-overlay-layer';\n    const sourceId = 'video-export-bounds-overlay';\n\n    if (this._map.getLayer(layerId + '-outline')) {\n      this._map.removeLayer(layerId + '-outline');\n    }\n    if (this._map.getLayer(layerId)) {\n      this._map.removeLayer(layerId);\n    }\n    if (this._map.getSource(sourceId)) {\n      this._map.removeSource(sourceId);\n    }\n  }\n\n  // ============================================================================\n  // WAYPOINTS SYSTEM\n  // ============================================================================\n\n  // Entry point - loads both sprites and fonts\n  async _loadSpriteIcons() {\n    if (!this._map) return;\n\n    try {\n      // Load sprites and fonts in parallel\n      await Promise.all([\n        this._loadSpriteSheet(),\n        this._loadFontstacks()\n      ]);\n\n      // Update UI with loaded data\n      this._populateFontSelect();\n      this._updateIconAvailability();\n      this._initWaypointsIconSelect(); // Fill icon select with loaded sprites\n    } catch (error) {\n      console.error('[Waypoints] Error loading sprite icons:', error);\n      this._spriteIcons = [];\n      this._updateIconAvailability();\n      this._initWaypointsIconSelect(); // Update UI even on error\n    }\n  }\n\n  // ============================================================================\n  // SPRITES - Loading and UI\n  // ============================================================================\n\n  async _loadSpriteSheet() {\n    try {\n      const style = this._map.getStyle();\n      if (!style || !style.sprite) {\n        console.warn('[Waypoints] No sprite URL in style - waypoints icons will not work');\n        this._spriteIcons = [];\n        this._spriteData = null;\n        this._spriteImage = null;\n        return;\n      }\n\n      const spriteUrl = style.sprite;\n      console.log('[Waypoints] Loading sprite from:', spriteUrl);\n\n      // Try @2x first for better quality, fall back to 1x if not available\n      let pixelRatio = 2;\n      let suffix = '@2x';\n      let spriteData = null;\n      let spriteImage = null;\n\n      // Try to load @2x version first\n      try {\n        const jsonUrl = `${spriteUrl}${suffix}.json`;\n        const jsonResponse = await fetch(jsonUrl);\n        if (!jsonResponse.ok) {\n          throw new Error(`@2x not available (${jsonResponse.status})`);\n        }\n        spriteData = await jsonResponse.json();\n\n        // Load PNG\n        const pngUrl = `${spriteUrl}${suffix}.png`;\n        spriteImage = new Image();\n        spriteImage.crossOrigin = 'anonymous';\n\n        await new Promise((resolve, reject) => {\n          spriteImage.onload = resolve;\n          spriteImage.onerror = reject;\n          spriteImage.src = pngUrl;\n        });\n\n        console.log('[Waypoints] Loaded @2x sprite (retina quality)');\n      } catch (error) {\n        console.log('[Waypoints] @2x sprite not available, trying 1x fallback:', error.message);\n\n        // Fallback to 1x version\n        pixelRatio = 1;\n        suffix = '';\n\n        const jsonUrl = `${spriteUrl}${suffix}.json`;\n        const jsonResponse = await fetch(jsonUrl);\n        if (!jsonResponse.ok) {\n          throw new Error(`Failed to load sprite JSON (1x): ${jsonResponse.status}`);\n        }\n        spriteData = await jsonResponse.json();\n\n        // Load PNG\n        const pngUrl = `${spriteUrl}${suffix}.png`;\n        spriteImage = new Image();\n        spriteImage.crossOrigin = 'anonymous';\n\n        await new Promise((resolve, reject) => {\n          spriteImage.onload = resolve;\n          spriteImage.onerror = reject;\n          spriteImage.src = pngUrl;\n        });\n\n        console.log('[Waypoints] Loaded 1x sprite (standard quality)');\n      }\n\n      // Store loaded sprite data\n      this._spritePixelRatio = pixelRatio;\n      this._spriteData = spriteData;\n      this._spriteImage = spriteImage;\n      this._spritePngUrl = `${spriteUrl}${suffix}.png`;\n\n      // Extract icon names from sprite data\n      this._spriteIcons = Object.keys(this._spriteData);\n      console.log(`[Waypoints] Loaded ${this._spriteIcons.length} icons from sprite sheet`);\n    } catch (error) {\n      console.error('[Waypoints] Error loading sprite sheet:', error);\n      this._spriteIcons = [];\n      this._spriteImage = null;\n      this._spriteData = null;\n    }\n  }\n\n  async _loadFontstacks() {\n    try {\n      const style = this._map.getStyle();\n      if (!style || !style.glyphs) {\n        console.log('[Waypoints] No glyphs URL in style - text labels not available');\n        this._availableFonts = [];\n        return [];\n      }\n\n      // Extract base URL from glyphs template\n      // Example: \"https://example.com/fonts/{fontstack}/{range}.pbf\"\n      //       -> \"https://example.com/fonts/fontstacks.json\"\n      const glyphsUrl = style.glyphs;\n      console.log('[Waypoints] Glyphs URL template:', glyphsUrl);\n\n      const baseUrl = glyphsUrl.replace('/{fontstack}/{range}.pbf', '');\n      const fontstacksUrl = `${baseUrl}/fontstacks.json`;\n\n      console.log('[Waypoints] Base URL:', baseUrl);\n      console.log('[Waypoints] Trying to load fontstacks from:', fontstacksUrl);\n\n      // Try to load fontstacks.json (not a standard, may not exist)\n      try {\n        const response = await fetch(fontstacksUrl, {\n          method: 'GET',\n          headers: { Accept: 'application/json' }\n        });\n\n        if (response.ok) {\n          const fontstacks = await response.json();\n\n          if (Array.isArray(fontstacks) && fontstacks.length > 0) {\n            this._availableFonts = fontstacks;\n            console.log(`[Waypoints] ‚úì Loaded ${fontstacks.length} font stacks from fontstacks.json`);\n\n            if (!this._selectedFont) {\n              this._selectedFont = fontstacks[0];\n              console.log('[Waypoints] Selected default font:', this._selectedFont);\n            }\n\n            return fontstacks;\n          }\n        }\n      } catch (fetchError) {\n        // fontstacks.json not available - will extract from style instead\n        console.log('[Waypoints] fontstacks.json not available, extracting fonts from style layers...');\n      }\n\n      // Fallback: Extract fonts from style layers\n      const fonts = new Set();\n\n      if (style.layers) {\n        for (const layer of style.layers) {\n          if (layer.layout && layer.layout['text-font']) {\n            const textFont = layer.layout['text-font'];\n\n            // text-font can be:\n            // - Simple array: [\"Noto Sans Regular\", \"Arial Unicode MS Regular\"]\n            // - Expression: [\"literal\", [\"Noto Sans Regular\"]]\n            // - Dynamic: [\"get\", \"font_property\"]\n\n            if (Array.isArray(textFont)) {\n              // Handle [\"literal\", [...]] expressions\n              if (textFont[0] === 'literal' && Array.isArray(textFont[1])) {\n                textFont[1].forEach(font => {\n                  if (typeof font === 'string') fonts.add(font);\n                });\n              } else {\n                // Handle simple arrays or other cases\n                textFont.forEach(item => {\n                  if (typeof item === 'string' && !item.startsWith('get') && !item.startsWith('literal')) {\n                    fonts.add(item);\n                  }\n                });\n              }\n            }\n          }\n        }\n      }\n\n      const fontstacks = Array.from(fonts).sort();\n\n      if (fontstacks.length > 0) {\n        this._availableFonts = fontstacks;\n        console.log(`[Waypoints] ‚úì Extracted ${fontstacks.length} fonts from style:`, fontstacks);\n\n        if (!this._selectedFont) {\n          this._selectedFont = fontstacks[0];\n          console.log('[Waypoints] Selected default font:', this._selectedFont);\n        }\n\n        return fontstacks;\n      }\n\n      // No fonts found at all\n      console.warn('[Waypoints] No fonts found in style');\n      this._availableFonts = [];\n      return [];\n    } catch (error) {\n      console.error('[Waypoints] Error loading fontstacks:', error);\n      this._availableFonts = [];\n      return [];\n    }\n  }\n\n  // ============================================================================\n  // FONTS - Font management for labels\n  // ============================================================================\n\n  _populateFontSelect() {\n    if (!this._panel) return;\n    const fontSelect = asSelect(this._panel.querySelector('#ve-font-select'));\n    const fontStatus = asHTMLElement(this._panel.querySelector('#ve-font-status'));\n    if (!fontSelect || !fontStatus) return;\n\n    fontSelect.innerHTML = '';\n\n    if (this._availableFonts.length === 0) {\n      const option = document.createElement('option');\n      option.value = '';\n      option.textContent = 'No fonts available';\n      option.disabled = true;\n      fontSelect.appendChild(option);\n      if (fontStatus) {\n        fontStatus.textContent = 'No fonts available - labels cannot be shown';\n        fontStatus.style.color = '#e74c3c';\n      }\n      return;\n    }\n\n    this._availableFonts.forEach(font => {\n      const option = document.createElement('option');\n      option.value = font;\n      option.textContent = font;\n      fontSelect.appendChild(option);\n    });\n\n    if (this._selectedFont) {\n      fontSelect.value = this._selectedFont;\n    }\n\n    if (fontStatus) {\n      fontStatus.textContent = `${this._availableFonts.length} fonts available`;\n      fontStatus.style.color = '#4CAF50';\n    }\n  }\n\n  // ============================================================================\n  // SPRITES UI - Icon selection and preview\n  // ============================================================================\n\n  _updateIconAvailability() {\n    if (!this._panel) return;\n    const statusEl = asHTMLElement(this._panel.querySelector('#ve-icon-mode-status'));\n\n    if (!statusEl) return;\n\n    if (this._spriteIcons.length > 0) {\n      // Show available icons count\n      statusEl.textContent = `${this._spriteIcons.length} icons available`;\n      statusEl.style.color = '#4CAF50';\n    } else {\n      // Show that default icon will be used\n      statusEl.textContent = 'Using default icon';\n      statusEl.style.color = '#999';\n      console.log('[Waypoints] No map sprites found - using built-in default icon');\n    }\n  }\n\n  _initWaypointsIconSelect() {\n    if (!this._panel) return;\n    const iconSelect = asSelect(this._panel.querySelector('#ve-wp-icon'));\n    const searchInput = asHTMLElement(this._panel.querySelector('#ve-wp-icon-search'));\n    if (!iconSelect) return;\n\n    // Show/hide search based on mode\n    if (searchInput) {\n      searchInput.style.display = (this._spriteIcons.length > 30) ? 'block' : 'none';\n    }\n\n    // Store all icons for filtering (sprite mode only)\n    this._allIcons = [...this._spriteIcons];\n\n    // Fill select with icons\n    this._fillIconSelect();\n\n    // Add search listener for sprite icons\n    if (searchInput) {\n      searchInput.removeEventListener('input', this._handleIconSearch);\n      this._handleIconSearch = this._handleIconSearch.bind(this);\n      searchInput.addEventListener('input', this._handleIconSearch);\n    }\n\n    // Add change listener to update preview\n    iconSelect.removeEventListener('change', this._updateIconPreview);\n    this._updateIconPreview = this._updateIconPreview.bind(this);\n    iconSelect.addEventListener('change', this._updateIconPreview);\n\n    // Update preview for current selection\n    this._updateIconPreview();\n  }\n\n  _fillIconSelect(filter = '') {\n    if (!this._panel) return;\n    const iconSelect = asSelect(this._panel.querySelector('#ve-wp-icon'));\n    if (!iconSelect) return;\n\n    const currentValue = iconSelect.value;\n    iconSelect.innerHTML = '';\n\n    if (this._spriteIcons.length > 0) {\n      // Always add default icon as first option\n      if (!filter || 'waypoint-default'.includes(filter.toLowerCase()) || 'default'.includes(filter.toLowerCase())) {\n        const defaultOption = document.createElement('option');\n        defaultOption.value = 'waypoint-default';\n        defaultOption.textContent = 'üéØ Default Waypoint Icon';\n        iconSelect.appendChild(defaultOption);\n      }\n\n      // Filter icons if search is active\n      const iconsToShow = filter\n        ? (this._allIcons || []).filter(id => id.toLowerCase().includes(filter.toLowerCase()))\n        : (this._allIcons || []);\n\n      // Add all icons (no limit)\n      iconsToShow.forEach(iconId => {\n        const option = document.createElement('option');\n        option.value = iconId;\n        option.textContent = iconId.replace(/[_-]/g, ' ');\n        iconSelect.appendChild(option);\n      });\n\n      // If no results\n      if (iconsToShow.length === 0) {\n        const option = document.createElement('option');\n        option.value = '';\n        option.textContent = 'No icons found';\n        option.disabled = true;\n        iconSelect.appendChild(option);\n      }\n    } else {\n      // No sprites available - show default icon option\n      const option = document.createElement('option');\n      option.value = 'waypoint-default';\n      option.textContent = 'Default Waypoint Icon';\n      iconSelect.appendChild(option);\n    }\n\n    // Restore previous selection if it exists\n    const iconSelectCasted = asSelect(iconSelect);\n    if (currentValue && iconSelectCasted && Array.from(iconSelectCasted.options).some(opt => opt.value === currentValue)) {\n      iconSelectCasted.value = currentValue;\n    } else if (iconSelectCasted && iconSelectCasted.options.length > 0) {\n      // Select first non-disabled option if no previous selection\n      const firstValidOption = Array.from(iconSelectCasted.options).find(opt => !opt.disabled);\n      if (firstValidOption) {\n        iconSelectCasted.value = firstValidOption.value;\n      }\n    }\n\n    // Re-attach change listener (innerHTML = '' removes it)\n    iconSelect.removeEventListener('change', this._updateIconPreview);\n    iconSelect.addEventListener('change', this._updateIconPreview);\n\n    // Update preview for current selection\n    this._updateIconPreview();\n  }\n\n  _handleIconSearch(e) {\n    const filter = e.target.value;\n    this._fillIconSelect(filter);\n    this._updateIconPreview();\n  }\n\n  _updateIconPreview() {\n    if (!this._panel) return;\n    const iconSelect = asSelect(this._panel.querySelector('#ve-wp-icon'));\n    const previewDiv = asHTMLElement(this._panel.querySelector('#ve-wp-icon-preview'));\n\n    if (!iconSelect || !previewDiv) return;\n\n    const selectedIcon = iconSelect.value;\n\n    // Clear previous content\n    previewDiv.innerHTML = '';\n\n    // Handle empty selection\n    if (!selectedIcon) {\n      const span = document.createElement('span');\n      span.style.fontSize = '20px';\n      span.textContent = 'üìç';\n      previewDiv.appendChild(span);\n      return;\n    }\n\n    // Handle default waypoint icon\n    if (selectedIcon === 'waypoint-default') {\n      const div = document.createElement('div');\n      div.innerHTML = `<svg width=\"24\" height=\"36\" viewBox=\"0 0 24 36\" xmlns=\"http://www.w3.org/2000/svg\">\n                <ellipse cx=\"12\" cy=\"34\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.3)\" />\n                <path d=\"M12 2 C7 2 3 6 3 11 C3 16 12 26 12 26 C12 26 21 16 21 11 C21 6 17 2 12 2 Z\" fill=\"white\" />\n                <path d=\"M12 4 C8 4 5 7 5 11 C5 15 12 24 12 24 C12 24 19 15 19 11 C19 7 16 4 12 4 Z\" fill=\"#3887be\" />\n                <circle cx=\"12\" cy=\"11\" r=\"3\" fill=\"white\" opacity=\"0.9\" />\n            </svg>`;\n      div.style.display = 'flex';\n      div.style.alignItems = 'center';\n      div.style.justifyContent = 'center';\n      div.style.width = '100%';\n      div.style.height = '100%';\n      previewDiv.appendChild(div);\n      console.log('[Preview] Default icon preview created');\n      return;\n    }\n\n    console.log('[Preview] Updating icon preview:', {\n      selectedIcon,\n      hasSpriteData: !!this._spriteData,\n      hasIconInData: this._spriteData ? !!this._spriteData[selectedIcon] : false,\n      hasSpriteUrl: !!this._spritePngUrl,\n      hasSpriteImage: !!this._spriteImage,\n      imageComplete: this._spriteImage ? this._spriteImage.complete : false\n    });\n\n    // Verify sprite image is loaded before accessing dimensions\n    if (this._spriteData &&\n            this._spriteData[selectedIcon] &&\n            this._spritePngUrl &&\n            this._spriteImage &&\n            this._spriteImage.complete) {\n      const iconData = this._spriteData[selectedIcon];\n      const pr = this._spritePixelRatio || 2; // Use stored pixelRatio (default @2x)\n\n      // Calculate background dimensions safely\n      const bgWidth = this._spriteImage.width / pr;\n      const bgHeight = this._spriteImage.height / pr;\n\n      console.log('[Preview] Sprite dimensions:', {\n        iconWidth: iconData.width,\n        iconHeight: iconData.height,\n        iconX: iconData.x,\n        iconY: iconData.y,\n        bgWidth,\n        bgHeight,\n        pixelRatio: pr\n      });\n\n      // Verify dimensions are valid before using them\n      if (!isNaN(bgWidth) && !isNaN(bgHeight) && bgWidth > 0 && bgHeight > 0) {\n        const div = document.createElement('div');\n        div.style.width = `${iconData.width / pr}px`;\n        div.style.height = `${iconData.height / pr}px`;\n        div.style.backgroundImage = `url(${this._spritePngUrl})`;\n        div.style.backgroundPosition = `-${iconData.x / pr}px -${iconData.y / pr}px`;\n        div.style.backgroundSize = `${bgWidth}px ${bgHeight}px`;\n        div.style.backgroundRepeat = 'no-repeat';\n        div.style.maxWidth = '100%';\n        div.style.maxHeight = '100%';\n        previewDiv.appendChild(div);\n        console.log('[Preview] Sprite preview created successfully');\n        return;\n      } else {\n        console.warn('[Preview] Invalid sprite dimensions');\n      }\n    } else {\n      console.warn('[Preview] Sprite not available');\n    }\n\n    // No preview available\n    const span = document.createElement('span');\n    span.style.fontSize = '12px';\n    span.style.color = '#999';\n    span.textContent = 'No preview';\n    previewDiv.appendChild(span);\n  }\n\n  /**\n   * Fill popup icon select with filtered options\n   * @param {number} index - Waypoint index\n   * @param {string} filter - Search filter\n   */\n  _fillPopupIconSelect(index, filter = '') {\n    // Find currently open popup\n    const popups = document.querySelectorAll('.maplibregl-popup');\n    if (popups.length === 0) return;\n\n    // Find the icon select in the popup\n    const iconSelect = document.querySelector(`#ve-popup-icon-select-${index}`);\n    if (!iconSelect) return;\n\n    const currentValue = asSelect(iconSelect)?.value;\n    iconSelect.innerHTML = '';\n\n    if (this._spriteIcons.length > 0) {\n      // Always add default icon as first option\n      if (!filter || 'waypoint-default'.includes(filter.toLowerCase()) || 'default'.includes(filter.toLowerCase())) {\n        const defaultOption = document.createElement('option');\n        defaultOption.value = 'waypoint-default';\n        defaultOption.textContent = 'üéØ Default Waypoint Icon';\n        iconSelect.appendChild(defaultOption);\n      }\n\n      // Filter icons if search is active\n      const iconsToShow = filter\n        ? this._spriteIcons.filter(id => id.toLowerCase().includes(filter.toLowerCase()))\n        : this._spriteIcons;\n\n      // Add sprite icons (no limit)\n      iconsToShow.forEach(iconId => {\n        const option = document.createElement('option');\n        option.value = iconId;\n        option.textContent = iconId;\n        iconSelect.appendChild(option);\n      });\n    } else {\n      // Fallback if no sprite icons\n      const defaultOption = document.createElement('option');\n      defaultOption.value = 'waypoint-default';\n      defaultOption.textContent = 'Default Waypoint';\n      iconSelect.appendChild(defaultOption);\n    }\n\n    // Restore selection\n    if (currentValue) {\n      asSelect(iconSelect).value = currentValue;\n    }\n  }\n\n  /**\n   * Update icon preview in popup\n   * @param {number} index - Waypoint index\n   */\n  _updatePopupIconPreview(index) {\n    const iconSelect = document.querySelector(`#ve-popup-icon-select-${index}`);\n    const previewDiv = document.querySelector(`#ve-popup-icon-preview-${index}`);\n\n    if (!iconSelect || !previewDiv) return;\n\n    const selectedIcon = asSelect(iconSelect)?.value;\n\n    // Clear previous content\n    previewDiv.innerHTML = '';\n\n    // Handle empty selection\n    if (!selectedIcon) {\n      const span = document.createElement('span');\n      span.style.fontSize = '20px';\n      span.textContent = 'üìç';\n      previewDiv.appendChild(span);\n      return;\n    }\n\n    // Handle default waypoint icon\n    if (selectedIcon === 'waypoint-default') {\n      const div = document.createElement('div');\n      div.innerHTML = `<svg width=\"24\" height=\"36\" viewBox=\"0 0 24 36\" xmlns=\"http://www.w3.org/2000/svg\">\n                <ellipse cx=\"12\" cy=\"34\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.3)\" />\n                <path d=\"M12 2 C7 2 3 6 3 11 C3 16 12 26 12 26 C12 26 21 16 21 11 C21 6 17 2 12 2 Z\" fill=\"white\" />\n                <circle cx=\"12\" cy=\"11\" r=\"5\" fill=\"#2196F3\" />\n            </svg>`;\n      div.style.display = 'flex';\n      div.style.justifyContent = 'center';\n      div.style.alignItems = 'center';\n      div.style.width = '100%';\n      div.style.height = '100%';\n      previewDiv.appendChild(div);\n      return;\n    }\n\n    // Verify sprite image is loaded before accessing dimensions\n    if (this._spriteData &&\n                this._spriteData[selectedIcon] &&\n                this._spritePngUrl &&\n                this._spriteImage &&\n                this._spriteImage.complete &&\n                this._spriteImage.naturalWidth > 0 &&\n                this._spriteImage.naturalHeight > 0) {\n      const iconData = this._spriteData[selectedIcon];\n      const pr = typeof iconData.pixelRatio === 'number' ? iconData.pixelRatio : 1;\n      const bgWidth = this._spriteImage.naturalWidth / pr;\n      const bgHeight = this._spriteImage.naturalHeight / pr;\n\n      if (typeof bgWidth === 'number' && typeof bgHeight === 'number' && bgWidth > 0 && bgHeight > 0) {\n        const div = document.createElement('div');\n        div.style.width = `${iconData.width / pr}px`;\n        div.style.height = `${iconData.height / pr}px`;\n        div.style.backgroundImage = `url(${this._spritePngUrl})`;\n        div.style.backgroundPosition = `-${iconData.x / pr}px -${iconData.y / pr}px`;\n        div.style.backgroundSize = `${bgWidth}px ${bgHeight}px`;\n        div.style.backgroundRepeat = 'no-repeat';\n        div.style.maxWidth = '100%';\n        div.style.maxHeight = '100%';\n        previewDiv.appendChild(div);\n        return;\n      }\n    }\n\n    // No preview available\n    const span = document.createElement('span');\n    span.style.fontSize = '12px';\n    span.style.color = '#999';\n    span.textContent = 'No preview';\n    previewDiv.appendChild(span);\n  }\n\n  // ============================================================================\n  // WAYPOINTS DEFAULT ICON - Built-in fallback icon\n  // ============================================================================\n\n  /**\n     * Add a default waypoint icon to MapLibre using dataURL\n     * This provides a fallback when no sprite sheet is available\n     */\n  _addDefaultWaypointIcon() {\n    if (!this._map) return;\n\n    // SVG pin/marker icon (24x36px)\n    const svg = `<svg width=\"24\" height=\"36\" viewBox=\"0 0 24 36\" xmlns=\"http://www.w3.org/2000/svg\">\n            <!-- Drop shadow -->\n            <ellipse cx=\"12\" cy=\"34\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.3)\" />\n            <!-- Pin body with white border -->\n            <path d=\"M12 2 C7 2 3 6 3 11 C3 16 12 26 12 26 C12 26 21 16 21 11 C21 6 17 2 12 2 Z\"\n                  fill=\"white\" />\n            <!-- Pin body colored -->\n            <path d=\"M12 4 C8 4 5 7 5 11 C5 15 12 24 12 24 C12 24 19 15 19 11 C19 7 16 4 12 4 Z\"\n                  fill=\"#3887be\" />\n            <!-- Center dot -->\n            <circle cx=\"12\" cy=\"11\" r=\"3\" fill=\"white\" opacity=\"0.9\" />\n        </svg>`;\n\n    // Convert SVG to dataURL\n    const dataUrl = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);\n\n    // Load image and add to map\n    const img = new Image(24, 36);\n    img.onload = () => {\n      if (this._map.hasImage('waypoint-default')) {\n        console.log('[Waypoints] Default icon already exists, skipping');\n        return;\n      }\n      this._map.addImage('waypoint-default', img, { pixelRatio: 1 });\n      console.log('[Waypoints] ‚úì Added default waypoint icon');\n    };\n    img.onerror = (err) => {\n      console.error('[Waypoints] Failed to load default icon:', err);\n    };\n    img.src = dataUrl;\n  }\n\n  /**\n   * Async version that ensures icon is loaded before proceeding\n   * Used during recording when time is frozen\n   */\n  async _ensureDefaultWaypointIcon() {\n    if (!this._map) return;\n\n    // Already loaded?\n    if (this._map.hasImage('waypoint-default')) {\n      return;\n    }\n\n    // SVG pin/marker icon (24x36px)\n    const svg = `<svg width=\"24\" height=\"36\" viewBox=\"0 0 24 36\" xmlns=\"http://www.w3.org/2000/svg\">\n            <!-- Drop shadow -->\n            <ellipse cx=\"12\" cy=\"34\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.3)\" />\n            <!-- Pin body with white border -->\n            <path d=\"M12 2 C7 2 3 6 3 11 C3 16 12 26 12 26 C12 26 21 16 21 11 C21 6 17 2 12 2 Z\"\n                  fill=\"white\" />\n            <!-- Pin body colored -->\n            <path d=\"M12 4 C8 4 5 7 5 11 C5 15 12 24 12 24 C12 24 19 15 19 11 C19 7 16 4 12 4 Z\"\n                  fill=\"#3887be\" />\n            <!-- Center dot -->\n            <circle cx=\"12\" cy=\"11\" r=\"3\" fill=\"white\" opacity=\"0.9\" />\n        </svg>`;\n\n    // Convert SVG to dataURL\n    const dataUrl = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);\n\n    // Load image synchronously\n    return new Promise((resolve, reject) => {\n      const img = new Image(24, 36);\n      img.onload = () => {\n        this._map.addImage('waypoint-default', img, { pixelRatio: 1 });\n        console.log('[Waypoints] ‚úì Added default waypoint icon (sync)');\n        resolve();\n      };\n      img.onerror = (err) => {\n        console.error('[Waypoints] Failed to load default icon:', err);\n        reject(err);\n      };\n      img.src = dataUrl;\n    });\n  }\n\n  // ============================================================================\n  // WAYPOINTS MARKERS - Draggable markers management\n  // ============================================================================\n\n  /**\n     * Create a marker DOM element with sprite icon\n     * @param {string} iconId - The sprite icon ID to use\n     * @param {number} index - Waypoint index for identification\n     * @returns {HTMLElement} DOM element for the marker\n     */\n  _createMarkerElement(iconId, index) {\n    if (!this._spriteData || !this._spriteData[iconId] || !this._spritePngUrl) {\n      // Fallback: use same SVG icon as default waypoint icon\n      const el = document.createElement('div');\n      el.className = 've-waypoint-marker';\n      el.innerHTML = `<svg width=\"24\" height=\"36\" viewBox=\"0 0 24 36\" xmlns=\"http://www.w3.org/2000/svg\">\n                <ellipse cx=\"12\" cy=\"34\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.3)\" />\n                <path d=\"M12 2 C7 2 3 6 3 11 C3 16 12 26 12 26 C12 26 21 16 21 11 C21 6 17 2 12 2 Z\" fill=\"white\" />\n                <path d=\"M12 4 C8 4 5 7 5 11 C5 15 12 24 12 24 C12 24 19 15 19 11 C19 7 16 4 12 4 Z\" fill=\"#3887be\" />\n                <circle cx=\"12\" cy=\"11\" r=\"3\" fill=\"white\" opacity=\"0.9\" />\n            </svg>`;\n      el.style.cssText = `\n                width: 24px;\n                height: 36px;\n                cursor: grab;\n                filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));\n            `;\n      el.dataset.waypointIndex = String(index);\n      return el;\n    }\n\n    // Get sprite icon dimensions\n    const iconData = this._spriteData[iconId];\n    const pr = this._spritePixelRatio || 2;\n    const displayWidth = iconData.width / pr;\n    const displayHeight = iconData.height / pr;\n    const bgPosX = iconData.x / pr;\n    const bgPosY = iconData.y / pr;\n    const bgWidth = this._spriteImage ? this._spriteImage.width / pr : 'auto';\n    const bgHeight = this._spriteImage ? this._spriteImage.height / pr : 'auto';\n\n    // Scale icon (apply iconSize multiplier)\n    const scaledWidth = displayWidth * this._iconSize;\n    const scaledHeight = displayHeight * this._iconSize;\n\n    // Create marker element\n    const el = document.createElement('div');\n    el.className = 've-waypoint-marker';\n    el.dataset.waypointIndex = String(index);\n    el.style.cssText = `\n            width: ${scaledWidth}px;\n            height: ${scaledHeight}px;\n            background-image: url(${this._spritePngUrl});\n            background-position: -${bgPosX * this._iconSize}px -${bgPosY * this._iconSize}px;\n            background-size: ${typeof bgWidth === 'number' ? bgWidth * this._iconSize : bgWidth}px ${typeof bgHeight === 'number' ? bgHeight * this._iconSize : bgHeight}px;\n            background-repeat: no-repeat;\n            cursor: grab;\n            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));\n        `;\n\n    return el;\n  }\n\n  /**\n     * Create popup HTML content for waypoint editing\n     * @param {number} index - Waypoint index\n     * @returns {string} HTML content for popup\n     */\n  _createMarkerPopupHTML(index) {\n    const feature = this.options.waypoints.features[index];\n    if (!feature) return '';\n\n    const props = feature.properties;\n    const coords = feature.geometry.coordinates;\n\n    // Build icon options\n    let iconOptions = '<option value=\"waypoint-default\">Default Waypoint</option>';\n    if (this._spriteIcons && this._spriteIcons.length > 0) {\n      this._spriteIcons.forEach(iconName => {\n        const selected = props.icon === iconName ? 'selected' : '';\n        iconOptions += `<option value=\"${iconName}\" ${selected}>${iconName}</option>`;\n      });\n    }\n\n    return `\n            <div class=\"ve-waypoint-popup\" style=\"min-width: 280px; max-width: 320px; max-height: 70vh; overflow-y: auto;\">\n                <h3 style=\"font-size: 13px; font-weight: 600;\">${props.name || `Waypoint ${index + 1}`}</h3>\n\n                <div style=\"margin-bottom: 6px;\">\n                    <label style=\"display: block; font-size: 11px; color: #666; margin-bottom: 2px;\">Icon</label>\n                    <input type=\"text\" id=\"ve-popup-icon-search-${index}\" placeholder=\"Search icons...\"\n                           style=\"width: 100%; padding: 3px; font-size: 11px; border: 1px solid #ddd; border-radius: 3px; margin-bottom: 3px; display: ${this._spriteIcons.length > 30 ? 'block' : 'none'};\" />\n                    <select id=\"ve-popup-icon-select-${index}\" data-field=\"icon\" data-index=\"${index}\"\n                            style=\"width: 100%; padding: 3px; font-size: 12px; border: 1px solid #ddd; border-radius: 3px;\">\n                        ${iconOptions}\n                    </select>\n                    <div id=\"ve-popup-icon-preview-${index}\"\n                         style=\"margin-top: 4px; padding: 6px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 3px; text-align: center; min-height: 36px; display: flex; align-items: center; justify-content: center;\">\n                    </div>\n                </div>\n\n                <div style=\"margin-bottom: 6px;\">\n                    <label style=\"display: block; font-size: 11px; color: #666; margin-bottom: 2px;\">Name (optional)</label>\n                    <input type=\"text\" value=\"${props.name || ''}\" placeholder=\"e.g., Eiffel Tower\"\n                           data-field=\"name\" data-index=\"${index}\"\n                           style=\"width: 100%; padding: 3px; font-size: 12px; border: 1px solid #ddd; border-radius: 3px;\" />\n                </div>\n\n                <div style=\"margin-bottom: 6px;\">\n                    <label style=\"display: block; font-size: 11px; color: #666; margin-bottom: 2px;\">Coordinates</label>\n                    <div style=\"display: flex; gap: 4px;\">\n                        <input type=\"number\" id=\"ve-popup-lng-${index}\" placeholder=\"Longitude\" step=\"0.000001\" value=\"${coords[0].toFixed(6)}\" style=\"flex: 1; padding: 3px; font-size: 11px;\">\n                        <input type=\"number\" id=\"ve-popup-lat-${index}\" placeholder=\"Latitude\" step=\"0.000001\" value=\"${coords[1].toFixed(6)}\" style=\"flex: 1; padding: 3px; font-size: 11px;\">\n                    </div>\n                </div>\n\n                <div style=\"margin-bottom: 6px;\">\n                    <label style=\"font-size: 11px;\">\n                        <input type=\"checkbox\" id=\"ve-popup-camera-toggle-${index}\">\n                        Capturer la position de cam√©ra\n                    </label>\n                    <div style=\"display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 4px; margin-top: 3px;\">\n                        <input type=\"number\" id=\"ve-popup-zoom-${index}\" placeholder=\"Zoom\" size=\"3\" step=\"0.5\" style=\"padding: 3px; font-size: 11px;\" disabled>\n                        <input type=\"number\" id=\"ve-popup-bearing-${index}\" placeholder=\"Bearing\" size=\"3\" step=\"1\" style=\"padding: 3px; font-size: 11px;\" disabled>\n                        <input type=\"number\" id=\"ve-popup-pitch-${index}\" placeholder=\"Pitch\" size=\"3\" step=\"1\" style=\"padding: 3px; font-size: 11px;\" disabled>\n                    </div>\n                    <small style=\"display: block; color: #999; font-size: 10px; margin-top: 2px;\">Fige le zoom et l'angle de vue pour ce point de passage</small>\n                </div>\n\n                <div style=\"margin-bottom: 6px;\">\n                    <label style=\"display: block; font-size: 11px; color: #666; margin-bottom: 2px;\">Pause Duration (ms)</label>\n                    <input type=\"number\" value=\"${props.duration || 2000}\" step=\"100\" placeholder=\"e.g., 3000\"\n                           data-field=\"duration\" data-index=\"${index}\"\n                           style=\"width: 100%; padding: 3px; font-size: 12px; border: 1px solid #ddd; border-radius: 3px;\" />\n                    <small style=\"display: block; color: #999; font-size: 10px; margin-top: 2px;\">How long to pause at this waypoint (0 = no pause)</small>\n                </div>\n\n                <div style=\"display: flex; gap: 4px; margin-top: 8px;\">\n                    <button class=\"ve-popup-save\" data-index=\"${index}\"\n                            style=\"flex: 1; padding: 5px; font-size: 11px; background: #4CAF50; color: white; border: none; border-radius: 3px; cursor: pointer;\">\n                        ‚úì Save\n                    </button>\n                    <button class=\"ve-popup-cancel\" data-index=\"${index}\"\n                            style=\"flex: 1; padding: 5px; font-size: 11px; background: #999; color: white; border: none; border-radius: 3px; cursor: pointer;\">\n                        ‚úó Cancel\n                    </button>\n                </div>\n                <div style=\"margin-top: 4px;\">\n                    <button class=\"ve-popup-delete\" data-index=\"${index}\"\n                            style=\"width: 100%; padding: 5px; font-size: 11px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;\">\n                        üóëÔ∏è Delete\n                    </button>\n                </div>\n            </div>\n        `;\n  }\n\n  /**\n     * Create or update draggable markers for all waypoints\n     * Replaces the old layer-based approach\n     */\n  _createWaypointMarkers() {\n    if (!this._map) {\n      return;\n    }\n\n    // Remove existing markers\n    this._waypointMarkers.forEach(marker => marker.remove());\n    this._waypointMarkers = [];\n\n    const features = this.options.waypoints.features || [];\n\n    if (features.length === 0) {\n      return;\n    }\n\n    features.forEach((feature, index) => {\n      const coords = feature.geometry.coordinates;\n      const props = feature.properties;\n\n      // Find sprite icon for this waypoint\n      const iconName = props.icon || 'waypoint-default';\n      let iconId = null;\n\n      // Handle built-in default icon (not a sprite)\n      if (iconName === 'waypoint-default') {\n        iconId = 'waypoint-default';\n      } else {\n        // Try to find matching icon in sprite data\n        const searchTerm = iconName.toLowerCase();\n\n        // First try exact match\n        if (this._spriteIcons.includes(iconName)) {\n          iconId = iconName;\n        } else {\n          // Then try fuzzy match\n          iconId = this._spriteIcons.find(icon => {\n            const iconLower = icon.toLowerCase();\n            return iconLower.includes(searchTerm) ||\n                               iconLower.startsWith(searchTerm + '-') ||\n                               iconLower.startsWith(searchTerm + '_');\n          });\n        }\n\n        // If not found, use default icon\n        if (!iconId) {\n          iconId = 'waypoint-default';\n        }\n      }\n\n      console.log(`[Waypoints] Marker ${index}: icon=\"${iconName}\" ‚Üí iconId=\"${iconId}\"`);\n\n      // Create marker element\n      const el = this._createMarkerElement(iconId, index);\n\n      // Create marker with draggable option\n      const marker = new maplibregl.Marker({\n        element: el,\n        draggable: true,\n        anchor: 'bottom' // Anchor at bottom center (like a pin)\n      })\n        .setLngLat(coords)\n        .addTo(this._map);\n\n      // Create popup for editing\n      const popupHTML = this._createMarkerPopupHTML(index);\n      const popup = new maplibregl.Popup({\n        offset: 25,\n        closeButton: true,\n        closeOnClick: true\n      })\n        .setHTML(popupHTML);\n\n      marker.setPopup(popup);\n\n      // Listen to marker events (using official MapLibre API)\n      let originalCoords = null;\n      marker.on('dragstart', () => {\n        el.style.cursor = 'grabbing';\n        // Save original coordinates in case we need to revert\n        originalCoords = [...feature.geometry.coordinates];\n      });\n\n      marker.on('dragend', () => {\n        el.style.cursor = 'grab';\n        const lngLat = marker.getLngLat();\n\n        // Validate coordinates against bounds if defined\n        if (!this._validateWaypointCoordinates(lngLat.lng, lngLat.lat)) {\n          const [[west, south], [east, north]] = this.options.maxBounds;\n          const waypointName = feature.properties.name || `Waypoint ${index + 1}`;\n          const confirmed = confirm(\n            '‚ö†Ô∏è Warning: This position is OUTSIDE the defined geographic bounds!\\n\\n' +\n                        `Waypoint: \"${waypointName}\"\\n` +\n                        `New position: [${lngLat.lng.toFixed(4)}, ${lngLat.lat.toFixed(4)}]\\n` +\n                        `Bounds: [${west.toFixed(2)}, ${south.toFixed(2)}] to [${east.toFixed(2)}, ${north.toFixed(2)}]\\n\\n` +\n                        'Animations may not visit this waypoint if strict bounds are enabled.\\n\\n' +\n                        'Keep new position?'\n          );\n\n          if (!confirmed) {\n            // Revert to original position\n            marker.setLngLat(originalCoords);\n            console.log(`[Waypoints] Marker ${index} drag cancelled - out of bounds`);\n            return;\n          }\n        }\n\n        // Update waypoint coordinates\n        feature.geometry.coordinates = [lngLat.lng, lngLat.lat];\n\n        // Update popup content with new coordinates\n        popup.setHTML(this._createMarkerPopupHTML(index));\n\n        // Re-attach event listeners after popup content update\n        this._attachPopupEventListeners(index, popup);\n\n        console.log(`[Waypoints] Marker ${index} dragged to:`, lngLat);\n      });\n\n      // Attach event listeners for popup inputs\n      popup.on('open', () => {\n        this._attachPopupEventListeners(index, popup);\n      });\n\n      // Store marker reference\n      this._waypointMarkers.push(marker);\n    });\n\n    console.log(`[Waypoints] ‚úì Created ${this._waypointMarkers.length} draggable markers`);\n  }\n\n  /**\n     * Attach event listeners to popup input fields\n     * @param {number} index - Waypoint index\n     * @param {maplibregl.Popup} popup - Popup instance\n     */\n  _attachPopupEventListeners(index, popup) {\n    const popupEl = popup.getElement();\n    if (!popupEl) return;\n\n    const feature = this.options.waypoints.features[index];\n    if (!feature) return;\n\n    // Store camera update listener for cleanup (declared here so buttons can access it)\n    let cameraUpdateListener = null;\n\n    // Input fields (name, zoom, duration, bearing, pitch)\n    const inputs = popupEl.querySelectorAll('input[data-field]');\n    inputs.forEach(input => {\n      input.addEventListener('change', (e) => {\n        const field = /** @type {HTMLElement} */(e.target)?.dataset.field;\n        if (!field) return;\n\n        /** @type {string | number | undefined} */\n        let value = asInput(e.target)?.value;\n\n        // Parse numbers or remove empty values\n        if (field === 'zoom' || field === 'duration' || field === 'bearing' || field === 'pitch') {\n          if (value === '' || value === null || value === undefined) {\n            // Remove property if empty (will use auto values)\n            delete feature.properties[field];\n          } else {\n            value = parseFloat(value);\n            feature.properties[field] = value;\n          }\n        } else {\n          // String fields (name)\n          feature.properties[field] = value;\n        }\n\n        // Update UI list in panel\n        this._updateWaypointsUI();\n\n        console.log(`[Waypoints] Updated waypoint ${index} ${field}:`, value);\n      });\n    });\n\n    // Icon select\n    const iconSelect = popupEl.querySelector(`#ve-popup-icon-select-${index}`);\n    if (iconSelect) {\n      iconSelect.addEventListener('change', (e) => {\n        const iconValue = asSelect(e.target)?.value;\n        if (!iconValue) return;\n\n        // Update icon property\n        feature.properties.icon = iconValue;\n\n        // Update preview\n        this._updatePopupIconPreview(index);\n\n        // Don't recreate markers here - would close popup\n        // Markers will be updated when Save is clicked\n\n        console.log(`[Waypoints] Updated waypoint ${index} icon:`, iconValue);\n      });\n\n      // Initialize preview on popup open\n      this._updatePopupIconPreview(index);\n    }\n\n    // Icon search\n    const iconSearch = popupEl.querySelector(`#ve-popup-icon-search-${index}`);\n    if (iconSearch && iconSelect) {\n      iconSearch.addEventListener('input', (e) => {\n        const filter = asInput(e.target)?.value || '';\n        this._fillPopupIconSelect(index, filter);\n        this._updatePopupIconPreview(index);\n      });\n    }\n\n    // Save button (close popup and update markers)\n    const saveBtn = popupEl.querySelector('.ve-popup-save');\n    if (saveBtn) {\n      saveBtn.addEventListener('click', () => {\n        // Stop camera listener if active\n        if (this._map && cameraUpdateListener) {\n          this._map.off('move', cameraUpdateListener);\n          cameraUpdateListener = null;\n        }\n\n        // Close popup\n        popup.remove();\n\n        // Recreate markers to update position (if coordinates changed)\n        this._createWaypointMarkers();\n\n        // Update UI list now that editing is done\n        this._updateWaypointsUI();\n\n        // Save to localStorage\n        this._saveWaypoints();\n\n        console.log(`[Waypoints] Saved waypoint ${index}`);\n      });\n    }\n\n    // Cancel button (revert changes and close)\n    const cancelBtn = popupEl.querySelector('.ve-popup-cancel');\n    if (cancelBtn) {\n      cancelBtn.addEventListener('click', () => {\n        // Stop camera listener if active\n        if (this._map && cameraUpdateListener) {\n          this._map.off('move', cameraUpdateListener);\n          cameraUpdateListener = null;\n        }\n\n        // Note: We don't revert changes here as they're applied in real-time\n        // If you want to revert, you'd need to store initial state\n\n        // Just close popup\n        popup.remove();\n\n        console.log(`[Waypoints] Cancelled editing waypoint ${index}`);\n      });\n    }\n\n    // Delete button\n    const deleteBtn = popupEl.querySelector('.ve-popup-delete');\n    if (deleteBtn) {\n      deleteBtn.addEventListener('click', () => {\n        // Stop camera listener if active\n        if (this._map && cameraUpdateListener) {\n          this._map.off('move', cameraUpdateListener);\n          cameraUpdateListener = null;\n        }\n\n        // Remove from data\n        this.options.waypoints.features.splice(index, 1);\n\n        // Close popup\n        popup.remove();\n\n        // Recreate all markers (indices have changed)\n        this._createWaypointMarkers();\n\n        // Update UI list\n        this._updateWaypointsUI();\n\n        // Save to localStorage\n        this._saveWaypoints();\n\n        console.log(`[Waypoints] Deleted waypoint ${index}`);\n      });\n    }\n\n    // Coordinates fields\n    const lngField = popupEl.querySelector(`#ve-popup-lng-${index}`);\n    const latField = popupEl.querySelector(`#ve-popup-lat-${index}`);\n\n    if (lngField && latField) {\n      lngField.addEventListener('change', (e) => {\n        const value = parseFloat(asInput(e.target)?.value || '');\n        if (!isNaN(value)) {\n          feature.geometry.coordinates[0] = value;\n          // Don't recreate markers here - would close the popup\n          // Marker position will be updated when Save is clicked\n          console.log(`[Waypoints] Updated longitude to ${value}`);\n        }\n      });\n\n      latField.addEventListener('change', (e) => {\n        const value = parseFloat(asInput(e.target)?.value || '');\n        if (!isNaN(value)) {\n          feature.geometry.coordinates[1] = value;\n          // Don't recreate markers here - would close the popup\n          // Marker position will be updated when Save is clicked\n          console.log(`[Waypoints] Updated latitude to ${value}`);\n        }\n      });\n    }\n\n    // Camera toggle checkbox\n    const cameraToggle = popupEl.querySelector(`#ve-popup-camera-toggle-${index}`);\n    const zoomField = popupEl.querySelector(`#ve-popup-zoom-${index}`);\n    const bearingField = popupEl.querySelector(`#ve-popup-bearing-${index}`);\n    const pitchField = popupEl.querySelector(`#ve-popup-pitch-${index}`);\n\n    if (cameraToggle && zoomField && bearingField && pitchField) {\n      const cameraToggleEl = asInput(cameraToggle);\n      const zoomFieldEl = asInput(zoomField);\n      const bearingFieldEl = asInput(bearingField);\n      const pitchFieldEl = asInput(pitchField);\n\n      // Function to update camera fields from map\n      const updateCameraFields = () => {\n        if (!this._map) return;\n        const zoom = this._map.getZoom();\n        const bearing = this._map.getBearing();\n        const pitch = this._map.getPitch();\n\n        if (zoomFieldEl) zoomFieldEl.value = zoom.toFixed(1);\n        if (bearingFieldEl) bearingFieldEl.value = bearing.toFixed(0);\n        if (pitchFieldEl) pitchFieldEl.value = pitch.toFixed(0);\n\n        feature.properties.zoom = zoom;\n        feature.properties.bearing = bearing;\n        feature.properties.pitch = pitch;\n\n        // Don't update UI here - would close the popup\n      };\n\n      // Initialize checkbox state and field values if properties exist\n      if (feature.properties.zoom !== undefined || feature.properties.bearing !== undefined || feature.properties.pitch !== undefined) {\n        if (cameraToggleEl) cameraToggleEl.checked = true;\n        if (zoomFieldEl) {\n          zoomFieldEl.disabled = false;\n          if (feature.properties.zoom !== undefined) zoomFieldEl.value = feature.properties.zoom.toString();\n        }\n        if (bearingFieldEl) {\n          bearingFieldEl.disabled = false;\n          if (feature.properties.bearing !== undefined) bearingFieldEl.value = feature.properties.bearing.toString();\n        }\n        if (pitchFieldEl) {\n          pitchFieldEl.disabled = false;\n          if (feature.properties.pitch !== undefined) pitchFieldEl.value = feature.properties.pitch.toString();\n        }\n\n        // Start auto-update if checkbox is checked\n        if (this._map) {\n          cameraUpdateListener = updateCameraFields;\n          this._map.on('move', cameraUpdateListener);\n        }\n      }\n\n      // Toggle camera capture\n      cameraToggle.addEventListener('change', (e) => {\n        const checked = asInput(e.target)?.checked;\n\n        if (checked) {\n          // Enable fields and populate with current map values\n          if (zoomFieldEl) zoomFieldEl.disabled = false;\n          if (bearingFieldEl) bearingFieldEl.disabled = false;\n          if (pitchFieldEl) pitchFieldEl.disabled = false;\n\n          // Initial update\n          updateCameraFields();\n\n          // Start auto-update on map movements\n          if (this._map && !cameraUpdateListener) {\n            cameraUpdateListener = updateCameraFields;\n            this._map.on('move', cameraUpdateListener);\n          }\n        } else {\n          // Disable fields and remove properties\n          if (zoomFieldEl) {\n            zoomFieldEl.disabled = true;\n            zoomFieldEl.value = '';\n          }\n          if (bearingFieldEl) {\n            bearingFieldEl.disabled = true;\n            bearingFieldEl.value = '';\n          }\n          if (pitchFieldEl) {\n            pitchFieldEl.disabled = true;\n            pitchFieldEl.value = '';\n          }\n\n          delete feature.properties.zoom;\n          delete feature.properties.bearing;\n          delete feature.properties.pitch;\n\n          // Stop auto-update\n          if (this._map && cameraUpdateListener) {\n            this._map.off('move', cameraUpdateListener);\n            cameraUpdateListener = null;\n          }\n        }\n\n        console.log(`[Waypoints] Camera capture ${checked ? 'enabled' : 'disabled'} for waypoint ${index}`);\n      });\n\n      // Handle manual field changes (user edits)\n      [zoomField, bearingField, pitchField].forEach(field => {\n        field.addEventListener('change', (e) => {\n          const inputEl = asInput(e.target);\n          const value = inputEl?.value;\n          const fieldId = inputEl?.id || '';\n\n          if (value && value !== '') {\n            const numValue = parseFloat(value);\n            if (fieldId.includes('zoom')) {\n              feature.properties.zoom = numValue;\n            } else if (fieldId.includes('bearing')) {\n              feature.properties.bearing = numValue;\n            } else if (fieldId.includes('pitch')) {\n              feature.properties.pitch = numValue;\n            }\n            console.log(`[Waypoints] Manually updated camera ${fieldId} to ${numValue}`);\n          }\n          // Don't update UI here - would close the popup\n        });\n      });\n\n      // Cleanup listener when popup is closed\n      popup.on('close', () => {\n        if (this._map && cameraUpdateListener) {\n          this._map.off('move', cameraUpdateListener);\n          cameraUpdateListener = null;\n        }\n      });\n    }\n  }\n\n  // ============================================================================\n  // WAYPOINTS LAYER - Map layer management (DEPRECATED - now using Markers)\n  // ============================================================================\n\n  _createWaypointsLayer() {\n    // Legacy method - now redirects to marker-based implementation\n    console.log('[Waypoints] _createWaypointsLayer called (redirecting to markers)');\n    this._createWaypointMarkers();\n  }\n\n  _updateWaypointsLayer() {\n    // Legacy method - now redirects to marker-based implementation\n    console.log('[Waypoints] _updateWaypointsLayer called (redirecting to markers)');\n    this._createWaypointMarkers();\n  }\n\n  _removeWaypointsLayer() {\n    // Legacy method - now removes markers instead of layer\n    console.log('[Waypoints] _removeWaypointsLayer called (removing markers)');\n    this._waypointMarkers.forEach(marker => marker.remove());\n    this._waypointMarkers = [];\n  }\n\n  /**\n     * Hide waypoint markers (e.g., during recording)\n     * Markers are DOM elements that appear in the video, so we need to hide them\n     */\n  _hideWaypointMarkers() {\n    console.log('[Waypoints] Hiding waypoint markers for recording');\n    this._waypointMarkers.forEach(marker => {\n      const el = marker.getElement();\n      if (el) {\n        el.style.display = 'none';\n      }\n    });\n  }\n\n  /**\n     * Show waypoint markers (e.g., after recording)\n     */\n  _showWaypointMarkers() {\n    this._waypointMarkers.forEach(marker => {\n      const el = marker.getElement();\n      if (el) {\n        el.style.display = ''; // Restore default display\n      }\n    });\n  }\n\n  /**\n     * Create a temporary WebGL layer for waypoints during video recording\n     * This layer will be captured in the video (unlike DOM markers)\n     */\n  async _createWaypointsWebGLLayer() {\n    if (!this._map || !this.options.waypoints || this.options.waypoints.features.length === 0) {\n      return;\n    }\n\n    // Ensure default icon is loaded (wait for it if needed)\n    await this._ensureDefaultWaypointIcon();\n\n    const sourceId = 've-waypoints-recording-source';\n    const layerId = 've-waypoints-recording-layer';\n\n    // Remove layer/source if they already exist\n    if (this._map.getLayer(layerId)) {\n      this._map.removeLayer(layerId);\n    }\n    if (this._map.getSource(sourceId)) {\n      this._map.removeSource(sourceId);\n    }\n\n    // Prepare GeoJSON with icon IDs\n    const geojsonWithIcons = {\n      type: 'FeatureCollection',\n      features: this.options.waypoints.features.map((feature, index) => {\n        const iconName = feature.properties.icon || 'waypoint-default';\n        let iconId = null;\n\n        // Handle built-in default icon (not a sprite)\n        if (iconName === 'waypoint-default') {\n          iconId = 'waypoint-default';\n        } else {\n          // Try to find matching icon in sprite data\n\n          // First try exact match\n          if (this._spriteIcons.includes(iconName)) {\n            iconId = iconName;\n          }\n          // If not found, use default icon\n          if (!iconId) {\n            iconId = 'waypoint-default';\n          }\n        }\n\n        console.log(`[Waypoints] WebGL Layer - Waypoint ${index}: icon=\"${iconName}\" ‚Üí iconId=\"${iconId}\"`);\n\n        // Clone feature and add resolved iconId\n        return {\n          ...feature,\n          properties: {\n            ...feature.properties,\n            iconId: iconId || 'marker' // Fallback\n          }\n        };\n      })\n    };\n\n    // Add source\n    this._map.addSource(sourceId, {\n      type: 'geojson',\n      data: geojsonWithIcons\n    });\n\n    // Add layer with sprite icons - at the TOP of all layers\n    // Note: We don't specify a 'beforeId' so it goes on top by default\n    this._map.addLayer({\n      id: layerId,\n      type: 'symbol',\n      source: sourceId,\n      layout: {\n        'icon-image': ['get', 'iconId'], // Use the resolved iconId\n        'icon-size': this._iconSize || 1,\n        'icon-allow-overlap': true,\n        'icon-ignore-placement': true, // Force rendering even if overlaps\n        'icon-anchor': 'bottom', // Match marker anchor\n        visibility: 'visible', // Explicitly set visibility\n        // Only show text if labels are enabled AND we have a font\n        ...(this._showWaypointLabels && this._selectedFont\n          ? {\n            'text-field': ['get', 'name'],\n            'text-font': [this._selectedFont], // Use detected font\n            'text-offset': [0, 0.5],\n            'text-anchor': 'top',\n            'text-size': 12,\n            'text-allow-overlap': true,\n            'text-ignore-placement': true\n          }\n          : {})\n      },\n      paint: {\n        'icon-opacity': 1,\n        'text-color': '#333',\n        'text-halo-color': '#fff',\n        'text-halo-width': 2\n      }\n    });\n\n    console.log(`[Waypoints] ‚úì Created WebGL layer with ${geojsonWithIcons.features.length} waypoints`);\n  }\n\n  /**\n     * Remove the temporary WebGL layer after recording\n     */\n  _removeWaypointsWebGLLayer() {\n    const sourceId = 've-waypoints-recording-source';\n    const layerId = 've-waypoints-recording-layer';\n\n    if (this._map.getLayer(layerId)) {\n      this._map.removeLayer(layerId);\n    }\n    if (this._map.getSource(sourceId)) {\n      this._map.removeSource(sourceId);\n    }\n  }\n\n  /**\n   * Validate waypoint coordinates against geographic constraints\n   * @param {number} lng - Longitude\n   * @param {number} lat - Latitude\n   * @returns {boolean} True if valid (within bounds or no bounds defined)\n   */\n  _validateWaypointCoordinates(lng, lat) {\n    if (!this.options.maxBounds) return true;\n\n    const [[west, south], [east, north]] = this.options.maxBounds;\n    return lng >= west && lng <= east && lat >= south && lat <= north;\n  }\n\n  _addWaypoint() {\n    if (!this._map) return;\n\n    // Get current map center\n    const center = this._map.getCenter();\n\n    // Validate against bounds if defined\n    if (!this._validateWaypointCoordinates(center.lng, center.lat)) {\n      const [[west, south], [east, north]] = this.options.maxBounds;\n      const confirmed = confirm(\n        '‚ö†Ô∏è Warning: This waypoint is OUTSIDE the defined geographic bounds!\\n\\n' +\n                  `Waypoint: [${center.lng.toFixed(4)}, ${center.lat.toFixed(4)}]\\n` +\n                  `Bounds: [${west.toFixed(2)}, ${south.toFixed(2)}] to [${east.toFixed(2)}, ${north.toFixed(2)}]\\n\\n` +\n                  'Animations may not visit this waypoint if strict bounds are enabled.\\n\\n' +\n                  'Add anyway?'\n      );\n\n      if (!confirmed) {\n        console.log('Waypoint addition cancelled - out of bounds');\n        return;\n      }\n    }\n\n    // Create GeoJSON Feature (without camera params - user can add them via toggle)\n    const feature = {\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [center.lng, center.lat]\n      },\n      properties: {\n        name: `Waypoint ${(this.options.waypoints.features.length || 0) + 1}`,\n        icon: 'waypoint-default',\n        duration: 2000 // Default pause duration\n      }\n    };\n\n    this.options.waypoints.features.push(feature);\n    this._updateWaypointsUI();\n    this._saveWaypoints();\n\n    // Create/update markers on map (including popups)\n    this._createWaypointMarkers();\n\n    // Open popup for the newly added waypoint (last marker in array)\n    const lastMarker = this._waypointMarkers[this._waypointMarkers.length - 1];\n    if (lastMarker) {\n      lastMarker.togglePopup();\n    }\n\n    // Hide the entire control panel so user can see the new marker on the map\n    // User can click on the control button to reopen it\n    this._hidePanel();\n\n    console.log('Added waypoint:', feature);\n  }\n\n  _updateWaypointsUI() {\n    if (!this._panel) return;\n    const list = asHTMLElement(this._panel.querySelector('#ve-waypoints-list'));\n    const exportBtn = asButton(this._panel.querySelector('#ve-waypoint-export'));\n\n    if (!list || !exportBtn) return;\n\n    // Clear list\n    list.innerHTML = '';\n\n    const features = this.options.waypoints.features || [];\n\n    if (features.length === 0) {\n      list.innerHTML = `\n                <div style=\"text-align: center; color: #999; font-size: 12px; padding: 20px 0;\">\n                    No waypoints yet. Click \"Add draggable Icon\" to start.\n                </div>\n            `;\n      exportBtn.disabled = true;\n      return;\n    }\n\n    // Enable export button\n    exportBtn.disabled = false;\n\n    // Add waypoint items\n    features.forEach((feature, index) => {\n      const props = feature.properties;\n      const item = document.createElement('div');\n      item.className = 've-waypoint-item';\n      item.style.cssText = 'display: flex; align-items: center; gap: 8px; padding: 6px; background: white; border-radius: 3px; margin-bottom: 4px; cursor: pointer;';\n\n      // Icon preview\n      let iconHTML = '<span style=\"font-size: 18px;\">‚ùì</span>'; // Default unknown icon\n\n      // Handle default waypoint icon\n      if (props.icon === 'waypoint-default') {\n        iconHTML = `<div style=\"width: 20px; height: 20px; display: flex; align-items: center; justify-content: center;\">\n                    <svg width=\"12\" height=\"18\" viewBox=\"0 0 24 36\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <ellipse cx=\"12\" cy=\"34\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.3)\" />\n                        <path d=\"M12 2 C7 2 3 6 3 11 C3 16 12 26 12 26 C12 26 21 16 21 11 C21 6 17 2 12 2 Z\" fill=\"white\" />\n                        <path d=\"M12 4 C8 4 5 7 5 11 C5 15 12 24 12 24 C12 24 19 15 19 11 C19 7 16 4 12 4 Z\" fill=\"#3887be\" />\n                        <circle cx=\"12\" cy=\"11\" r=\"3\" fill=\"white\" opacity=\"0.9\" />\n                    </svg>\n                </div>`;\n      } else if (this._spriteData && this._spriteData[props.icon] && this._spritePngUrl) {\n        // Handle sprite icons\n        const iconData = this._spriteData[props.icon];\n        const pr = this._spritePixelRatio || 2; // Use stored pixelRatio (default @2x)\n        const displayWidth = iconData.width / pr;\n        const displayHeight = iconData.height / pr;\n        const bgPosX = iconData.x / pr;\n        const bgPosY = iconData.y / pr;\n        const bgWidth = this._spriteImage ? this._spriteImage.width / pr : 'auto';\n        const bgHeight = this._spriteImage ? this._spriteImage.height / pr : 'auto';\n\n        // Scale to fit 20px container while preserving aspect ratio\n        const scale = Math.min(20 / displayWidth, 20 / displayHeight);\n        const scaledWidth = displayWidth * scale;\n        const scaledHeight = displayHeight * scale;\n\n        iconHTML = `<div style=\"width: 20px; height: 20px; display: flex; align-items: center; justify-content: center;\">\n                    <div style=\"width: ${scaledWidth}px; height: ${scaledHeight}px; background-image: url(${this._spritePngUrl}); background-position: -${bgPosX}px -${bgPosY}px; background-size: ${bgWidth}px ${bgHeight}px; background-repeat: no-repeat;\"></div>\n                </div>`;\n      }\n\n      // Security: Use createElement + textContent to prevent XSS from waypoint names\n      // Create icon container\n      const iconContainer = document.createElement('div');\n      iconContainer.innerHTML = iconHTML; // iconHTML is safe (built from validated sprite data or static SVG)\n      item.appendChild(iconContainer);\n\n      // Create name span (safe - uses textContent)\n      const nameSpan = document.createElement('span');\n      nameSpan.className = 've-wp-name';\n      nameSpan.setAttribute('data-index', String(index));\n      nameSpan.style.cssText = 'flex: 1; font-size: 12px; font-weight: 500; cursor: pointer;';\n      nameSpan.textContent = props.name || `Waypoint ${index + 1}`; // textContent prevents XSS\n      item.appendChild(nameSpan);\n\n      // Create move up button\n      const moveUpBtn = document.createElement('button');\n      moveUpBtn.className = 've-wp-move-up';\n      moveUpBtn.setAttribute('data-index', String(index));\n      moveUpBtn.style.cssText = 'padding: 2px 6px; font-size: 11px; background: #666; color: white; border: none; border-radius: 3px; cursor: pointer;';\n      moveUpBtn.textContent = '‚Üë';\n      moveUpBtn.disabled = index === 0;\n      item.appendChild(moveUpBtn);\n\n      // Create move down button\n      const moveDownBtn = document.createElement('button');\n      moveDownBtn.className = 've-wp-move-down';\n      moveDownBtn.setAttribute('data-index', String(index));\n      moveDownBtn.style.cssText = 'padding: 2px 6px; font-size: 11px; background: #666; color: white; border: none; border-radius: 3px; cursor: pointer;';\n      moveDownBtn.textContent = '‚Üì';\n      moveDownBtn.disabled = index === features.length - 1;\n      item.appendChild(moveDownBtn);\n\n      // Create delete button\n      const deleteBtn = document.createElement('button');\n      deleteBtn.className = 've-wp-delete';\n      deleteBtn.setAttribute('data-index', String(index));\n      deleteBtn.style.cssText = 'padding: 2px 6px; font-size: 11px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;';\n      deleteBtn.textContent = 'üóëÔ∏è';\n      item.appendChild(deleteBtn);\n\n      list.appendChild(item);\n    });\n\n    list.querySelectorAll('.ve-wp-delete').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const index = parseInt(btn.getAttribute('data-index') || '0', 10);\n        this._deleteWaypoint(index);\n      });\n    });\n\n    // Move up button handlers\n    list.querySelectorAll('.ve-wp-move-up').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const index = parseInt(btn.getAttribute('data-index') || '0', 10);\n        if (index > 0) {\n          // Swap with previous item\n          const features = this.options.waypoints.features;\n          [features[index - 1], features[index]] = [features[index], features[index - 1]];\n\n          // Update UI and markers\n          this._updateWaypointsUI();\n          this._createWaypointMarkers();\n          this._saveWaypoints();\n\n          console.log(`[Waypoints] Moved waypoint from ${index} to ${index - 1}`);\n        }\n      });\n    });\n\n    // Move down button handlers\n    list.querySelectorAll('.ve-wp-move-down').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const index = parseInt(btn.getAttribute('data-index') || '0', 10);\n        const features = this.options.waypoints.features;\n        if (index < features.length - 1) {\n          // Swap with next item\n          [features[index], features[index + 1]] = [features[index + 1], features[index]];\n\n          // Update UI and markers\n          this._updateWaypointsUI();\n          this._createWaypointMarkers();\n          this._saveWaypoints();\n\n          console.log(`[Waypoints] Moved waypoint from ${index} to ${index + 1}`);\n        }\n      });\n    });\n\n    // Click on waypoint name to center and open popup\n    list.querySelectorAll('.ve-wp-name').forEach(nameSpan => {\n      nameSpan.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const index = parseInt(nameSpan.getAttribute('data-index') || '0', 10);\n        const feature = this.options.waypoints.features[index];\n        if (!feature || !this._map) return;\n\n        const coords = feature.geometry.coordinates;\n\n        // Close the panel\n        if (this._panel && this._panel.style.display !== 'none') {\n          this._panel.style.display = 'none';\n        }\n\n        // Fly to the waypoint\n        this._map.flyTo({\n          center: coords,\n          zoom: Math.max(this._map.getZoom(), 14), // Zoom in at least to 14\n          duration: 1000,\n          essential: true\n        });\n\n        // Wait for the flyTo to complete, then open the popup\n        this._map.once('moveend', () => {\n          // Find the corresponding marker and open its popup\n          if (this._waypointMarkers && this._waypointMarkers[index]) {\n            const marker = this._waypointMarkers[index];\n            marker.togglePopup(); // Open the popup\n          }\n        });\n\n        console.log(`[Waypoints] Centered on waypoint ${index}`);\n      });\n    });\n\n    // Update waypoints layer on map\n    this._updateWaypointsLayer();\n  }\n\n  _editWaypoint(index) {\n    if (!this._panel) return;\n    const editor = this._panel.querySelector('#ve-waypoint-editor');\n    const features = this.options.waypoints.features;\n    if (!editor || !features || !features[index]) return;\n\n    const feature = features[index];\n    const props = feature.properties;\n    const coords = feature.geometry.coordinates;\n\n    // Show editor (editor already checked for null above)\n    /** @type {HTMLElement} */(editor).style.display = 'block';\n\n    // Check if waypoint has camera parameters\n    const hasCamera = props.zoom !== undefined || props.bearing !== undefined || props.pitch !== undefined;\n\n    // Fill form\n    const wpIndex = asInput(this._panel.querySelector('#ve-wp-index'));\n    const wpIcon = asSelect(this._panel.querySelector('#ve-wp-icon'));\n    const wpName = asInput(this._panel.querySelector('#ve-wp-name'));\n    const wpLng = asInput(this._panel.querySelector('#ve-wp-lng'));\n    const wpLat = asInput(this._panel.querySelector('#ve-wp-lat'));\n    const wpDuration = asInput(this._panel.querySelector('#ve-wp-duration'));\n\n    if (wpIndex) wpIndex.value = index;\n    if (wpIcon) wpIcon.value = props.icon || 'waypoint-default';\n    if (wpName) wpName.value = props.name || '';\n    if (wpLng) wpLng.value = coords[0];\n    if (wpLat) wpLat.value = coords[1];\n    if (wpDuration) wpDuration.value = props.duration || '';\n\n    // Set camera toggle and fields\n    const cameraToggle = asInput(this._panel.querySelector('#ve-wp-camera-toggle'));\n    const zoomInput = asInput(this._panel.querySelector('#ve-wp-zoom'));\n    const bearingInput = asInput(this._panel.querySelector('#ve-wp-bearing'));\n    const pitchInput = asInput(this._panel.querySelector('#ve-wp-pitch'));\n\n    if (hasCamera) {\n      // Waypoint has camera params ‚Üí enable and fill\n      if (cameraToggle) cameraToggle.checked = true;\n      if (zoomInput) zoomInput.disabled = false;\n      if (bearingInput) bearingInput.disabled = false;\n      if (pitchInput) pitchInput.disabled = false;\n      if (zoomInput) zoomInput.value = props.zoom !== undefined ? props.zoom : '';\n      if (bearingInput) bearingInput.value = props.bearing !== undefined ? props.bearing : '';\n      if (pitchInput) pitchInput.value = props.pitch !== undefined ? props.pitch : '';\n    } else {\n      // No camera params ‚Üí disable and clear\n      if (cameraToggle) cameraToggle.checked = false;\n      if (zoomInput) zoomInput.disabled = true;\n      if (bearingInput) bearingInput.disabled = true;\n      if (pitchInput) pitchInput.disabled = true;\n      if (zoomInput) zoomInput.value = '';\n      if (bearingInput) bearingInput.value = '';\n      if (pitchInput) pitchInput.value = '';\n    }\n\n    // Update icon preview\n    this._updateIconPreview();\n  }\n\n  _saveWaypoint() {\n    if (!this._panel) return;\n    const editor = this._panel.querySelector('#ve-waypoint-editor');\n    const index = parseInt(asInput(this._panel.querySelector('#ve-wp-index'))?.value || '0', 10);\n\n    const features = this.options.waypoints.features;\n    if (!features || !features[index]) return;\n\n    // Get values\n    const icon = asSelect(this._panel.querySelector('#ve-wp-icon'))?.value || '';\n    const name = asInput(this._panel.querySelector('#ve-wp-name'))?.value;\n    const lng = parseFloat(asInput(this._panel.querySelector('#ve-wp-lng'))?.value || '0');\n    const lat = parseFloat(asInput(this._panel.querySelector('#ve-wp-lat'))?.value || '0');\n    const zoom = asInput(this._panel.querySelector('#ve-wp-zoom'))?.value;\n    const bearing = asInput(this._panel.querySelector('#ve-wp-bearing'))?.value;\n    const pitch = asInput(this._panel.querySelector('#ve-wp-pitch'))?.value;\n    const duration = asInput(this._panel.querySelector('#ve-wp-duration'))?.value;\n\n    // Validate coordinates against bounds if defined\n    if (!this._validateWaypointCoordinates(lng, lat)) {\n      const [[west, south], [east, north]] = this.options.maxBounds;\n      const waypointName = name || `Waypoint ${index + 1}`;\n      const confirmed = confirm(\n        '‚ö†Ô∏è Warning: These coordinates are OUTSIDE the defined geographic bounds!\\n\\n' +\n                `Waypoint: ${waypointName}\\n` +\n                `Coordinates: [${lng.toFixed(4)}, ${lat.toFixed(4)}]\\n` +\n                `Bounds: [${west.toFixed(2)}, ${south.toFixed(2)}] to [${east.toFixed(2)}, ${north.toFixed(2)}]\\n\\n` +\n                'Animations may not visit this waypoint if strict bounds are enabled.\\n\\n' +\n                'Save anyway?'\n      );\n\n      if (!confirmed) {\n        console.log('Waypoint save cancelled - coordinates out of bounds');\n        return;\n      }\n    }\n\n    // Update feature\n    features[index] = {\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [lng, lat]\n      },\n      properties: {\n        icon,\n        name: name || `Waypoint ${index + 1}`,\n        ...(zoom !== '' && { zoom: parseFloat(zoom || '0') }),\n        ...(bearing !== '' && { bearing: parseFloat(bearing || '0') }),\n        ...(pitch !== '' && { pitch: parseFloat(pitch || '0') }),\n        ...(duration !== '' && { duration: parseInt(duration || '0', 10) })\n      }\n    };\n\n    // Hide editor\n    if (editor) /** @type {HTMLElement} */(editor).style.display = 'none';\n\n    // Update UI\n    this._updateWaypointsUI();\n\n    // Recreate markers (to reflect changes in position, icon, etc.)\n    this._createWaypointMarkers();\n\n    console.log('Waypoint saved:', features[index]);\n  }\n\n  _cancelWaypointEdit() {\n    if (!this._panel) return;\n    const editor = asHTMLElement(this._panel.querySelector('#ve-waypoint-editor'));\n    if (editor) {\n      editor.style.display = 'none';\n    }\n  }\n\n  _deleteWaypoint(index) {\n    if (!this._panel) return;\n    const features = this.options.waypoints.features;\n    if (!features) return;\n\n    const name = features[index].properties.name || `Waypoint ${index + 1}`;\n    if (confirm(`Delete waypoint \"${name}\"?`)) {\n      features.splice(index, 1);\n      this._updateWaypointsUI();\n      this._saveWaypoints();\n\n      // Hide editor if it was editing this waypoint\n      const editor = asHTMLElement(this._panel.querySelector('#ve-waypoint-editor'));\n      const editingIndex = parseInt(asInput(this._panel.querySelector('#ve-wp-index'))?.value || '-1', 10);\n      if (editingIndex === index && editor) {\n        editor.style.display = 'none';\n      }\n\n      console.log('Waypoint deleted, remaining:', features.length);\n    }\n  }\n\n  _importWaypoints() {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json,.geojson';\n\n    input.onchange = (e) => {\n      const file = asInput(e.target)?.files?.[0];\n      if (!file) return;\n\n      // Security: Validate file size (max 5MB)\n      const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB in bytes\n      if (file.size > MAX_FILE_SIZE) {\n        alert(\n          `File too large: ${(file.size / 1024 / 1024).toFixed(2)} MB\\n\\n` +\n          `Maximum allowed: ${MAX_FILE_SIZE / 1024 / 1024} MB\\n\\n` +\n          'Please use a smaller waypoints file.'\n        );\n        return;\n      }\n\n      // Security: Validate MIME type (JSON or GeoJSON)\n      const validMimeTypes = ['application/json', 'application/geo+json', 'text/plain', ''];\n      if (!validMimeTypes.includes(file.type)) {\n        alert(\n          `Invalid file type: ${file.type || 'unknown'}\\n\\n` +\n          'Please upload a .json or .geojson file.'\n        );\n        return;\n      }\n\n      const reader = new FileReader();\n\n      // Security: Add error handler for FileReader operations\n      reader.onerror = () => {\n        console.error('FileReader error:', reader.error);\n        alert(\n          `Error reading file: ${reader.error?.message || 'Unknown error'}\\n\\n` +\n          'Please try again or use a different file.'\n        );\n      };\n\n      reader.onload = (event) => {\n        try {\n          if (!event.target) return;\n          const geojson = JSON.parse(/** @type {string} */(event.target.result));\n\n          // Validate GeoJSON structure\n          if (geojson.type !== 'FeatureCollection') {\n            throw new Error('Invalid format: expected GeoJSON FeatureCollection');\n          }\n\n          if (!Array.isArray(geojson.features)) {\n            throw new Error('Invalid format: features must be an array');\n          }\n\n          // Validate each feature\n          const outOfBoundsWaypoints = [];\n          geojson.features.forEach((feature, idx) => {\n            if (feature.type !== 'Feature') {\n              throw new Error(`Feature ${idx}: invalid type`);\n            }\n            if (feature.geometry.type !== 'Point') {\n              throw new Error(`Feature ${idx}: only Point geometry supported`);\n            }\n            if (!Array.isArray(feature.geometry.coordinates) || feature.geometry.coordinates.length !== 2) {\n              throw new Error(`Feature ${idx}: invalid coordinates`);\n            }\n\n            // Check geographic constraints\n            const [lng, lat] = feature.geometry.coordinates;\n            if (!this._validateWaypointCoordinates(lng, lat)) {\n              outOfBoundsWaypoints.push({\n                idx,\n                name: feature.properties?.name || `Waypoint ${idx + 1}`,\n                coords: [lng.toFixed(4), lat.toFixed(4)]\n              });\n            }\n          });\n\n          // Warn about out-of-bounds waypoints\n          if (outOfBoundsWaypoints.length > 0 && this.options.maxBounds) {\n            const [[west, south], [east, north]] = this.options.maxBounds;\n            const waypointList = outOfBoundsWaypoints.map(wp =>\n              `  ‚Ä¢ ${wp.name}: [${wp.coords[0]}, ${wp.coords[1]}]`\n            ).join('\\n');\n\n            const confirmed = confirm(\n              `‚ö†Ô∏è Warning: ${outOfBoundsWaypoints.length} waypoint(s) are OUTSIDE the defined geographic bounds!\\n\\n` +\n              `${waypointList}\\n\\n` +\n              `Bounds: [${west.toFixed(2)}, ${south.toFixed(2)}] to [${east.toFixed(2)}, ${north.toFixed(2)}]\\n\\n` +\n              'Animations may not visit these waypoints if strict bounds are enabled.\\n\\n' +\n              'Import anyway?'\n            );\n\n            if (!confirmed) {\n              console.log('Import cancelled - waypoints out of bounds');\n              return;\n            }\n          }\n\n          this.options.waypoints = geojson;\n          this._updateWaypointsUI();\n\n          // Create markers on map\n          this._createWaypointMarkers();\n\n          // Save to localStorage\n          this._saveWaypoints();\n\n          console.log(`Imported ${geojson.features.length} waypoints`);\n          alert(`Successfully imported ${geojson.features.length} waypoints!`);\n        } catch (error) {\n          console.error('Import error:', error);\n          alert(`Error importing waypoints: ${error.message}`);\n        }\n      };\n\n      reader.readAsText(file);\n    };\n\n    input.click();\n  }\n\n  _exportWaypoints() {\n    if (!this.options.waypoints || this.options.waypoints.features.length === 0) {\n      alert('No waypoints to export');\n      return;\n    }\n\n    // Export as GeoJSON\n    const geojson = JSON.stringify(this.options.waypoints, null, 2);\n    const blob = new Blob([geojson], { type: 'application/geo+json' });\n    const url = URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `waypoints-${Date.now()}.geojson`;\n    a.click();\n\n    URL.revokeObjectURL(url);\n\n    console.log(`Exported ${this.options.waypoints.features.length} waypoints as GeoJSON`);\n  }\n\n  _togglePanel() {\n    if (!this._panel || !this._overlay) return;\n\n    const isVisible = this._panel.getAttribute('data-visible') === 'true';\n\n    if (isVisible) {\n      // Start hide animation\n      this._panel.setAttribute('data-visible', 'false');\n      this._overlay.setAttribute('data-visible', 'false');\n\n      // Remove from DOM after animation completes\n      setTimeout(() => {\n        if (this._panel && this._overlay) {\n          this._panel.style.display = 'none';\n          this._overlay.style.display = 'none';\n        }\n      }, 250); // Match CSS transition duration\n    } else {\n      // Show overlay and panel\n      this._overlay.style.display = 'block';\n      this._panel.style.display = 'block';\n\n      // Trigger animation after DOM update\n      requestAnimationFrame(() => {\n        if (this._panel && this._overlay) {\n          this._panel.setAttribute('data-visible', 'true');\n          this._overlay.setAttribute('data-visible', 'true');\n        }\n      });\n    }\n  }\n\n  _hidePanel() {\n    if (!this._panel || !this._overlay) return;\n\n    // Start hide animation\n    this._panel.setAttribute('data-visible', 'false');\n    this._overlay.setAttribute('data-visible', 'false');\n\n    // Remove from DOM after animation completes\n    setTimeout(() => {\n      if (this._panel && this._overlay) {\n        this._panel.style.display = 'none';\n        this._overlay.style.display = 'none';\n      }\n    }, 250); // Match CSS transition duration\n  }\n\n  _adjustPanelPosition() {\n    if (!this._panel || !this._map) return;\n\n    // Detect attribution control at bottom (takes full width)\n    const mapContainer = this._map.getContainer();\n    const attributionControl = mapContainer.querySelector('.maplibregl-ctrl-attrib');\n\n    // Calculate available space\n    const viewportHeight = window.innerHeight;\n    let bottomOffset = 0;\n\n    // Check attribution control height\n    if (attributionControl) {\n      const attrHeight = attributionControl.offsetHeight;\n      bottomOffset += attrHeight + 10; // Add some padding\n    }\n\n    // Panel is at top (20px), so we just need to account for bottom space\n    // Use a minimum of 400px to ensure panel is usable\n    const availableHeight = Math.max(400, viewportHeight - 20 - bottomOffset - 40); // 20px top + 40px margin\n    this._panel.style.maxHeight = `${availableHeight}px`;\n\n    console.log(`[VideoExport] Panel adjusted - available space: ${availableHeight}px, bottom offset: ${bottomOffset}px`);\n  }\n\n  _updateStatus(message, className = '') {\n    if (!this._panel) return;\n    const status = this._panel.querySelector('#ve-status');\n    if (!status) return;\n    status.textContent = message;\n    status.className = 'status ' + className;\n  }\n\n  _estimateFileSize(bitrate, durationMs, format) {\n    // Calculate base size in MB\n    // bitrate is in kbps, duration in ms\n    // bitrate * (duration/1000) / 8 = size in KB\n    // Then divide by 1024 to get MB\n    const baseSizeMB = (bitrate * (durationMs / 1000)) / 8 / 1024;\n\n    // Use real recording parameters if available (more accurate), otherwise fall back to options\n    const width = this._recordingParams?.width || this.options.width || 1920;\n    const height = this._recordingParams?.height || this.options.height || 1080;\n    const fps = this._recordingParams?.fps || this.options.fps || 30;\n    const isHighQuality = (width >= 2560 || height >= 1440) && fps >= 60;\n\n    // Compression factors depend on resolution and framerate\n    // High quality video (4K 60fps) compresses less efficiently\n    if (format === 'webm-vp9') {\n      // VP9 compression varies significantly with quality\n      // High quality: less compression (container overhead dominates)\n      // Low quality: better compression\n      const compressionFactor = isHighQuality ? 1.1 : 0.75;\n      return baseSizeMB * compressionFactor;\n    } else if (format === 'webm-vp8' || format === 'webm') {\n      const compressionFactor = isHighQuality ? 1.15 : 0.80;\n      return baseSizeMB * compressionFactor;\n    }\n\n    // MP4 H.264: baseline (most predictable)\n    return baseSizeMB;\n  }\n\n  _formatSize(mb) {\n    if (mb < 1) {\n      return `${(mb * 1024).toFixed(0)} KB`;\n    } else if (mb < 100) {\n      return `${mb.toFixed(1)} MB`;\n    } else {\n      return `${mb.toFixed(0)} MB`;\n    }\n  }\n\n  _updateProgress(frameCount, totalFrames, bitrate, durationMs, status = 'Recording') {\n    // Use the widget in ctrl-group instead of panel progress\n    const statusSpan = this._progressWidget?.querySelector('#ve-progress-status');\n    const percentSpan = this._progressWidget?.querySelector('#ve-progress-percent');\n    const framesSpan = this._progressWidget?.querySelector('#ve-progress-frames');\n    const sizeSpan = this._progressWidget?.querySelector('#ve-progress-size');\n    const timeSpan = this._progressWidget?.querySelector('#ve-progress-time');\n\n    if (totalFrames > 0 && this._progressWidget) {\n      this._progressWidget.style.display = '';\n\n      // Initialize start time on first frame\n      if (frameCount === 0 || !this._recordingStartTime) {\n        this._recordingStartTime = Date.now();\n      }\n\n      // Update status\n      if (statusSpan) statusSpan.textContent = status;\n\n      // Calculate percentage\n      const percent = Math.round((frameCount / totalFrames) * 100);\n      if (percentSpan) percentSpan.textContent = `${percent}% complete`;\n\n      // Update frame count\n      if (framesSpan) {\n        framesSpan.textContent = `Frame ${frameCount.toLocaleString()} of ${totalFrames.toLocaleString()}`;\n      }\n\n      // Estimate final size\n      const estimatedMB = this._estimateFileSize(bitrate, durationMs, this.options.format);\n      if (sizeSpan) sizeSpan.textContent = `Size: ~${this._formatSize(estimatedMB)}`;\n\n      // Calculate and display time remaining\n      if (frameCount > 0 && timeSpan) {\n        const elapsedMs = Date.now() - this._recordingStartTime;\n        const msPerFrame = elapsedMs / frameCount;\n        const remainingFrames = totalFrames - frameCount;\n        const estimatedRemainingMs = msPerFrame * remainingFrames;\n\n        // Format time remaining\n        const seconds = Math.ceil(estimatedRemainingMs / 1000);\n        if (seconds < 60) {\n          timeSpan.textContent = `${seconds} second${seconds !== 1 ? 's' : ''} left`;\n        } else if (seconds < 3600) {\n          const minutes = Math.floor(seconds / 60);\n          const secs = seconds % 60;\n          if (secs === 0) {\n            timeSpan.textContent = `${minutes} minute${minutes !== 1 ? 's' : ''} left`;\n          } else {\n            timeSpan.textContent = `${minutes}m ${secs}s left`;\n          }\n        } else {\n          const hours = Math.floor(seconds / 3600);\n          const mins = Math.floor((seconds % 3600) / 60);\n          timeSpan.textContent = `${hours}h ${mins}m left`;\n        }\n      } else if (timeSpan) {\n        timeSpan.textContent = 'calculating time...';\n      }\n    }\n  }\n\n  _hideProgress() {\n    if (this._progressWidget) {\n      this._progressWidget.style.display = 'none';\n    }\n    // Reset timing for next recording\n    this._recordingStartTime = null;\n  }\n\n  _showFinalStats(stats) {\n    if (!this._progressWidget) return;\n\n    // Hide progress sections\n    const statusDiv = this._progressWidget.querySelector('.progress-status')?.parentElement;\n    const percentDiv = this._progressWidget.querySelector('.progress-percent')?.parentElement;\n    const sizeDiv = this._progressWidget.querySelector('.progress-secondary')?.parentElement;\n\n    if (statusDiv) statusDiv.style.display = 'none';\n    if (percentDiv) percentDiv.style.display = 'none';\n    if (sizeDiv) sizeDiv.style.display = 'none';\n\n    // Show summary section\n    const summaryDiv = asHTMLElement(this._progressWidget.querySelector('#ve-progress-summary'));\n    if (summaryDiv) {\n      summaryDiv.style.display = 'block';\n\n      // Fill in the stats\n      const videoSpan = asHTMLElement(this._progressWidget.querySelector('#ve-summary-video'));\n      const realtimeSpan = asHTMLElement(this._progressWidget.querySelector('#ve-summary-realtime'));\n      const speedSpan = asHTMLElement(this._progressWidget.querySelector('#ve-summary-speed'));\n      const sizeSpan = asHTMLElement(this._progressWidget.querySelector('#ve-summary-size'));\n\n      if (videoSpan) {\n        videoSpan.textContent = `${stats.videoDuration}s (${stats.frameCount} frames @ ${stats.fps} fps)`;\n      }\n      if (realtimeSpan) {\n        realtimeSpan.textContent = `${stats.realTime}s`;\n      }\n      if (speedSpan) {\n        const faster = parseFloat(stats.speedRatio) > 1;\n        speedSpan.textContent = `${stats.speedRatio}x (${faster ? 'faster' : 'slower'} than realtime)`;\n        speedSpan.style.color = faster ? '#4CAF50' : '#FF9800'; // Green if faster, orange if slower\n      }\n      if (sizeSpan) {\n        sizeSpan.textContent = `${stats.sizeMB} MB`;\n      }\n    }\n\n    // Keep widget visible\n    this._progressWidget.style.display = 'block';\n\n    console.log('[UI] Final stats displayed in widget');\n  }\n\n  _collapseInterface() {\n    if (!this._panel) return;\n\n    // Move panel to configured position (compact mode)\n    const compactClass = `compact-${this.options.compactPosition}`;\n    this._panel.classList.add(compactClass);\n\n    // Reset widget to show progress (hide summary from previous export)\n    if (this._progressWidget) {\n      // Show progress sections\n      const statusEl = this._progressWidget.querySelector('.progress-status');\n      const percentEl = this._progressWidget.querySelector('.progress-percent');\n      const sizeEl = this._progressWidget.querySelector('.progress-secondary');\n      const statusDiv = statusEl ? asHTMLElement(statusEl.parentElement) : null;\n      const percentDiv = percentEl ? asHTMLElement(percentEl.parentElement) : null;\n      const sizeDiv = sizeEl ? asHTMLElement(sizeEl.parentElement) : null;\n      if (statusDiv) statusDiv.style.display = '';\n      if (percentDiv) percentDiv.style.display = '';\n      if (sizeDiv) sizeDiv.style.display = '';\n\n      // Hide summary section\n      const summaryDiv = asHTMLElement(this._progressWidget.querySelector('#ve-progress-summary'));\n      if (summaryDiv) summaryDiv.style.display = 'none';\n\n      // Show widget\n      this._progressWidget.style.display = 'block';\n    }\n\n    // Hide all form groups during test/recording\n    const formGroups = this._panel.querySelectorAll('.form-group');\n    formGroups.forEach(group => {\n      /** @type {HTMLElement} */(group).style.display = 'none';\n    });\n\n    // Hide section headers (h3) and dividers (hr)\n    const headers = this._panel.querySelectorAll('h3, hr');\n    headers.forEach(element => {\n      /** @type {HTMLElement} */(element).style.display = 'none';\n    });\n\n    // Hide collapsible sections\n    const constraintsGroup = asHTMLElement(this._panel.querySelector('#ve-constraints-group'));\n    const waypointsGroup = asHTMLElement(this._panel.querySelector('#ve-waypoints-group'));\n    if (constraintsGroup) constraintsGroup.style.display = 'none';\n    if (waypointsGroup) waypointsGroup.style.display = 'none';\n\n    // Hide section contents\n    const sectionContents = this._panel.querySelectorAll('[data-section-content]');\n    sectionContents.forEach(content => {\n      /** @type {HTMLElement} */(content).style.display = 'none';\n    });\n\n    // Hide reset button div\n    const resetDiv = asHTMLElement(this._panel.querySelector('#ve-reset-message'));\n    if (resetDiv) resetDiv.style.display = 'none';\n\n    // Hide exploration limit checkbox\n    const explorationLimit = asHTMLElement(this._panel.querySelector('#ve-exploration-limit'));\n    if (explorationLimit) {\n      const explorationDiv = asHTMLElement(explorationLimit.closest('.form-group'));\n      if (explorationDiv) explorationDiv.style.display = 'none';\n    }\n\n    // Hide recording time display\n    const recordingTime = asHTMLElement(this._panel.querySelector('.recording-time-display'));\n    if (recordingTime) recordingTime.style.display = 'none';\n\n    console.log(`[UI] Interface collapsed and moved to ${this.options.compactPosition} corner`);\n  }\n\n  _expandInterface() {\n    if (!this._panel) return;\n    // Return panel to center (remove compact mode)\n    const compactClass = `compact-${this.options.compactPosition}`;\n    this._panel.classList.remove(compactClass);\n\n    // Hide progress widget when expanded\n    if (this._progressWidget) {\n      this._progressWidget.style.display = 'none';\n    }\n\n    // Show all form groups after test/recording (except conditional ones)\n    const formGroups = this._panel.querySelectorAll('.form-group');\n    formGroups.forEach(group => {\n      // Don't auto-show conditional groups, they'll be handled below\n      const el = asHTMLElement(group);\n      if (!el) return;\n      const isConditional = el.id === 've-resolution-custom-group' ||\n                                  el.id === 've-speed-custom-group' ||\n                                  el.id === 've-bitrate-custom-group';\n      if (!isConditional) {\n        el.style.display = '';\n      }\n    });\n\n    // Show section headers (h3) and dividers (hr)\n    const headers = this._panel.querySelectorAll('h3, hr');\n    headers.forEach(element => {\n      /** @type {HTMLElement} */(element).style.display = '';\n    });\n\n    // Show collapsible section groups (they were hidden during test/recording)\n    const constraintsGroup = asHTMLElement(this._panel.querySelector('#ve-constraints-group'));\n    const waypointsGroup = asHTMLElement(this._panel.querySelector('#ve-waypoints-group'));\n    if (constraintsGroup) constraintsGroup.style.display = '';\n    if (waypointsGroup) waypointsGroup.style.display = '';\n\n    // Restore format advanced group\n    const formatAdvancedToggle = asInput(this._panel.querySelector('#ve-format-advanced-toggle'));\n    const formatAdvancedGroup = asHTMLElement(this._panel.querySelector('#ve-format-advanced-group'));\n    if (formatAdvancedToggle && formatAdvancedGroup) {\n      formatAdvancedGroup.style.display = formatAdvancedToggle.checked ? '' : 'none';\n\n      // Restore mp4/webm specific advanced options\n      if (formatAdvancedToggle.checked) {\n        const mp4Advanced = asHTMLElement(this._panel.querySelector('#ve-mp4-advanced'));\n        const vp8Advanced = asHTMLElement(this._panel.querySelector('#ve-webm-vp8-advanced'));\n        const vp9Advanced = asHTMLElement(this._panel.querySelector('#ve-webm-vp9-advanced'));\n\n        if (mp4Advanced && vp8Advanced && vp9Advanced) {\n          mp4Advanced.style.display = 'none';\n          vp8Advanced.style.display = 'none';\n          vp9Advanced.style.display = 'none';\n\n          if (this.options.format === 'mp4') {\n            mp4Advanced.style.display = '';\n          } else if (this.options.format === 'webm-vp8') {\n            vp8Advanced.style.display = '';\n          } else if (this.options.format === 'webm-vp9') {\n            vp9Advanced.style.display = '';\n          }\n        }\n      }\n    }\n\n    // Restore custom resolution group\n    const resolutionSelect = asSelect(this._panel.querySelector('#ve-resolution'));\n    const customResGroup = asHTMLElement(this._panel.querySelector('#ve-resolution-custom-group'));\n    if (resolutionSelect && customResGroup) {\n      customResGroup.style.display = resolutionSelect.value === 'custom' ? '' : 'none';\n    }\n\n    // Restore custom speed group\n    const speedSelect = asSelect(this._panel.querySelector('#ve-speed'));\n    const customSpeedGroup = asHTMLElement(this._panel.querySelector('#ve-speed-custom-group'));\n    if (speedSelect && customSpeedGroup) {\n      customSpeedGroup.style.display = speedSelect.value === 'custom' ? '' : 'none';\n    }\n\n    // Restore custom bitrate group\n    const bitrateSelect = asSelect(this._panel.querySelector('#ve-bitrate'));\n    const bitrateCustomGroup = asHTMLElement(this._panel.querySelector('#ve-bitrate-custom-group'));\n    if (bitrateSelect && bitrateCustomGroup) {\n      bitrateCustomGroup.style.display = bitrateSelect.value === 'custom' ? '' : 'none';\n    }\n\n    // Restore section contents based on their collapsed state\n    const sections = this._panel.querySelectorAll('[data-section-toggle]');\n    sections.forEach(toggle => {\n      const toggleBtn = asHTMLElement(toggle);\n      if (!toggleBtn) return;\n      const sectionId = toggleBtn.getAttribute('data-section-toggle');\n      if (!sectionId) return;\n      const sectionContent = asHTMLElement(this._panel.querySelector(`[data-section-content=\"${sectionId}\"]`));\n      if (sectionContent) {\n        const isCollapsed = toggleBtn.getAttribute('data-collapsed') === 'true';\n        sectionContent.style.display = isCollapsed ? 'none' : '';\n      }\n    });\n\n    // Show recording time display\n    const recordingTime = asHTMLElement(this._panel.querySelector('.recording-time-display'));\n    if (recordingTime) recordingTime.style.display = '';\n\n    // Clear saved state - back to normal operation\n    this._savedWaypointsVisibility = undefined;\n\n    console.log('[UI] Interface expanded after recording');\n  }\n\n  async _preloadEncoder() {\n    if (this._encoderLoaded) return;\n\n    try {\n      // Try local files first, fallback to CDN\n      const sources = await this._detectEncoderSources();\n      const { encoderUrl, simdUrl } = sources.mp4;\n\n      console.log('Loading MP4 encoder from:', encoderUrl);\n\n      // Load mp4-encoder module\n      const encoderModule = await import(encoderUrl);\n      this._loadEncoder = encoderModule.default;\n\n      // Load SIMD detection\n      const simdModule = await import(simdUrl);\n      this._simd = simdModule.simd;\n\n      this._encoderLoaded = true;\n      console.log('‚úÖ Video encoder loaded from', encoderUrl.includes('unpkg') ? 'CDN' : 'local files');\n    } catch (error) {\n      console.warn('Failed to preload encoder:', error);\n      // Will try again when actually needed\n    }\n  }\n\n  /**\n     * Load encoder based on selected format\n     * @returns {Promise<Object>} Encoder instance with unified API\n     */\n  async _loadEncoderForFormat(width, height, fps, bitrate) {\n    console.log(`üîß Loading encoder for format: ${this.options.format}`);\n    const sources = await this._detectEncoderSources();\n\n    // Normalize format (backward compatibility: 'webm' ‚Üí 'webm-vp8')\n    let format = this.options.format;\n    if (format === 'webm') {\n      format = 'webm-vp8';\n      console.log('üìù Format normalized: webm ‚Üí webm-vp8 (backward compatibility)');\n    }\n\n    if (format === 'mp4') {\n      console.log('üì¶ Using MP4 encoder');\n      return this._loadMp4Encoder(sources.mp4, width, height, fps, bitrate);\n    } else if (format === 'webm-vp8') {\n      console.log('üì¶ Using WebM VP8 encoder (webm-wasm realtime)');\n      return this._loadWebmEncoder(sources.webm, width, height, fps, bitrate);\n    } else if (format === 'webm-vp9') {\n      console.log('üì¶ Using WebM VP9 encoder (WebCodecs)');\n      return this._loadWebCodecsVP9Encoder(width, height, fps, bitrate);\n    } else {\n      throw new Error(`Unknown format: ${format} (expected: 'webm-vp8', 'webm-vp9', or 'mp4')`);\n    }\n  }\n\n  /**\n     * Load MP4 encoder\n     */\n  async _loadMp4Encoder(sources, width, height, fps, bitrate) {\n    const { encoderUrl, simdUrl } = sources;\n\n    console.log(`[MP4 Encoder] Loading from: ${encoderUrl}`);\n\n    // Load encoder module if not already loaded\n    if (!this._loadEncoder) {\n      const encoderModule = await import(encoderUrl);\n      this._loadEncoder = encoderModule.default;\n    }\n\n    // Load SIMD detection if not already loaded\n    if (!this._simd) {\n      const simdModule = await import(simdUrl);\n      this._simd = simdModule.simd;\n    }\n\n    // Detect SIMD support\n    const simd = await this._simd();\n    console.log(`[MP4 Encoder] SIMD support: ${simd}`);\n\n    // Get advanced parameters if enabled\n    if (!this._panel) return null;\n    const speedEl = asInput(this._panel.querySelector('#ve-mp4-speed'));\n    const qpEl = asInput(this._panel.querySelector('#ve-mp4-qp'));\n    const gopEl = asInput(this._panel.querySelector('#ve-mp4-gop'));\n\n    let speed = 10; // default\n    let qpMin = 10; let qpMax = 42; // defaults\n    let gop = 30; // default\n\n    if (speedEl) speed = parseInt(speedEl.value, 10);\n    if (qpEl) {\n      const [min, max] = qpEl.value.split(',').map(v => parseInt(v, 10));\n      qpMin = min;\n      qpMax = max;\n    }\n    if (gopEl) gop = parseInt(gopEl.value, 10);\n\n    console.log(`[MP4 Encoder] Advanced params - Speed: ${speed}, QP: ${qpMin}-${qpMax}, GOP: ${gop}`);\n\n    // Create encoder directly (no cache)\n    console.log('[MP4 Encoder] Creating new MP4 encoder');\n    const encoderFactory = await this._loadEncoder({ simd });\n    const encoder = encoderFactory.create({\n      width,\n      height,\n      fps,\n      speed,\n      kbps: bitrate,\n      rgbFlipY: true,\n      quantizationParameter: qpMax,\n      groupOfPictures: gop\n    });\n\n    console.log(`[MP4 Encoder] Got encoder (${width}x${height}, ${fps}fps, ${bitrate}kbps)`);\n    return encoder;\n  }\n\n  /**\n     * Load WebM encoder (requires local files)\n     */\n  async _loadWebmEncoder(sources, width, height, fps, bitrate) {\n    // Check if WebM files were found\n    if (sources.error) {\n      throw new Error(sources.error);\n    }\n\n    const { workerUrl, wasmUrl } = sources;\n\n    if (!workerUrl || !wasmUrl) {\n      throw new Error(\n        'WebM encoder files not found. ' +\n                'Please deploy the vendor/webm/ directory alongside the plugin. ' +\n                'See vendor/README.md for deployment instructions.'\n      );\n    }\n\n    console.log(`[WebM Encoder] Loading from: ${workerUrl}`);\n\n    // Get advanced VP8 parameters if available\n    if (!this._panel) return null;\n    const vp8BitrateEl = asInput(this._panel.querySelector('#ve-vp8-bitrate-custom'));\n    const customBitrate = vp8BitrateEl && vp8BitrateEl.value ? parseInt(vp8BitrateEl.value, 10) : null;\n\n    // Use custom bitrate if specified, otherwise use auto-calculated\n    const finalBitrate = customBitrate || bitrate;\n\n    console.log(`[WebM Encoder] Bitrate: ${finalBitrate} kbps ${customBitrate ? '(custom)' : '(auto)'}`);\n\n    // IMPORTANT: realtime mode is ALWAYS true due to webm-wasm limitation\n    // Non-realtime mode blocks the worker thread and cannot receive frames\n    const realtime = true;\n\n    // Create encoder directly (no cache)\n    console.log('[WebM Encoder] Creating new WebM encoder');\n    const wrapper = new WebmEncoderWrapper();\n    await wrapper.create({\n      width,\n      height,\n      fps,\n      bitrate: finalBitrate,\n      wasmUrl,\n      workerUrl,\n      realtime\n    });\n\n    console.log(`[WebM Encoder] Got encoder (${width}x${height}, ${fps}fps, ${finalBitrate}kbps)`);\n    return wrapper;\n  }\n\n  /**\n     * Load WebCodecs VP9 encoder (Modern browsers only)\n     */\n  async _loadWebCodecsVP9Encoder(width, height, fps, bitrate) {\n    // Import WebCodecsVP9Encoder dynamically\n    if (!this._WebCodecsVP9Encoder) {\n      const module = await import('./webcodecs-vp9-encoder.js');\n      this._WebCodecsVP9Encoder = module.WebCodecsVP9Encoder;\n    }\n\n    // Check support\n    if (!this._WebCodecsVP9Encoder.isSupported()) {\n      throw new Error(\n        'WebCodecs API not supported in this browser. ' +\n                'Use a modern browser or select WebM (VP8) format.'\n      );\n    }\n\n    // Get advanced VP9 parameters if available\n    if (!this._panel) return null;\n    const qualityEl = asSelect(this._panel.querySelector('#ve-vp9-quality'));\n    const latencyEl = asSelect(this._panel.querySelector('#ve-vp9-latency'));\n    const bitrateModeEl = asSelect(this._panel.querySelector('#ve-vp9-bitrate-mode'));\n    const keyframeEl = asInput(this._panel.querySelector('#ve-vp9-keyframe'));\n    const contentHintEl = asSelect(this._panel.querySelector('#ve-vp9-content-hint'));\n\n    const quality = qualityEl ? qualityEl.value : 'high';\n    const latencyMode = latencyEl ? latencyEl.value : 'quality';\n    const bitrateMode = bitrateModeEl ? bitrateModeEl.value : 'variable';\n    const keyFrameInterval = keyframeEl ? parseInt(keyframeEl.value, 10) : 120;\n    const contentHint = contentHintEl ? contentHintEl.value : '';\n\n    console.log('[WebCodecs VP9] Advanced params:', {\n      quality,\n      latencyMode,\n      bitrateMode,\n      keyFrameInterval,\n      contentHint: contentHint || 'auto'\n    });\n\n    // Create and initialize encoder with all options\n    const encoder = new this._WebCodecsVP9Encoder();\n    await encoder.create({\n      width,\n      height,\n      fps,\n      bitrate,\n      quality,\n      latencyMode,\n      bitrateMode,\n      keyFrameInterval,\n      contentHint\n    });\n\n    console.log(`[WebCodecs VP9] Got encoder (${width}x${height}, ${fps}fps, ${bitrate}kbps, ${quality} quality)`);\n    return encoder;\n  }\n\n  async _detectEncoderSources() {\n    // Try locations in order:\n    // 1. Plugin's own vendor/ directory (same location as the plugin)\n    // 2. Custom encoderPath if specified\n    // 3. CDN fallback\n\n    const mp4PathsToTry = [];\n    const webmPathsToTry = [];\n\n    // 1. Try plugin's vendor directory\n    const pluginDir = getPluginDirectory();\n    if (pluginDir) {\n      mp4PathsToTry.push({\n        name: 'plugin vendor',\n        encoderUrl: pluginDir + 'vendor/mp4/mp4-encoder.js',\n        simdUrl: pluginDir + 'vendor/mp4/index.js'\n      });\n      webmPathsToTry.push({\n        name: 'plugin vendor',\n        workerUrl: pluginDir + 'vendor/webm/webm-worker.js',\n        wasmUrl: pluginDir + 'vendor/webm/webm-wasm.wasm'\n      });\n    }\n\n    // 2. Try custom path if specified\n    if (this.options.encoderPath) {\n      const customPath = this.options.encoderPath.endsWith('/')\n        ? this.options.encoderPath\n        : this.options.encoderPath + '/';\n\n      mp4PathsToTry.push({\n        name: 'custom path',\n        encoderUrl: customPath + 'mp4-encoder.js',\n        simdUrl: customPath + 'index.js'\n      });\n      webmPathsToTry.push({\n        name: 'custom path',\n        workerUrl: customPath + 'webm-worker.js',\n        wasmUrl: customPath + 'webm-wasm.wasm'\n      });\n    }\n\n    // Try to detect MP4 encoder\n    let mp4Source = null;\n    for (const path of mp4PathsToTry) {\n      try {\n        const response = await fetch(path.encoderUrl, { method: 'HEAD' });\n        if (response.ok) {\n          console.log(`‚úÖ Found MP4 encoder at ${path.name}: ${path.encoderUrl}`);\n          mp4Source = path;\n          break;\n        }\n      } catch (e) {\n        // Continue to next path\n      }\n    }\n\n    // Fallback to CDN for MP4\n    if (!mp4Source) {\n      console.log('‚ÑπÔ∏è Using CDN for MP4 encoder (no local files found)');\n      mp4Source = {\n        name: 'CDN',\n        encoderUrl: this.options.encoderCdn + 'mp4-encoder.js',\n        simdUrl: WASM_FEATURE_DETECT_URL\n      };\n    }\n\n    // Try to detect WebM encoder\n    let webmSource = null;\n    for (const path of webmPathsToTry) {\n      try {\n        const response = await fetch(path.workerUrl, { method: 'HEAD' });\n        if (response.ok) {\n          console.log(`‚úÖ Found WebM encoder at ${path.name}: ${path.workerUrl}`);\n          webmSource = path;\n          break;\n        }\n      } catch (e) {\n        // Continue to next path\n      }\n    }\n\n    // WebM requires local files - no CDN fallback\n    if (!webmSource) {\n      console.error('‚ùå WebM encoder files not found!');\n      webmSource = {\n        name: 'NOT_FOUND',\n        workerUrl: null,\n        wasmUrl: null,\n        error: 'WebM encoding requires local files. Please deploy the vendor/webm/ directory alongside the plugin.'\n      };\n    }\n\n    // Return both sources\n    return {\n      mp4: mp4Source,\n      webm: webmSource\n    };\n  }\n\n  /**\n   * Read all options from UI inputs\n   * This ensures we always have fresh values from the form\n   */\n  _readOptionsFromUI() {\n    if (!this._panel) return;\n\n    // Animation\n    const animationSelect = asSelect(this._panel.querySelector('#ve-animation'));\n    if (animationSelect) this.options.animation = animationSelect.value;\n\n    // Duration\n    const durationSelect = asSelect(this._panel.querySelector('#ve-duration'));\n    if (durationSelect) {\n      if (durationSelect.value === 'custom') {\n        const customInput = asInput(this._panel.querySelector('#ve-duration-custom'));\n        this.options.duration = customInput ? parseFloat(customInput.value) * 1000 : 30000;\n      } else {\n        this.options.duration = parseFloat(durationSelect.value) * 1000;\n      }\n    }\n\n    // Speed\n    const speedSelect = asSelect(this._panel.querySelector('#ve-speed'));\n    if (speedSelect) {\n      if (speedSelect.value === 'custom') {\n        const customInput = asInput(this._panel.querySelector('#ve-speed-custom'));\n        this.options.speedMultiplier = customInput ? parseFloat(customInput.value) : 1;\n      } else {\n        this.options.speedMultiplier = parseFloat(speedSelect.value);\n      }\n    }\n\n    // FPS\n    const fpsInput = asInput(this._panel.querySelector('#ve-fps'));\n    if (fpsInput) this.options.fps = parseFloat(fpsInput.value);\n\n    // Resolution\n    const resolutionSelect = asSelect(this._panel.querySelector('#ve-resolution'));\n    if (resolutionSelect) {\n      if (resolutionSelect.value === 'custom') {\n        const widthInput = asInput(this._panel.querySelector('#ve-resolution-width-custom'));\n        const heightInput = asInput(this._panel.querySelector('#ve-resolution-height-custom'));\n        this.options.resolution = {\n          width: widthInput ? parseInt(widthInput.value, 10) : 1920,\n          height: heightInput ? parseInt(heightInput.value, 10) : 1080\n        };\n      } else {\n        this.options.resolution = resolutionSelect.value;\n      }\n    }\n\n    // Cinematic bars\n    const cinematicBarsSelect = asSelect(this._panel.querySelector('#ve-cinematic-bars'));\n    if (cinematicBarsSelect) this.options.cinematicBars = cinematicBarsSelect.value;\n\n    // Format\n    const formatSelect = asSelect(this._panel.querySelector('#ve-format'));\n    if (formatSelect) this.options.format = formatSelect.value;\n\n    // Bitrate\n    const bitrateSelect = asSelect(this._panel.querySelector('#ve-bitrate'));\n    if (bitrateSelect) {\n      if (bitrateSelect.value === 'custom') {\n        const customInput = asInput(this._panel.querySelector('#ve-bitrate-custom'));\n        this.options.bitrate = customInput ? parseInt(customInput.value, 10) : 'auto';\n      } else {\n        this.options.bitrate = bitrateSelect.value === 'auto' ? 'auto' : parseInt(bitrateSelect.value, 10);\n      }\n    }\n\n    // Wait for tiles\n    const waitTilesCheckbox = asInput(this._panel.querySelector('#ve-wait-tiles'));\n    if (waitTilesCheckbox) this.options.waitForTiles = waitTilesCheckbox.checked;\n\n    // Loop\n    const loopSelect = asSelect(this._panel.querySelector('#ve-loop'));\n    if (loopSelect) {\n      this.options.loop = loopSelect.value === 'false' ? false : loopSelect.value;\n    }\n\n    // Geographic constraints - Bounds\n    const westInput = asInput(this._panel.querySelector('#ve-bounds-west'));\n    const eastInput = asInput(this._panel.querySelector('#ve-bounds-east'));\n    const southInput = asInput(this._panel.querySelector('#ve-bounds-south'));\n    const northInput = asInput(this._panel.querySelector('#ve-bounds-north'));\n\n    if (westInput && eastInput && southInput && northInput) {\n      const west = westInput.value;\n      const east = eastInput.value;\n      const south = southInput.value;\n      const north = northInput.value;\n\n      if (west && east && south && north) {\n        this.options.maxBounds = [[parseFloat(west), parseFloat(south)], [parseFloat(east), parseFloat(north)]];\n      } else {\n        this.options.maxBounds = null;\n      }\n    }\n\n    // Zoom constraints\n    const minZoomInput = asInput(this._panel.querySelector('#ve-zoom-min'));\n    const maxZoomInput = asInput(this._panel.querySelector('#ve-zoom-max'));\n\n    if (minZoomInput) {\n      this.options.minZoom = minZoomInput.value ? parseFloat(minZoomInput.value) : null;\n    }\n    if (maxZoomInput) {\n      this.options.maxZoom = maxZoomInput.value ? parseFloat(maxZoomInput.value) : null;\n    }\n\n    // Strict bounds\n    const strictBoundsCheckbox = asInput(this._panel.querySelector('#ve-strict-bounds'));\n    if (strictBoundsCheckbox) this.options.strictBounds = strictBoundsCheckbox.checked;\n\n    // Show bounds overlay\n    const showBoundsCheckbox = asInput(this._panel.querySelector('#ve-show-bounds'));\n    if (showBoundsCheckbox) this.options.showBoundsOverlay = showBoundsCheckbox.checked;\n\n    // Exploration limit\n    const explorationLimitCheckbox = asInput(this._panel.querySelector('#ve-exploration-limit'));\n    if (explorationLimitCheckbox) {\n      this.options.explorationLimitEnabled = explorationLimitCheckbox.checked;\n    }\n\n    // Waypoints are already managed via this.options.waypoints (no need to read from DOM)\n  }\n\n  async _getAnimation() {\n    let animation;\n\n    // Handle custom function animations\n    if (typeof this.options.animation === 'function') {\n      animation = this.options.animation;\n    } else if (typeof this.options.animation === 'object' && this.options.animation !== null) {\n      // Handle custom object with metadata\n      const animObj = this.options.animation;\n      // @ts-ignore - We already checked that animation is not null\n      if (animObj.func) {\n        // @ts-ignore - We already checked that animation is not null\n        animation = animObj.func;\n      }\n    } else if (typeof this.options.animation === 'string') {\n      // Handle built-in animations from ANIMATION_PROFILES\n      const profile = ANIMATION_PROFILES[this.options.animation];\n\n      if (profile) {\n        const director = new AnimationDirector(this._map);\n        // Call animation function with director for 'smart' animation\n        animation = (map, control) => profile.func(map, control, this.options, director);\n      } else {\n        // Fallback to 'smart' if animation key not found\n        console.warn(`Animation \"${this.options.animation}\" not found, falling back to \"smart\"`);\n        const director = new AnimationDirector(this._map);\n        animation = (map, control) => director.createAdaptiveAnimation(control, this.options);\n      }\n    } else {\n      // Fallback to 'smart' for unknown types\n      console.warn('Unknown animation type, falling back to \"smart\"');\n      const director = new AnimationDirector(this._map);\n      animation = (map, control) => director.createAdaptiveAnimation(control, this.options);\n    }\n\n    // All animations return { setup, animation } format\n    // - setup: optional function to run before recording (e.g., camera positioning)\n    // - animation: main animation function to run during recording\n    let setup = null;\n    let animationFn = null;\n\n    // Call the animation function to get { setup, animation }\n    const result = animation(this._map, this);\n\n    // Check if result is the new format with setup phase\n    if (typeof result === 'object' && result !== null && 'animation' in result) {\n      // Standard format: { setup, animation }\n      setup = result.setup || null;\n      animationFn = result.animation;\n\n      if (setup) {\n        console.log('üé¨ Animation with setup phase');\n      }\n    } else {\n      // Legacy custom animation (direct Promise) - wrap it\n      console.log('‚ö†Ô∏è Legacy animation format detected, wrapping');\n      setup = null;\n      animationFn = async () => result;\n    }\n\n    // Add loop functionality if enabled\n    if (this.options.loop) {\n      animationFn = this._addLoopToAnimation(animationFn);\n    }\n\n    // Apply constraints if defined\n    if (this.options.maxBounds || this.options.minZoom !== null || this.options.maxZoom !== null) {\n      const constraints = new AnimationConstraints({\n        maxBounds: this.options.maxBounds,\n        minZoom: this.options.minZoom,\n        maxZoom: this.options.maxZoom,\n        strictBounds: this.options.strictBounds\n      });\n\n      // Wrap the animation with constraints\n      animationFn = constraints.wrapAnimation(animationFn);\n\n      console.log('üîí Animation constraints applied:', {\n        maxBounds: this.options.maxBounds,\n        minZoom: this.options.minZoom,\n        maxZoom: this.options.maxZoom,\n        strictBounds: this.options.strictBounds\n      });\n    }\n\n    return { setup, animation: animationFn };\n  }\n\n  /**\n     * Add loop functionality to an animation\n     * Returns a new animation function that includes the return-to-start step\n     */\n  _addLoopToAnimation(originalAnimation) {\n    return async (map, control) => {\n      // Capture initial position\n      const initialState = {\n        center: map.getCenter(),\n        zoom: map.getZoom(),\n        pitch: map.getPitch(),\n        bearing: map.getBearing()\n      };\n      console.log('üìç Initial position captured:', initialState.center.lng.toFixed(6), initialState.center.lat.toFixed(6));\n\n      // Run the original animation\n      console.log('‚ñ∂Ô∏è Starting original animation...');\n      await originalAnimation(map, control);\n      console.log('‚úÖ Original animation complete');\n\n      // Check final position\n      const finalState = {\n        center: map.getCenter(),\n        zoom: map.getZoom(),\n        pitch: map.getPitch(),\n        bearing: map.getBearing()\n      };\n      console.log('üìç Final position:', finalState.center.lng.toFixed(6), finalState.center.lat.toFixed(6));\n\n      // Always add return step when loop is enabled\n      console.log('üîÑ Loop enabled, adding return step');\n\n      if (this.options.loop === 'smooth') {\n        // Calculate return duration (2 seconds or 20% of duration, whichever is less)\n        const returnDuration = Math.min(2000, this.options.duration * 0.2);\n        console.log('Smooth return, duration:', returnDuration);\n\n        // Update status if function is available\n        if (control.updateStatus) {\n          control.updateStatus('üîÑ Returning to start...');\n        }\n\n        // Launch easeTo and wait for completion\n        // This works with both real time and virtual time (like other animations)\n        map.easeTo({\n          center: initialState.center,\n          zoom: initialState.zoom,\n          pitch: initialState.pitch,\n          bearing: initialState.bearing,\n          duration: returnDuration,\n          essential: true\n        });\n\n        await map.once('moveend');\n        console.log('Return complete');\n      } else {\n        // Instant jump back\n        map.jumpTo({\n          center: initialState.center,\n          zoom: initialState.zoom,\n          pitch: initialState.pitch,\n          bearing: initialState.bearing\n        });\n      }\n    };\n  }\n\n  _updateExplorationUI() {\n    if (!this._panel) return;\n    // Check if current animation supports exploration\n    let supportsExploration = false;\n\n    // Handle string animation names (built-in animations)\n    if (typeof this.options.animation === 'string') {\n      const profile = ANIMATION_PROFILES[this.options.animation];\n      supportsExploration = profile ? profile.supportsExploration : false;\n    } else if (typeof this.options.animation === 'object' && this.options.animation !== null) {\n      // Handle custom object with metadata\n      const animObj = this.options.animation;\n      // @ts-ignore - We already checked that animation is not null\n      if (animObj.supportsExploration !== undefined) {\n        // @ts-ignore - We already checked that animation is not null\n        supportsExploration = animObj.supportsExploration;\n      }\n    }\n    // Custom functions don't support exploration by default\n\n    // Show/hide Explore button\n    const exploreBtn = asHTMLElement(this._panel.querySelector('#ve-explore'));\n    if (exploreBtn) {\n      exploreBtn.style.display = supportsExploration ? 'inline-block' : 'none';\n    }\n\n    // Show/hide Exploration limit checkbox container\n    const explorationLimitContainer = asHTMLElement(this._panel.querySelector('#ve-exploration-limit-container'));\n    if (explorationLimitContainer) {\n      explorationLimitContainer.style.display = supportsExploration ? 'block' : 'none';\n    }\n\n    console.log(`[UI] Animation ${supportsExploration ? 'supports' : 'does not support'} exploration`);\n  }\n\n  _updateAnimationDescription() {\n    if (!this._panel) return;\n\n    const descriptionDiv = asHTMLElement(this._panel.querySelector('#ve-animation-description'));\n    const descriptionSpan = descriptionDiv?.querySelector('span');\n\n    if (!descriptionDiv || !descriptionSpan) return;\n\n    // Get current animation\n    const animationName = typeof this.options.animation === 'string'\n      ? this.options.animation\n      : null;\n\n    if (animationName && ANIMATION_PROFILES[animationName]) {\n      const profile = ANIMATION_PROFILES[animationName];\n      if (profile.description) {\n        descriptionSpan.textContent = profile.description;\n        descriptionDiv.style.display = 'block';\n      } else {\n        descriptionDiv.style.display = 'none';\n      }\n    } else {\n      descriptionDiv.style.display = 'none';\n    }\n  }\n\n  /**\n     * Analyze map capabilities vs animation requirements\n     * Returns an object with missing capabilities and affected animations\n     */\n  _analyzeCapabilities() {\n    // Get capabilities from AnimationDirector\n    const director = new AnimationDirector(this._map);\n    const caps = director.capabilities;\n\n    const missing = {\n      required: {}, // { capabilityName: [animationNames] }\n      optional: {} // { capabilityName: [animationNames] }\n    };\n    const available = [];\n\n    // Analyze all animations\n    Object.entries(ANIMATION_PROFILES).forEach(([animKey, profile]) => {\n      if (!profile.requires || profile.requires.length === 0) return;\n\n      profile.requires.forEach(req => {\n        const isOptional = req.startsWith('?');\n        const capName = isOptional ? req.slice(1) : req;\n\n        // Check if capability is missing\n        if (!caps[capName]) {\n          const category = isOptional ? 'optional' : 'required';\n          if (!missing[category][capName]) {\n            missing[category][capName] = [];\n          }\n          missing[category][capName].push({\n            key: animKey,\n            label: profile.label\n          });\n        }\n      });\n    });\n\n    // Build available list (just the names for display)\n    const capabilityLabels = {\n      hasTerrain: 'Terrain 3D',\n      hasHillshade: 'Hillshade',\n      has3DBuildings: 'Buildings 3D',\n      hasRoads: 'Roads',\n      hasRailways: 'Railways',\n      hasWaterways: 'Waterways',\n      hasWater: 'Water bodies',\n      hasPlaces: 'Places/Cities',\n      hasGlyphs: 'Fonts/Glyphs',\n      hasSprites: 'Sprites/Icons'\n    };\n\n    Object.entries(caps).forEach(([capName, hasIt]) => {\n      if (hasIt && capabilityLabels[capName]) {\n        available.push(capabilityLabels[capName]);\n      }\n    });\n\n    return { missing, available, capabilityLabels };\n  }\n\n  _checkMapCapabilities() {\n    if (!this._panel) return;\n    // Check if OpenMapTiles source is available\n    const hasOpenMapTiles = this._map.getSource('openmaptiles') !== undefined;\n\n    const roadAnimationsGroup = asHTMLElement(this._panel.querySelector('#ve-road-animations-group'));\n    if (roadAnimationsGroup) {\n      if (hasOpenMapTiles) {\n        roadAnimationsGroup.style.display = '';\n        console.log('[UI] OpenMapTiles detected - road animations available');\n      } else {\n        roadAnimationsGroup.style.display = 'none';\n        console.log('[UI] OpenMapTiles not found - road animations hidden');\n      }\n    }\n\n    // Update capability feedback UI\n    this._updateCapabilityFeedback();\n  }\n\n  /**\n     * Update the capability feedback UI to show missing features\n     */\n  _updateCapabilityFeedback() {\n    if (!this._panel) return;\n    const feedbackDiv = asHTMLElement(this._panel.querySelector('#ve-capability-feedback'));\n    if (!feedbackDiv) return;\n\n    const analysis = this._analyzeCapabilities();\n    const { missing } = analysis;\n\n    const hasRequiredMissing = Object.keys(missing.required).length > 0;\n    const hasOptionalMissing = Object.keys(missing.optional).length > 0;\n\n    if (!hasRequiredMissing && !hasOptionalMissing) {\n      // Perfect map - show success message\n      feedbackDiv.innerHTML = `\n                <div style=\"padding: 8px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 4px; color: #155724; font-size: 12px;\">\n                    ‚úÖ <strong>Optimal map</strong> - All animations available\n                </div>\n            `;\n      feedbackDiv.style.display = 'block';\n      return;\n    }\n\n    // Build feedback HTML\n    let html = '<div style=\"padding: 8px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 4px; font-size: 11px;\">';\n\n    // Show required missing capabilities\n    if (hasRequiredMissing) {\n      html += '<div style=\"color: #856404; margin-bottom: 6px;\">';\n      html += '<strong>‚ö†Ô∏è Missing required features:</strong><br>';\n      Object.entries(missing.required).forEach(([capName, animations]) => {\n        const label = analysis.capabilityLabels[capName] || capName;\n        html += `<span style=\"color: #d63384;\">‚Ä¢ ${label}</span> `;\n        html += `<span style=\"color: #6c757d; font-size: 10px;\">(${animations.length} animation${animations.length > 1 ? 's' : ''} disabled)</span><br>`;\n      });\n      html += '</div>';\n    }\n\n    // Show optional missing capabilities\n    if (hasOptionalMissing) {\n      html += '<div style=\"color: #856404; font-size: 10px;\">';\n      html += '<strong>üí° Optional enhancements missing:</strong><br>';\n      Object.entries(missing.optional).forEach(([capName, animations]) => {\n        const label = analysis.capabilityLabels[capName] || capName;\n        html += `<span>‚Ä¢ ${label}</span> `;\n        html += `<span style=\"color: #6c757d;\">(${animations.length} animation${animations.length > 1 ? 's' : ''} affected)</span><br>`;\n      });\n      html += '</div>';\n    }\n\n    html += '</div>';\n\n    feedbackDiv.innerHTML = html;\n    feedbackDiv.style.display = 'block';\n  }\n\n  async _testAnimation() {\n    if (!this._panel) return;\n    const testBtn = asButton(this._panel.querySelector('#ve-test'));\n    const recordBtn = asButton(this._panel.querySelector('#ve-record'));\n    if (!testBtn || !recordBtn) return;\n\n    // Save settings to localStorage\n    this._saveSettings();\n\n    // Hide reset message if visible\n    const resetMessage = this._panel.querySelector('#ve-reset-message');\n    if (resetMessage) resetMessage.style.display = 'none';\n\n    // If running, cancel it\n    if (this._animationController.running) {\n      this._animationController.cancel(this._map);\n\n      // Clear progress timer if exists\n      if (this._testProgressTimer) {\n        clearInterval(this._testProgressTimer);\n        this._testProgressTimer = null;\n      }\n\n      testBtn.innerHTML = '‚ñ∂Ô∏è Test';\n      testBtn.disabled = false;\n      recordBtn.disabled = false;\n      this._updateStatus('Cancelled', 'error');\n      this._expandInterface();\n      return;\n    }\n\n    testBtn.innerHTML = '‚èπÔ∏è Cancel';\n    recordBtn.disabled = true;\n    this._collapseInterface();\n\n    try {\n      this._updateStatus('Testing animation...', 'recording');\n\n      // Read fresh options from UI inputs\n      this._readOptionsFromUI();\n\n      // Get animation with optional setup phase\n      const { setup, animation } = await this._getAnimation();\n\n      // Execute setup phase first (e.g., camera repositioning)\n      if (setup) {\n        console.log('üé¨ Executing animation setup phase (for test)...');\n        this._updateStatus('Preparing animation...', 'recording');\n        await setup(this._map, this, {\n          checkAbort: () => {\n            if (this._animationController.aborted) {\n              throw new Error('Test cancelled');\n            }\n          },\n          updateStatus: (msg) => {\n            if (msg) this._updateStatus(msg, 'recording');\n          }\n        });\n        console.log('‚úì Setup phase complete');\n      }\n\n      // Start progress tracking\n      const startTime = performance.now();\n      const duration = this.options.duration;\n\n      // Show widget\n      if (this._progressWidget) {\n        this._progressWidget.style.display = 'block';\n      }\n\n      // Update widget every 100ms during test\n      this._testProgressTimer = setInterval(() => {\n        const elapsed = performance.now() - startTime;\n        const elapsedSeconds = (elapsed / 1000).toFixed(1);\n        const durationSeconds = (duration / 1000).toFixed(1);\n        const percent = Math.min(100, (elapsed / duration) * 100).toFixed(0);\n\n        // Update widget elements directly\n        const statusSpan = this._progressWidget?.querySelector('#ve-progress-status');\n        const percentSpan = this._progressWidget?.querySelector('#ve-progress-percent');\n        const timeSpan = this._progressWidget?.querySelector('#ve-progress-time');\n\n        if (statusSpan) statusSpan.textContent = '‚ñ∂Ô∏è Testing';\n        if (percentSpan) percentSpan.textContent = `${percent}% complete`;\n        if (timeSpan) timeSpan.textContent = `${elapsedSeconds}s / ${durationSeconds}s`;\n      }, 100);\n\n      // Run the actual animation\n      const result = await this._animationController.run(this._map, animation, {\n        updateStatus: (msg) => {\n          if (msg) this._updateStatus(msg, 'recording');\n        }\n      });\n\n      if (result.cancelled) {\n        this._updateStatus('Cancelled', 'error');\n      } else if (result.success) {\n        this._updateStatus('Test complete', 'success');\n      }\n    } catch (error) {\n      this._updateStatus('Test failed: ' + error.message, 'error');\n      this.options.onError(error);\n    } finally {\n      // Clear progress timer\n      if (this._testProgressTimer) {\n        clearInterval(this._testProgressTimer);\n        this._testProgressTimer = null;\n      }\n\n      testBtn.innerHTML = '‚ñ∂Ô∏è Test';\n      testBtn.disabled = false;\n      recordBtn.disabled = false;\n      this._expandInterface();\n    }\n  }\n\n  async _startExploration() {\n    if (!this._panel) return;\n    const exploreBtn = asButton(this._panel.querySelector('#ve-explore'));\n    const testBtn = asButton(this._panel.querySelector('#ve-test'));\n    const recordBtn = asButton(this._panel.querySelector('#ve-record'));\n    if (!exploreBtn || !testBtn || !recordBtn) return;\n\n    // Save settings to localStorage\n    this._saveSettings();\n\n    // Hide reset message if visible\n    const resetMessage = this._panel.querySelector('#ve-reset-message');\n    if (resetMessage) resetMessage.style.display = 'none';\n\n    // If running, cancel it\n    if (this._animationController.running) {\n      this._animationController.cancel(this._map);\n\n      // Clear progress timer if exists\n      if (this._exploreProgressTimer) {\n        clearInterval(this._exploreProgressTimer);\n        this._exploreProgressTimer = null;\n      }\n\n      exploreBtn.innerHTML = 'üó∫Ô∏è Explore';\n      testBtn.disabled = false;\n      recordBtn.innerHTML = 'üî¥ Record';\n      recordBtn.disabled = false;\n      this._updateStatus('Exploration stopped', 'error');\n      this._expandInterface();\n      // Clear exploration flag\n      this._isExploring = false;\n      return;\n    }\n\n    // Set exploration mode\n    this._isExploring = true;\n\n    exploreBtn.innerHTML = '‚èπÔ∏è Stop';\n    testBtn.disabled = true;\n    recordBtn.innerHTML = 'üìç Record from here';\n    recordBtn.disabled = false; // Keep record button active for \"record from here\"\n    this._collapseInterface();\n\n    try {\n      this._updateStatus('üó∫Ô∏è Exploring roads...', 'recording');\n      console.log('[Exploration] Starting infinite road exploration');\n\n      // Read fresh options from UI inputs\n      this._readOptionsFromUI();\n\n      // Get animation with setup phase\n      const { setup, animation } = await this._getAnimation();\n\n      // Execute setup phase\n      if (setup) {\n        console.log('üé¨ Executing animation setup phase (for exploration)...');\n        this._updateStatus('Preparing exploration...', 'recording');\n        await setup(this._map, this, {\n          checkAbort: () => {\n            if (this._animationController.aborted) {\n              throw new Error('Exploration cancelled');\n            }\n          },\n          updateStatus: (msg) => {\n            if (msg) this._updateStatus(msg, 'recording');\n          }\n        });\n        console.log('‚úì Setup complete - starting infinite exploration');\n      }\n\n      // Check if exploration limit is enabled via checkbox\n      const explorationLimitCheckbox = asInput(this._panel.querySelector('#ve-exploration-limit'));\n      const isLimitEnabled = explorationLimitCheckbox?.checked || false;\n\n      // Run animation with configurable duration limit\n      const originalDuration = this.options.duration;\n      if (isLimitEnabled) {\n        // Use configured max duration when limit is enabled\n        this.options.duration = this.options.explorationMaxDuration;\n        console.log(`üó∫Ô∏è Exploration limited to ${(this.options.explorationMaxDuration / 1000).toFixed(0)}s`);\n      } else {\n        // Infinite exploration (no limit)\n        this.options.duration = 999999999; // ~11.5 days (effectively infinite)\n        console.log('üó∫Ô∏è Infinite exploration (no duration limit)');\n      }\n\n      // Show widget\n      if (this._progressWidget) {\n        this._progressWidget.style.display = 'block';\n      }\n\n      // Start progress tracking for exploration\n      const startTime = performance.now();\n      const maxDuration = isLimitEnabled ? this.options.explorationMaxDuration : null;\n\n      // Update widget every 100ms during exploration\n      this._exploreProgressTimer = setInterval(() => {\n        const elapsed = performance.now() - startTime;\n        const elapsedSeconds = (elapsed / 1000).toFixed(1);\n\n        // Update widget elements directly\n        const statusSpan = this._progressWidget?.querySelector('#ve-progress-status');\n        const percentSpan = this._progressWidget?.querySelector('#ve-progress-percent');\n        const timeSpan = this._progressWidget?.querySelector('#ve-progress-time');\n\n        if (statusSpan) statusSpan.textContent = 'üó∫Ô∏è Exploring';\n\n        if (isLimitEnabled && maxDuration) {\n          // Show progress towards limit\n          const percent = Math.min(100, (elapsed / maxDuration) * 100).toFixed(0);\n          const remainingSeconds = Math.max(0, (maxDuration - elapsed) / 1000).toFixed(1);\n          if (percentSpan) percentSpan.textContent = `${percent}% complete`;\n          if (timeSpan) timeSpan.textContent = `${elapsedSeconds}s / ${(maxDuration / 1000).toFixed(0)}s (${remainingSeconds}s left)`;\n        } else {\n          // Infinite mode - just show elapsed time\n          if (percentSpan) percentSpan.textContent = 'Infinite exploration';\n          if (timeSpan) timeSpan.textContent = `${elapsedSeconds}s elapsed`;\n        }\n      }, 100);\n\n      const result = await this._animationController.run(this._map, animation, {\n        updateStatus: (msg) => {\n          if (msg) this._updateStatus(msg, 'recording');\n        }\n      });\n\n      // Restore original duration\n      this.options.duration = originalDuration;\n\n      if (result.cancelled) {\n        this._updateStatus('Exploration stopped', 'error');\n      } else {\n        this._updateStatus('Exploration complete', 'success');\n      }\n    } catch (error) {\n      this._updateStatus('Exploration failed: ' + error.message, 'error');\n      this.options.onError(error);\n    } finally {\n      // Clear progress timer\n      if (this._exploreProgressTimer) {\n        clearInterval(this._exploreProgressTimer);\n        this._exploreProgressTimer = null;\n      }\n\n      exploreBtn.innerHTML = 'üó∫Ô∏è Explore';\n      testBtn.disabled = false;\n      recordBtn.innerHTML = 'üî¥ Record';\n      recordBtn.disabled = false;\n      this._expandInterface();\n      this._isExploring = false;\n    }\n  }\n\n  async _startRecording() {\n    if (!this._panel) return;\n    const testBtn = asButton(this._panel.querySelector('#ve-test'));\n    const exploreBtn = asButton(this._panel.querySelector('#ve-explore'));\n    const recordBtn = asButton(this._panel.querySelector('#ve-record'));\n    if (!testBtn || !exploreBtn || !recordBtn) return;\n\n    // Save settings to localStorage\n    this._saveSettings();\n\n    // Hide reset message if visible\n    const resetMessage = this._panel.querySelector('#ve-reset-message');\n    if (resetMessage) resetMessage.style.display = 'none';\n\n    // SPECIAL CASE: If we're in exploration mode and click \"Record from here\"\n    if (this._isExploring && this._animationController.running) {\n      console.log('[Recording] üìç Starting recording from current exploration position');\n\n      // Stop exploration\n      this._animationController.cancel(this._map);\n      this._isExploring = false;\n\n      // Reset exploration UI\n      if (exploreBtn) exploreBtn.innerHTML = 'üó∫Ô∏è Explore';\n      if (testBtn) testBtn.disabled = true; // Disable test during recording\n      if (recordBtn) recordBtn.innerHTML = '‚èπÔ∏è Cancel';\n\n      this._updateStatus('Recording from current position...', 'recording');\n\n      // Small delay to let exploration cleanup\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      // Continue to normal recording flow\n      // The camera is already at the desired position from exploration\n    }\n\n    // If running, cancel it\n    if (this._animationController.running) {\n      this._animationController.cancel(this._map);\n\n      testBtn.disabled = false;\n      recordBtn.innerHTML = 'üî¥ Record';\n      recordBtn.disabled = false;\n      this._updateStatus('Cancelled', 'error');\n      this._hideProgress();\n      this._expandInterface();\n      // Clear recording flag immediately on cancel\n      this._isRecording = false;\n      console.log('[Recording] üîì Recording flag CLEARED on cancel');\n      // Restore time if needed\n      if (maplibregl.restoreNow) {\n        maplibregl.restoreNow();\n      }\n      return;\n    }\n\n    // Prevent starting new recording if cleanup from previous one isn't complete\n    if (this._isRecording) {\n      console.warn('[Recording] ‚ö†Ô∏è Cannot start new recording - previous recording still cleaning up');\n      this._updateStatus('Please wait...', 'error');\n      return;\n    }\n\n    // Check for time control\n    if (!window.maplibregl || typeof maplibregl.setNow !== 'function') {\n      this._updateStatus('Time control not available', 'error');\n      alert('MapLibre time control (setNow/restoreNow) is required for video export.\\n\\nPlease use MapLibre GL JS v5.10.0 or later.');\n      return;\n    }\n\n    testBtn.disabled = true;\n    recordBtn.innerHTML = '‚èπÔ∏è Cancel';\n    this._collapseInterface();\n\n    try {\n      // Read fresh options from UI inputs\n      this._readOptionsFromUI();\n\n      // Start recording directly (no test needed - helper map works in real-time)\n      console.log('[Recording] üî¥ Starting recording...');\n      await this._doRecording();\n    } catch (error) {\n      if (error.name === 'AbortError' || error.message === 'Recording cancelled') {\n        this._updateStatus('Cancelled', 'error');\n      } else {\n        console.error('Recording error:', error);\n        this._updateStatus('Recording failed', 'error');\n        this.options.onError(error);\n      }\n      this._hideProgress();\n    } finally {\n      testBtn.disabled = false;\n      recordBtn.innerHTML = 'üî¥ Record';\n      this._expandInterface();\n\n      // Always restore time\n      if (maplibregl.restoreNow) {\n        maplibregl.restoreNow();\n      }\n    }\n  }\n\n  /**\n     * Ensure camera is within configured constraints before recording\n     * If camera is outside bounds or zoom limits, animate it back to valid position\n     * @returns {Promise} Resolves when camera is within constraints\n     */\n  async _ensureCameraWithinConstraints() {\n    // Check if we have any constraints configured\n    if (!this.options.maxBounds && this.options.minZoom === null && this.options.maxZoom === null) {\n      console.log('[Constraints] No constraints configured, skipping camera check');\n      return;\n    }\n\n    console.log('[Constraints] Checking camera position against constraints...');\n\n    const currentCenter = this._map.getCenter();\n    const currentZoom = this._map.getZoom();\n    let needsCorrection = false;\n    let targetCenter = currentCenter;\n    let targetZoom = currentZoom;\n\n    // Check bounds constraint\n    if (this.options.maxBounds) {\n      const [[west, south], [east, north]] = this.options.maxBounds;\n      const lng = currentCenter.lng;\n      const lat = currentCenter.lat;\n\n      if (lng < west || lng > east || lat < south || lat > north) {\n        needsCorrection = true;\n        // Constrain to bounds\n        const constrainedLng = Math.max(west, Math.min(east, lng));\n        const constrainedLat = Math.max(south, Math.min(north, lat));\n        targetCenter = { lng: constrainedLng, lat: constrainedLat };\n        console.log(`[Constraints] Camera outside bounds: [${lng.toFixed(4)}, ${lat.toFixed(4)}] ‚Üí [${constrainedLng.toFixed(4)}, ${constrainedLat.toFixed(4)}]`);\n      }\n    }\n\n    // Check zoom constraints\n    if (this.options.minZoom !== null && currentZoom < this.options.minZoom) {\n      needsCorrection = true;\n      targetZoom = this.options.minZoom;\n      console.log(`[Constraints] Zoom below minimum: ${currentZoom.toFixed(2)} ‚Üí ${targetZoom.toFixed(2)}`);\n    } else if (this.options.maxZoom !== null && currentZoom > this.options.maxZoom) {\n      needsCorrection = true;\n      targetZoom = this.options.maxZoom;\n      console.log(`[Constraints] Zoom above maximum: ${currentZoom.toFixed(2)} ‚Üí ${targetZoom.toFixed(2)}`);\n    }\n\n    // If camera needs correction, animate it to valid position\n    if (needsCorrection) {\n      console.log('[Constraints] ‚ö†Ô∏è Camera outside constraints - correcting position...');\n\n      return /** @type {Promise<void>} */(new Promise((resolve) => {\n        this._map.easeTo({\n          center: targetCenter,\n          zoom: targetZoom,\n          duration: 1000, // 1 second animation\n          easing: (t) => t // Linear easing\n        });\n\n        // Wait for animation to complete\n        this._map.once('moveend', () => {\n          console.log('[Constraints] ‚úì Camera position corrected');\n          resolve();\n        });\n      }));\n    } else {\n      console.log('[Constraints] ‚úì Camera already within constraints');\n    }\n  }\n\n  /**\n     * Apply cinematic bars to pixel buffer\n     * @param {Uint8Array} pixels - RGBA pixel buffer\n     * @param {number} width - Image width\n     * @param {number} height - Image height\n     * @param {string} aspectRatio - Aspect ratio ('none', '2.39', '1.85', '2.33')\n     */\n  _applyCinematicBars(pixels, width, height, aspectRatio) {\n    if (aspectRatio === 'none') return;\n\n    // Calculate target aspect ratio\n    const targetRatio = parseFloat(aspectRatio);\n\n    // Calculate visible height for target aspect ratio\n    const visibleHeight = Math.floor(width / targetRatio);\n\n    // Check if aspect ratio is compatible with this resolution\n    if (visibleHeight >= height) {\n      console.warn(`üé¨ Cinematic bars skipped: aspect ratio ${aspectRatio}:1 requires height >= ${visibleHeight}px (current: ${height}px)`);\n      return;\n    }\n\n    // Calculate bar height (total bars split top and bottom)\n    const totalBarHeight = height - visibleHeight;\n    const topBarHeight = Math.floor(totalBarHeight / 2);\n    const bottomBarHeight = totalBarHeight - topBarHeight;\n\n    // Validate bar heights\n    if (topBarHeight < 0 || bottomBarHeight < 0) {\n      console.warn(`üé¨ Cinematic bars skipped: invalid bar heights (top: ${topBarHeight}px, bottom: ${bottomBarHeight}px)`);\n      return;\n    }\n\n    console.log(`üé¨ Applying cinematic bars: ${aspectRatio}:1 (visible: ${visibleHeight}px, bars: ${topBarHeight}px + ${bottomBarHeight}px)`);\n\n    // Fill top bar with black\n    const bytesPerPixel = 4; // RGBA\n    const bytesPerRow = width * bytesPerPixel;\n\n    for (let y = 0; y < topBarHeight; y++) {\n      const rowOffset = y * bytesPerRow;\n      for (let x = 0; x < width; x++) {\n        const pixelOffset = rowOffset + x * bytesPerPixel;\n        pixels[pixelOffset] = 0; // R\n        pixels[pixelOffset + 1] = 0; // G\n        pixels[pixelOffset + 2] = 0; // B\n        pixels[pixelOffset + 3] = 255; // A (opaque)\n      }\n    }\n\n    // Fill bottom bar with black\n    const bottomStartY = height - bottomBarHeight;\n    for (let y = bottomStartY; y < height; y++) {\n      const rowOffset = y * bytesPerRow;\n      for (let x = 0; x < width; x++) {\n        const pixelOffset = rowOffset + x * bytesPerPixel;\n        pixels[pixelOffset] = 0; // R\n        pixels[pixelOffset + 1] = 0; // G\n        pixels[pixelOffset + 2] = 0; // B\n        pixels[pixelOffset + 3] = 255; // A (opaque)\n      }\n    }\n  }\n\n  async _doRecording() {\n    if (!this._panel) return;\n    // Start real-time performance measurement\n    const realStartTime = performance.now();\n\n    console.log('üé¨ Starting recording with format:', this.options.format);\n\n    // Ensure camera is within constraints before starting\n    await this._ensureCameraWithinConstraints();\n\n    this._updateStatus(`Loading ${this.options.format.toUpperCase()} encoder...`, 'recording');\n\n    // Set recording flag to prevent waypoints layer recreation\n    this._isRecording = true;\n    console.log('[Recording] üîí Recording flag SET - layer updates blocked');\n\n    // Get resolution\n    const resolution = this._getResolution();\n    const { width, height } = resolution;\n\n    // Get cinematic bars setting\n    const cinematicBarsSelect = asSelect(this._panel.querySelector('#ve-cinematic-bars'));\n    const cinematicBars = cinematicBarsSelect ? cinematicBarsSelect.value : 'none';\n    console.log('üé¨ Cinematic bars:', cinematicBars);\n\n    // Calculate bitrate if auto\n    let bitrate = this.options.bitrate;\n    if (bitrate === 'auto') {\n      // Auto-calculate based on resolution and format\n      const pixels = width * height;\n      const isVP8Realtime = this.options.format === 'webm-vp8' || this.options.format === 'webm';\n\n      // VP8 realtime mode needs higher bitrate to compensate for simplified encoding\n      if (isVP8Realtime) {\n        if (pixels <= 1280 * 720) {\n          bitrate = 8000; // HD: 8 Mbps (vs 5 for VP9/MP4)\n        } else if (pixels <= 1920 * 1080) {\n          bitrate = 12000; // Full HD: 12 Mbps (vs 8)\n        } else if (pixels <= 2560 * 1440) {\n          bitrate = 16000; // 2K: 16 Mbps (vs 12)\n        } else {\n          bitrate = 25000; // 4K+: 25 Mbps (vs 20)\n        }\n        console.log(`Auto bitrate (VP8 realtime): ${bitrate} kbps for ${width}√ó${height}`);\n      } else {\n        // VP9 and MP4 use standard bitrates\n        if (pixels <= 1280 * 720) {\n          bitrate = 5000; // HD: 5 Mbps\n        } else if (pixels <= 1920 * 1080) {\n          bitrate = 8000; // Full HD: 8 Mbps\n        } else if (pixels <= 2560 * 1440) {\n          bitrate = 12000; // 2K: 12 Mbps\n        } else {\n          bitrate = 20000; // 4K+: 20 Mbps\n        }\n        console.log(`Auto bitrate (${this.options.format}): ${bitrate} kbps for ${width}√ó${height}`);\n      }\n    }\n\n    this._updateStatus(`Initializing ${width}√ó${height}...`, 'recording');\n\n    // Save original size and camera state\n    const container = this._map.getContainer();\n    const originalSize = {\n      width: container.style.width,\n      height: container.style.height\n    };\n    const originalCamera = {\n      center: this._map.getCenter(),\n      zoom: this._map.getZoom(),\n      pitch: this._map.getPitch(),\n      bearing: this._map.getBearing()\n    };\n\n    // Resize if needed\n    if (this.options.resolution !== 'auto') {\n      container.style.width = width + 'px';\n      container.style.height = height + 'px';\n      this._map.resize();\n\n      // Restore camera position after resize\n      this._map.jumpTo({\n        center: originalCamera.center,\n        zoom: originalCamera.zoom,\n        pitch: originalCamera.pitch,\n        bearing: originalCamera.bearing\n      });\n\n      await new Promise(resolve => setTimeout(resolve, 500)); // Wait for resize\n    }\n\n    // Hide waypoint markers during recording (they are DOM elements that would appear in the video)\n    this._hideWaypointMarkers();\n\n    // Create temporary WebGL layer for waypoints (will be captured in video)\n    // Wait for icon to load if needed (important when time is frozen with setNow)\n    await this._createWaypointsWebGLLayer();\n\n    // Store real recording parameters for accurate size estimation\n    this._recordingParams = { width, height, fps: this.options.fps, bitrate };\n\n    // Create encoder for the selected format\n    let encoder = null;\n    try {\n      encoder = await this._loadEncoderForFormat(width, height, this.options.fps, bitrate);\n      this._encoder = encoder; // Store for cleanup if needed\n\n      // Setup capture\n      const gl = this._map.painter.context.gl;\n      let ptr = null; // Only used for MP4\n      if (this.options.format === 'mp4') {\n        ptr = encoder.getRGBPointer();\n      }\n      let frameCount = 0;\n      let virtualTime = 0;\n\n      // Calculate time advance based on fps and speed multiplier\n      // Real-time = 1000/fps ms per frame\n      // speedMultiplier: 1 = real-time, 2 = twice as fast, 0.5 = half speed\n      const realTimeAdvance = 1000 / this.options.fps;\n      const timeAdvance = realTimeAdvance * this.options.speedMultiplier;\n\n      console.log(`Time advance: ${timeAdvance.toFixed(2)}ms per frame (${this.options.speedMultiplier}x speed at ${this.options.fps} fps)`);\n      console.log(`‚è≥ Wait for tiles: ${this.options.waitForTiles ? 'enabled (slower, better quality)' : 'disabled (faster)'}`);\n\n      // Get animation with optional setup phase\n      const { setup, animation } = await this._getAnimation();\n\n      // Execute setup phase BEFORE freezing time (e.g., camera repositioning)\n      if (setup) {\n        console.log('üé¨ Executing animation setup phase (before time freeze)...');\n        this._updateStatus('Preparing animation...', 'recording');\n        await setup(this._map, this, {\n          checkAbort: () => {\n            if (this._animationController.aborted) {\n              throw new Error('Recording cancelled');\n            }\n          },\n          updateStatus: (msg) => {\n            if (msg) this._updateStatus(msg, 'recording');\n          }\n        });\n        console.log('‚úì Setup phase complete');\n      }\n\n      // Freeze time AFTER setup\n      maplibregl.setNow(virtualTime);\n\n      // Helper to wait for tiles to load\n      // With frozen time (setNow), events don't fire normally, so we use a simple approach:\n      // Force multiple repaints and check tiles status\n      const waitForTilesLoaded = async () => {\n        // Quick check first\n        if (this._map.areTilesLoaded()) {\n          return;\n        }\n\n        // Force multiple render cycles to give tiles time to load\n        // With frozen time, we need to manually trigger repaints\n        const maxAttempts = 5;\n        for (let i = 0; i < maxAttempts; i++) {\n          this._map.triggerRepaint();\n\n          // Wait a tiny bit for the browser to process\n          await new Promise(resolve => setTimeout(resolve, 20));\n\n          // Check if tiles loaded\n          if (this._map.areTilesLoaded()) {\n            return;\n          }\n        }\n\n        // Continue anyway after max attempts\n      };\n\n      // Calculate recording duration (needed for metrics later)\n      let recordingDuration = this.options.duration / this.options.speedMultiplier;\n\n      // Single capture loop that optionally waits for tiles\n      {\n        // Calculate frames needed to complete animation at the given speed\n        // If speedMultiplier = 0.25 (very slow), we need 4x more frames to complete the animation\n        // If speedMultiplier = 2 (fast), we need 2x fewer frames\n\n        // Add extra time for loop return if enabled (update shared variable)\n        if (this.options.loop) {\n          // Add maximum return duration (2s or 20% of duration, whichever is less)\n          const returnDuration = Math.min(2000, this.options.duration * 0.2);\n          recordingDuration += returnDuration / this.options.speedMultiplier;\n          console.log('Loop enabled, adding', returnDuration, 'ms for return. Total duration:', recordingDuration);\n        }\n\n        const targetFrames = Math.floor((recordingDuration / 1000) * this.options.fps);\n\n        // Initialize progress display\n        this._updateProgress(0, targetFrames, bitrate, recordingDuration);\n\n        // Start animation (don't await - let it run in background)\n        this._updateStatus('Recording animation...', 'recording');\n\n        // Launch animation and track when it's complete\n        let animationComplete = false;\n        this._animationController.run(this._map, animation, {\n          updateStatus: (msg) => {\n            if (msg) this._updateStatus(msg, 'recording');\n          }\n        }).then(() => {\n          animationComplete = true;\n          console.log('üé¨ Animation wrapper complete (including return)');\n        }).catch(error => {\n          if (error.name !== 'AbortError') {\n            console.error('Animation error:', error);\n          }\n          animationComplete = true;\n        });\n\n        // Small delay to let animation start\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // Single capture loop - continue until animation is complete BUT limit frames\n        try {\n          // eslint-disable-next-line no-unmodified-loop-condition -- animationComplete is modified asynchronously in Promise callbacks above\n          while (!animationComplete && frameCount < targetFrames) {\n            // Advance time\n            virtualTime += timeAdvance;\n            maplibregl.setNow(virtualTime);\n            this._map.triggerRepaint();\n\n            // Wait for tiles if option enabled\n            if (this.options.waitForTiles) {\n              await waitForTilesLoaded();\n            }\n\n            // Wait for render\n            await new Promise(resolve => this._map.once('render', resolve));\n\n            // Capture frame\n            if (this.options.format === 'mp4') {\n              // MP4: Direct memory access (synchronous)\n              const pixels = encoder.memory().subarray(ptr);\n              gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\n              // Apply cinematic bars if enabled\n              this._applyCinematicBars(pixels, width, height, cinematicBars);\n\n              encoder.encodeRGBPointer();\n            } else {\n              // WebM: Copy to new buffer and send to worker (asynchronous)\n              // Create a new ArrayBuffer to ensure data is properly transferred\n              const buffer = new ArrayBuffer(width * height * 4);\n              const pixels = new Uint8Array(buffer);\n              gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\n              // Flip vertically (WebGL coordinates are bottom-up, video expects top-down)\n              const flipped = new Uint8Array(width * height * 4);\n              const bytesPerRow = width * 4;\n              for (let y = 0; y < height; y++) {\n                const srcOffset = y * bytesPerRow;\n                const dstOffset = (height - 1 - y) * bytesPerRow;\n                flipped.set(pixels.subarray(srcOffset, srcOffset + bytesPerRow), dstOffset);\n              }\n\n              // Apply cinematic bars if enabled (after flipping)\n              this._applyCinematicBars(flipped, width, height, cinematicBars);\n\n              // Debug first frame\n              if (frameCount === 1) {\n                console.log('[WebM] First frame captured and flipped:', {\n                  width,\n                  height,\n                  bufferSize: flipped.byteLength,\n                  firstPixels: Array.from(flipped.slice(0, 16))\n                });\n              }\n\n              // Note: await needed for WebCodecs VP9 (async), doesn't hurt webm-wasm VP8 (sync)\n              await encoder.addFrame(flipped);\n            }\n\n            frameCount++;\n\n            // Update progress bar on every frame\n            this._updateProgress(frameCount, targetFrames, bitrate, recordingDuration);\n\n            // Update status and call onProgress every second\n            if (frameCount % this.options.fps === 0) {\n              const seconds = Math.floor(frameCount / this.options.fps);\n              this._updateStatus(`Recording... ${seconds}s`, 'recording');\n              this.options.onProgress(frameCount, virtualTime);\n            }\n          }\n\n          if (animationComplete) {\n            console.log('‚úÖ Animation complete, captured', frameCount, 'frames');\n          } else {\n            console.log('‚ö†Ô∏è Reached target frames (', frameCount, '), stopping capture');\n          }\n        } catch (error) {\n          maplibregl.restoreNow();\n          if (this.options.resolution !== 'auto') {\n            container.style.width = originalSize.width;\n            container.style.height = originalSize.height;\n            this._map.resize();\n          }\n          throw error;\n        }\n      }\n\n      // Restore time\n      maplibregl.restoreNow();\n\n      // Encode\n      this._updateStatus('Encoding video...', 'recording');\n      // Update progress widget to show encoding status\n      const statusSpan = this._progressWidget?.querySelector('#ve-progress-status');\n      if (statusSpan) statusSpan.textContent = 'Encoding';\n      const videoData = await encoder.end();\n      const mimeType = this.options.format === 'mp4' ? 'video/mp4' : 'video/webm';\n      const blob = new Blob([videoData], { type: mimeType });\n\n      // Restore size and camera\n      if (this.options.resolution !== 'auto') {\n        container.style.width = originalSize.width;\n        container.style.height = originalSize.height;\n        this._map.resize();\n\n        // Restore camera position after resize\n        this._map.jumpTo({\n          center: originalCamera.center,\n          zoom: originalCamera.zoom,\n          pitch: originalCamera.pitch,\n          bearing: originalCamera.bearing\n        });\n      }\n\n      // Download\n      const a = document.createElement('a');\n      a.href = URL.createObjectURL(blob);\n      const extension = this.options.format === 'mp4' ? 'mp4' : 'webm';\n      a.download = `maplibre-video-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.${extension}`;\n      a.click();\n\n      const sizeMB = (blob.size / 1024 / 1024).toFixed(2);\n\n      // Calculate and log performance metrics\n      const realElapsedSeconds = ((performance.now() - realStartTime) / 1000).toFixed(1);\n      const videoDurationSeconds = (recordingDuration / 1000).toFixed(1);\n      const speedRatio = (recordingDuration / (performance.now() - realStartTime)).toFixed(2);\n\n      console.log('‚úÖ Export complete!');\n      console.log(`   üìπ Video: ${videoDurationSeconds}s (${frameCount} frames @ ${this.options.fps} fps)`);\n      console.log(`   ‚è±Ô∏è  Real time: ${realElapsedSeconds}s`);\n      console.log(`   ‚ö° Speed: ${speedRatio}x realtime (${(parseFloat(speedRatio) > 1 ? 'faster' : 'slower')} than realtime)`);\n      console.log(`   üíæ Size: ${sizeMB} MB`);\n\n      // Show final stats in UI widget\n      this._showFinalStats({\n        videoDuration: videoDurationSeconds,\n        frameCount,\n        fps: this.options.fps,\n        realTime: realElapsedSeconds,\n        speedRatio,\n        sizeMB\n      });\n\n      this._updateStatus(`‚úÖ Complete! ${sizeMB} MB`, 'success');\n      this.options.onComplete(blob, frameCount);\n    } finally {\n      // Always cleanup encoder\n      if (encoder) {\n        if (encoder.destroy) {\n          encoder.destroy(); // WebM encoder\n          console.log('WebM encoder destroyed');\n        } else if (encoder.delete) {\n          encoder.delete(); // MP4 encoder\n          console.log('MP4 encoder deleted');\n        }\n      }\n      this._encoder = null; // Clear reference\n      this._recordingParams = null; // Clear recording params\n\n      // Clear recording flag to allow marker updates again\n      this._isRecording = false;\n      console.log('[Recording] üîì Recording flag CLEARED - marker updates enabled');\n\n      // Remove temporary WebGL layer (no longer needed)\n      this._removeWaypointsWebGLLayer();\n\n      // Restore waypoint markers visibility\n      this._showWaypointMarkers();\n    }\n  }\n\n  _getResolution() {\n    const resolutions = {\n      auto: null,\n      hd: { width: 1280, height: 720 },\n      fullhd: { width: 1920, height: 1080 },\n      '4k': { width: 3840, height: 2160 },\n      '8k': { width: 7680, height: 4320 }\n    };\n\n    // Handle 'auto' resolution\n    if (this.options.resolution === 'auto') {\n      const container = this._map.getContainer();\n      return {\n        width: Math.floor(container.offsetWidth / 16) * 16,\n        height: Math.floor(container.offsetHeight / 16) * 16\n      };\n    }\n\n    // Handle custom resolution (object with width/height)\n    if (typeof this.options.resolution === 'object' && this.options.resolution.width) {\n      return {\n        width: Math.floor(this.options.resolution.width / 16) * 16,\n        height: Math.floor(this.options.resolution.height / 16) * 16\n      };\n    }\n\n    // Handle preset resolutions\n    const res = resolutions[this.options.resolution] || resolutions.fullhd;\n    return {\n      width: Math.floor(res.width / 16) * 16,\n      height: Math.floor(res.height / 16) * 16\n    };\n  }\n}\n\n// Version number (automatically injected from package.json during build)\n// @ts-ignore - __VERSION__ is replaced at build time\nVideoExportControl.version = __VERSION__;\n\n// Auto-register with MapLibre if available\nif (typeof window !== 'undefined' && window.maplibregl) {\n  // @ts-ignore - Dynamically adding VideoExportControl to maplibregl global\n  window.maplibregl.VideoExportControl = VideoExportControl;\n}\n\nexport { VideoExportControl as default };\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nexport function assert(x) {\n    if (!x) {\n        throw new Error('Assertion failed.');\n    }\n}\nexport const normalizeRotation = (rotation) => {\n    const mappedRotation = (rotation % 360 + 360) % 360;\n    if (mappedRotation === 0 || mappedRotation === 90 || mappedRotation === 180 || mappedRotation === 270) {\n        return mappedRotation;\n    }\n    else {\n        throw new Error(`Invalid rotation ${rotation}.`);\n    }\n};\nexport const last = (arr) => {\n    return arr && arr[arr.length - 1];\n};\nexport const isU32 = (value) => {\n    return value >= 0 && value < 2 ** 32;\n};\nexport class Bitstream {\n    constructor(bytes) {\n        this.bytes = bytes;\n        /** Current offset in bits. */\n        this.pos = 0;\n    }\n    seekToByte(byteOffset) {\n        this.pos = 8 * byteOffset;\n    }\n    readBit() {\n        const byteIndex = Math.floor(this.pos / 8);\n        const byte = this.bytes[byteIndex] ?? 0;\n        const bitIndex = 0b111 - (this.pos & 0b111);\n        const bit = (byte & (1 << bitIndex)) >> bitIndex;\n        this.pos++;\n        return bit;\n    }\n    readBits(n) {\n        if (n === 1) {\n            return this.readBit();\n        }\n        let result = 0;\n        for (let i = 0; i < n; i++) {\n            result <<= 1;\n            result |= this.readBit();\n        }\n        return result;\n    }\n    writeBits(n, value) {\n        const end = this.pos + n;\n        for (let i = this.pos; i < end; i++) {\n            const byteIndex = Math.floor(i / 8);\n            let byte = this.bytes[byteIndex];\n            const bitIndex = 0b111 - (i & 0b111);\n            byte &= ~(1 << bitIndex);\n            byte |= ((value & (1 << (end - i - 1))) >> (end - i - 1)) << bitIndex;\n            this.bytes[byteIndex] = byte;\n        }\n        this.pos = end;\n    }\n    ;\n    readAlignedByte() {\n        // Ensure we're byte-aligned\n        if (this.pos % 8 !== 0) {\n            throw new Error('Bitstream is not byte-aligned.');\n        }\n        const byteIndex = this.pos / 8;\n        const byte = this.bytes[byteIndex] ?? 0;\n        this.pos += 8;\n        return byte;\n    }\n    skipBits(n) {\n        this.pos += n;\n    }\n    getBitsLeft() {\n        return this.bytes.length * 8 - this.pos;\n    }\n    clone() {\n        const clone = new Bitstream(this.bytes);\n        clone.pos = this.pos;\n        return clone;\n    }\n}\n/** Reads an exponential-Golomb universal code from a Bitstream.  */\nexport const readExpGolomb = (bitstream) => {\n    let leadingZeroBits = 0;\n    while (bitstream.readBits(1) === 0 && leadingZeroBits < 32) {\n        leadingZeroBits++;\n    }\n    if (leadingZeroBits >= 32) {\n        throw new Error('Invalid exponential-Golomb code.');\n    }\n    const result = (1 << leadingZeroBits) - 1 + bitstream.readBits(leadingZeroBits);\n    return result;\n};\n/** Reads a signed exponential-Golomb universal code from a Bitstream. */\nexport const readSignedExpGolomb = (bitstream) => {\n    const codeNum = readExpGolomb(bitstream);\n    return ((codeNum & 1) === 0)\n        ? -(codeNum >> 1)\n        : ((codeNum + 1) >> 1);\n};\nexport const writeBits = (bytes, start, end, value) => {\n    for (let i = start; i < end; i++) {\n        const byteIndex = Math.floor(i / 8);\n        let byte = bytes[byteIndex];\n        const bitIndex = 0b111 - (i & 0b111);\n        byte &= ~(1 << bitIndex);\n        byte |= ((value & (1 << (end - i - 1))) >> (end - i - 1)) << bitIndex;\n        bytes[byteIndex] = byte;\n    }\n};\nexport const toUint8Array = (source) => {\n    if (source.constructor === Uint8Array) { // We want a true Uint8Array, not something that extends it like Buffer\n        return source;\n    }\n    else if (source instanceof ArrayBuffer) {\n        return new Uint8Array(source);\n    }\n    else {\n        return new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    }\n};\nexport const toDataView = (source) => {\n    if (source.constructor === DataView) {\n        return source;\n    }\n    else if (source instanceof ArrayBuffer) {\n        return new DataView(source);\n    }\n    else {\n        return new DataView(source.buffer, source.byteOffset, source.byteLength);\n    }\n};\nexport const textDecoder = new TextDecoder();\nexport const textEncoder = new TextEncoder();\nexport const isIso88591Compatible = (text) => {\n    for (let i = 0; i < text.length; i++) {\n        const code = text.charCodeAt(i);\n        if (code > 255) {\n            return false;\n        }\n    }\n    return true;\n};\nconst invertObject = (object) => {\n    return Object.fromEntries(Object.entries(object).map(([key, value]) => [value, key]));\n};\n// For the color space mappings, see Rec. ITU-T H.273.\nexport const COLOR_PRIMARIES_MAP = {\n    bt709: 1, // ITU-R BT.709\n    bt470bg: 5, // ITU-R BT.470BG\n    smpte170m: 6, // ITU-R BT.601 525 - SMPTE 170M\n    bt2020: 9, // ITU-R BT.202\n    smpte432: 12, // SMPTE EG 432-1\n};\nexport const COLOR_PRIMARIES_MAP_INVERSE = invertObject(COLOR_PRIMARIES_MAP);\nexport const TRANSFER_CHARACTERISTICS_MAP = {\n    'bt709': 1, // ITU-R BT.709\n    'smpte170m': 6, // SMPTE 170M\n    'linear': 8, // Linear transfer characteristics\n    'iec61966-2-1': 13, // IEC 61966-2-1\n    'pq': 16, // Rec. ITU-R BT.2100-2 perceptual quantization (PQ) system\n    'hlg': 18, // Rec. ITU-R BT.2100-2 hybrid loggamma (HLG) system\n};\nexport const TRANSFER_CHARACTERISTICS_MAP_INVERSE = invertObject(TRANSFER_CHARACTERISTICS_MAP);\nexport const MATRIX_COEFFICIENTS_MAP = {\n    'rgb': 0, // Identity\n    'bt709': 1, // ITU-R BT.709\n    'bt470bg': 5, // ITU-R BT.470BG\n    'smpte170m': 6, // SMPTE 170M\n    'bt2020-ncl': 9, // ITU-R BT.2020-2 (non-constant luminance)\n};\nexport const MATRIX_COEFFICIENTS_MAP_INVERSE = invertObject(MATRIX_COEFFICIENTS_MAP);\nexport const colorSpaceIsComplete = (colorSpace) => {\n    return (!!colorSpace\n        && !!colorSpace.primaries\n        && !!colorSpace.transfer\n        && !!colorSpace.matrix\n        && colorSpace.fullRange !== undefined);\n};\nexport const isAllowSharedBufferSource = (x) => {\n    return (x instanceof ArrayBuffer\n        || (typeof SharedArrayBuffer !== 'undefined' && x instanceof SharedArrayBuffer)\n        || ArrayBuffer.isView(x));\n};\nexport class AsyncMutex {\n    constructor() {\n        this.currentPromise = Promise.resolve();\n    }\n    async acquire() {\n        let resolver;\n        const nextPromise = new Promise((resolve) => {\n            resolver = resolve;\n        });\n        const currentPromiseAlias = this.currentPromise;\n        this.currentPromise = nextPromise;\n        await currentPromiseAlias;\n        return resolver;\n    }\n}\nexport const bytesToHexString = (bytes) => {\n    return [...bytes].map(x => x.toString(16).padStart(2, '0')).join('');\n};\nexport const reverseBitsU32 = (x) => {\n    x = ((x >> 1) & 0x55555555) | ((x & 0x55555555) << 1);\n    x = ((x >> 2) & 0x33333333) | ((x & 0x33333333) << 2);\n    x = ((x >> 4) & 0x0f0f0f0f) | ((x & 0x0f0f0f0f) << 4);\n    x = ((x >> 8) & 0x00ff00ff) | ((x & 0x00ff00ff) << 8);\n    x = ((x >> 16) & 0x0000ffff) | ((x & 0x0000ffff) << 16);\n    return x >>> 0; // Ensure it's treated as an unsigned 32-bit integer\n};\n/** Returns the smallest index i such that val[i] === key, or -1 if no such index exists. */\nexport const binarySearchExact = (arr, key, valueGetter) => {\n    let low = 0;\n    let high = arr.length - 1;\n    let ans = -1;\n    while (low <= high) {\n        const mid = (low + high) >> 1;\n        const midVal = valueGetter(arr[mid]);\n        if (midVal === key) {\n            ans = mid;\n            high = mid - 1; // Continue searching left to find the lowest index\n        }\n        else if (midVal < key) {\n            low = mid + 1;\n        }\n        else {\n            high = mid - 1;\n        }\n    }\n    return ans;\n};\n/** Returns the largest index i such that val[i] <= key, or -1 if no such index exists. */\nexport const binarySearchLessOrEqual = (arr, key, valueGetter) => {\n    let low = 0;\n    let high = arr.length - 1;\n    let ans = -1;\n    while (low <= high) {\n        const mid = (low + (high - low + 1) / 2) | 0;\n        const midVal = valueGetter(arr[mid]);\n        if (midVal <= key) {\n            ans = mid;\n            low = mid + 1;\n        }\n        else {\n            high = mid - 1;\n        }\n    }\n    return ans;\n};\n/** Assumes the array is already sorted. */\nexport const insertSorted = (arr, item, valueGetter) => {\n    const insertionIndex = binarySearchLessOrEqual(arr, valueGetter(item), valueGetter);\n    arr.splice(insertionIndex + 1, 0, item); // This even behaves correctly for the -1 case\n};\nexport const promiseWithResolvers = () => {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve: resolve, reject: reject };\n};\nexport const removeItem = (arr, item) => {\n    const index = arr.indexOf(item);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n};\nexport const findLast = (arr, predicate) => {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i])) {\n            return arr[i];\n        }\n    }\n    return undefined;\n};\nexport const findLastIndex = (arr, predicate) => {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i])) {\n            return i;\n        }\n    }\n    return -1;\n};\nexport const toAsyncIterator = async function* (source) {\n    if (Symbol.iterator in source) {\n        // @ts-expect-error Trust me\n        yield* source[Symbol.iterator]();\n    }\n    else {\n        // @ts-expect-error Trust me\n        yield* source[Symbol.asyncIterator]();\n    }\n};\nexport const validateAnyIterable = (iterable) => {\n    if (!(Symbol.iterator in iterable) && !(Symbol.asyncIterator in iterable)) {\n        throw new TypeError('Argument must be an iterable or async iterable.');\n    }\n};\nexport const assertNever = (x) => {\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    throw new Error(`Unexpected value: ${x}`);\n};\nexport const getUint24 = (view, byteOffset, littleEndian) => {\n    const byte1 = view.getUint8(byteOffset);\n    const byte2 = view.getUint8(byteOffset + 1);\n    const byte3 = view.getUint8(byteOffset + 2);\n    if (littleEndian) {\n        return byte1 | (byte2 << 8) | (byte3 << 16);\n    }\n    else {\n        return (byte1 << 16) | (byte2 << 8) | byte3;\n    }\n};\nexport const getInt24 = (view, byteOffset, littleEndian) => {\n    // The left shift pushes the most significant bit into the sign bit region, and the subsequent right shift\n    // then correctly interprets the sign bit.\n    return getUint24(view, byteOffset, littleEndian) << 8 >> 8;\n};\nexport const setUint24 = (view, byteOffset, value, littleEndian) => {\n    // Ensure the value is within 24-bit unsigned range (0 to 16777215)\n    value = value >>> 0; // Convert to unsigned 32-bit\n    value = value & 0xFFFFFF; // Mask to 24 bits\n    if (littleEndian) {\n        view.setUint8(byteOffset, value & 0xFF);\n        view.setUint8(byteOffset + 1, (value >>> 8) & 0xFF);\n        view.setUint8(byteOffset + 2, (value >>> 16) & 0xFF);\n    }\n    else {\n        view.setUint8(byteOffset, (value >>> 16) & 0xFF);\n        view.setUint8(byteOffset + 1, (value >>> 8) & 0xFF);\n        view.setUint8(byteOffset + 2, value & 0xFF);\n    }\n};\nexport const setInt24 = (view, byteOffset, value, littleEndian) => {\n    // Ensure the value is within 24-bit signed range (-8388608 to 8388607)\n    value = clamp(value, -8388608, 8388607);\n    // Convert negative values to their 24-bit representation\n    if (value < 0) {\n        value = (value + 0x1000000) & 0xFFFFFF;\n    }\n    setUint24(view, byteOffset, value, littleEndian);\n};\nexport const setInt64 = (view, byteOffset, value, littleEndian) => {\n    if (littleEndian) {\n        view.setUint32(byteOffset + 0, value, true);\n        view.setInt32(byteOffset + 4, Math.floor(value / 2 ** 32), true);\n    }\n    else {\n        view.setInt32(byteOffset + 0, Math.floor(value / 2 ** 32), true);\n        view.setUint32(byteOffset + 4, value, true);\n    }\n};\n/**\n * Calls a function on each value spat out by an async generator. The reason for writing this manually instead of\n * using a generator function is that the generator function queues return() calls - here, we forward them immediately.\n */\nexport const mapAsyncGenerator = (generator, map) => {\n    return {\n        async next() {\n            const result = await generator.next();\n            if (result.done) {\n                return { value: undefined, done: true };\n            }\n            else {\n                return { value: map(result.value), done: false };\n            }\n        },\n        return() {\n            return generator.return();\n        },\n        throw(error) {\n            return generator.throw(error);\n        },\n        [Symbol.asyncIterator]() {\n            return this;\n        },\n    };\n};\nexport const clamp = (value, min, max) => {\n    return Math.max(min, Math.min(max, value));\n};\nexport const UNDETERMINED_LANGUAGE = 'und';\nexport const roundToPrecision = (value, digits) => {\n    const factor = 10 ** digits;\n    return Math.round(value * factor) / factor;\n};\nexport const roundToMultiple = (value, multiple) => {\n    return Math.round(value / multiple) * multiple;\n};\nexport const ilog = (x) => {\n    let ret = 0;\n    while (x) {\n        ret++;\n        x >>= 1;\n    }\n    return ret;\n};\nconst ISO_639_2_REGEX = /^[a-z]{3}$/;\nexport const isIso639Dash2LanguageCode = (x) => {\n    return ISO_639_2_REGEX.test(x);\n};\n// Since the result will be truncated, add a bit of eps to compensate for floating point errors\nexport const SECOND_TO_MICROSECOND_FACTOR = 1e6 * (1 + Number.EPSILON);\n/**\n * Merges two RequestInit objects with special handling for headers.\n * Headers are merged case-insensitively, but original casing is preserved.\n * init2 headers take precedence and will override case-insensitive matches from init1.\n */\nexport const mergeRequestInit = (init1, init2) => {\n    const merged = { ...init1, ...init2 };\n    // Special handling for headers\n    if (init1.headers || init2.headers) {\n        const headers1 = init1.headers ? normalizeHeaders(init1.headers) : {};\n        const headers2 = init2.headers ? normalizeHeaders(init2.headers) : {};\n        const mergedHeaders = { ...headers1 };\n        // For each header in headers2, check if a case-insensitive match exists in mergedHeaders\n        Object.entries(headers2).forEach(([key2, value2]) => {\n            const existingKey = Object.keys(mergedHeaders).find(key1 => key1.toLowerCase() === key2.toLowerCase());\n            if (existingKey) {\n                delete mergedHeaders[existingKey];\n            }\n            mergedHeaders[key2] = value2;\n        });\n        merged.headers = mergedHeaders;\n    }\n    return merged;\n};\n/** Normalizes HeadersInit to a Record<string, string> format. */\nconst normalizeHeaders = (headers) => {\n    if (headers instanceof Headers) {\n        const result = {};\n        headers.forEach((value, key) => {\n            result[key] = value;\n        });\n        return result;\n    }\n    if (Array.isArray(headers)) {\n        const result = {};\n        headers.forEach(([key, value]) => {\n            result[key] = value;\n        });\n        return result;\n    }\n    return headers;\n};\nexport const retriedFetch = async (fetchFn, url, requestInit, getRetryDelay) => {\n    let attempts = 0;\n    while (true) {\n        try {\n            return await fetchFn(url, requestInit);\n        }\n        catch (error) {\n            attempts++;\n            const retryDelayInSeconds = getRetryDelay(attempts, error, url);\n            if (retryDelayInSeconds === null) {\n                throw error;\n            }\n            console.error('Retrying failed fetch. Error:', error);\n            if (!Number.isFinite(retryDelayInSeconds) || retryDelayInSeconds < 0) {\n                throw new TypeError('Retry delay must be a non-negative finite number.');\n            }\n            if (retryDelayInSeconds > 0) {\n                await new Promise(resolve => setTimeout(resolve, 1000 * retryDelayInSeconds));\n            }\n        }\n    }\n};\nexport const computeRationalApproximation = (x, maxDenominator) => {\n    // Handle negative numbers\n    const sign = x < 0 ? -1 : 1;\n    x = Math.abs(x);\n    let prevNumerator = 0, prevDenominator = 1;\n    let currNumerator = 1, currDenominator = 0;\n    // Continued fraction algorithm\n    let remainder = x;\n    while (true) {\n        const integer = Math.floor(remainder);\n        // Calculate next convergent\n        const nextNumerator = integer * currNumerator + prevNumerator;\n        const nextDenominator = integer * currDenominator + prevDenominator;\n        if (nextDenominator > maxDenominator) {\n            return {\n                numerator: sign * currNumerator,\n                denominator: currDenominator,\n            };\n        }\n        prevNumerator = currNumerator;\n        prevDenominator = currDenominator;\n        currNumerator = nextNumerator;\n        currDenominator = nextDenominator;\n        remainder = 1 / (remainder - integer);\n        // Guard against precision issues\n        if (!isFinite(remainder)) {\n            break;\n        }\n    }\n    return {\n        numerator: sign * currNumerator,\n        denominator: currDenominator,\n    };\n};\nexport class CallSerializer {\n    constructor() {\n        this.currentPromise = Promise.resolve();\n    }\n    call(fn) {\n        return this.currentPromise = this.currentPromise.then(fn);\n    }\n}\nlet isSafariCache = null;\nexport const isSafari = () => {\n    if (isSafariCache !== null) {\n        return isSafariCache;\n    }\n    const result = !!(typeof navigator !== 'undefined'\n        && navigator.vendor?.match(/apple/i)\n        && !navigator.userAgent?.match(/crios/i)\n        && !navigator.userAgent?.match(/fxios/i)\n        && !navigator.userAgent?.match(/Opera|OPT\\//));\n    isSafariCache = result;\n    return result;\n};\nlet isFirefoxCache = null;\nexport const isFirefox = () => {\n    if (isFirefoxCache !== null) {\n        return isFirefoxCache;\n    }\n    return isFirefoxCache = typeof navigator !== 'undefined' && navigator.userAgent?.includes('Firefox');\n};\n/** Acts like `??` except the condition is -1 and not null/undefined. */\nexport const coalesceIndex = (a, b) => {\n    return a !== -1 ? a : b;\n};\nexport const closedIntervalsOverlap = (startA, endA, startB, endB) => {\n    return startA <= endB && startB <= endA;\n};\nexport const keyValueIterator = function* (object) {\n    for (const key in object) {\n        const value = object[key];\n        if (value === undefined) {\n            continue;\n        }\n        yield { key, value };\n    }\n};\nexport const imageMimeTypeToExtension = (mimeType) => {\n    switch (mimeType.toLowerCase()) {\n        case 'image/jpeg':\n        case 'image/jpg':\n            return '.jpg';\n        case 'image/png':\n            return '.png';\n        case 'image/gif':\n            return '.gif';\n        case 'image/webp':\n            return '.webp';\n        case 'image/bmp':\n            return '.bmp';\n        case 'image/svg+xml':\n            return '.svg';\n        case 'image/tiff':\n            return '.tiff';\n        case 'image/avif':\n            return '.avif';\n        case 'image/x-icon':\n        case 'image/vnd.microsoft.icon':\n            return '.ico';\n        default:\n            return null;\n    }\n};\nexport const base64ToBytes = (base64) => {\n    const decoded = atob(base64);\n    const bytes = new Uint8Array(decoded.length);\n    for (let i = 0; i < decoded.length; i++) {\n        bytes[i] = decoded.charCodeAt(i);\n    }\n    return bytes;\n};\nexport const bytesToBase64 = (bytes) => {\n    let string = '';\n    for (let i = 0; i < bytes.length; i++) {\n        string += String.fromCharCode(bytes[i]);\n    }\n    return btoa(string);\n};\nexport const uint8ArraysAreEqual = (a, b) => {\n    if (a.length !== b.length) {\n        return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n    return true;\n};\nexport const polyfillSymbolDispose = () => {\n    // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-2.html\n    // @ts-expect-error Readonly\n    Symbol.dispose ??= Symbol('Symbol.dispose');\n};\nexport const isNumber = (x) => {\n    return typeof x === 'number' && !Number.isNaN(x);\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n/**\n * Image data with additional metadata.\n *\n * @group Metadata tags\n * @public\n */\nexport class RichImageData {\n    /** Creates a new {@link RichImageData}. */\n    constructor(\n    /** The raw image data. */\n    data, \n    /** An RFC 6838 MIME type (e.g. image/jpeg, image/png, etc.) */\n    mimeType) {\n        this.data = data;\n        this.mimeType = mimeType;\n        if (!(data instanceof Uint8Array)) {\n            throw new TypeError('data must be a Uint8Array.');\n        }\n        if (typeof mimeType !== 'string') {\n            throw new TypeError('mimeType must be a string.');\n        }\n    }\n}\n/**\n * A file attached to a media file.\n *\n * @group Metadata tags\n * @public\n */\nexport class AttachedFile {\n    /** Creates a new {@link AttachedFile}. */\n    constructor(\n    /** The raw file data. */\n    data, \n    /** An RFC 6838 MIME type (e.g. image/jpeg, image/png, font/ttf, etc.) */\n    mimeType, \n    /** The name of the file. */\n    name, \n    /** A description of the file. */\n    description) {\n        this.data = data;\n        this.mimeType = mimeType;\n        this.name = name;\n        this.description = description;\n        if (!(data instanceof Uint8Array)) {\n            throw new TypeError('data must be a Uint8Array.');\n        }\n        if (mimeType !== undefined && typeof mimeType !== 'string') {\n            throw new TypeError('mimeType, when provided, must be a string.');\n        }\n        if (name !== undefined && typeof name !== 'string') {\n            throw new TypeError('name, when provided, must be a string.');\n        }\n        if (description !== undefined && typeof description !== 'string') {\n            throw new TypeError('description, when provided, must be a string.');\n        }\n    }\n}\n;\nexport const validateMetadataTags = (tags) => {\n    if (!tags || typeof tags !== 'object') {\n        throw new TypeError('tags must be an object.');\n    }\n    if (tags.title !== undefined && typeof tags.title !== 'string') {\n        throw new TypeError('tags.title, when provided, must be a string.');\n    }\n    if (tags.description !== undefined && typeof tags.description !== 'string') {\n        throw new TypeError('tags.description, when provided, must be a string.');\n    }\n    if (tags.artist !== undefined && typeof tags.artist !== 'string') {\n        throw new TypeError('tags.artist, when provided, must be a string.');\n    }\n    if (tags.album !== undefined && typeof tags.album !== 'string') {\n        throw new TypeError('tags.album, when provided, must be a string.');\n    }\n    if (tags.albumArtist !== undefined && typeof tags.albumArtist !== 'string') {\n        throw new TypeError('tags.albumArtist, when provided, must be a string.');\n    }\n    if (tags.trackNumber !== undefined && (!Number.isInteger(tags.trackNumber) || tags.trackNumber <= 0)) {\n        throw new TypeError('tags.trackNumber, when provided, must be a positive integer.');\n    }\n    if (tags.tracksTotal !== undefined\n        && (!Number.isInteger(tags.tracksTotal) || tags.tracksTotal <= 0)) {\n        throw new TypeError('tags.tracksTotal, when provided, must be a positive integer.');\n    }\n    if (tags.discNumber !== undefined && (!Number.isInteger(tags.discNumber) || tags.discNumber <= 0)) {\n        throw new TypeError('tags.discNumber, when provided, must be a positive integer.');\n    }\n    if (tags.discsTotal !== undefined\n        && (!Number.isInteger(tags.discsTotal) || tags.discsTotal <= 0)) {\n        throw new TypeError('tags.discsTotal, when provided, must be a positive integer.');\n    }\n    if (tags.genre !== undefined && typeof tags.genre !== 'string') {\n        throw new TypeError('tags.genre, when provided, must be a string.');\n    }\n    if (tags.date !== undefined && (!(tags.date instanceof Date) || Number.isNaN(tags.date.getTime()))) {\n        throw new TypeError('tags.date, when provided, must be a valid Date.');\n    }\n    if (tags.lyrics !== undefined && typeof tags.lyrics !== 'string') {\n        throw new TypeError('tags.lyrics, when provided, must be a string.');\n    }\n    if (tags.images !== undefined) {\n        if (!Array.isArray(tags.images)) {\n            throw new TypeError('tags.images, when provided, must be an array.');\n        }\n        for (const image of tags.images) {\n            if (!image || typeof image !== 'object') {\n                throw new TypeError('Each image in tags.images must be an object.');\n            }\n            if (!(image.data instanceof Uint8Array)) {\n                throw new TypeError('Each image.data must be a Uint8Array.');\n            }\n            if (typeof image.mimeType !== 'string') {\n                throw new TypeError('Each image.mimeType must be a string.');\n            }\n            if (!['coverFront', 'coverBack', 'unknown'].includes(image.kind)) {\n                throw new TypeError('Each image.kind must be \\'coverFront\\', \\'coverBack\\', or \\'unknown\\'.');\n            }\n        }\n    }\n    if (tags.comment !== undefined && typeof tags.comment !== 'string') {\n        throw new TypeError('tags.comment, when provided, must be a string.');\n    }\n    if (tags.raw !== undefined) {\n        if (!tags.raw || typeof tags.raw !== 'object') {\n            throw new TypeError('tags.raw, when provided, must be an object.');\n        }\n        for (const value of Object.values(tags.raw)) {\n            if (value !== null\n                && typeof value !== 'string'\n                && !(value instanceof Uint8Array)\n                && !(value instanceof RichImageData)\n                && !(value instanceof AttachedFile)) {\n                throw new TypeError('Each value in tags.raw must be a string, Uint8Array, RichImageData, AttachedFile, or null.');\n            }\n        }\n    }\n};\nexport const metadataTagsAreEmpty = (tags) => {\n    return tags.title === undefined\n        && tags.description === undefined\n        && tags.artist === undefined\n        && tags.album === undefined\n        && tags.albumArtist === undefined\n        && tags.trackNumber === undefined\n        && tags.tracksTotal === undefined\n        && tags.discNumber === undefined\n        && tags.discsTotal === undefined\n        && tags.genre === undefined\n        && tags.date === undefined\n        && tags.lyrics === undefined\n        && (!tags.images || tags.images.length === 0)\n        && tags.comment === undefined\n        && (tags.raw === undefined || Object.keys(tags.raw).length === 0);\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { Bitstream, COLOR_PRIMARIES_MAP, MATRIX_COEFFICIENTS_MAP, TRANSFER_CHARACTERISTICS_MAP, assert, bytesToHexString, isAllowSharedBufferSource, last, reverseBitsU32, toDataView, } from './misc.js';\n/**\n * List of known video codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nexport const VIDEO_CODECS = [\n    'avc',\n    'hevc',\n    'vp9',\n    'av1',\n    'vp8',\n];\n/**\n * List of known PCM (uncompressed) audio codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nexport const PCM_AUDIO_CODECS = [\n    'pcm-s16', // We don't prefix 'le' so we're compatible with the WebCodecs-registered PCM codec strings\n    'pcm-s16be',\n    'pcm-s24',\n    'pcm-s24be',\n    'pcm-s32',\n    'pcm-s32be',\n    'pcm-f32',\n    'pcm-f32be',\n    'pcm-f64',\n    'pcm-f64be',\n    'pcm-u8',\n    'pcm-s8',\n    'ulaw',\n    'alaw',\n];\n/**\n * List of known compressed audio codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nexport const NON_PCM_AUDIO_CODECS = [\n    'aac',\n    'opus',\n    'mp3',\n    'vorbis',\n    'flac',\n];\n/**\n * List of known audio codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nexport const AUDIO_CODECS = [\n    ...NON_PCM_AUDIO_CODECS,\n    ...PCM_AUDIO_CODECS,\n];\n/**\n * List of known subtitle codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nexport const SUBTITLE_CODECS = [\n    'webvtt',\n]; // TODO add the rest\n// https://en.wikipedia.org/wiki/Advanced_Video_Coding\nconst AVC_LEVEL_TABLE = [\n    { maxMacroblocks: 99, maxBitrate: 64000, level: 0x0A }, // Level 1\n    { maxMacroblocks: 396, maxBitrate: 192000, level: 0x0B }, // Level 1.1\n    { maxMacroblocks: 396, maxBitrate: 384000, level: 0x0C }, // Level 1.2\n    { maxMacroblocks: 396, maxBitrate: 768000, level: 0x0D }, // Level 1.3\n    { maxMacroblocks: 396, maxBitrate: 2000000, level: 0x14 }, // Level 2\n    { maxMacroblocks: 792, maxBitrate: 4000000, level: 0x15 }, // Level 2.1\n    { maxMacroblocks: 1620, maxBitrate: 4000000, level: 0x16 }, // Level 2.2\n    { maxMacroblocks: 1620, maxBitrate: 10000000, level: 0x1E }, // Level 3\n    { maxMacroblocks: 3600, maxBitrate: 14000000, level: 0x1F }, // Level 3.1\n    { maxMacroblocks: 5120, maxBitrate: 20000000, level: 0x20 }, // Level 3.2\n    { maxMacroblocks: 8192, maxBitrate: 20000000, level: 0x28 }, // Level 4\n    { maxMacroblocks: 8192, maxBitrate: 50000000, level: 0x29 }, // Level 4.1\n    { maxMacroblocks: 8704, maxBitrate: 50000000, level: 0x2A }, // Level 4.2\n    { maxMacroblocks: 22080, maxBitrate: 135000000, level: 0x32 }, // Level 5\n    { maxMacroblocks: 36864, maxBitrate: 240000000, level: 0x33 }, // Level 5.1\n    { maxMacroblocks: 36864, maxBitrate: 240000000, level: 0x34 }, // Level 5.2\n    { maxMacroblocks: 139264, maxBitrate: 240000000, level: 0x3C }, // Level 6\n    { maxMacroblocks: 139264, maxBitrate: 480000000, level: 0x3D }, // Level 6.1\n    { maxMacroblocks: 139264, maxBitrate: 800000000, level: 0x3E }, // Level 6.2\n];\n// https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding\nconst HEVC_LEVEL_TABLE = [\n    { maxPictureSize: 36864, maxBitrate: 128000, tier: 'L', level: 30 }, // Level 1 (Low Tier)\n    { maxPictureSize: 122880, maxBitrate: 1500000, tier: 'L', level: 60 }, // Level 2 (Low Tier)\n    { maxPictureSize: 245760, maxBitrate: 3000000, tier: 'L', level: 63 }, // Level 2.1 (Low Tier)\n    { maxPictureSize: 552960, maxBitrate: 6000000, tier: 'L', level: 90 }, // Level 3 (Low Tier)\n    { maxPictureSize: 983040, maxBitrate: 10000000, tier: 'L', level: 93 }, // Level 3.1 (Low Tier)\n    { maxPictureSize: 2228224, maxBitrate: 12000000, tier: 'L', level: 120 }, // Level 4 (Low Tier)\n    { maxPictureSize: 2228224, maxBitrate: 30000000, tier: 'H', level: 120 }, // Level 4 (High Tier)\n    { maxPictureSize: 2228224, maxBitrate: 20000000, tier: 'L', level: 123 }, // Level 4.1 (Low Tier)\n    { maxPictureSize: 2228224, maxBitrate: 50000000, tier: 'H', level: 123 }, // Level 4.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 25000000, tier: 'L', level: 150 }, // Level 5 (Low Tier)\n    { maxPictureSize: 8912896, maxBitrate: 100000000, tier: 'H', level: 150 }, // Level 5 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 40000000, tier: 'L', level: 153 }, // Level 5.1 (Low Tier)\n    { maxPictureSize: 8912896, maxBitrate: 160000000, tier: 'H', level: 153 }, // Level 5.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 60000000, tier: 'L', level: 156 }, // Level 5.2 (Low Tier)\n    { maxPictureSize: 8912896, maxBitrate: 240000000, tier: 'H', level: 156 }, // Level 5.2 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 60000000, tier: 'L', level: 180 }, // Level 6 (Low Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'H', level: 180 }, // Level 6 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 120000000, tier: 'L', level: 183 }, // Level 6.1 (Low Tier)\n    { maxPictureSize: 35651584, maxBitrate: 480000000, tier: 'H', level: 183 }, // Level 6.1 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'L', level: 186 }, // Level 6.2 (Low Tier)\n    { maxPictureSize: 35651584, maxBitrate: 800000000, tier: 'H', level: 186 }, // Level 6.2 (High Tier)\n];\n// https://en.wikipedia.org/wiki/VP9\nexport const VP9_LEVEL_TABLE = [\n    { maxPictureSize: 36864, maxBitrate: 200000, level: 10 }, // Level 1\n    { maxPictureSize: 73728, maxBitrate: 800000, level: 11 }, // Level 1.1\n    { maxPictureSize: 122880, maxBitrate: 1800000, level: 20 }, // Level 2\n    { maxPictureSize: 245760, maxBitrate: 3600000, level: 21 }, // Level 2.1\n    { maxPictureSize: 552960, maxBitrate: 7200000, level: 30 }, // Level 3\n    { maxPictureSize: 983040, maxBitrate: 12000000, level: 31 }, // Level 3.1\n    { maxPictureSize: 2228224, maxBitrate: 18000000, level: 40 }, // Level 4\n    { maxPictureSize: 2228224, maxBitrate: 30000000, level: 41 }, // Level 4.1\n    { maxPictureSize: 8912896, maxBitrate: 60000000, level: 50 }, // Level 5\n    { maxPictureSize: 8912896, maxBitrate: 120000000, level: 51 }, // Level 5.1\n    { maxPictureSize: 8912896, maxBitrate: 180000000, level: 52 }, // Level 5.2\n    { maxPictureSize: 35651584, maxBitrate: 180000000, level: 60 }, // Level 6\n    { maxPictureSize: 35651584, maxBitrate: 240000000, level: 61 }, // Level 6.1\n    { maxPictureSize: 35651584, maxBitrate: 480000000, level: 62 }, // Level 6.2\n];\n// https://en.wikipedia.org/wiki/AV1\nconst AV1_LEVEL_TABLE = [\n    { maxPictureSize: 147456, maxBitrate: 1500000, tier: 'M', level: 0 }, // Level 2.0 (Main Tier)\n    { maxPictureSize: 278784, maxBitrate: 3000000, tier: 'M', level: 1 }, // Level 2.1 (Main Tier)\n    { maxPictureSize: 665856, maxBitrate: 6000000, tier: 'M', level: 4 }, // Level 3.0 (Main Tier)\n    { maxPictureSize: 1065024, maxBitrate: 10000000, tier: 'M', level: 5 }, // Level 3.1 (Main Tier)\n    { maxPictureSize: 2359296, maxBitrate: 12000000, tier: 'M', level: 8 }, // Level 4.0 (Main Tier)\n    { maxPictureSize: 2359296, maxBitrate: 30000000, tier: 'H', level: 8 }, // Level 4.0 (High Tier)\n    { maxPictureSize: 2359296, maxBitrate: 20000000, tier: 'M', level: 9 }, // Level 4.1 (Main Tier)\n    { maxPictureSize: 2359296, maxBitrate: 50000000, tier: 'H', level: 9 }, // Level 4.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 30000000, tier: 'M', level: 12 }, // Level 5.0 (Main Tier)\n    { maxPictureSize: 8912896, maxBitrate: 100000000, tier: 'H', level: 12 }, // Level 5.0 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 40000000, tier: 'M', level: 13 }, // Level 5.1 (Main Tier)\n    { maxPictureSize: 8912896, maxBitrate: 160000000, tier: 'H', level: 13 }, // Level 5.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 60000000, tier: 'M', level: 14 }, // Level 5.2 (Main Tier)\n    { maxPictureSize: 8912896, maxBitrate: 240000000, tier: 'H', level: 14 }, // Level 5.2 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 60000000, tier: 'M', level: 15 }, // Level 5.3 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'H', level: 15 }, // Level 5.3 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 60000000, tier: 'M', level: 16 }, // Level 6.0 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'H', level: 16 }, // Level 6.0 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 100000000, tier: 'M', level: 17 }, // Level 6.1 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 480000000, tier: 'H', level: 17 }, // Level 6.1 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 160000000, tier: 'M', level: 18 }, // Level 6.2 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 800000000, tier: 'H', level: 18 }, // Level 6.2 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 160000000, tier: 'M', level: 19 }, // Level 6.3 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 800000000, tier: 'H', level: 19 }, // Level 6.3 (High Tier)\n];\nconst VP9_DEFAULT_SUFFIX = '.01.01.01.01.00';\nconst AV1_DEFAULT_SUFFIX = '.0.110.01.01.01.0';\nexport const buildVideoCodecString = (codec, width, height, bitrate) => {\n    if (codec === 'avc') {\n        const profileIndication = 0x64; // High Profile\n        const totalMacroblocks = Math.ceil(width / 16) * Math.ceil(height / 16);\n        // Determine the level based on the table\n        const levelInfo = AVC_LEVEL_TABLE.find(level => totalMacroblocks <= level.maxMacroblocks && bitrate <= level.maxBitrate) ?? last(AVC_LEVEL_TABLE);\n        const levelIndication = levelInfo ? levelInfo.level : 0;\n        const hexProfileIndication = profileIndication.toString(16).padStart(2, '0');\n        const hexProfileCompatibility = '00';\n        const hexLevelIndication = levelIndication.toString(16).padStart(2, '0');\n        return `avc1.${hexProfileIndication}${hexProfileCompatibility}${hexLevelIndication}`;\n    }\n    else if (codec === 'hevc') {\n        const profilePrefix = ''; // Profile space 0\n        const profileIdc = 1; // Main Profile\n        const compatibilityFlags = '6'; // Taken from the example in ISO 14496-15\n        const pictureSize = width * height;\n        const levelInfo = HEVC_LEVEL_TABLE.find(level => pictureSize <= level.maxPictureSize && bitrate <= level.maxBitrate) ?? last(HEVC_LEVEL_TABLE);\n        const constraintFlags = 'B0'; // Progressive source flag\n        return 'hev1.'\n            + `${profilePrefix}${profileIdc}.`\n            + `${compatibilityFlags}.`\n            + `${levelInfo.tier}${levelInfo.level}.`\n            + `${constraintFlags}`;\n    }\n    else if (codec === 'vp8') {\n        return 'vp8'; // Easy, this one\n    }\n    else if (codec === 'vp9') {\n        const profile = '00'; // Profile 0\n        const pictureSize = width * height;\n        const levelInfo = VP9_LEVEL_TABLE.find(level => pictureSize <= level.maxPictureSize && bitrate <= level.maxBitrate) ?? last(VP9_LEVEL_TABLE);\n        const bitDepth = '08'; // 8-bit\n        return `vp09.${profile}.${levelInfo.level.toString().padStart(2, '0')}.${bitDepth}`;\n    }\n    else if (codec === 'av1') {\n        const profile = 0; // Main Profile, single digit\n        const pictureSize = width * height;\n        const levelInfo = AV1_LEVEL_TABLE.find(level => pictureSize <= level.maxPictureSize && bitrate <= level.maxBitrate) ?? last(AV1_LEVEL_TABLE);\n        const level = levelInfo.level.toString().padStart(2, '0');\n        const bitDepth = '08'; // 8-bit\n        return `av01.${profile}.${level}${levelInfo.tier}.${bitDepth}`;\n    }\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nexport const generateVp9CodecConfigurationFromCodecString = (codecString) => {\n    // Reference: https://www.webmproject.org/docs/container/#vp9-codec-feature-metadata-codecprivate\n    const parts = codecString.split('.'); // We can derive the required values from the codec string\n    const profile = Number(parts[1]);\n    const level = Number(parts[2]);\n    const bitDepth = Number(parts[3]);\n    const chromaSubsampling = parts[4] ? Number(parts[4]) : 1;\n    return [\n        1, 1, profile,\n        2, 1, level,\n        3, 1, bitDepth,\n        4, 1, chromaSubsampling,\n    ];\n};\nexport const generateAv1CodecConfigurationFromCodecString = (codecString) => {\n    // Reference: https://aomediacodec.github.io/av1-isobmff/\n    const parts = codecString.split('.'); // We can derive the required values from the codec string\n    const marker = 1;\n    const version = 1;\n    const firstByte = (marker << 7) + version;\n    const profile = Number(parts[1]);\n    const levelAndTier = parts[2];\n    const level = Number(levelAndTier.slice(0, -1));\n    const secondByte = (profile << 5) + level;\n    const tier = levelAndTier.slice(-1) === 'H' ? 1 : 0;\n    const bitDepth = Number(parts[3]);\n    const highBitDepth = bitDepth === 8 ? 0 : 1;\n    const twelveBit = 0;\n    const monochrome = parts[4] ? Number(parts[4]) : 0;\n    const chromaSubsamplingX = parts[5] ? Number(parts[5][0]) : 1;\n    const chromaSubsamplingY = parts[5] ? Number(parts[5][1]) : 1;\n    const chromaSamplePosition = parts[5] ? Number(parts[5][2]) : 0; // CSP_UNKNOWN\n    const thirdByte = (tier << 7)\n        + (highBitDepth << 6)\n        + (twelveBit << 5)\n        + (monochrome << 4)\n        + (chromaSubsamplingX << 3)\n        + (chromaSubsamplingY << 2)\n        + chromaSamplePosition;\n    const initialPresentationDelayPresent = 0; // Should be fine\n    const fourthByte = initialPresentationDelayPresent;\n    return [firstByte, secondByte, thirdByte, fourthByte];\n};\nexport const extractVideoCodecString = (trackInfo) => {\n    const { codec, codecDescription, colorSpace, avcCodecInfo, hevcCodecInfo, vp9CodecInfo, av1CodecInfo } = trackInfo;\n    if (codec === 'avc') {\n        if (avcCodecInfo) {\n            const bytes = new Uint8Array([\n                avcCodecInfo.avcProfileIndication,\n                avcCodecInfo.profileCompatibility,\n                avcCodecInfo.avcLevelIndication,\n            ]);\n            return `avc1.${bytesToHexString(bytes)}`;\n        }\n        if (!codecDescription || codecDescription.byteLength < 4) {\n            throw new TypeError('AVC decoder description is not provided or is not at least 4 bytes long.');\n        }\n        return `avc1.${bytesToHexString(codecDescription.subarray(1, 4))}`;\n    }\n    else if (codec === 'hevc') {\n        let generalProfileSpace;\n        let generalProfileIdc;\n        let compatibilityFlags;\n        let generalTierFlag;\n        let generalLevelIdc;\n        let constraintFlags;\n        if (hevcCodecInfo) {\n            generalProfileSpace = hevcCodecInfo.generalProfileSpace;\n            generalProfileIdc = hevcCodecInfo.generalProfileIdc;\n            compatibilityFlags = reverseBitsU32(hevcCodecInfo.generalProfileCompatibilityFlags);\n            generalTierFlag = hevcCodecInfo.generalTierFlag;\n            generalLevelIdc = hevcCodecInfo.generalLevelIdc;\n            constraintFlags = [...hevcCodecInfo.generalConstraintIndicatorFlags];\n        }\n        else {\n            if (!codecDescription || codecDescription.byteLength < 23) {\n                throw new TypeError('HEVC decoder description is not provided or is not at least 23 bytes long.');\n            }\n            const view = toDataView(codecDescription);\n            const profileByte = view.getUint8(1);\n            generalProfileSpace = (profileByte >> 6) & 0x03;\n            generalProfileIdc = profileByte & 0x1F;\n            compatibilityFlags = reverseBitsU32(view.getUint32(2));\n            generalTierFlag = (profileByte >> 5) & 0x01;\n            generalLevelIdc = view.getUint8(12);\n            constraintFlags = [];\n            for (let i = 0; i < 6; i++) {\n                constraintFlags.push(view.getUint8(6 + i));\n            }\n        }\n        let codecString = 'hev1.';\n        codecString += ['', 'A', 'B', 'C'][generalProfileSpace] + generalProfileIdc;\n        codecString += '.';\n        codecString += compatibilityFlags.toString(16).toUpperCase();\n        codecString += '.';\n        codecString += generalTierFlag === 0 ? 'L' : 'H';\n        codecString += generalLevelIdc;\n        while (constraintFlags.length > 0 && constraintFlags[constraintFlags.length - 1] === 0) {\n            constraintFlags.pop();\n        }\n        if (constraintFlags.length > 0) {\n            codecString += '.';\n            codecString += constraintFlags.map(x => x.toString(16).toUpperCase()).join('.');\n        }\n        return codecString;\n    }\n    else if (codec === 'vp8') {\n        return 'vp8'; // Easy, this one\n    }\n    else if (codec === 'vp9') {\n        if (!vp9CodecInfo) {\n            // Calculate level based on dimensions\n            const pictureSize = trackInfo.width * trackInfo.height;\n            let level = last(VP9_LEVEL_TABLE).level; // Default to highest level\n            for (const entry of VP9_LEVEL_TABLE) {\n                if (pictureSize <= entry.maxPictureSize) {\n                    level = entry.level;\n                    break;\n                }\n            }\n            // We don't really know better, so let's return a general-purpose, common codec string and hope for the best\n            return `vp09.00.${level.toString().padStart(2, '0')}.08`;\n        }\n        const profile = vp9CodecInfo.profile.toString().padStart(2, '0');\n        const level = vp9CodecInfo.level.toString().padStart(2, '0');\n        const bitDepth = vp9CodecInfo.bitDepth.toString().padStart(2, '0');\n        const chromaSubsampling = vp9CodecInfo.chromaSubsampling.toString().padStart(2, '0');\n        const colourPrimaries = vp9CodecInfo.colourPrimaries.toString().padStart(2, '0');\n        const transferCharacteristics = vp9CodecInfo.transferCharacteristics.toString().padStart(2, '0');\n        const matrixCoefficients = vp9CodecInfo.matrixCoefficients.toString().padStart(2, '0');\n        const videoFullRangeFlag = vp9CodecInfo.videoFullRangeFlag.toString().padStart(2, '0');\n        let string = `vp09.${profile}.${level}.${bitDepth}.${chromaSubsampling}`;\n        string += `.${colourPrimaries}.${transferCharacteristics}.${matrixCoefficients}.${videoFullRangeFlag}`;\n        if (string.endsWith(VP9_DEFAULT_SUFFIX)) {\n            string = string.slice(0, -VP9_DEFAULT_SUFFIX.length);\n        }\n        return string;\n    }\n    else if (codec === 'av1') {\n        if (!av1CodecInfo) {\n            // Calculate level based on dimensions\n            const pictureSize = trackInfo.width * trackInfo.height;\n            let level = last(VP9_LEVEL_TABLE).level; // Default to highest level\n            for (const entry of VP9_LEVEL_TABLE) {\n                if (pictureSize <= entry.maxPictureSize) {\n                    level = entry.level;\n                    break;\n                }\n            }\n            // We don't really know better, so let's return a general-purpose, common codec string and hope for the best\n            return `av01.0.${level.toString().padStart(2, '0')}M.08`;\n        }\n        // https://aomediacodec.github.io/av1-isobmff/#codecsparam\n        const profile = av1CodecInfo.profile; // Single digit\n        const level = av1CodecInfo.level.toString().padStart(2, '0');\n        const tier = av1CodecInfo.tier ? 'H' : 'M';\n        const bitDepth = av1CodecInfo.bitDepth.toString().padStart(2, '0');\n        const monochrome = av1CodecInfo.monochrome ? '1' : '0';\n        const chromaSubsampling = 100 * av1CodecInfo.chromaSubsamplingX\n            + 10 * av1CodecInfo.chromaSubsamplingY\n            + 1 * (av1CodecInfo.chromaSubsamplingX && av1CodecInfo.chromaSubsamplingY\n                ? av1CodecInfo.chromaSamplePosition\n                : 0);\n        // The defaults are 1 (ITU-R BT.709)\n        const colorPrimaries = colorSpace?.primaries ? COLOR_PRIMARIES_MAP[colorSpace.primaries] : 1;\n        const transferCharacteristics = colorSpace?.transfer ? TRANSFER_CHARACTERISTICS_MAP[colorSpace.transfer] : 1;\n        const matrixCoefficients = colorSpace?.matrix ? MATRIX_COEFFICIENTS_MAP[colorSpace.matrix] : 1;\n        const videoFullRangeFlag = colorSpace?.fullRange ? 1 : 0;\n        let string = `av01.${profile}.${level}${tier}.${bitDepth}`;\n        string += `.${monochrome}.${chromaSubsampling.toString().padStart(3, '0')}`;\n        string += `.${colorPrimaries.toString().padStart(2, '0')}`;\n        string += `.${transferCharacteristics.toString().padStart(2, '0')}`;\n        string += `.${matrixCoefficients.toString().padStart(2, '0')}`;\n        string += `.${videoFullRangeFlag}`;\n        if (string.endsWith(AV1_DEFAULT_SUFFIX)) {\n            string = string.slice(0, -AV1_DEFAULT_SUFFIX.length);\n        }\n        return string;\n    }\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nexport const buildAudioCodecString = (codec, numberOfChannels, sampleRate) => {\n    if (codec === 'aac') {\n        // If stereo or higher channels and lower sample rate, likely using HE-AAC v2 with PS\n        if (numberOfChannels >= 2 && sampleRate <= 24000) {\n            return 'mp4a.40.29'; // HE-AAC v2 (AAC LC + SBR + PS)\n        }\n        // If sample rate is low, likely using HE-AAC v1 with SBR\n        if (sampleRate <= 24000) {\n            return 'mp4a.40.5'; // HE-AAC v1 (AAC LC + SBR)\n        }\n        // Default to standard AAC-LC for higher sample rates\n        return 'mp4a.40.2'; // AAC-LC\n    }\n    else if (codec === 'mp3') {\n        return 'mp3';\n    }\n    else if (codec === 'opus') {\n        return 'opus';\n    }\n    else if (codec === 'vorbis') {\n        return 'vorbis';\n    }\n    else if (codec === 'flac') {\n        return 'flac';\n    }\n    else if (PCM_AUDIO_CODECS.includes(codec)) {\n        return codec;\n    }\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nexport const extractAudioCodecString = (trackInfo) => {\n    const { codec, codecDescription, aacCodecInfo } = trackInfo;\n    if (codec === 'aac') {\n        if (!aacCodecInfo) {\n            throw new TypeError('AAC codec info must be provided.');\n        }\n        if (aacCodecInfo.isMpeg2) {\n            return 'mp4a.67';\n        }\n        else {\n            const audioSpecificConfig = parseAacAudioSpecificConfig(codecDescription);\n            return `mp4a.40.${audioSpecificConfig.objectType}`;\n        }\n    }\n    else if (codec === 'mp3') {\n        return 'mp3';\n    }\n    else if (codec === 'opus') {\n        return 'opus';\n    }\n    else if (codec === 'vorbis') {\n        return 'vorbis';\n    }\n    else if (codec === 'flac') {\n        return 'flac';\n    }\n    else if (codec && PCM_AUDIO_CODECS.includes(codec)) {\n        return codec;\n    }\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nexport const aacFrequencyTable = [\n    96000, 88200, 64000, 48000, 44100, 32000,\n    24000, 22050, 16000, 12000, 11025, 8000, 7350,\n];\nexport const aacChannelMap = [-1, 1, 2, 3, 4, 5, 6, 8];\nexport const parseAacAudioSpecificConfig = (bytes) => {\n    if (!bytes || bytes.byteLength < 2) {\n        throw new TypeError('AAC description must be at least 2 bytes long.');\n    }\n    const bitstream = new Bitstream(bytes);\n    let objectType = bitstream.readBits(5);\n    if (objectType === 31) {\n        objectType = 32 + bitstream.readBits(6);\n    }\n    const frequencyIndex = bitstream.readBits(4);\n    let sampleRate = null;\n    if (frequencyIndex === 15) {\n        sampleRate = bitstream.readBits(24);\n    }\n    else {\n        if (frequencyIndex < aacFrequencyTable.length) {\n            sampleRate = aacFrequencyTable[frequencyIndex];\n        }\n    }\n    const channelConfiguration = bitstream.readBits(4);\n    let numberOfChannels = null;\n    if (channelConfiguration >= 1 && channelConfiguration <= 7) {\n        numberOfChannels = aacChannelMap[channelConfiguration];\n    }\n    return {\n        objectType,\n        frequencyIndex,\n        sampleRate,\n        channelConfiguration,\n        numberOfChannels,\n    };\n};\nexport const OPUS_SAMPLE_RATE = 48_000;\nconst PCM_CODEC_REGEX = /^pcm-([usf])(\\d+)+(be)?$/;\nexport const parsePcmCodec = (codec) => {\n    assert(PCM_AUDIO_CODECS.includes(codec));\n    if (codec === 'ulaw') {\n        return { dataType: 'ulaw', sampleSize: 1, littleEndian: true, silentValue: 255 };\n    }\n    else if (codec === 'alaw') {\n        return { dataType: 'alaw', sampleSize: 1, littleEndian: true, silentValue: 213 };\n    }\n    const match = PCM_CODEC_REGEX.exec(codec);\n    assert(match);\n    let dataType;\n    if (match[1] === 'u') {\n        dataType = 'unsigned';\n    }\n    else if (match[1] === 's') {\n        dataType = 'signed';\n    }\n    else {\n        dataType = 'float';\n    }\n    const sampleSize = (Number(match[2]) / 8);\n    const littleEndian = match[3] !== 'be';\n    const silentValue = codec === 'pcm-u8' ? 2 ** 7 : 0;\n    return { dataType, sampleSize, littleEndian, silentValue };\n};\nexport const inferCodecFromCodecString = (codecString) => {\n    // Video codecs\n    if (codecString.startsWith('avc1') || codecString.startsWith('avc3')) {\n        return 'avc';\n    }\n    else if (codecString.startsWith('hev1') || codecString.startsWith('hvc1')) {\n        return 'hevc';\n    }\n    else if (codecString === 'vp8') {\n        return 'vp8';\n    }\n    else if (codecString.startsWith('vp09')) {\n        return 'vp9';\n    }\n    else if (codecString.startsWith('av01')) {\n        return 'av1';\n    }\n    // Audio codecs\n    if (codecString.startsWith('mp4a.40') || codecString === 'mp4a.67') {\n        return 'aac';\n    }\n    else if (codecString === 'mp3'\n        || codecString === 'mp4a.69'\n        || codecString === 'mp4a.6B'\n        || codecString === 'mp4a.6b') {\n        return 'mp3';\n    }\n    else if (codecString === 'opus') {\n        return 'opus';\n    }\n    else if (codecString === 'vorbis') {\n        return 'vorbis';\n    }\n    else if (codecString === 'flac') {\n        return 'flac';\n    }\n    else if (codecString === 'ulaw') {\n        return 'ulaw';\n    }\n    else if (codecString === 'alaw') {\n        return 'alaw';\n    }\n    else if (PCM_CODEC_REGEX.test(codecString)) {\n        return codecString;\n    }\n    // Subtitle codecs\n    if (codecString === 'webvtt') {\n        return 'webvtt';\n    }\n    return null;\n};\nexport const getVideoEncoderConfigExtension = (codec) => {\n    if (codec === 'avc') {\n        return {\n            avc: {\n                format: 'avc', // Ensure the format is not Annex B\n            },\n        };\n    }\n    else if (codec === 'hevc') {\n        return {\n            hevc: {\n                format: 'hevc', // Ensure the format is not Annex B\n            },\n        };\n    }\n    return {};\n};\nexport const getAudioEncoderConfigExtension = (codec) => {\n    if (codec === 'aac') {\n        return {\n            aac: {\n                format: 'aac', // Ensure the format is not ADTS\n            },\n        };\n    }\n    else if (codec === 'opus') {\n        return {\n            opus: {\n                format: 'opus',\n            },\n        };\n    }\n    return {};\n};\nconst VALID_VIDEO_CODEC_STRING_PREFIXES = ['avc1', 'avc3', 'hev1', 'hvc1', 'vp8', 'vp09', 'av01'];\nconst AVC_CODEC_STRING_REGEX = /^(avc1|avc3)\\.[0-9a-fA-F]{6}$/;\nconst HEVC_CODEC_STRING_REGEX = /^(hev1|hvc1)\\.(?:[ABC]?\\d+)\\.[0-9a-fA-F]{1,8}\\.[LH]\\d+(?:\\.[0-9a-fA-F]{1,2}){0,6}$/;\nconst VP9_CODEC_STRING_REGEX = /^vp09(?:\\.\\d{2}){3}(?:(?:\\.\\d{2}){5})?$/;\nconst AV1_CODEC_STRING_REGEX = /^av01\\.\\d\\.\\d{2}[MH]\\.\\d{2}(?:\\.\\d\\.\\d{3}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d)?$/;\nexport const validateVideoChunkMetadata = (metadata) => {\n    if (!metadata) {\n        throw new TypeError('Video chunk metadata must be provided.');\n    }\n    if (typeof metadata !== 'object') {\n        throw new TypeError('Video chunk metadata must be an object.');\n    }\n    if (!metadata.decoderConfig) {\n        throw new TypeError('Video chunk metadata must include a decoder configuration.');\n    }\n    if (typeof metadata.decoderConfig !== 'object') {\n        throw new TypeError('Video chunk metadata decoder configuration must be an object.');\n    }\n    if (typeof metadata.decoderConfig.codec !== 'string') {\n        throw new TypeError('Video chunk metadata decoder configuration must specify a codec string.');\n    }\n    if (!VALID_VIDEO_CODEC_STRING_PREFIXES.some(prefix => metadata.decoderConfig.codec.startsWith(prefix))) {\n        throw new TypeError('Video chunk metadata decoder configuration codec string must be a valid video codec string as specified in'\n            + ' the WebCodecs Codec Registry.');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.codedWidth) || metadata.decoderConfig.codedWidth <= 0) {\n        throw new TypeError('Video chunk metadata decoder configuration must specify a valid codedWidth (positive integer).');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.codedHeight) || metadata.decoderConfig.codedHeight <= 0) {\n        throw new TypeError('Video chunk metadata decoder configuration must specify a valid codedHeight (positive integer).');\n    }\n    if (metadata.decoderConfig.description !== undefined) {\n        if (!isAllowSharedBufferSource(metadata.decoderConfig.description)) {\n            throw new TypeError('Video chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an'\n                + ' ArrayBuffer view.');\n        }\n    }\n    if (metadata.decoderConfig.colorSpace !== undefined) {\n        const { colorSpace } = metadata.decoderConfig;\n        if (typeof colorSpace !== 'object') {\n            throw new TypeError('Video chunk metadata decoder configuration colorSpace, when provided, must be an object.');\n        }\n        const primariesValues = Object.keys(COLOR_PRIMARIES_MAP);\n        if (colorSpace.primaries != null && !primariesValues.includes(colorSpace.primaries)) {\n            throw new TypeError(`Video chunk metadata decoder configuration colorSpace primaries, when defined, must be one of`\n                + ` ${primariesValues.join(', ')}.`);\n        }\n        const transferValues = Object.keys(TRANSFER_CHARACTERISTICS_MAP);\n        if (colorSpace.transfer != null && !transferValues.includes(colorSpace.transfer)) {\n            throw new TypeError(`Video chunk metadata decoder configuration colorSpace transfer, when defined, must be one of`\n                + ` ${transferValues.join(', ')}.`);\n        }\n        const matrixValues = Object.keys(MATRIX_COEFFICIENTS_MAP);\n        if (colorSpace.matrix != null && !matrixValues.includes(colorSpace.matrix)) {\n            throw new TypeError(`Video chunk metadata decoder configuration colorSpace matrix, when defined, must be one of`\n                + ` ${matrixValues.join(', ')}.`);\n        }\n        if (colorSpace.fullRange != null && typeof colorSpace.fullRange !== 'boolean') {\n            throw new TypeError('Video chunk metadata decoder configuration colorSpace fullRange, when defined, must be a boolean.');\n        }\n    }\n    if (metadata.decoderConfig.codec.startsWith('avc1') || metadata.decoderConfig.codec.startsWith('avc3')) {\n        // AVC-specific validation\n        if (!AVC_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for AVC must be a valid AVC codec string as'\n                + ' specified in Section 3.4 of RFC 6381.');\n        }\n        // `description` may or may not be set, depending on if the format is AVCC or Annex B, so don't perform any\n        // validation for it.\n        // https://www.w3.org/TR/webcodecs-avc-codec-registration\n    }\n    else if (metadata.decoderConfig.codec.startsWith('hev1') || metadata.decoderConfig.codec.startsWith('hvc1')) {\n        // HEVC-specific validation\n        if (!HEVC_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for HEVC must be a valid HEVC codec string as'\n                + ' specified in Section E.3 of ISO 14496-15.');\n        }\n        // `description` may or may not be set, depending on if the format is HEVC or Annex B, so don't perform any\n        // validation for it.\n        // https://www.w3.org/TR/webcodecs-hevc-codec-registration\n    }\n    else if (metadata.decoderConfig.codec.startsWith('vp8')) {\n        // VP8-specific validation\n        if (metadata.decoderConfig.codec !== 'vp8') {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for VP8 must be \"vp8\".');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('vp09')) {\n        // VP9-specific validation\n        if (!VP9_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for VP9 must be a valid VP9 codec string as'\n                + ' specified in Section \"Codecs Parameter String\" of https://www.webmproject.org/vp9/mp4/.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('av01')) {\n        // AV1-specific validation\n        if (!AV1_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for AV1 must be a valid AV1 codec string as'\n                + ' specified in Section \"Codecs Parameter String\" of https://aomediacodec.github.io/av1-isobmff/.');\n        }\n    }\n};\nconst VALID_AUDIO_CODEC_STRING_PREFIXES = ['mp4a', 'mp3', 'opus', 'vorbis', 'flac', 'ulaw', 'alaw', 'pcm'];\nexport const validateAudioChunkMetadata = (metadata) => {\n    if (!metadata) {\n        throw new TypeError('Audio chunk metadata must be provided.');\n    }\n    if (typeof metadata !== 'object') {\n        throw new TypeError('Audio chunk metadata must be an object.');\n    }\n    if (!metadata.decoderConfig) {\n        throw new TypeError('Audio chunk metadata must include a decoder configuration.');\n    }\n    if (typeof metadata.decoderConfig !== 'object') {\n        throw new TypeError('Audio chunk metadata decoder configuration must be an object.');\n    }\n    if (typeof metadata.decoderConfig.codec !== 'string') {\n        throw new TypeError('Audio chunk metadata decoder configuration must specify a codec string.');\n    }\n    if (!VALID_AUDIO_CODEC_STRING_PREFIXES.some(prefix => metadata.decoderConfig.codec.startsWith(prefix))) {\n        throw new TypeError('Audio chunk metadata decoder configuration codec string must be a valid audio codec string as specified in'\n            + ' the WebCodecs Codec Registry.');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.sampleRate) || metadata.decoderConfig.sampleRate <= 0) {\n        throw new TypeError('Audio chunk metadata decoder configuration must specify a valid sampleRate (positive integer).');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.numberOfChannels) || metadata.decoderConfig.numberOfChannels <= 0) {\n        throw new TypeError('Audio chunk metadata decoder configuration must specify a valid numberOfChannels (positive integer).');\n    }\n    if (metadata.decoderConfig.description !== undefined) {\n        if (!isAllowSharedBufferSource(metadata.decoderConfig.description)) {\n            throw new TypeError('Audio chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an'\n                + ' ArrayBuffer view.');\n        }\n    }\n    if (metadata.decoderConfig.codec.startsWith('mp4a')\n        // These three refer to MP3:\n        && metadata.decoderConfig.codec !== 'mp4a.69'\n        && metadata.decoderConfig.codec !== 'mp4a.6B'\n        && metadata.decoderConfig.codec !== 'mp4a.6b') {\n        // AAC-specific validation\n        const validStrings = ['mp4a.40.2', 'mp4a.40.02', 'mp4a.40.5', 'mp4a.40.05', 'mp4a.40.29', 'mp4a.67'];\n        if (!validStrings.includes(metadata.decoderConfig.codec)) {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for AAC must be a valid AAC codec string as'\n                + ' specified in https://www.w3.org/TR/webcodecs-aac-codec-registration/.');\n        }\n        if (!metadata.decoderConfig.description) {\n            throw new TypeError('Audio chunk metadata decoder configuration for AAC must include a description, which is expected to be'\n                + ' an AudioSpecificConfig as specified in ISO 14496-3.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('mp3') || metadata.decoderConfig.codec.startsWith('mp4a')) {\n        // MP3-specific validation\n        if (metadata.decoderConfig.codec !== 'mp3'\n            && metadata.decoderConfig.codec !== 'mp4a.69'\n            && metadata.decoderConfig.codec !== 'mp4a.6B'\n            && metadata.decoderConfig.codec !== 'mp4a.6b') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for MP3 must be \"mp3\", \"mp4a.69\" or'\n                + ' \"mp4a.6B\".');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('opus')) {\n        // Opus-specific validation\n        if (metadata.decoderConfig.codec !== 'opus') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for Opus must be \"opus\".');\n        }\n        if (metadata.decoderConfig.description && metadata.decoderConfig.description.byteLength < 18) {\n            // Description is optional for Opus per-spec, so we shouldn't enforce it\n            throw new TypeError('Audio chunk metadata decoder configuration description, when specified, is expected to be an'\n                + ' Identification Header as specified in Section 5.1 of RFC 7845.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('vorbis')) {\n        // Vorbis-specific validation\n        if (metadata.decoderConfig.codec !== 'vorbis') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for Vorbis must be \"vorbis\".');\n        }\n        if (!metadata.decoderConfig.description) {\n            throw new TypeError('Audio chunk metadata decoder configuration for Vorbis must include a description, which is expected to'\n                + ' adhere to the format described in https://www.w3.org/TR/webcodecs-vorbis-codec-registration/.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('flac')) {\n        // FLAC-specific validation\n        if (metadata.decoderConfig.codec !== 'flac') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for FLAC must be \"flac\".');\n        }\n        const minDescriptionSize = 4 + 4 + 34; // 'fLaC' + metadata block header + STREAMINFO block\n        if (!metadata.decoderConfig.description || metadata.decoderConfig.description.byteLength < minDescriptionSize) {\n            throw new TypeError('Audio chunk metadata decoder configuration for FLAC must include a description, which is expected to'\n                + ' adhere to the format described in https://www.w3.org/TR/webcodecs-flac-codec-registration/.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('pcm')\n        || metadata.decoderConfig.codec.startsWith('ulaw')\n        || metadata.decoderConfig.codec.startsWith('alaw')) {\n        // PCM-specific validation\n        if (!PCM_AUDIO_CODECS.includes(metadata.decoderConfig.codec)) {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for PCM must be one of the supported PCM'\n                + ` codecs (${PCM_AUDIO_CODECS.join(', ')}).`);\n        }\n    }\n};\nexport const validateSubtitleMetadata = (metadata) => {\n    if (!metadata) {\n        throw new TypeError('Subtitle metadata must be provided.');\n    }\n    if (typeof metadata !== 'object') {\n        throw new TypeError('Subtitle metadata must be an object.');\n    }\n    if (!metadata.config) {\n        throw new TypeError('Subtitle metadata must include a config object.');\n    }\n    if (typeof metadata.config !== 'object') {\n        throw new TypeError('Subtitle metadata config must be an object.');\n    }\n    if (typeof metadata.config.description !== 'string') {\n        throw new TypeError('Subtitle metadata config description must be a string.');\n    }\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { AsyncMutex } from './misc.js';\nexport class Muxer {\n    constructor(output) {\n        this.mutex = new AsyncMutex();\n        /**\n         * This field is used to synchronize multiple MediaStreamTracks. They use the same time coordinate system across\n         * tracks, and to ensure correct audio-video sync, we must use the same offset for all of them. The reason an offset\n         * is needed at all is because the timestamps typically don't start at zero.\n         */\n        this.firstMediaStreamTimestamp = null;\n        this.trackTimestampInfo = new WeakMap();\n        this.output = output;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onTrackClose(track) { }\n    validateAndNormalizeTimestamp(track, timestampInSeconds, isKeyFrame) {\n        timestampInSeconds += track.source._timestampOffset;\n        let timestampInfo = this.trackTimestampInfo.get(track);\n        if (!timestampInfo) {\n            if (!isKeyFrame) {\n                throw new Error('First frame must be a key frame.');\n            }\n            timestampInfo = {\n                maxTimestamp: timestampInSeconds,\n                maxTimestampBeforeLastKeyFrame: timestampInSeconds,\n            };\n            this.trackTimestampInfo.set(track, timestampInfo);\n        }\n        if (timestampInSeconds < 0) {\n            throw new Error(`Timestamps must be non-negative (got ${timestampInSeconds}s).`);\n        }\n        if (isKeyFrame) {\n            timestampInfo.maxTimestampBeforeLastKeyFrame = timestampInfo.maxTimestamp;\n        }\n        if (timestampInSeconds < timestampInfo.maxTimestampBeforeLastKeyFrame) {\n            throw new Error(`Timestamps cannot be smaller than the highest timestamp of the previous GOP (a GOP begins with a key`\n                + ` frame and ends right before the next key frame). Got ${timestampInSeconds}s, but highest timestamp`\n                + ` is ${timestampInfo.maxTimestampBeforeLastKeyFrame}s.`);\n        }\n        timestampInfo.maxTimestamp = Math.max(timestampInfo.maxTimestamp, timestampInSeconds);\n        return timestampInSeconds;\n    }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { VP9_LEVEL_TABLE } from './codec.js';\nimport { assert, assertNever, base64ToBytes, Bitstream, bytesToBase64, keyValueIterator, getUint24, last, readExpGolomb, readSignedExpGolomb, textDecoder, textEncoder, toDataView, toUint8Array, } from './misc.js';\n// References for AVC/HEVC code:\n// ISO 14496-15\n// Rec. ITU-T H.264\n// Rec. ITU-T H.265\n// https://stackoverflow.com/questions/24884827\nexport var AvcNalUnitType;\n(function (AvcNalUnitType) {\n    AvcNalUnitType[AvcNalUnitType[\"IDR\"] = 5] = \"IDR\";\n    AvcNalUnitType[AvcNalUnitType[\"SPS\"] = 7] = \"SPS\";\n    AvcNalUnitType[AvcNalUnitType[\"PPS\"] = 8] = \"PPS\";\n    AvcNalUnitType[AvcNalUnitType[\"SPS_EXT\"] = 13] = \"SPS_EXT\";\n})(AvcNalUnitType || (AvcNalUnitType = {}));\nexport var HevcNalUnitType;\n(function (HevcNalUnitType) {\n    HevcNalUnitType[HevcNalUnitType[\"RASL_N\"] = 8] = \"RASL_N\";\n    HevcNalUnitType[HevcNalUnitType[\"RASL_R\"] = 9] = \"RASL_R\";\n    HevcNalUnitType[HevcNalUnitType[\"BLA_W_LP\"] = 16] = \"BLA_W_LP\";\n    HevcNalUnitType[HevcNalUnitType[\"RSV_IRAP_VCL23\"] = 23] = \"RSV_IRAP_VCL23\";\n    HevcNalUnitType[HevcNalUnitType[\"VPS_NUT\"] = 32] = \"VPS_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"SPS_NUT\"] = 33] = \"SPS_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"PPS_NUT\"] = 34] = \"PPS_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"PREFIX_SEI_NUT\"] = 39] = \"PREFIX_SEI_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"SUFFIX_SEI_NUT\"] = 40] = \"SUFFIX_SEI_NUT\";\n})(HevcNalUnitType || (HevcNalUnitType = {}));\n/** Finds all NAL units in an AVC packet in Annex B format. */\nexport const findNalUnitsInAnnexB = (packetData) => {\n    const nalUnits = [];\n    let i = 0;\n    while (i < packetData.length) {\n        let startCodePos = -1;\n        let startCodeLength = 0;\n        for (let j = i; j < packetData.length - 3; j++) {\n            // Check for 3-byte start code (0x000001)\n            if (packetData[j] === 0 && packetData[j + 1] === 0 && packetData[j + 2] === 1) {\n                startCodePos = j;\n                startCodeLength = 3;\n                break;\n            }\n            // Check for 4-byte start code (0x00000001)\n            if (j < packetData.length - 4\n                && packetData[j] === 0\n                && packetData[j + 1] === 0\n                && packetData[j + 2] === 0\n                && packetData[j + 3] === 1) {\n                startCodePos = j;\n                startCodeLength = 4;\n                break;\n            }\n        }\n        if (startCodePos === -1) {\n            break; // No more start codes found\n        }\n        // If this isn't the first start code, extract the previous NAL unit\n        if (i > 0 && startCodePos > i) {\n            const nalData = packetData.subarray(i, startCodePos);\n            if (nalData.length > 0) {\n                nalUnits.push(nalData);\n            }\n        }\n        i = startCodePos + startCodeLength;\n    }\n    // Extract the last NAL unit if there is one\n    if (i < packetData.length) {\n        const nalData = packetData.subarray(i);\n        if (nalData.length > 0) {\n            nalUnits.push(nalData);\n        }\n    }\n    return nalUnits;\n};\n/** Finds all NAL units in an AVC packet in length-prefixed format. */\nconst findNalUnitsInLengthPrefixed = (packetData, lengthSize) => {\n    const nalUnits = [];\n    let offset = 0;\n    const dataView = new DataView(packetData.buffer, packetData.byteOffset, packetData.byteLength);\n    while (offset + lengthSize <= packetData.length) {\n        let nalUnitLength;\n        if (lengthSize === 1) {\n            nalUnitLength = dataView.getUint8(offset);\n        }\n        else if (lengthSize === 2) {\n            nalUnitLength = dataView.getUint16(offset, false);\n        }\n        else if (lengthSize === 3) {\n            nalUnitLength = getUint24(dataView, offset, false);\n        }\n        else if (lengthSize === 4) {\n            nalUnitLength = dataView.getUint32(offset, false);\n        }\n        else {\n            assertNever(lengthSize);\n            assert(false);\n        }\n        offset += lengthSize;\n        const nalUnit = packetData.subarray(offset, offset + nalUnitLength);\n        nalUnits.push(nalUnit);\n        offset += nalUnitLength;\n    }\n    return nalUnits;\n};\nconst removeEmulationPreventionBytes = (data) => {\n    const result = [];\n    const len = data.length;\n    for (let i = 0; i < len; i++) {\n        // Look for the 0x000003 pattern\n        if (i + 2 < len && data[i] === 0x00 && data[i + 1] === 0x00 && data[i + 2] === 0x03) {\n            result.push(0x00, 0x00); // Push the first two bytes\n            i += 2; // Skip the 0x03 byte\n        }\n        else {\n            result.push(data[i]);\n        }\n    }\n    return new Uint8Array(result);\n};\n/** Converts an AVC packet in Annex B format to length-prefixed format. */\nexport const transformAnnexBToLengthPrefixed = (packetData) => {\n    const NAL_UNIT_LENGTH_SIZE = 4;\n    const nalUnits = findNalUnitsInAnnexB(packetData);\n    if (nalUnits.length === 0) {\n        // If no NAL units were found, it's not valid Annex B data\n        return null;\n    }\n    let totalSize = 0;\n    for (const nalUnit of nalUnits) {\n        totalSize += NAL_UNIT_LENGTH_SIZE + nalUnit.byteLength;\n    }\n    const avccData = new Uint8Array(totalSize);\n    const dataView = new DataView(avccData.buffer);\n    let offset = 0;\n    // Write each NAL unit with its length prefix\n    for (const nalUnit of nalUnits) {\n        const length = nalUnit.byteLength;\n        dataView.setUint32(offset, length, false);\n        offset += 4;\n        avccData.set(nalUnit, offset);\n        offset += nalUnit.byteLength;\n    }\n    return avccData;\n};\nexport const extractAvcNalUnits = (packetData, decoderConfig) => {\n    if (decoderConfig.description) {\n        // Stream is length-prefixed. Let's extract the size of the length prefix from the decoder config\n        const bytes = toUint8Array(decoderConfig.description);\n        const lengthSizeMinusOne = bytes[4] & 0b11;\n        const lengthSize = (lengthSizeMinusOne + 1);\n        return findNalUnitsInLengthPrefixed(packetData, lengthSize);\n    }\n    else {\n        // Stream is in Annex B format\n        return findNalUnitsInAnnexB(packetData);\n    }\n};\nconst extractNalUnitTypeForAvc = (data) => {\n    return data[0] & 0x1F;\n};\n/** Builds an AvcDecoderConfigurationRecord from an AVC packet in Annex B format. */\nexport const extractAvcDecoderConfigurationRecord = (packetData) => {\n    try {\n        const nalUnits = findNalUnitsInAnnexB(packetData);\n        const spsUnits = nalUnits.filter(unit => extractNalUnitTypeForAvc(unit) === AvcNalUnitType.SPS);\n        const ppsUnits = nalUnits.filter(unit => extractNalUnitTypeForAvc(unit) === AvcNalUnitType.PPS);\n        const spsExtUnits = nalUnits.filter(unit => extractNalUnitTypeForAvc(unit) === AvcNalUnitType.SPS_EXT);\n        if (spsUnits.length === 0) {\n            return null;\n        }\n        if (ppsUnits.length === 0) {\n            return null;\n        }\n        // Let's get the first SPS for profile and level information\n        const spsData = spsUnits[0];\n        const bitstream = new Bitstream(removeEmulationPreventionBytes(spsData));\n        bitstream.skipBits(1); // forbidden_zero_bit\n        bitstream.skipBits(2); // nal_ref_idc\n        const nal_unit_type = bitstream.readBits(5);\n        if (nal_unit_type !== 7) { // SPS NAL unit type is 7\n            console.error('Invalid SPS NAL unit type');\n            return null;\n        }\n        const profile_idc = bitstream.readAlignedByte();\n        const constraint_flags = bitstream.readAlignedByte();\n        const level_idc = bitstream.readAlignedByte();\n        const record = {\n            configurationVersion: 1,\n            avcProfileIndication: profile_idc,\n            profileCompatibility: constraint_flags,\n            avcLevelIndication: level_idc,\n            lengthSizeMinusOne: 3, // Typically 4 bytes for length field\n            sequenceParameterSets: spsUnits,\n            pictureParameterSets: ppsUnits,\n            chromaFormat: null,\n            bitDepthLumaMinus8: null,\n            bitDepthChromaMinus8: null,\n            sequenceParameterSetExt: null,\n        };\n        if (profile_idc === 100\n            || profile_idc === 110\n            || profile_idc === 122\n            || profile_idc === 144) {\n            readExpGolomb(bitstream); // seq_parameter_set_id\n            const chroma_format_idc = readExpGolomb(bitstream);\n            if (chroma_format_idc === 3) {\n                bitstream.skipBits(1); // separate_colour_plane_flag\n            }\n            const bit_depth_luma_minus8 = readExpGolomb(bitstream);\n            const bit_depth_chroma_minus8 = readExpGolomb(bitstream);\n            record.chromaFormat = chroma_format_idc;\n            record.bitDepthLumaMinus8 = bit_depth_luma_minus8;\n            record.bitDepthChromaMinus8 = bit_depth_chroma_minus8;\n            record.sequenceParameterSetExt = spsExtUnits;\n        }\n        return record;\n    }\n    catch (error) {\n        console.error('Error building AVC Decoder Configuration Record:', error);\n        return null;\n    }\n};\n/** Serializes an AvcDecoderConfigurationRecord into the format specified in Section 5.3.3.1 of ISO 14496-15. */\nexport const serializeAvcDecoderConfigurationRecord = (record) => {\n    const bytes = [];\n    // Write header\n    bytes.push(record.configurationVersion);\n    bytes.push(record.avcProfileIndication);\n    bytes.push(record.profileCompatibility);\n    bytes.push(record.avcLevelIndication);\n    bytes.push(0xFC | (record.lengthSizeMinusOne & 0x03)); // Reserved bits (6) + lengthSizeMinusOne (2)\n    // Reserved bits (3) + numOfSequenceParameterSets (5)\n    bytes.push(0xE0 | (record.sequenceParameterSets.length & 0x1F));\n    // Write SPS\n    for (const sps of record.sequenceParameterSets) {\n        const length = sps.byteLength;\n        bytes.push(length >> 8); // High byte\n        bytes.push(length & 0xFF); // Low byte\n        for (let i = 0; i < length; i++) {\n            bytes.push(sps[i]);\n        }\n    }\n    bytes.push(record.pictureParameterSets.length);\n    // Write PPS\n    for (const pps of record.pictureParameterSets) {\n        const length = pps.byteLength;\n        bytes.push(length >> 8); // High byte\n        bytes.push(length & 0xFF); // Low byte\n        for (let i = 0; i < length; i++) {\n            bytes.push(pps[i]);\n        }\n    }\n    if (record.avcProfileIndication === 100\n        || record.avcProfileIndication === 110\n        || record.avcProfileIndication === 122\n        || record.avcProfileIndication === 144) {\n        assert(record.chromaFormat !== null);\n        assert(record.bitDepthLumaMinus8 !== null);\n        assert(record.bitDepthChromaMinus8 !== null);\n        assert(record.sequenceParameterSetExt !== null);\n        bytes.push(0xFC | (record.chromaFormat & 0x03)); // Reserved bits + chroma_format\n        bytes.push(0xF8 | (record.bitDepthLumaMinus8 & 0x07)); // Reserved bits + bit_depth_luma_minus8\n        bytes.push(0xF8 | (record.bitDepthChromaMinus8 & 0x07)); // Reserved bits + bit_depth_chroma_minus8\n        bytes.push(record.sequenceParameterSetExt.length);\n        // Write SPS Ext\n        for (const spsExt of record.sequenceParameterSetExt) {\n            const length = spsExt.byteLength;\n            bytes.push(length >> 8); // High byte\n            bytes.push(length & 0xFF); // Low byte\n            for (let i = 0; i < length; i++) {\n                bytes.push(spsExt[i]);\n            }\n        }\n    }\n    return new Uint8Array(bytes);\n};\nexport const extractHevcNalUnits = (packetData, decoderConfig) => {\n    if (decoderConfig.description) {\n        // Stream is length-prefixed. Let's extract the size of the length prefix from the decoder config\n        const bytes = toUint8Array(decoderConfig.description);\n        const lengthSizeMinusOne = bytes[21] & 0b11;\n        const lengthSize = (lengthSizeMinusOne + 1);\n        return findNalUnitsInLengthPrefixed(packetData, lengthSize);\n    }\n    else {\n        // Stream is in Annex B format\n        return findNalUnitsInAnnexB(packetData);\n    }\n};\nexport const extractNalUnitTypeForHevc = (data) => {\n    return (data[0] >> 1) & 0x3F;\n};\n/** Builds a HevcDecoderConfigurationRecord from an HEVC packet in Annex B format. */\nexport const extractHevcDecoderConfigurationRecord = (packetData) => {\n    try {\n        const nalUnits = findNalUnitsInAnnexB(packetData);\n        const vpsUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.VPS_NUT);\n        const spsUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.SPS_NUT);\n        const ppsUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.PPS_NUT);\n        const seiUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.PREFIX_SEI_NUT\n            || extractNalUnitTypeForHevc(unit) === HevcNalUnitType.SUFFIX_SEI_NUT);\n        if (spsUnits.length === 0 || ppsUnits.length === 0)\n            return null;\n        const sps = spsUnits[0];\n        const bitstream = new Bitstream(removeEmulationPreventionBytes(sps));\n        bitstream.skipBits(16); // NAL header\n        bitstream.readBits(4); // sps_video_parameter_set_id\n        const sps_max_sub_layers_minus1 = bitstream.readBits(3);\n        const sps_temporal_id_nesting_flag = bitstream.readBits(1);\n        const { general_profile_space, general_tier_flag, general_profile_idc, general_profile_compatibility_flags, general_constraint_indicator_flags, general_level_idc, } = parseProfileTierLevel(bitstream, sps_max_sub_layers_minus1);\n        readExpGolomb(bitstream); // sps_seq_parameter_set_id\n        const chroma_format_idc = readExpGolomb(bitstream);\n        if (chroma_format_idc === 3)\n            bitstream.skipBits(1); // separate_colour_plane_flag\n        readExpGolomb(bitstream); // pic_width_in_luma_samples\n        readExpGolomb(bitstream); // pic_height_in_luma_samples\n        if (bitstream.readBits(1)) { // conformance_window_flag\n            readExpGolomb(bitstream); // conf_win_left_offset\n            readExpGolomb(bitstream); // conf_win_right_offset\n            readExpGolomb(bitstream); // conf_win_top_offset\n            readExpGolomb(bitstream); // conf_win_bottom_offset\n        }\n        const bit_depth_luma_minus8 = readExpGolomb(bitstream);\n        const bit_depth_chroma_minus8 = readExpGolomb(bitstream);\n        readExpGolomb(bitstream); // log2_max_pic_order_cnt_lsb_minus4\n        const sps_sub_layer_ordering_info_present_flag = bitstream.readBits(1);\n        const maxNum = sps_sub_layer_ordering_info_present_flag ? 0 : sps_max_sub_layers_minus1;\n        for (let i = maxNum; i <= sps_max_sub_layers_minus1; i++) {\n            readExpGolomb(bitstream); // sps_max_dec_pic_buffering_minus1[i]\n            readExpGolomb(bitstream); // sps_max_num_reorder_pics[i]\n            readExpGolomb(bitstream); // sps_max_latency_increase_plus1[i]\n        }\n        readExpGolomb(bitstream); // log2_min_luma_coding_block_size_minus3\n        readExpGolomb(bitstream); // log2_diff_max_min_luma_coding_block_size\n        readExpGolomb(bitstream); // log2_min_luma_transform_block_size_minus2\n        readExpGolomb(bitstream); // log2_diff_max_min_luma_transform_block_size\n        readExpGolomb(bitstream); // max_transform_hierarchy_depth_inter\n        readExpGolomb(bitstream); // max_transform_hierarchy_depth_intra\n        if (bitstream.readBits(1)) { // scaling_list_enabled_flag\n            if (bitstream.readBits(1)) {\n                skipScalingListData(bitstream);\n            }\n        }\n        bitstream.skipBits(1); // amp_enabled_flag\n        bitstream.skipBits(1); // sample_adaptive_offset_enabled_flag\n        if (bitstream.readBits(1)) { // pcm_enabled_flag\n            bitstream.skipBits(4); // pcm_sample_bit_depth_luma_minus1\n            bitstream.skipBits(4); // pcm_sample_bit_depth_chroma_minus1\n            readExpGolomb(bitstream); // log2_min_pcm_luma_coding_block_size_minus3\n            readExpGolomb(bitstream); // log2_diff_max_min_pcm_luma_coding_block_size\n            bitstream.skipBits(1); // pcm_loop_filter_disabled_flag\n        }\n        const num_short_term_ref_pic_sets = readExpGolomb(bitstream);\n        skipAllStRefPicSets(bitstream, num_short_term_ref_pic_sets);\n        if (bitstream.readBits(1)) { // long_term_ref_pics_present_flag\n            const num_long_term_ref_pics_sps = readExpGolomb(bitstream);\n            for (let i = 0; i < num_long_term_ref_pics_sps; i++) {\n                readExpGolomb(bitstream); // lt_ref_pic_poc_lsb_sps[i]\n                bitstream.skipBits(1); // used_by_curr_pic_lt_sps_flag[i]\n            }\n        }\n        bitstream.skipBits(1); // sps_temporal_mvp_enabled_flag\n        bitstream.skipBits(1); // strong_intra_smoothing_enabled_flag\n        let min_spatial_segmentation_idc = 0;\n        if (bitstream.readBits(1)) { // vui_parameters_present_flag\n            min_spatial_segmentation_idc = parseVuiForMinSpatialSegmentationIdc(bitstream, sps_max_sub_layers_minus1);\n        }\n        // Parse PPS for parallelismType\n        let parallelismType = 0;\n        if (ppsUnits.length > 0) {\n            const pps = ppsUnits[0];\n            const ppsBitstream = new Bitstream(removeEmulationPreventionBytes(pps));\n            ppsBitstream.skipBits(16); // NAL header\n            readExpGolomb(ppsBitstream); // pps_pic_parameter_set_id\n            readExpGolomb(ppsBitstream); // pps_seq_parameter_set_id\n            ppsBitstream.skipBits(1); // dependent_slice_segments_enabled_flag\n            ppsBitstream.skipBits(1); // output_flag_present_flag\n            ppsBitstream.skipBits(3); // num_extra_slice_header_bits\n            ppsBitstream.skipBits(1); // sign_data_hiding_enabled_flag\n            ppsBitstream.skipBits(1); // cabac_init_present_flag\n            readExpGolomb(ppsBitstream); // num_ref_idx_l0_default_active_minus1\n            readExpGolomb(ppsBitstream); // num_ref_idx_l1_default_active_minus1\n            readSignedExpGolomb(ppsBitstream); // init_qp_minus26\n            ppsBitstream.skipBits(1); // constrained_intra_pred_flag\n            ppsBitstream.skipBits(1); // transform_skip_enabled_flag\n            if (ppsBitstream.readBits(1)) { // cu_qp_delta_enabled_flag\n                readExpGolomb(ppsBitstream); // diff_cu_qp_delta_depth\n            }\n            readSignedExpGolomb(ppsBitstream); // pps_cb_qp_offset\n            readSignedExpGolomb(ppsBitstream); // pps_cr_qp_offset\n            ppsBitstream.skipBits(1); // pps_slice_chroma_qp_offsets_present_flag\n            ppsBitstream.skipBits(1); // weighted_pred_flag\n            ppsBitstream.skipBits(1); // weighted_bipred_flag\n            ppsBitstream.skipBits(1); // transquant_bypass_enabled_flag\n            const tiles_enabled_flag = ppsBitstream.readBits(1);\n            const entropy_coding_sync_enabled_flag = ppsBitstream.readBits(1);\n            if (!tiles_enabled_flag && !entropy_coding_sync_enabled_flag)\n                parallelismType = 0;\n            else if (tiles_enabled_flag && !entropy_coding_sync_enabled_flag)\n                parallelismType = 2;\n            else if (!tiles_enabled_flag && entropy_coding_sync_enabled_flag)\n                parallelismType = 3;\n            else\n                parallelismType = 0;\n        }\n        const arrays = [\n            ...(vpsUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: HevcNalUnitType.VPS_NUT,\n                        nalUnits: vpsUnits,\n                    },\n                ]\n                : []),\n            ...(spsUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: HevcNalUnitType.SPS_NUT,\n                        nalUnits: spsUnits,\n                    },\n                ]\n                : []),\n            ...(ppsUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: HevcNalUnitType.PPS_NUT,\n                        nalUnits: ppsUnits,\n                    },\n                ]\n                : []),\n            ...(seiUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: extractNalUnitTypeForHevc(seiUnits[0]),\n                        nalUnits: seiUnits,\n                    },\n                ]\n                : []),\n        ];\n        const record = {\n            configurationVersion: 1,\n            generalProfileSpace: general_profile_space,\n            generalTierFlag: general_tier_flag,\n            generalProfileIdc: general_profile_idc,\n            generalProfileCompatibilityFlags: general_profile_compatibility_flags,\n            generalConstraintIndicatorFlags: general_constraint_indicator_flags,\n            generalLevelIdc: general_level_idc,\n            minSpatialSegmentationIdc: min_spatial_segmentation_idc,\n            parallelismType,\n            chromaFormatIdc: chroma_format_idc,\n            bitDepthLumaMinus8: bit_depth_luma_minus8,\n            bitDepthChromaMinus8: bit_depth_chroma_minus8,\n            avgFrameRate: 0,\n            constantFrameRate: 0,\n            numTemporalLayers: sps_max_sub_layers_minus1 + 1,\n            temporalIdNested: sps_temporal_id_nesting_flag,\n            lengthSizeMinusOne: 3,\n            arrays,\n        };\n        return record;\n    }\n    catch (error) {\n        console.error('Error building HEVC Decoder Configuration Record:', error);\n        return null;\n    }\n};\nconst parseProfileTierLevel = (bitstream, maxNumSubLayersMinus1) => {\n    const general_profile_space = bitstream.readBits(2);\n    const general_tier_flag = bitstream.readBits(1);\n    const general_profile_idc = bitstream.readBits(5);\n    let general_profile_compatibility_flags = 0;\n    for (let i = 0; i < 32; i++) {\n        general_profile_compatibility_flags = (general_profile_compatibility_flags << 1) | bitstream.readBits(1);\n    }\n    const general_constraint_indicator_flags = new Uint8Array(6);\n    for (let i = 0; i < 6; i++) {\n        general_constraint_indicator_flags[i] = bitstream.readBits(8);\n    }\n    const general_level_idc = bitstream.readBits(8);\n    const sub_layer_profile_present_flag = [];\n    const sub_layer_level_present_flag = [];\n    for (let i = 0; i < maxNumSubLayersMinus1; i++) {\n        sub_layer_profile_present_flag.push(bitstream.readBits(1));\n        sub_layer_level_present_flag.push(bitstream.readBits(1));\n    }\n    if (maxNumSubLayersMinus1 > 0) {\n        for (let i = maxNumSubLayersMinus1; i < 8; i++) {\n            bitstream.skipBits(2); // reserved_zero_2bits\n        }\n    }\n    for (let i = 0; i < maxNumSubLayersMinus1; i++) {\n        if (sub_layer_profile_present_flag[i])\n            bitstream.skipBits(88);\n        if (sub_layer_level_present_flag[i])\n            bitstream.skipBits(8);\n    }\n    return {\n        general_profile_space,\n        general_tier_flag,\n        general_profile_idc,\n        general_profile_compatibility_flags,\n        general_constraint_indicator_flags,\n        general_level_idc,\n    };\n};\nconst skipScalingListData = (bitstream) => {\n    for (let sizeId = 0; sizeId < 4; sizeId++) {\n        for (let matrixId = 0; matrixId < (sizeId === 3 ? 2 : 6); matrixId++) {\n            const scaling_list_pred_mode_flag = bitstream.readBits(1);\n            if (!scaling_list_pred_mode_flag) {\n                readExpGolomb(bitstream); // scaling_list_pred_matrix_id_delta\n            }\n            else {\n                const coefNum = Math.min(64, 1 << (4 + (sizeId << 1)));\n                if (sizeId > 1) {\n                    readSignedExpGolomb(bitstream); // scaling_list_dc_coef_minus8\n                }\n                for (let i = 0; i < coefNum; i++) {\n                    readSignedExpGolomb(bitstream); // scaling_list_delta_coef\n                }\n            }\n        }\n    }\n};\nconst skipAllStRefPicSets = (bitstream, num_short_term_ref_pic_sets) => {\n    const NumDeltaPocs = [];\n    for (let stRpsIdx = 0; stRpsIdx < num_short_term_ref_pic_sets; stRpsIdx++) {\n        NumDeltaPocs[stRpsIdx] = skipStRefPicSet(bitstream, stRpsIdx, num_short_term_ref_pic_sets, NumDeltaPocs);\n    }\n};\nconst skipStRefPicSet = (bitstream, stRpsIdx, num_short_term_ref_pic_sets, NumDeltaPocs) => {\n    let NumDeltaPocsThis = 0;\n    let inter_ref_pic_set_prediction_flag = 0;\n    let RefRpsIdx = 0;\n    if (stRpsIdx !== 0) {\n        inter_ref_pic_set_prediction_flag = bitstream.readBits(1);\n    }\n    if (inter_ref_pic_set_prediction_flag) {\n        if (stRpsIdx === num_short_term_ref_pic_sets) {\n            const delta_idx_minus1 = readExpGolomb(bitstream);\n            RefRpsIdx = stRpsIdx - (delta_idx_minus1 + 1);\n        }\n        else {\n            RefRpsIdx = stRpsIdx - 1;\n        }\n        bitstream.readBits(1); // delta_rps_sign\n        readExpGolomb(bitstream); // abs_delta_rps_minus1\n        // The number of iterations is NumDeltaPocs[RefRpsIdx] + 1\n        const numDelta = NumDeltaPocs[RefRpsIdx] ?? 0;\n        for (let j = 0; j <= numDelta; j++) {\n            const used_by_curr_pic_flag = bitstream.readBits(1);\n            if (!used_by_curr_pic_flag) {\n                bitstream.readBits(1); // use_delta_flag\n            }\n        }\n        NumDeltaPocsThis = NumDeltaPocs[RefRpsIdx];\n    }\n    else {\n        const num_negative_pics = readExpGolomb(bitstream);\n        const num_positive_pics = readExpGolomb(bitstream);\n        for (let i = 0; i < num_negative_pics; i++) {\n            readExpGolomb(bitstream); // delta_poc_s0_minus1[i]\n            bitstream.readBits(1); // used_by_curr_pic_s0_flag[i]\n        }\n        for (let i = 0; i < num_positive_pics; i++) {\n            readExpGolomb(bitstream); // delta_poc_s1_minus1[i]\n            bitstream.readBits(1); // used_by_curr_pic_s1_flag[i]\n        }\n        NumDeltaPocsThis = num_negative_pics + num_positive_pics;\n    }\n    return NumDeltaPocsThis;\n};\nconst parseVuiForMinSpatialSegmentationIdc = (bitstream, sps_max_sub_layers_minus1) => {\n    if (bitstream.readBits(1)) { // aspect_ratio_info_present_flag\n        const aspect_ratio_idc = bitstream.readBits(8);\n        if (aspect_ratio_idc === 255) {\n            bitstream.readBits(16); // sar_width\n            bitstream.readBits(16); // sar_height\n        }\n    }\n    if (bitstream.readBits(1)) { // overscan_info_present_flag\n        bitstream.readBits(1); // overscan_appropriate_flag\n    }\n    if (bitstream.readBits(1)) { // video_signal_type_present_flag\n        bitstream.readBits(3); // video_format\n        bitstream.readBits(1); // video_full_range_flag\n        if (bitstream.readBits(1)) {\n            bitstream.readBits(8); // colour_primaries\n            bitstream.readBits(8); // transfer_characteristics\n            bitstream.readBits(8); // matrix_coeffs\n        }\n    }\n    if (bitstream.readBits(1)) { // chroma_loc_info_present_flag\n        readExpGolomb(bitstream); // chroma_sample_loc_type_top_field\n        readExpGolomb(bitstream); // chroma_sample_loc_type_bottom_field\n    }\n    bitstream.readBits(1); // neutral_chroma_indication_flag\n    bitstream.readBits(1); // field_seq_flag\n    bitstream.readBits(1); // frame_field_info_present_flag\n    if (bitstream.readBits(1)) { // default_display_window_flag\n        readExpGolomb(bitstream); // def_disp_win_left_offset\n        readExpGolomb(bitstream); // def_disp_win_right_offset\n        readExpGolomb(bitstream); // def_disp_win_top_offset\n        readExpGolomb(bitstream); // def_disp_win_bottom_offset\n    }\n    if (bitstream.readBits(1)) { // vui_timing_info_present_flag\n        bitstream.readBits(32); // vui_num_units_in_tick\n        bitstream.readBits(32); // vui_time_scale\n        if (bitstream.readBits(1)) { // vui_poc_proportional_to_timing_flag\n            readExpGolomb(bitstream); // vui_num_ticks_poc_diff_one_minus1\n        }\n        if (bitstream.readBits(1)) {\n            skipHrdParameters(bitstream, true, sps_max_sub_layers_minus1);\n        }\n    }\n    if (bitstream.readBits(1)) { // bitstream_restriction_flag\n        bitstream.readBits(1); // tiles_fixed_structure_flag\n        bitstream.readBits(1); // motion_vectors_over_pic_boundaries_flag\n        bitstream.readBits(1); // restricted_ref_pic_lists_flag\n        const min_spatial_segmentation_idc = readExpGolomb(bitstream);\n        // skip the rest\n        readExpGolomb(bitstream); // max_bytes_per_pic_denom\n        readExpGolomb(bitstream); // max_bits_per_min_cu_denom\n        readExpGolomb(bitstream); // log2_max_mv_length_horizontal\n        readExpGolomb(bitstream); // log2_max_mv_length_vertical\n        return min_spatial_segmentation_idc;\n    }\n    return 0;\n};\nconst skipHrdParameters = (bitstream, commonInfPresentFlag, maxNumSubLayersMinus1) => {\n    let nal_hrd_parameters_present_flag = false;\n    let vcl_hrd_parameters_present_flag = false;\n    let sub_pic_hrd_params_present_flag = false;\n    if (commonInfPresentFlag) {\n        nal_hrd_parameters_present_flag = bitstream.readBits(1) === 1;\n        vcl_hrd_parameters_present_flag = bitstream.readBits(1) === 1;\n        if (nal_hrd_parameters_present_flag || vcl_hrd_parameters_present_flag) {\n            sub_pic_hrd_params_present_flag = bitstream.readBits(1) === 1;\n            if (sub_pic_hrd_params_present_flag) {\n                bitstream.readBits(8); // tick_divisor_minus2\n                bitstream.readBits(5); // du_cpb_removal_delay_increment_length_minus1\n                bitstream.readBits(1); // sub_pic_cpb_params_in_pic_timing_sei_flag\n                bitstream.readBits(5); // dpb_output_delay_du_length_minus1\n            }\n            bitstream.readBits(4); // bit_rate_scale\n            bitstream.readBits(4); // cpb_size_scale\n            if (sub_pic_hrd_params_present_flag) {\n                bitstream.readBits(4); // cpb_size_du_scale\n            }\n            bitstream.readBits(5); // initial_cpb_removal_delay_length_minus1\n            bitstream.readBits(5); // au_cpb_removal_delay_length_minus1\n            bitstream.readBits(5); // dpb_output_delay_length_minus1\n        }\n    }\n    for (let i = 0; i <= maxNumSubLayersMinus1; i++) {\n        const fixed_pic_rate_general_flag = bitstream.readBits(1) === 1;\n        let fixed_pic_rate_within_cvs_flag = true; // Default assumption if general is true\n        if (!fixed_pic_rate_general_flag) {\n            fixed_pic_rate_within_cvs_flag = bitstream.readBits(1) === 1;\n        }\n        let low_delay_hrd_flag = false; // Default assumption\n        if (fixed_pic_rate_within_cvs_flag) {\n            readExpGolomb(bitstream); // elemental_duration_in_tc_minus1[i]\n        }\n        else {\n            low_delay_hrd_flag = bitstream.readBits(1) === 1;\n        }\n        let CpbCnt = 1; // Default if low_delay is true\n        if (!low_delay_hrd_flag) {\n            const cpb_cnt_minus1 = readExpGolomb(bitstream); // cpb_cnt_minus1[i]\n            CpbCnt = cpb_cnt_minus1 + 1;\n        }\n        if (nal_hrd_parameters_present_flag) {\n            skipSubLayerHrdParameters(bitstream, CpbCnt, sub_pic_hrd_params_present_flag);\n        }\n        if (vcl_hrd_parameters_present_flag) {\n            skipSubLayerHrdParameters(bitstream, CpbCnt, sub_pic_hrd_params_present_flag);\n        }\n    }\n};\nconst skipSubLayerHrdParameters = (bitstream, CpbCnt, sub_pic_hrd_params_present_flag) => {\n    for (let i = 0; i < CpbCnt; i++) {\n        readExpGolomb(bitstream); // bit_rate_value_minus1[i]\n        readExpGolomb(bitstream); // cpb_size_value_minus1[i]\n        if (sub_pic_hrd_params_present_flag) {\n            readExpGolomb(bitstream); // cpb_size_du_value_minus1[i]\n            readExpGolomb(bitstream); // bit_rate_du_value_minus1[i]\n        }\n        bitstream.readBits(1); // cbr_flag[i]\n    }\n};\n/** Serializes an HevcDecoderConfigurationRecord into the format specified in Section 8.3.3.1 of ISO 14496-15. */\nexport const serializeHevcDecoderConfigurationRecord = (record) => {\n    const bytes = [];\n    bytes.push(record.configurationVersion);\n    bytes.push(((record.generalProfileSpace & 0x3) << 6)\n        | ((record.generalTierFlag & 0x1) << 5)\n        | (record.generalProfileIdc & 0x1F));\n    bytes.push((record.generalProfileCompatibilityFlags >>> 24) & 0xFF);\n    bytes.push((record.generalProfileCompatibilityFlags >>> 16) & 0xFF);\n    bytes.push((record.generalProfileCompatibilityFlags >>> 8) & 0xFF);\n    bytes.push(record.generalProfileCompatibilityFlags & 0xFF);\n    bytes.push(...record.generalConstraintIndicatorFlags);\n    bytes.push(record.generalLevelIdc & 0xFF);\n    bytes.push(0xF0 | ((record.minSpatialSegmentationIdc >> 8) & 0x0F)); // Reserved + high nibble\n    bytes.push(record.minSpatialSegmentationIdc & 0xFF); // Low byte\n    bytes.push(0xFC | (record.parallelismType & 0x03));\n    bytes.push(0xFC | (record.chromaFormatIdc & 0x03));\n    bytes.push(0xF8 | (record.bitDepthLumaMinus8 & 0x07));\n    bytes.push(0xF8 | (record.bitDepthChromaMinus8 & 0x07));\n    bytes.push((record.avgFrameRate >> 8) & 0xFF); // High byte\n    bytes.push(record.avgFrameRate & 0xFF); // Low byte\n    bytes.push(((record.constantFrameRate & 0x03) << 6)\n        | ((record.numTemporalLayers & 0x07) << 3)\n        | ((record.temporalIdNested & 0x01) << 2)\n        | (record.lengthSizeMinusOne & 0x03));\n    bytes.push(record.arrays.length & 0xFF);\n    for (const arr of record.arrays) {\n        bytes.push(((arr.arrayCompleteness & 0x01) << 7)\n            | (0 << 6)\n            | (arr.nalUnitType & 0x3F));\n        bytes.push((arr.nalUnits.length >> 8) & 0xFF); // High byte\n        bytes.push(arr.nalUnits.length & 0xFF); // Low byte\n        for (const nal of arr.nalUnits) {\n            bytes.push((nal.length >> 8) & 0xFF); // High byte\n            bytes.push(nal.length & 0xFF); // Low byte\n            for (let i = 0; i < nal.length; i++) {\n                bytes.push(nal[i]);\n            }\n        }\n    }\n    return new Uint8Array(bytes);\n};\nexport const extractVp9CodecInfoFromPacket = (packet) => {\n    // eslint-disable-next-line @stylistic/max-len\n    // https://storage.googleapis.com/downloads.webmproject.org/docs/vp9/vp9-bitstream-specification-v0.7-20170222-draft.pdf\n    // http://downloads.webmproject.org/docs/vp9/vp9-bitstream_superframe-and-uncompressed-header_v1.0.pdf\n    const bitstream = new Bitstream(packet);\n    // Frame marker (0b10)\n    const frameMarker = bitstream.readBits(2);\n    if (frameMarker !== 2) {\n        return null;\n    }\n    // Profile\n    const profileLowBit = bitstream.readBits(1);\n    const profileHighBit = bitstream.readBits(1);\n    const profile = (profileHighBit << 1) + profileLowBit;\n    // Skip reserved bit for profile 3\n    if (profile === 3) {\n        bitstream.skipBits(1);\n    }\n    // show_existing_frame\n    const showExistingFrame = bitstream.readBits(1);\n    if (showExistingFrame === 1) {\n        return null;\n    }\n    // frame_type (0 = key frame)\n    const frameType = bitstream.readBits(1);\n    if (frameType !== 0) {\n        return null;\n    }\n    // Skip show_frame and error_resilient_mode\n    bitstream.skipBits(2);\n    // Sync code (0x498342)\n    const syncCode = bitstream.readBits(24);\n    if (syncCode !== 0x498342) {\n        return null;\n    }\n    // Color config\n    let bitDepth = 8;\n    if (profile >= 2) {\n        const tenOrTwelveBit = bitstream.readBits(1);\n        bitDepth = tenOrTwelveBit ? 12 : 10;\n    }\n    // Color space\n    const colorSpace = bitstream.readBits(3);\n    let chromaSubsampling = 0;\n    let videoFullRangeFlag = 0;\n    if (colorSpace !== 7) { // 7 is CS_RGB\n        const colorRange = bitstream.readBits(1);\n        videoFullRangeFlag = colorRange;\n        if (profile === 1 || profile === 3) {\n            const subsamplingX = bitstream.readBits(1);\n            const subsamplingY = bitstream.readBits(1);\n            // 0 = 4:2:0 vertical\n            // 1 = 4:2:0 colocated\n            // 2 = 4:2:2\n            // 3 = 4:4:4\n            chromaSubsampling = !subsamplingX && !subsamplingY\n                ? 3 // 0,0 = 4:4:4\n                : subsamplingX && !subsamplingY\n                    ? 2 // 1,0 = 4:2:2\n                    : 1; // 1,1 = 4:2:0 colocated (default)\n            // Skip reserved bit\n            bitstream.skipBits(1);\n        }\n        else {\n            // For profile 0 and 2, always 4:2:0\n            chromaSubsampling = 1; // Using colocated as default\n        }\n    }\n    else {\n        // RGB is always 4:4:4\n        chromaSubsampling = 3;\n        videoFullRangeFlag = 1;\n    }\n    // Parse frame size\n    const widthMinusOne = bitstream.readBits(16);\n    const heightMinusOne = bitstream.readBits(16);\n    const width = widthMinusOne + 1;\n    const height = heightMinusOne + 1;\n    // Calculate level based on dimensions\n    const pictureSize = width * height;\n    let level = last(VP9_LEVEL_TABLE).level; // Default to highest level\n    for (const entry of VP9_LEVEL_TABLE) {\n        if (pictureSize <= entry.maxPictureSize) {\n            level = entry.level;\n            break;\n        }\n    }\n    // Map color_space to standard values\n    const matrixCoefficients = colorSpace === 7\n        ? 0\n        : colorSpace === 2\n            ? 1\n            : colorSpace === 1\n                ? 6\n                : 2;\n    const colourPrimaries = colorSpace === 2\n        ? 1\n        : colorSpace === 1\n            ? 6\n            : 2;\n    const transferCharacteristics = colorSpace === 2\n        ? 1\n        : colorSpace === 1\n            ? 6\n            : 2;\n    return {\n        profile,\n        level,\n        bitDepth,\n        chromaSubsampling,\n        videoFullRangeFlag,\n        colourPrimaries,\n        transferCharacteristics,\n        matrixCoefficients,\n    };\n};\n/** Iterates over all OBUs in an AV1 packet bistream. */\nexport const iterateAv1PacketObus = function* (packet) {\n    // https://aomediacodec.github.io/av1-spec/av1-spec.pdf\n    const bitstream = new Bitstream(packet);\n    const readLeb128 = () => {\n        let value = 0;\n        for (let i = 0; i < 8; i++) {\n            const byte = bitstream.readAlignedByte();\n            value |= ((byte & 0x7f) << (i * 7));\n            if (!(byte & 0x80)) {\n                break;\n            }\n            // Spec requirement\n            if (i === 7 && (byte & 0x80)) {\n                return null;\n            }\n        }\n        // Spec requirement\n        if (value >= 2 ** 32 - 1) {\n            return null;\n        }\n        return value;\n    };\n    while (bitstream.getBitsLeft() >= 8) {\n        // Parse OBU header\n        bitstream.skipBits(1);\n        const obuType = bitstream.readBits(4);\n        const obuExtension = bitstream.readBits(1);\n        const obuHasSizeField = bitstream.readBits(1);\n        bitstream.skipBits(1);\n        // Skip extension header if present\n        if (obuExtension) {\n            bitstream.skipBits(8);\n        }\n        // Read OBU size if present\n        let obuSize;\n        if (obuHasSizeField) {\n            const obuSizeValue = readLeb128();\n            if (obuSizeValue === null)\n                return; // It was invalid\n            obuSize = obuSizeValue;\n        }\n        else {\n            // Calculate remaining bits and convert to bytes, rounding down\n            obuSize = Math.floor(bitstream.getBitsLeft() / 8);\n        }\n        assert(bitstream.pos % 8 === 0);\n        yield {\n            type: obuType,\n            data: packet.subarray(bitstream.pos / 8, bitstream.pos / 8 + obuSize),\n        };\n        // Move to next OBU\n        bitstream.skipBits(obuSize * 8);\n    }\n};\n/**\n * When AV1 codec information is not provided by the container, we can still try to extract the information by digging\n * into the AV1 bitstream.\n */\nexport const extractAv1CodecInfoFromPacket = (packet) => {\n    // https://aomediacodec.github.io/av1-spec/av1-spec.pdf\n    for (const { type, data } of iterateAv1PacketObus(packet)) {\n        if (type !== 1) {\n            continue; // 1 == OBU_SEQUENCE_HEADER\n        }\n        const bitstream = new Bitstream(data);\n        // Read sequence header fields\n        const seqProfile = bitstream.readBits(3);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const stillPicture = bitstream.readBits(1);\n        const reducedStillPictureHeader = bitstream.readBits(1);\n        let seqLevel = 0;\n        let seqTier = 0;\n        let bufferDelayLengthMinus1 = 0;\n        if (reducedStillPictureHeader) {\n            seqLevel = bitstream.readBits(5);\n        }\n        else {\n            // Parse timing_info_present_flag\n            const timingInfoPresentFlag = bitstream.readBits(1);\n            if (timingInfoPresentFlag) {\n                // Skip timing info (num_units_in_display_tick, time_scale, equal_picture_interval)\n                bitstream.skipBits(32); // num_units_in_display_tick\n                bitstream.skipBits(32); // time_scale\n                const equalPictureInterval = bitstream.readBits(1);\n                if (equalPictureInterval) {\n                    // Skip num_ticks_per_picture_minus_1 (uvlc)\n                    // Since this is variable length, we'd need to implement uvlc reading\n                    // For now, we'll return null as this is rare\n                    return null;\n                }\n            }\n            // Parse decoder_model_info_present_flag\n            const decoderModelInfoPresentFlag = bitstream.readBits(1);\n            if (decoderModelInfoPresentFlag) {\n                // Store buffer_delay_length_minus_1 instead of just skipping\n                bufferDelayLengthMinus1 = bitstream.readBits(5);\n                bitstream.skipBits(32); // num_units_in_decoding_tick\n                bitstream.skipBits(5); // buffer_removal_time_length_minus_1\n                bitstream.skipBits(5); // frame_presentation_time_length_minus_1\n            }\n            // Parse operating_points_cnt_minus_1\n            const operatingPointsCntMinus1 = bitstream.readBits(5);\n            // For each operating point\n            for (let i = 0; i <= operatingPointsCntMinus1; i++) {\n                // operating_point_idc[i]\n                bitstream.skipBits(12);\n                // seq_level_idx[i]\n                const seqLevelIdx = bitstream.readBits(5);\n                if (i === 0) {\n                    seqLevel = seqLevelIdx;\n                }\n                if (seqLevelIdx > 7) {\n                    // seq_tier[i]\n                    const seqTierTemp = bitstream.readBits(1);\n                    if (i === 0) {\n                        seqTier = seqTierTemp;\n                    }\n                }\n                if (decoderModelInfoPresentFlag) {\n                    // decoder_model_present_for_this_op[i]\n                    const decoderModelPresentForThisOp = bitstream.readBits(1);\n                    if (decoderModelPresentForThisOp) {\n                        const n = bufferDelayLengthMinus1 + 1;\n                        bitstream.skipBits(n); // decoder_buffer_delay[op]\n                        bitstream.skipBits(n); // encoder_buffer_delay[op]\n                        bitstream.skipBits(1); // low_delay_mode_flag[op]\n                    }\n                }\n                // initial_display_delay_present_flag\n                const initialDisplayDelayPresentFlag = bitstream.readBits(1);\n                if (initialDisplayDelayPresentFlag) {\n                    // initial_display_delay_minus_1[i]\n                    bitstream.skipBits(4);\n                }\n            }\n        }\n        const highBitdepth = bitstream.readBits(1);\n        let bitDepth = 8;\n        if (seqProfile === 2 && highBitdepth) {\n            const twelveBit = bitstream.readBits(1);\n            bitDepth = twelveBit ? 12 : 10;\n        }\n        else if (seqProfile <= 2) {\n            bitDepth = highBitdepth ? 10 : 8;\n        }\n        let monochrome = 0;\n        if (seqProfile !== 1) {\n            monochrome = bitstream.readBits(1);\n        }\n        let chromaSubsamplingX = 1;\n        let chromaSubsamplingY = 1;\n        let chromaSamplePosition = 0;\n        if (!monochrome) {\n            if (seqProfile === 0) {\n                chromaSubsamplingX = 1;\n                chromaSubsamplingY = 1;\n            }\n            else if (seqProfile === 1) {\n                chromaSubsamplingX = 0;\n                chromaSubsamplingY = 0;\n            }\n            else {\n                if (bitDepth === 12) {\n                    chromaSubsamplingX = bitstream.readBits(1);\n                    if (chromaSubsamplingX) {\n                        chromaSubsamplingY = bitstream.readBits(1);\n                    }\n                }\n            }\n            if (chromaSubsamplingX && chromaSubsamplingY) {\n                chromaSamplePosition = bitstream.readBits(2);\n            }\n        }\n        return {\n            profile: seqProfile,\n            level: seqLevel,\n            tier: seqTier,\n            bitDepth,\n            monochrome,\n            chromaSubsamplingX,\n            chromaSubsamplingY,\n            chromaSamplePosition,\n        };\n    }\n    return null;\n};\nexport const parseOpusIdentificationHeader = (bytes) => {\n    const view = toDataView(bytes);\n    const outputChannelCount = view.getUint8(9);\n    const preSkip = view.getUint16(10, true);\n    const inputSampleRate = view.getUint32(12, true);\n    const outputGain = view.getInt16(16, true);\n    const channelMappingFamily = view.getUint8(18);\n    let channelMappingTable = null;\n    if (channelMappingFamily) {\n        channelMappingTable = bytes.subarray(19, 19 + 2 + outputChannelCount);\n    }\n    return {\n        outputChannelCount,\n        preSkip,\n        inputSampleRate,\n        outputGain,\n        channelMappingFamily,\n        channelMappingTable,\n    };\n};\n// From https://datatracker.ietf.org/doc/html/rfc6716, in 48 kHz samples\nconst OPUS_FRAME_DURATION_TABLE = [\n    480, 960, 1920, 2880,\n    480, 960, 1920, 2880,\n    480, 960, 1920, 2880,\n    480, 960,\n    480, 960,\n    120, 240, 480, 960,\n    120, 240, 480, 960,\n    120, 240, 480, 960,\n    120, 240, 480, 960,\n];\nexport const parseOpusTocByte = (packet) => {\n    const config = packet[0] >> 3;\n    return {\n        durationInSamples: OPUS_FRAME_DURATION_TABLE[config],\n    };\n};\n// Based on vorbis_parser.c from FFmpeg.\nexport const parseModesFromVorbisSetupPacket = (setupHeader) => {\n    // Verify that this is a Setup header.\n    if (setupHeader.length < 7) {\n        throw new Error('Setup header is too short.');\n    }\n    if (setupHeader[0] !== 5) {\n        throw new Error('Wrong packet type in Setup header.');\n    }\n    const signature = String.fromCharCode(...setupHeader.slice(1, 7));\n    if (signature !== 'vorbis') {\n        throw new Error('Invalid packet signature in Setup header.');\n    }\n    // Reverse the entire buffer.\n    const bufSize = setupHeader.length;\n    const revBuffer = new Uint8Array(bufSize);\n    for (let i = 0; i < bufSize; i++) {\n        revBuffer[i] = setupHeader[bufSize - 1 - i];\n    }\n    // Initialize a Bitstream on the reversed buffer.\n    const bitstream = new Bitstream(revBuffer);\n    // --- Find the framing bit.\n    // In FFmpeg code, we scan until get_bits1() returns 1.\n    let gotFramingBit = 0;\n    while (bitstream.getBitsLeft() > 97) {\n        if (bitstream.readBits(1) === 1) {\n            gotFramingBit = bitstream.pos;\n            break;\n        }\n    }\n    if (gotFramingBit === 0) {\n        throw new Error('Invalid Setup header: framing bit not found.');\n    }\n    // --- Search backwards for a valid mode header.\n    // We try to ‚Äúguess‚Äù the number of modes by reading a fixed pattern.\n    let modeCount = 0;\n    let gotModeHeader = false;\n    let lastModeCount = 0;\n    while (bitstream.getBitsLeft() >= 97) {\n        const tempPos = bitstream.pos;\n        const a = bitstream.readBits(8);\n        const b = bitstream.readBits(16);\n        const c = bitstream.readBits(16);\n        // If a > 63 or b or c nonzero, assume we‚Äôve gone too far.\n        if (a > 63 || b !== 0 || c !== 0) {\n            bitstream.pos = tempPos;\n            break;\n        }\n        bitstream.skipBits(1);\n        modeCount++;\n        if (modeCount > 64) {\n            break;\n        }\n        const bsClone = bitstream.clone();\n        const candidate = bsClone.readBits(6) + 1;\n        if (candidate === modeCount) {\n            gotModeHeader = true;\n            lastModeCount = modeCount;\n        }\n    }\n    if (!gotModeHeader) {\n        throw new Error('Invalid Setup header: mode header not found.');\n    }\n    if (lastModeCount > 63) {\n        throw new Error(`Unsupported mode count: ${lastModeCount}.`);\n    }\n    const finalModeCount = lastModeCount;\n    // --- Reinitialize the bitstream.\n    bitstream.pos = 0;\n    // Skip the bits up to the found framing bit.\n    bitstream.skipBits(gotFramingBit);\n    // --- Now read, for each mode (in reverse order), 40 bits then one bit.\n    // That one bit is the mode blockflag.\n    const modeBlockflags = Array(finalModeCount).fill(0);\n    for (let i = finalModeCount - 1; i >= 0; i--) {\n        bitstream.skipBits(40);\n        modeBlockflags[i] = bitstream.readBits(1);\n    }\n    return { modeBlockflags };\n};\n/** Determines a packet's type (key or delta) by digging into the packet bitstream. */\nexport const determineVideoPacketType = (codec, decoderConfig, packetData) => {\n    switch (codec) {\n        case 'avc':\n            {\n                const nalUnits = extractAvcNalUnits(packetData, decoderConfig);\n                const isKeyframe = nalUnits.some(x => extractNalUnitTypeForAvc(x) === AvcNalUnitType.IDR);\n                return isKeyframe ? 'key' : 'delta';\n            }\n            ;\n        case 'hevc':\n            {\n                const nalUnits = extractHevcNalUnits(packetData, decoderConfig);\n                const isKeyframe = nalUnits.some((x) => {\n                    const type = extractNalUnitTypeForHevc(x);\n                    return HevcNalUnitType.BLA_W_LP <= type && type <= HevcNalUnitType.RSV_IRAP_VCL23;\n                });\n                return isKeyframe ? 'key' : 'delta';\n            }\n            ;\n        case 'vp8':\n            {\n                // VP8, once again, by far the easiest to deal with.\n                const frameType = packetData[0] & 0b1;\n                return frameType === 0 ? 'key' : 'delta';\n            }\n            ;\n        case 'vp9':\n            {\n                const bitstream = new Bitstream(packetData);\n                if (bitstream.readBits(2) !== 2) {\n                    return null;\n                }\n                ;\n                const profileLowBit = bitstream.readBits(1);\n                const profileHighBit = bitstream.readBits(1);\n                const profile = (profileHighBit << 1) + profileLowBit;\n                // Skip reserved bit for profile 3\n                if (profile === 3) {\n                    bitstream.skipBits(1);\n                }\n                const showExistingFrame = bitstream.readBits(1);\n                if (showExistingFrame) {\n                    return null;\n                }\n                const frameType = bitstream.readBits(1);\n                return frameType === 0 ? 'key' : 'delta';\n            }\n            ;\n        case 'av1':\n            {\n                let reducedStillPictureHeader = false;\n                for (const { type, data } of iterateAv1PacketObus(packetData)) {\n                    if (type === 1) { // OBU_SEQUENCE_HEADER\n                        const bitstream = new Bitstream(data);\n                        bitstream.skipBits(4);\n                        reducedStillPictureHeader = !!bitstream.readBits(1);\n                    }\n                    else if (type === 3 // OBU_FRAME_HEADER\n                        || type === 6 // OBU_FRAME\n                        || type === 7 // OBU_REDUNDANT_FRAME_HEADER\n                    ) {\n                        if (reducedStillPictureHeader) {\n                            return 'key';\n                        }\n                        const bitstream = new Bitstream(data);\n                        const showExistingFrame = bitstream.readBits(1);\n                        if (showExistingFrame) {\n                            return null;\n                        }\n                        const frameType = bitstream.readBits(2);\n                        return frameType === 0 ? 'key' : 'delta';\n                    }\n                }\n                return null;\n            }\n            ;\n        default:\n            {\n                assertNever(codec);\n                assert(false);\n            }\n            ;\n    }\n};\nexport var FlacBlockType;\n(function (FlacBlockType) {\n    FlacBlockType[FlacBlockType[\"STREAMINFO\"] = 0] = \"STREAMINFO\";\n    FlacBlockType[FlacBlockType[\"VORBIS_COMMENT\"] = 4] = \"VORBIS_COMMENT\";\n    FlacBlockType[FlacBlockType[\"PICTURE\"] = 6] = \"PICTURE\";\n})(FlacBlockType || (FlacBlockType = {}));\nexport const readVorbisComments = (bytes, metadataTags) => {\n    // https://datatracker.ietf.org/doc/html/rfc7845#section-5.2\n    const commentView = toDataView(bytes);\n    let commentPos = 0;\n    const vendorStringLength = commentView.getUint32(commentPos, true);\n    commentPos += 4;\n    const vendorString = textDecoder.decode(bytes.subarray(commentPos, commentPos + vendorStringLength));\n    commentPos += vendorStringLength;\n    if (vendorStringLength > 0) {\n        // Expose the vendor string in the raw metadata\n        metadataTags.raw ??= {};\n        metadataTags.raw['vendor'] ??= vendorString;\n    }\n    const listLength = commentView.getUint32(commentPos, true);\n    commentPos += 4;\n    // Loop over all metadata tags\n    for (let i = 0; i < listLength; i++) {\n        const stringLength = commentView.getUint32(commentPos, true);\n        commentPos += 4;\n        const string = textDecoder.decode(bytes.subarray(commentPos, commentPos + stringLength));\n        commentPos += stringLength;\n        const separatorIndex = string.indexOf('=');\n        if (separatorIndex === -1) {\n            continue;\n        }\n        const key = string.slice(0, separatorIndex).toUpperCase();\n        const value = string.slice(separatorIndex + 1);\n        metadataTags.raw ??= {};\n        metadataTags.raw[key] ??= value;\n        switch (key) {\n            case 'TITLE':\n                {\n                    metadataTags.title ??= value;\n                }\n                ;\n                break;\n            case 'DESCRIPTION':\n                {\n                    metadataTags.description ??= value;\n                }\n                ;\n                break;\n            case 'ARTIST':\n                {\n                    metadataTags.artist ??= value;\n                }\n                ;\n                break;\n            case 'ALBUM':\n                {\n                    metadataTags.album ??= value;\n                }\n                ;\n                break;\n            case 'ALBUMARTIST':\n                {\n                    metadataTags.albumArtist ??= value;\n                }\n                ;\n                break;\n            case 'COMMENT':\n                {\n                    metadataTags.comment ??= value;\n                }\n                ;\n                break;\n            case 'LYRICS':\n                {\n                    metadataTags.lyrics ??= value;\n                }\n                ;\n                break;\n            case 'TRACKNUMBER':\n                {\n                    const parts = value.split('/');\n                    const trackNum = Number.parseInt(parts[0], 10);\n                    const tracksTotal = parts[1] && Number.parseInt(parts[1], 10);\n                    if (Number.isInteger(trackNum) && trackNum > 0) {\n                        metadataTags.trackNumber ??= trackNum;\n                    }\n                    if (tracksTotal && Number.isInteger(tracksTotal) && tracksTotal > 0) {\n                        metadataTags.tracksTotal ??= tracksTotal;\n                    }\n                }\n                ;\n                break;\n            case 'TRACKTOTAL':\n                {\n                    const tracksTotal = Number.parseInt(value, 10);\n                    if (Number.isInteger(tracksTotal) && tracksTotal > 0) {\n                        metadataTags.tracksTotal ??= tracksTotal;\n                    }\n                }\n                ;\n                break;\n            case 'DISCNUMBER':\n                {\n                    const parts = value.split('/');\n                    const discNum = Number.parseInt(parts[0], 10);\n                    const discsTotal = parts[1] && Number.parseInt(parts[1], 10);\n                    if (Number.isInteger(discNum) && discNum > 0) {\n                        metadataTags.discNumber ??= discNum;\n                    }\n                    if (discsTotal && Number.isInteger(discsTotal) && discsTotal > 0) {\n                        metadataTags.discsTotal ??= discsTotal;\n                    }\n                }\n                ;\n                break;\n            case 'DISCTOTAL':\n                {\n                    const discsTotal = Number.parseInt(value, 10);\n                    if (Number.isInteger(discsTotal) && discsTotal > 0) {\n                        metadataTags.discsTotal ??= discsTotal;\n                    }\n                }\n                ;\n                break;\n            case 'DATE':\n                {\n                    const date = new Date(value);\n                    if (!Number.isNaN(date.getTime())) {\n                        metadataTags.date ??= date;\n                    }\n                }\n                ;\n                break;\n            case 'GENRE':\n                {\n                    metadataTags.genre ??= value;\n                }\n                ;\n                break;\n            case 'METADATA_BLOCK_PICTURE':\n                {\n                    // https://datatracker.ietf.org/doc/rfc9639/ Section 8.8\n                    const decoded = base64ToBytes(value);\n                    const view = toDataView(decoded);\n                    const pictureType = view.getUint32(0, false);\n                    const mediaTypeLength = view.getUint32(4, false);\n                    const mediaType = String.fromCharCode(...decoded.subarray(8, 8 + mediaTypeLength)); // ASCII\n                    const descriptionLength = view.getUint32(8 + mediaTypeLength, false);\n                    const description = textDecoder.decode(decoded.subarray(12 + mediaTypeLength, 12 + mediaTypeLength + descriptionLength));\n                    const dataLength = view.getUint32(mediaTypeLength + descriptionLength + 28);\n                    const data = decoded.subarray(mediaTypeLength + descriptionLength + 32, mediaTypeLength + descriptionLength + 32 + dataLength);\n                    metadataTags.images ??= [];\n                    metadataTags.images.push({\n                        data,\n                        mimeType: mediaType,\n                        kind: pictureType === 3 ? 'coverFront' : pictureType === 4 ? 'coverBack' : 'unknown',\n                        name: undefined,\n                        description: description || undefined,\n                    });\n                }\n                ;\n                break;\n        }\n    }\n};\nexport const createVorbisComments = (headerBytes, tags, writeImages) => {\n    // https://datatracker.ietf.org/doc/html/rfc7845#section-5.2\n    const commentHeaderParts = [\n        headerBytes,\n    ];\n    const vendorString = 'Mediabunny';\n    const encodedVendorString = textEncoder.encode(vendorString);\n    let currentBuffer = new Uint8Array(4 + encodedVendorString.length);\n    let currentView = new DataView(currentBuffer.buffer);\n    currentView.setUint32(0, encodedVendorString.length, true);\n    currentBuffer.set(encodedVendorString, 4);\n    commentHeaderParts.push(currentBuffer);\n    const writtenTags = new Set();\n    const addCommentTag = (key, value) => {\n        const joined = `${key}=${value}`;\n        const encoded = textEncoder.encode(joined);\n        currentBuffer = new Uint8Array(4 + encoded.length);\n        currentView = new DataView(currentBuffer.buffer);\n        currentView.setUint32(0, encoded.length, true);\n        currentBuffer.set(encoded, 4);\n        commentHeaderParts.push(currentBuffer);\n        writtenTags.add(key);\n    };\n    for (const { key, value } of keyValueIterator(tags)) {\n        switch (key) {\n            case 'title':\n                {\n                    addCommentTag('TITLE', value);\n                }\n                ;\n                break;\n            case 'description':\n                {\n                    addCommentTag('DESCRIPTION', value);\n                }\n                ;\n                break;\n            case 'artist':\n                {\n                    addCommentTag('ARTIST', value);\n                }\n                ;\n                break;\n            case 'album':\n                {\n                    addCommentTag('ALBUM', value);\n                }\n                ;\n                break;\n            case 'albumArtist':\n                {\n                    addCommentTag('ALBUMARTIST', value);\n                }\n                ;\n                break;\n            case 'genre':\n                {\n                    addCommentTag('GENRE', value);\n                }\n                ;\n                break;\n            case 'date':\n                {\n                    const rawVersion = tags.raw?.['DATE'] ?? tags.raw?.['date'];\n                    if (rawVersion && typeof rawVersion === 'string') {\n                        addCommentTag('DATE', rawVersion);\n                    }\n                    else {\n                        addCommentTag('DATE', value.toISOString().slice(0, 10));\n                    }\n                }\n                ;\n                break;\n            case 'comment':\n                {\n                    addCommentTag('COMMENT', value);\n                }\n                ;\n                break;\n            case 'lyrics':\n                {\n                    addCommentTag('LYRICS', value);\n                }\n                ;\n                break;\n            case 'trackNumber':\n                {\n                    addCommentTag('TRACKNUMBER', value.toString());\n                }\n                ;\n                break;\n            case 'tracksTotal':\n                {\n                    addCommentTag('TRACKTOTAL', value.toString());\n                }\n                ;\n                break;\n            case 'discNumber':\n                {\n                    addCommentTag('DISCNUMBER', value.toString());\n                }\n                ;\n                break;\n            case 'discsTotal':\n                {\n                    addCommentTag('DISCTOTAL', value.toString());\n                }\n                ;\n                break;\n            case 'images':\n                {\n                    // For example, in .flac, we put the pictures in a different section,\n                    // not in the Vorbis comment header.\n                    if (!writeImages) {\n                        break;\n                    }\n                    for (const image of value) {\n                        // https://datatracker.ietf.org/doc/rfc9639/ Section 8.8\n                        const pictureType = image.kind === 'coverFront' ? 3 : image.kind === 'coverBack' ? 4 : 0;\n                        const encodedMediaType = new Uint8Array(image.mimeType.length);\n                        for (let i = 0; i < image.mimeType.length; i++) {\n                            encodedMediaType[i] = image.mimeType.charCodeAt(i);\n                        }\n                        const encodedDescription = textEncoder.encode(image.description ?? '');\n                        const buffer = new Uint8Array(4 // Picture type\n                            + 4 // MIME type length\n                            + encodedMediaType.length // MIME type\n                            + 4 // Description length\n                            + encodedDescription.length // Description\n                            + 16 // Width, height, color depth, number of colors\n                            + 4 // Picture data length\n                            + image.data.length);\n                        const view = toDataView(buffer);\n                        view.setUint32(0, pictureType, false);\n                        view.setUint32(4, encodedMediaType.length, false);\n                        buffer.set(encodedMediaType, 8);\n                        view.setUint32(8 + encodedMediaType.length, encodedDescription.length, false);\n                        buffer.set(encodedDescription, 12 + encodedMediaType.length);\n                        // Skip a bunch of fields (width, height, color depth, number of colors)\n                        view.setUint32(28 + encodedMediaType.length + encodedDescription.length, image.data.length, false);\n                        buffer.set(image.data, 32 + encodedMediaType.length + encodedDescription.length);\n                        const encoded = bytesToBase64(buffer);\n                        addCommentTag('METADATA_BLOCK_PICTURE', encoded);\n                    }\n                }\n                ;\n                break;\n            case 'raw':\n                {\n                    // Handled later\n                }\n                ;\n                break;\n            default: assertNever(key);\n        }\n    }\n    if (tags.raw) {\n        for (const key in tags.raw) {\n            const value = tags.raw[key] ?? tags.raw[key.toLowerCase()];\n            if (key === 'vendor' || value == null || writtenTags.has(key)) {\n                continue;\n            }\n            if (typeof value === 'string') {\n                addCommentTag(key, value);\n            }\n        }\n    }\n    const listLengthBuffer = new Uint8Array(4);\n    toDataView(listLengthBuffer).setUint32(0, writtenTags.size, true);\n    commentHeaderParts.splice(2, 0, listLengthBuffer); // Insert after the header and vendor section\n    // Merge all comment header parts into a single buffer\n    const commentHeaderLength = commentHeaderParts.reduce((a, b) => a + b.length, 0);\n    const commentHeader = new Uint8Array(commentHeaderLength);\n    let pos = 0;\n    for (const part of commentHeaderParts) {\n        commentHeader.set(part, pos);\n        pos += part.length;\n    }\n    return commentHeader;\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n/**\n * Base class for custom video decoders. To add your own custom video decoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the decoder using {@link registerDecoder}.\n * @group Custom coders\n * @public\n */\nexport class CustomVideoDecoder {\n    /** Returns true if and only if the decoder can decode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\n/**\n * Base class for custom audio decoders. To add your own custom audio decoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the decoder using {@link registerDecoder}.\n * @group Custom coders\n * @public\n */\nexport class CustomAudioDecoder {\n    /** Returns true if and only if the decoder can decode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\n/**\n * Base class for custom video encoders. To add your own custom video encoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the encoder using {@link registerEncoder}.\n * @group Custom coders\n * @public\n */\nexport class CustomVideoEncoder {\n    /** Returns true if and only if the encoder can encode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\n/**\n * Base class for custom audio encoders. To add your own custom audio encoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the encoder using {@link registerEncoder}.\n * @group Custom coders\n * @public\n */\nexport class CustomAudioEncoder {\n    /** Returns true if and only if the encoder can encode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\nexport const customVideoDecoders = [];\nexport const customAudioDecoders = [];\nexport const customVideoEncoders = [];\nexport const customAudioEncoders = [];\n/**\n * Registers a custom video or audio decoder. Registered decoders will automatically be used for decoding whenever\n * possible.\n * @group Custom coders\n * @public\n */\nexport const registerDecoder = (decoder) => {\n    if (decoder.prototype instanceof CustomVideoDecoder) {\n        const casted = decoder;\n        if (customVideoDecoders.includes(casted)) {\n            console.warn('Video decoder already registered.');\n            return;\n        }\n        customVideoDecoders.push(casted);\n    }\n    else if (decoder.prototype instanceof CustomAudioDecoder) {\n        const casted = decoder;\n        if (customAudioDecoders.includes(casted)) {\n            console.warn('Audio decoder already registered.');\n            return;\n        }\n        customAudioDecoders.push(casted);\n    }\n    else {\n        throw new TypeError('Decoder must be a CustomVideoDecoder or CustomAudioDecoder.');\n    }\n};\n/**\n * Registers a custom video or audio encoder. Registered encoders will automatically be used for encoding whenever\n * possible.\n * @group Custom coders\n * @public\n */\nexport const registerEncoder = (encoder) => {\n    if (encoder.prototype instanceof CustomVideoEncoder) {\n        const casted = encoder;\n        if (customVideoEncoders.includes(casted)) {\n            console.warn('Video encoder already registered.');\n            return;\n        }\n        customVideoEncoders.push(casted);\n    }\n    else if (encoder.prototype instanceof CustomAudioEncoder) {\n        const casted = encoder;\n        if (customAudioEncoders.includes(casted)) {\n            console.warn('Audio encoder already registered.');\n            return;\n        }\n        customAudioEncoders.push(casted);\n    }\n    else {\n        throw new TypeError('Encoder must be a CustomVideoEncoder or CustomAudioEncoder.');\n    }\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { SECOND_TO_MICROSECOND_FACTOR } from './misc.js';\nexport const PLACEHOLDER_DATA = new Uint8Array(0);\n/**\n * Represents an encoded chunk of media. Mainly used as an expressive wrapper around WebCodecs API's\n * [`EncodedVideoChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedVideoChunk) and\n * [`EncodedAudioChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedAudioChunk), but can also be used\n * standalone.\n * @group Packets\n * @public\n */\nexport class EncodedPacket {\n    /** Creates a new {@link EncodedPacket} from raw bytes and timing information. */\n    constructor(\n    /** The encoded data of this packet. */\n    data, \n    /** The type of this packet. */\n    type, \n    /**\n     * The presentation timestamp of this packet in seconds. May be negative. Samples with negative end timestamps\n     * should not be presented.\n     */\n    timestamp, \n    /** The duration of this packet in seconds. */\n    duration, \n    /**\n     * The sequence number indicates the decode order of the packets. Packet A  must be decoded before packet B if A\n     * has a lower sequence number than B. If two packets have the same sequence number, they are the same packet.\n     * Otherwise, sequence numbers are arbitrary and are not guaranteed to have any meaning besides their relative\n     * ordering. Negative sequence numbers mean the sequence number is undefined.\n     */\n    sequenceNumber = -1, byteLength, sideData) {\n        this.data = data;\n        this.type = type;\n        this.timestamp = timestamp;\n        this.duration = duration;\n        this.sequenceNumber = sequenceNumber;\n        if (data === PLACEHOLDER_DATA && byteLength === undefined) {\n            throw new Error('Internal error: byteLength must be explicitly provided when constructing metadata-only packets.');\n        }\n        if (byteLength === undefined) {\n            byteLength = data.byteLength;\n        }\n        if (!(data instanceof Uint8Array)) {\n            throw new TypeError('data must be a Uint8Array.');\n        }\n        if (type !== 'key' && type !== 'delta') {\n            throw new TypeError('type must be either \"key\" or \"delta\".');\n        }\n        if (!Number.isFinite(timestamp)) {\n            throw new TypeError('timestamp must be a number.');\n        }\n        if (!Number.isFinite(duration) || duration < 0) {\n            throw new TypeError('duration must be a non-negative number.');\n        }\n        if (!Number.isFinite(sequenceNumber)) {\n            throw new TypeError('sequenceNumber must be a number.');\n        }\n        if (!Number.isInteger(byteLength) || byteLength < 0) {\n            throw new TypeError('byteLength must be a non-negative integer.');\n        }\n        if (sideData !== undefined && (typeof sideData !== 'object' || !sideData)) {\n            throw new TypeError('sideData, when provided, must be an object.');\n        }\n        if (sideData?.alpha !== undefined && !(sideData.alpha instanceof Uint8Array)) {\n            throw new TypeError('sideData.alpha, when provided, must be a Uint8Array.');\n        }\n        if (sideData?.alphaByteLength !== undefined\n            && (!Number.isInteger(sideData.alphaByteLength) || sideData.alphaByteLength < 0)) {\n            throw new TypeError('sideData.alphaByteLength, when provided, must be a non-negative integer.');\n        }\n        this.byteLength = byteLength;\n        this.sideData = sideData ?? {};\n        if (this.sideData.alpha && this.sideData.alphaByteLength === undefined) {\n            this.sideData.alphaByteLength = this.sideData.alpha.byteLength;\n        }\n    }\n    /** If this packet is a metadata-only packet. Metadata-only packets don't contain their packet data. */\n    get isMetadataOnly() {\n        return this.data === PLACEHOLDER_DATA;\n    }\n    /** The timestamp of this packet in microseconds. */\n    get microsecondTimestamp() {\n        return Math.trunc(SECOND_TO_MICROSECOND_FACTOR * this.timestamp);\n    }\n    /** The duration of this packet in microseconds. */\n    get microsecondDuration() {\n        return Math.trunc(SECOND_TO_MICROSECOND_FACTOR * this.duration);\n    }\n    /** Converts this packet to an\n     * [`EncodedVideoChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedVideoChunk) for use with the\n     * WebCodecs API. */\n    toEncodedVideoChunk() {\n        if (this.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be converted to a video chunk.');\n        }\n        if (typeof EncodedVideoChunk === 'undefined') {\n            throw new Error('Your browser does not support EncodedVideoChunk.');\n        }\n        return new EncodedVideoChunk({\n            data: this.data,\n            type: this.type,\n            timestamp: this.microsecondTimestamp,\n            duration: this.microsecondDuration,\n        });\n    }\n    /**\n     * Converts this packet to an\n     * [`EncodedVideoChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedVideoChunk) for use with the\n     * WebCodecs API, using the alpha side data instead of the color data. Throws if no alpha side data is defined.\n     */\n    alphaToEncodedVideoChunk(type = this.type) {\n        if (!this.sideData.alpha) {\n            throw new TypeError('This packet does not contain alpha side data.');\n        }\n        if (this.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be converted to a video chunk.');\n        }\n        if (typeof EncodedVideoChunk === 'undefined') {\n            throw new Error('Your browser does not support EncodedVideoChunk.');\n        }\n        return new EncodedVideoChunk({\n            data: this.sideData.alpha,\n            type,\n            timestamp: this.microsecondTimestamp,\n            duration: this.microsecondDuration,\n        });\n    }\n    /** Converts this packet to an\n     * [`EncodedAudioChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedAudioChunk) for use with the\n     * WebCodecs API. */\n    toEncodedAudioChunk() {\n        if (this.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be converted to an audio chunk.');\n        }\n        if (typeof EncodedAudioChunk === 'undefined') {\n            throw new Error('Your browser does not support EncodedAudioChunk.');\n        }\n        return new EncodedAudioChunk({\n            data: this.data,\n            type: this.type,\n            timestamp: this.microsecondTimestamp,\n            duration: this.microsecondDuration,\n        });\n    }\n    /**\n     * Creates an {@link EncodedPacket} from an\n     * [`EncodedVideoChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedVideoChunk) or\n     * [`EncodedAudioChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedAudioChunk). This method is useful\n     * for converting chunks from the WebCodecs API to `EncodedPacket` instances.\n     */\n    static fromEncodedChunk(chunk, sideData) {\n        if (!(chunk instanceof EncodedVideoChunk || chunk instanceof EncodedAudioChunk)) {\n            throw new TypeError('chunk must be an EncodedVideoChunk or EncodedAudioChunk.');\n        }\n        const data = new Uint8Array(chunk.byteLength);\n        chunk.copyTo(data);\n        return new EncodedPacket(data, chunk.type, chunk.timestamp / 1e6, (chunk.duration ?? 0) / 1e6, undefined, undefined, sideData);\n    }\n    /** Clones this packet while optionally updating timing information. */\n    clone(options) {\n        if (options !== undefined && (typeof options !== 'object' || options === null)) {\n            throw new TypeError('options, when provided, must be an object.');\n        }\n        if (options?.timestamp !== undefined && !Number.isFinite(options.timestamp)) {\n            throw new TypeError('options.timestamp, when provided, must be a number.');\n        }\n        if (options?.duration !== undefined && !Number.isFinite(options.duration)) {\n            throw new TypeError('options.duration, when provided, must be a number.');\n        }\n        return new EncodedPacket(this.data, this.type, options?.timestamp ?? this.timestamp, options?.duration ?? this.duration, this.sequenceNumber, this.byteLength);\n    }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { assert, clamp, isAllowSharedBufferSource, SECOND_TO_MICROSECOND_FACTOR, toDataView, toUint8Array, isFirefox, polyfillSymbolDispose, } from './misc.js';\npolyfillSymbolDispose();\n/**\n * Represents a raw, unencoded video sample (frame). Mainly used as an expressive wrapper around WebCodecs API's\n * [`VideoFrame`](https://developer.mozilla.org/en-US/docs/Web/API/VideoFrame), but can also be used standalone.\n * @group Samples\n * @public\n */\nexport class VideoSample {\n    /** The width of the frame in pixels after rotation. */\n    get displayWidth() {\n        return this.rotation % 180 === 0 ? this.codedWidth : this.codedHeight;\n    }\n    /** The height of the frame in pixels after rotation. */\n    get displayHeight() {\n        return this.rotation % 180 === 0 ? this.codedHeight : this.codedWidth;\n    }\n    /** The presentation timestamp of the frame in microseconds. */\n    get microsecondTimestamp() {\n        return Math.trunc(SECOND_TO_MICROSECOND_FACTOR * this.timestamp);\n    }\n    /** The duration of the frame in microseconds. */\n    get microsecondDuration() {\n        return Math.trunc(SECOND_TO_MICROSECOND_FACTOR * this.duration);\n    }\n    /**\n     * Whether this sample uses a pixel format that can hold transparency data. Note that this doesn't necessarily mean\n     * that the sample is transparent.\n     */\n    get hasAlpha() {\n        return this.format && this.format.includes('A');\n    }\n    constructor(data, init) {\n        /** @internal */\n        this._closed = false;\n        if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n            if (!init || typeof init !== 'object') {\n                throw new TypeError('init must be an object.');\n            }\n            if (!('format' in init) || typeof init.format !== 'string') {\n                throw new TypeError('init.format must be a string.');\n            }\n            if (!Number.isInteger(init.codedWidth) || init.codedWidth <= 0) {\n                throw new TypeError('init.codedWidth must be a positive integer.');\n            }\n            if (!Number.isInteger(init.codedHeight) || init.codedHeight <= 0) {\n                throw new TypeError('init.codedHeight must be a positive integer.');\n            }\n            if (init.rotation !== undefined && ![0, 90, 180, 270].includes(init.rotation)) {\n                throw new TypeError('init.rotation, when provided, must be 0, 90, 180, or 270.');\n            }\n            if (!Number.isFinite(init.timestamp)) {\n                throw new TypeError('init.timestamp must be a number.');\n            }\n            if (init.duration !== undefined && (!Number.isFinite(init.duration) || init.duration < 0)) {\n                throw new TypeError('init.duration, when provided, must be a non-negative number.');\n            }\n            this._data = toUint8Array(data).slice(); // Copy it\n            this.format = init.format;\n            this.codedWidth = init.codedWidth;\n            this.codedHeight = init.codedHeight;\n            this.rotation = init.rotation ?? 0;\n            this.timestamp = init.timestamp;\n            this.duration = init.duration ?? 0;\n            this.colorSpace = new VideoColorSpace(init.colorSpace);\n        }\n        else if (typeof VideoFrame !== 'undefined' && data instanceof VideoFrame) {\n            if (init?.rotation !== undefined && ![0, 90, 180, 270].includes(init.rotation)) {\n                throw new TypeError('init.rotation, when provided, must be 0, 90, 180, or 270.');\n            }\n            if (init?.timestamp !== undefined && !Number.isFinite(init?.timestamp)) {\n                throw new TypeError('init.timestamp, when provided, must be a number.');\n            }\n            if (init?.duration !== undefined && (!Number.isFinite(init.duration) || init.duration < 0)) {\n                throw new TypeError('init.duration, when provided, must be a non-negative number.');\n            }\n            this._data = data;\n            this.format = data.format;\n            // Copying the display dimensions here, assuming no innate VideoFrame rotation\n            this.codedWidth = data.displayWidth;\n            this.codedHeight = data.displayHeight;\n            // The VideoFrame's rotation is ignored here. It's still a new field, and I'm not sure of any application\n            // where the browser makes use of it. If a case gets found, I'll add it.\n            this.rotation = init?.rotation ?? 0;\n            this.timestamp = init?.timestamp ?? data.timestamp / 1e6;\n            this.duration = init?.duration ?? (data.duration ?? 0) / 1e6;\n            this.colorSpace = data.colorSpace;\n        }\n        else if ((typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement)\n            || (typeof SVGImageElement !== 'undefined' && data instanceof SVGImageElement)\n            || (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap)\n            || (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement)\n            || (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement)\n            || (typeof OffscreenCanvas !== 'undefined' && data instanceof OffscreenCanvas)) {\n            if (!init || typeof init !== 'object') {\n                throw new TypeError('init must be an object.');\n            }\n            if (init.rotation !== undefined && ![0, 90, 180, 270].includes(init.rotation)) {\n                throw new TypeError('init.rotation, when provided, must be 0, 90, 180, or 270.');\n            }\n            if (!Number.isFinite(init.timestamp)) {\n                throw new TypeError('init.timestamp must be a number.');\n            }\n            if (init.duration !== undefined && (!Number.isFinite(init.duration) || init.duration < 0)) {\n                throw new TypeError('init.duration, when provided, must be a non-negative number.');\n            }\n            if (typeof VideoFrame !== 'undefined') {\n                return new VideoSample(new VideoFrame(data, {\n                    timestamp: Math.trunc(init.timestamp * SECOND_TO_MICROSECOND_FACTOR),\n                    // Drag 0 to undefined\n                    duration: Math.trunc((init.duration ?? 0) * SECOND_TO_MICROSECOND_FACTOR) || undefined,\n                }), init);\n            }\n            let width = 0;\n            let height = 0;\n            // Determine the dimensions of the thing\n            if ('naturalWidth' in data) {\n                width = data.naturalWidth;\n                height = data.naturalHeight;\n            }\n            else if ('videoWidth' in data) {\n                width = data.videoWidth;\n                height = data.videoHeight;\n            }\n            else if ('width' in data) {\n                width = Number(data.width);\n                height = Number(data.height);\n            }\n            if (!width || !height) {\n                throw new TypeError('Could not determine dimensions.');\n            }\n            const canvas = new OffscreenCanvas(width, height);\n            const context = canvas.getContext('2d', {\n                alpha: isFirefox(), // Firefox has VideoFrame glitches with opaque canvases\n                willReadFrequently: true,\n            });\n            assert(context);\n            // Draw it to a canvas\n            context.drawImage(data, 0, 0);\n            this._data = canvas;\n            this.format = 'RGBX';\n            this.codedWidth = width;\n            this.codedHeight = height;\n            this.rotation = init.rotation ?? 0;\n            this.timestamp = init.timestamp;\n            this.duration = init.duration ?? 0;\n            this.colorSpace = new VideoColorSpace({\n                matrix: 'rgb',\n                primaries: 'bt709',\n                transfer: 'iec61966-2-1',\n                fullRange: true,\n            });\n        }\n        else {\n            throw new TypeError('Invalid data type: Must be a BufferSource or CanvasImageSource.');\n        }\n    }\n    /** Clones this video sample. */\n    clone() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        assert(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            return new VideoSample(this._data.clone(), {\n                timestamp: this.timestamp,\n                duration: this.duration,\n                rotation: this.rotation,\n            });\n        }\n        else if (this._data instanceof Uint8Array) {\n            return new VideoSample(this._data.slice(), {\n                format: this.format,\n                codedWidth: this.codedWidth,\n                codedHeight: this.codedHeight,\n                timestamp: this.timestamp,\n                duration: this.duration,\n                colorSpace: this.colorSpace,\n                rotation: this.rotation,\n            });\n        }\n        else {\n            return new VideoSample(this._data, {\n                format: this.format,\n                codedWidth: this.codedWidth,\n                codedHeight: this.codedHeight,\n                timestamp: this.timestamp,\n                duration: this.duration,\n                colorSpace: this.colorSpace,\n                rotation: this.rotation,\n            });\n        }\n    }\n    /**\n     * Closes this video sample, releasing held resources. Video samples should be closed as soon as they are not\n     * needed anymore.\n     */\n    close() {\n        if (this._closed) {\n            return;\n        }\n        if (isVideoFrame(this._data)) {\n            this._data.close();\n        }\n        else {\n            this._data = null; // GC that shit\n        }\n        this._closed = true;\n    }\n    /** Returns the number of bytes required to hold this video sample's pixel data. */\n    allocationSize() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        assert(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            return this._data.allocationSize();\n        }\n        else if (this._data instanceof Uint8Array) {\n            return this._data.byteLength;\n        }\n        else {\n            return this.codedWidth * this.codedHeight * 4; // RGBX\n        }\n    }\n    /** Copies this video sample's pixel data to an ArrayBuffer or ArrayBufferView. */\n    async copyTo(destination) {\n        if (!isAllowSharedBufferSource(destination)) {\n            throw new TypeError('destination must be an ArrayBuffer or an ArrayBuffer view.');\n        }\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        assert(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            await this._data.copyTo(destination);\n        }\n        else if (this._data instanceof Uint8Array) {\n            const dest = toUint8Array(destination);\n            dest.set(this._data);\n        }\n        else {\n            const canvas = this._data;\n            const context = canvas.getContext('2d');\n            assert(context);\n            const imageData = context.getImageData(0, 0, this.codedWidth, this.codedHeight);\n            const dest = toUint8Array(destination);\n            dest.set(imageData.data);\n        }\n    }\n    /**\n     * Converts this video sample to a VideoFrame for use with the WebCodecs API. The VideoFrame returned by this\n     * method *must* be closed separately from this video sample.\n     */\n    toVideoFrame() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        assert(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            return new VideoFrame(this._data, {\n                timestamp: this.microsecondTimestamp,\n                duration: this.microsecondDuration || undefined, // Drag 0 duration to undefined, glitches some codecs\n            });\n        }\n        else if (this._data instanceof Uint8Array) {\n            return new VideoFrame(this._data, {\n                format: this.format,\n                codedWidth: this.codedWidth,\n                codedHeight: this.codedHeight,\n                timestamp: this.microsecondTimestamp,\n                duration: this.microsecondDuration || undefined,\n                colorSpace: this.colorSpace,\n            });\n        }\n        else {\n            return new VideoFrame(this._data, {\n                timestamp: this.microsecondTimestamp,\n                duration: this.microsecondDuration || undefined,\n            });\n        }\n    }\n    draw(context, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n        let sx = 0;\n        let sy = 0;\n        let sWidth = this.displayWidth;\n        let sHeight = this.displayHeight;\n        let dx = 0;\n        let dy = 0;\n        let dWidth = this.displayWidth;\n        let dHeight = this.displayHeight;\n        if (arg5 !== undefined) {\n            sx = arg1;\n            sy = arg2;\n            sWidth = arg3;\n            sHeight = arg4;\n            dx = arg5;\n            dy = arg6;\n            if (arg7 !== undefined) {\n                dWidth = arg7;\n                dHeight = arg8;\n            }\n            else {\n                dWidth = sWidth;\n                dHeight = sHeight;\n            }\n        }\n        else {\n            dx = arg1;\n            dy = arg2;\n            if (arg3 !== undefined) {\n                dWidth = arg3;\n                dHeight = arg4;\n            }\n        }\n        if (!((typeof CanvasRenderingContext2D !== 'undefined' && context instanceof CanvasRenderingContext2D)\n            || (typeof OffscreenCanvasRenderingContext2D !== 'undefined'\n                && context instanceof OffscreenCanvasRenderingContext2D))) {\n            throw new TypeError('context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.');\n        }\n        if (!Number.isFinite(sx)) {\n            throw new TypeError('sx must be a number.');\n        }\n        if (!Number.isFinite(sy)) {\n            throw new TypeError('sy must be a number.');\n        }\n        if (!Number.isFinite(sWidth) || sWidth < 0) {\n            throw new TypeError('sWidth must be a non-negative number.');\n        }\n        if (!Number.isFinite(sHeight) || sHeight < 0) {\n            throw new TypeError('sHeight must be a non-negative number.');\n        }\n        if (!Number.isFinite(dx)) {\n            throw new TypeError('dx must be a number.');\n        }\n        if (!Number.isFinite(dy)) {\n            throw new TypeError('dy must be a number.');\n        }\n        if (!Number.isFinite(dWidth) || dWidth < 0) {\n            throw new TypeError('dWidth must be a non-negative number.');\n        }\n        if (!Number.isFinite(dHeight) || dHeight < 0) {\n            throw new TypeError('dHeight must be a non-negative number.');\n        }\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        ({ sx, sy, sWidth, sHeight } = this._rotateSourceRegion(sx, sy, sWidth, sHeight, this.rotation));\n        const source = this.toCanvasImageSource();\n        context.save();\n        const centerX = dx + dWidth / 2;\n        const centerY = dy + dHeight / 2;\n        context.translate(centerX, centerY);\n        context.rotate(this.rotation * Math.PI / 180);\n        const aspectRatioChange = this.rotation % 180 === 0 ? 1 : dWidth / dHeight;\n        // Scale to compensate for aspect ratio changes when rotated\n        context.scale(1 / aspectRatioChange, aspectRatioChange);\n        context.drawImage(source, sx, sy, sWidth, sHeight, -dWidth / 2, -dHeight / 2, dWidth, dHeight);\n        // Restore the previous transformation state\n        context.restore();\n    }\n    /**\n     * Draws the sample in the middle of the canvas corresponding to the context with the specified fit behavior.\n     */\n    drawWithFit(context, options) {\n        if (!((typeof CanvasRenderingContext2D !== 'undefined' && context instanceof CanvasRenderingContext2D)\n            || (typeof OffscreenCanvasRenderingContext2D !== 'undefined'\n                && context instanceof OffscreenCanvasRenderingContext2D))) {\n            throw new TypeError('context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.');\n        }\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!['fill', 'contain', 'cover'].includes(options.fit)) {\n            throw new TypeError('options.fit must be \\'fill\\', \\'contain\\', or \\'cover\\'.');\n        }\n        if (options.rotation !== undefined && ![0, 90, 180, 270].includes(options.rotation)) {\n            throw new TypeError('options.rotation, when provided, must be 0, 90, 180, or 270.');\n        }\n        if (options.crop !== undefined) {\n            validateCropRectangle(options.crop, 'options.');\n        }\n        const canvasWidth = context.canvas.width;\n        const canvasHeight = context.canvas.height;\n        const rotation = options.rotation ?? this.rotation;\n        const [rotatedWidth, rotatedHeight] = rotation % 180 === 0\n            ? [this.codedWidth, this.codedHeight]\n            : [this.codedHeight, this.codedWidth];\n        if (options.crop) {\n            clampCropRectangle(options.crop, rotatedWidth, rotatedHeight);\n        }\n        // These variables specify where the final sample will be drawn on the canvas\n        let dx;\n        let dy;\n        let newWidth;\n        let newHeight;\n        const { sx, sy, sWidth, sHeight } = this._rotateSourceRegion(options.crop?.left ?? 0, options.crop?.top ?? 0, options.crop?.width ?? rotatedWidth, options.crop?.height ?? rotatedHeight, rotation);\n        if (options.fit === 'fill') {\n            dx = 0;\n            dy = 0;\n            newWidth = canvasWidth;\n            newHeight = canvasHeight;\n        }\n        else {\n            const [sampleWidth, sampleHeight] = options.crop\n                ? [options.crop.width, options.crop.height]\n                : [rotatedWidth, rotatedHeight];\n            const scale = options.fit === 'contain'\n                ? Math.min(canvasWidth / sampleWidth, canvasHeight / sampleHeight)\n                : Math.max(canvasWidth / sampleWidth, canvasHeight / sampleHeight);\n            newWidth = sampleWidth * scale;\n            newHeight = sampleHeight * scale;\n            dx = (canvasWidth - newWidth) / 2;\n            dy = (canvasHeight - newHeight) / 2;\n        }\n        const aspectRatioChange = rotation % 180 === 0 ? 1 : newWidth / newHeight;\n        context.translate(canvasWidth / 2, canvasHeight / 2);\n        context.rotate(rotation * Math.PI / 180);\n        // This aspect ratio compensation is done so that we can draw the sample with the intended dimensions and\n        // don't need to think about how those dimensions change after the rotation\n        context.scale(1 / aspectRatioChange, aspectRatioChange);\n        context.translate(-canvasWidth / 2, -canvasHeight / 2);\n        // Important that we don't use .draw() here since that would take rotation into account, but we wanna handle it\n        // ourselves here\n        context.drawImage(this.toCanvasImageSource(), sx, sy, sWidth, sHeight, dx, dy, newWidth, newHeight);\n    }\n    /** @internal */\n    _rotateSourceRegion(sx, sy, sWidth, sHeight, rotation) {\n        // The provided sx,sy,sWidth,sHeight refer to the final rotated image, but that's not actually how the image is\n        // stored. Therefore, we must map these back onto the original, pre-rotation image.\n        if (rotation === 90) {\n            [sx, sy, sWidth, sHeight] = [\n                sy,\n                this.codedHeight - sx - sWidth,\n                sHeight,\n                sWidth,\n            ];\n        }\n        else if (rotation === 180) {\n            [sx, sy] = [\n                this.codedWidth - sx - sWidth,\n                this.codedHeight - sy - sHeight,\n            ];\n        }\n        else if (rotation === 270) {\n            [sx, sy, sWidth, sHeight] = [\n                this.codedWidth - sy - sHeight,\n                sx,\n                sHeight,\n                sWidth,\n            ];\n        }\n        return { sx, sy, sWidth, sHeight };\n    }\n    /**\n     * Converts this video sample to a\n     * [`CanvasImageSource`](https://udn.realityripple.com/docs/Web/API/CanvasImageSource) for drawing to a canvas.\n     *\n     * You must use the value returned by this method immediately, as any VideoFrame created internally will\n     * automatically be closed in the next microtask.\n     */\n    toCanvasImageSource() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        assert(this._data !== null);\n        if (this._data instanceof Uint8Array) {\n            // Requires VideoFrame to be defined\n            const videoFrame = this.toVideoFrame();\n            queueMicrotask(() => videoFrame.close()); // Let's automatically close the frame in the next microtask\n            return videoFrame;\n        }\n        else {\n            return this._data;\n        }\n    }\n    /** Sets the rotation metadata of this video sample. */\n    setRotation(newRotation) {\n        if (![0, 90, 180, 270].includes(newRotation)) {\n            throw new TypeError('newRotation must be 0, 90, 180, or 270.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.rotation = newRotation;\n    }\n    /** Sets the presentation timestamp of this video sample, in seconds. */\n    setTimestamp(newTimestamp) {\n        if (!Number.isFinite(newTimestamp)) {\n            throw new TypeError('newTimestamp must be a number.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.timestamp = newTimestamp;\n    }\n    /** Sets the duration of this video sample, in seconds. */\n    setDuration(newDuration) {\n        if (!Number.isFinite(newDuration) || newDuration < 0) {\n            throw new TypeError('newDuration must be a non-negative number.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.duration = newDuration;\n    }\n    /** Calls `.close()`. */\n    [Symbol.dispose]() {\n        this.close();\n    }\n}\nconst isVideoFrame = (x) => {\n    return typeof VideoFrame !== 'undefined' && x instanceof VideoFrame;\n};\nexport const clampCropRectangle = (crop, outerWidth, outerHeight) => {\n    crop.left = Math.min(crop.left, outerWidth);\n    crop.top = Math.min(crop.top, outerHeight);\n    crop.width = Math.min(crop.width, outerWidth - crop.left);\n    crop.height = Math.min(crop.height, outerHeight - crop.top);\n    assert(crop.width >= 0);\n    assert(crop.height >= 0);\n};\nexport const validateCropRectangle = (crop, prefix) => {\n    if (!crop || typeof crop !== 'object') {\n        throw new TypeError(prefix + 'crop, when provided, must be an object.');\n    }\n    if (!Number.isInteger(crop.left) || crop.left < 0) {\n        throw new TypeError(prefix + 'crop.left must be a non-negative integer.');\n    }\n    if (!Number.isInteger(crop.top) || crop.top < 0) {\n        throw new TypeError(prefix + 'crop.top must be a non-negative integer.');\n    }\n    if (!Number.isInteger(crop.width) || crop.width < 0) {\n        throw new TypeError(prefix + 'crop.width must be a non-negative integer.');\n    }\n    if (!Number.isInteger(crop.height) || crop.height < 0) {\n        throw new TypeError(prefix + 'crop.height must be a non-negative integer.');\n    }\n};\nconst AUDIO_SAMPLE_FORMATS = new Set(['f32', 'f32-planar', 's16', 's16-planar', 's32', 's32-planar', 'u8', 'u8-planar']);\n/**\n * Represents a raw, unencoded audio sample. Mainly used as an expressive wrapper around WebCodecs API's\n * [`AudioData`](https://developer.mozilla.org/en-US/docs/Web/API/AudioData), but can also be used standalone.\n * @group Samples\n * @public\n */\nexport class AudioSample {\n    /** The presentation timestamp of the sample in microseconds. */\n    get microsecondTimestamp() {\n        return Math.trunc(SECOND_TO_MICROSECOND_FACTOR * this.timestamp);\n    }\n    /** The duration of the sample in microseconds. */\n    get microsecondDuration() {\n        return Math.trunc(SECOND_TO_MICROSECOND_FACTOR * this.duration);\n    }\n    /**\n     * Creates a new {@link AudioSample}, either from an existing\n     * [`AudioData`](https://developer.mozilla.org/en-US/docs/Web/API/AudioData) or from raw bytes specified in\n     * {@link AudioSampleInit}.\n     */\n    constructor(init) {\n        /** @internal */\n        this._closed = false;\n        if (isAudioData(init)) {\n            if (init.format === null) {\n                throw new TypeError('AudioData with null format is not supported.');\n            }\n            this._data = init;\n            this.format = init.format;\n            this.sampleRate = init.sampleRate;\n            this.numberOfFrames = init.numberOfFrames;\n            this.numberOfChannels = init.numberOfChannels;\n            this.timestamp = init.timestamp / 1e6;\n            this.duration = init.numberOfFrames / init.sampleRate;\n        }\n        else {\n            if (!init || typeof init !== 'object') {\n                throw new TypeError('Invalid AudioDataInit: must be an object.');\n            }\n            if (!AUDIO_SAMPLE_FORMATS.has(init.format)) {\n                throw new TypeError('Invalid AudioDataInit: invalid format.');\n            }\n            if (!Number.isFinite(init.sampleRate) || init.sampleRate <= 0) {\n                throw new TypeError('Invalid AudioDataInit: sampleRate must be > 0.');\n            }\n            if (!Number.isInteger(init.numberOfChannels) || init.numberOfChannels === 0) {\n                throw new TypeError('Invalid AudioDataInit: numberOfChannels must be an integer > 0.');\n            }\n            if (!Number.isFinite(init?.timestamp)) {\n                throw new TypeError('init.timestamp must be a number.');\n            }\n            const numberOfFrames = init.data.byteLength / (getBytesPerSample(init.format) * init.numberOfChannels);\n            if (!Number.isInteger(numberOfFrames)) {\n                throw new TypeError('Invalid AudioDataInit: data size is not a multiple of frame size.');\n            }\n            this.format = init.format;\n            this.sampleRate = init.sampleRate;\n            this.numberOfFrames = numberOfFrames;\n            this.numberOfChannels = init.numberOfChannels;\n            this.timestamp = init.timestamp;\n            this.duration = numberOfFrames / init.sampleRate;\n            let dataBuffer;\n            if (init.data instanceof ArrayBuffer) {\n                dataBuffer = new Uint8Array(init.data);\n            }\n            else if (ArrayBuffer.isView(init.data)) {\n                dataBuffer = new Uint8Array(init.data.buffer, init.data.byteOffset, init.data.byteLength);\n            }\n            else {\n                throw new TypeError('Invalid AudioDataInit: data is not a BufferSource.');\n            }\n            const expectedSize = this.numberOfFrames * this.numberOfChannels * getBytesPerSample(this.format);\n            if (dataBuffer.byteLength < expectedSize) {\n                throw new TypeError('Invalid AudioDataInit: insufficient data size.');\n            }\n            this._data = dataBuffer;\n        }\n    }\n    /** Returns the number of bytes required to hold the audio sample's data as specified by the given options. */\n    allocationSize(options) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!Number.isInteger(options.planeIndex) || options.planeIndex < 0) {\n            throw new TypeError('planeIndex must be a non-negative integer.');\n        }\n        if (options.format !== undefined && !AUDIO_SAMPLE_FORMATS.has(options.format)) {\n            throw new TypeError('Invalid format.');\n        }\n        if (options.frameOffset !== undefined && (!Number.isInteger(options.frameOffset) || options.frameOffset < 0)) {\n            throw new TypeError('frameOffset must be a non-negative integer.');\n        }\n        if (options.frameCount !== undefined && (!Number.isInteger(options.frameCount) || options.frameCount < 0)) {\n            throw new TypeError('frameCount must be a non-negative integer.');\n        }\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        const destFormat = options.format ?? this.format;\n        const frameOffset = options.frameOffset ?? 0;\n        if (frameOffset >= this.numberOfFrames) {\n            throw new RangeError('frameOffset out of range');\n        }\n        const copyFrameCount = options.frameCount !== undefined ? options.frameCount : (this.numberOfFrames - frameOffset);\n        if (copyFrameCount > (this.numberOfFrames - frameOffset)) {\n            throw new RangeError('frameCount out of range');\n        }\n        const bytesPerSample = getBytesPerSample(destFormat);\n        const isPlanar = formatIsPlanar(destFormat);\n        if (isPlanar && options.planeIndex >= this.numberOfChannels) {\n            throw new RangeError('planeIndex out of range');\n        }\n        if (!isPlanar && options.planeIndex !== 0) {\n            throw new RangeError('planeIndex out of range');\n        }\n        const elementCount = isPlanar ? copyFrameCount : copyFrameCount * this.numberOfChannels;\n        return elementCount * bytesPerSample;\n    }\n    /** Copies the audio sample's data to an ArrayBuffer or ArrayBufferView as specified by the given options. */\n    copyTo(destination, options) {\n        if (!isAllowSharedBufferSource(destination)) {\n            throw new TypeError('destination must be an ArrayBuffer or an ArrayBuffer view.');\n        }\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!Number.isInteger(options.planeIndex) || options.planeIndex < 0) {\n            throw new TypeError('planeIndex must be a non-negative integer.');\n        }\n        if (options.format !== undefined && !AUDIO_SAMPLE_FORMATS.has(options.format)) {\n            throw new TypeError('Invalid format.');\n        }\n        if (options.frameOffset !== undefined && (!Number.isInteger(options.frameOffset) || options.frameOffset < 0)) {\n            throw new TypeError('frameOffset must be a non-negative integer.');\n        }\n        if (options.frameCount !== undefined && (!Number.isInteger(options.frameCount) || options.frameCount < 0)) {\n            throw new TypeError('frameCount must be a non-negative integer.');\n        }\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        const { planeIndex, format, frameCount: optFrameCount, frameOffset: optFrameOffset } = options;\n        const destFormat = format ?? this.format;\n        if (!destFormat)\n            throw new Error('Destination format not determined');\n        const numFrames = this.numberOfFrames;\n        const numChannels = this.numberOfChannels;\n        const frameOffset = optFrameOffset ?? 0;\n        if (frameOffset >= numFrames) {\n            throw new RangeError('frameOffset out of range');\n        }\n        const copyFrameCount = optFrameCount !== undefined ? optFrameCount : (numFrames - frameOffset);\n        if (copyFrameCount > (numFrames - frameOffset)) {\n            throw new RangeError('frameCount out of range');\n        }\n        const destBytesPerSample = getBytesPerSample(destFormat);\n        const destIsPlanar = formatIsPlanar(destFormat);\n        if (destIsPlanar && planeIndex >= numChannels) {\n            throw new RangeError('planeIndex out of range');\n        }\n        if (!destIsPlanar && planeIndex !== 0) {\n            throw new RangeError('planeIndex out of range');\n        }\n        const destElementCount = destIsPlanar ? copyFrameCount : copyFrameCount * numChannels;\n        const requiredSize = destElementCount * destBytesPerSample;\n        if (destination.byteLength < requiredSize) {\n            throw new RangeError('Destination buffer is too small');\n        }\n        const destView = toDataView(destination);\n        const writeFn = getWriteFunction(destFormat);\n        if (isAudioData(this._data)) {\n            if (destIsPlanar) {\n                if (destFormat === 'f32-planar') {\n                    // Simple, since the browser must support f32-planar, we can just delegate here\n                    this._data.copyTo(destination, {\n                        planeIndex,\n                        frameOffset,\n                        frameCount: copyFrameCount,\n                        format: 'f32-planar',\n                    });\n                }\n                else {\n                    // Allocate temporary buffer for f32-planar data\n                    const tempBuffer = new ArrayBuffer(copyFrameCount * 4);\n                    const tempArray = new Float32Array(tempBuffer);\n                    this._data.copyTo(tempArray, {\n                        planeIndex,\n                        frameOffset,\n                        frameCount: copyFrameCount,\n                        format: 'f32-planar',\n                    });\n                    // Convert each f32 sample to destination format\n                    const tempView = new DataView(tempBuffer);\n                    for (let i = 0; i < copyFrameCount; i++) {\n                        const destOffset = i * destBytesPerSample;\n                        const sample = tempView.getFloat32(i * 4, true);\n                        writeFn(destView, destOffset, sample);\n                    }\n                }\n            }\n            else {\n                // Destination is interleaved.\n                // Allocate a temporary Float32Array to hold one channel's worth of data.\n                const numCh = numChannels;\n                const temp = new Float32Array(copyFrameCount);\n                for (let ch = 0; ch < numCh; ch++) {\n                    this._data.copyTo(temp, {\n                        planeIndex: ch,\n                        frameOffset,\n                        frameCount: copyFrameCount,\n                        format: 'f32-planar',\n                    });\n                    for (let i = 0; i < copyFrameCount; i++) {\n                        const destIndex = i * numCh + ch;\n                        const destOffset = destIndex * destBytesPerSample;\n                        writeFn(destView, destOffset, temp[i]);\n                    }\n                }\n            }\n        }\n        else {\n            // Branch for Uint8Array data (non-AudioData)\n            const uint8Data = this._data;\n            const srcView = new DataView(uint8Data.buffer, uint8Data.byteOffset, uint8Data.byteLength);\n            const srcFormat = this.format;\n            const readFn = getReadFunction(srcFormat);\n            const srcBytesPerSample = getBytesPerSample(srcFormat);\n            const srcIsPlanar = formatIsPlanar(srcFormat);\n            for (let i = 0; i < copyFrameCount; i++) {\n                if (destIsPlanar) {\n                    const destOffset = i * destBytesPerSample;\n                    let srcOffset;\n                    if (srcIsPlanar) {\n                        srcOffset = (planeIndex * numFrames + (i + frameOffset)) * srcBytesPerSample;\n                    }\n                    else {\n                        srcOffset = (((i + frameOffset) * numChannels) + planeIndex) * srcBytesPerSample;\n                    }\n                    const normalized = readFn(srcView, srcOffset);\n                    writeFn(destView, destOffset, normalized);\n                }\n                else {\n                    for (let ch = 0; ch < numChannels; ch++) {\n                        const destIndex = i * numChannels + ch;\n                        const destOffset = destIndex * destBytesPerSample;\n                        let srcOffset;\n                        if (srcIsPlanar) {\n                            srcOffset = (ch * numFrames + (i + frameOffset)) * srcBytesPerSample;\n                        }\n                        else {\n                            srcOffset = (((i + frameOffset) * numChannels) + ch) * srcBytesPerSample;\n                        }\n                        const normalized = readFn(srcView, srcOffset);\n                        writeFn(destView, destOffset, normalized);\n                    }\n                }\n            }\n        }\n    }\n    /** Clones this audio sample. */\n    clone() {\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        if (isAudioData(this._data)) {\n            const sample = new AudioSample(this._data.clone());\n            sample.setTimestamp(this.timestamp); // Make sure the timestamp is precise (beyond microsecond accuracy)\n            return sample;\n        }\n        else {\n            return new AudioSample({\n                format: this.format,\n                sampleRate: this.sampleRate,\n                numberOfFrames: this.numberOfFrames,\n                numberOfChannels: this.numberOfChannels,\n                timestamp: this.timestamp,\n                data: this._data,\n            });\n        }\n    }\n    /**\n     * Closes this audio sample, releasing held resources. Audio samples should be closed as soon as they are not\n     * needed anymore.\n     */\n    close() {\n        if (this._closed) {\n            return;\n        }\n        if (isAudioData(this._data)) {\n            this._data.close();\n        }\n        else {\n            this._data = new Uint8Array(0);\n        }\n        this._closed = true;\n    }\n    /**\n     * Converts this audio sample to an AudioData for use with the WebCodecs API. The AudioData returned by this\n     * method *must* be closed separately from this audio sample.\n     */\n    toAudioData() {\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        if (isAudioData(this._data)) {\n            if (this._data.timestamp === this.microsecondTimestamp) {\n                // Timestamp matches, let's just return the data (but cloned)\n                return this._data.clone();\n            }\n            else {\n                // It's impossible to simply change an AudioData's timestamp, so we'll need to create a new one\n                if (formatIsPlanar(this.format)) {\n                    const size = this.allocationSize({ planeIndex: 0, format: this.format });\n                    const data = new ArrayBuffer(size * this.numberOfChannels);\n                    // We gotta read out each plane individually\n                    for (let i = 0; i < this.numberOfChannels; i++) {\n                        this.copyTo(new Uint8Array(data, i * size, size), { planeIndex: i, format: this.format });\n                    }\n                    return new AudioData({\n                        format: this.format,\n                        sampleRate: this.sampleRate,\n                        numberOfFrames: this.numberOfFrames,\n                        numberOfChannels: this.numberOfChannels,\n                        timestamp: this.microsecondTimestamp,\n                        data,\n                    });\n                }\n                else {\n                    const data = new ArrayBuffer(this.allocationSize({ planeIndex: 0, format: this.format }));\n                    this.copyTo(data, { planeIndex: 0, format: this.format });\n                    return new AudioData({\n                        format: this.format,\n                        sampleRate: this.sampleRate,\n                        numberOfFrames: this.numberOfFrames,\n                        numberOfChannels: this.numberOfChannels,\n                        timestamp: this.microsecondTimestamp,\n                        data,\n                    });\n                }\n            }\n        }\n        else {\n            return new AudioData({\n                format: this.format,\n                sampleRate: this.sampleRate,\n                numberOfFrames: this.numberOfFrames,\n                numberOfChannels: this.numberOfChannels,\n                timestamp: this.microsecondTimestamp,\n                data: this._data,\n            });\n        }\n    }\n    /** Convert this audio sample to an AudioBuffer for use with the Web Audio API. */\n    toAudioBuffer() {\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        const audioBuffer = new AudioBuffer({\n            numberOfChannels: this.numberOfChannels,\n            length: this.numberOfFrames,\n            sampleRate: this.sampleRate,\n        });\n        const dataBytes = new Float32Array(this.allocationSize({ planeIndex: 0, format: 'f32-planar' }) / 4);\n        for (let i = 0; i < this.numberOfChannels; i++) {\n            this.copyTo(dataBytes, { planeIndex: i, format: 'f32-planar' });\n            audioBuffer.copyToChannel(dataBytes, i);\n        }\n        return audioBuffer;\n    }\n    /** Sets the presentation timestamp of this audio sample, in seconds. */\n    setTimestamp(newTimestamp) {\n        if (!Number.isFinite(newTimestamp)) {\n            throw new TypeError('newTimestamp must be a number.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.timestamp = newTimestamp;\n    }\n    /** Calls `.close()`. */\n    [Symbol.dispose]() {\n        this.close();\n    }\n    /** @internal */\n    static *_fromAudioBuffer(audioBuffer, timestamp) {\n        if (!(audioBuffer instanceof AudioBuffer)) {\n            throw new TypeError('audioBuffer must be an AudioBuffer.');\n        }\n        const MAX_FLOAT_COUNT = 48000 * 5; // 5 seconds of mono 48 kHz audio per sample\n        const numberOfChannels = audioBuffer.numberOfChannels;\n        const sampleRate = audioBuffer.sampleRate;\n        const totalFrames = audioBuffer.length;\n        const maxFramesPerChunk = Math.floor(MAX_FLOAT_COUNT / numberOfChannels);\n        let currentRelativeFrame = 0;\n        let remainingFrames = totalFrames;\n        // Create AudioSamples in a chunked fashion so we don't create huge Float32Arrays\n        while (remainingFrames > 0) {\n            const framesToCopy = Math.min(maxFramesPerChunk, remainingFrames);\n            const chunkData = new Float32Array(numberOfChannels * framesToCopy);\n            for (let channel = 0; channel < numberOfChannels; channel++) {\n                audioBuffer.copyFromChannel(chunkData.subarray(channel * framesToCopy, (channel + 1) * framesToCopy), channel, currentRelativeFrame);\n            }\n            yield new AudioSample({\n                format: 'f32-planar',\n                sampleRate,\n                numberOfFrames: framesToCopy,\n                numberOfChannels,\n                timestamp: timestamp + currentRelativeFrame / sampleRate,\n                data: chunkData,\n            });\n            currentRelativeFrame += framesToCopy;\n            remainingFrames -= framesToCopy;\n        }\n    }\n    /**\n     * Creates AudioSamples from an AudioBuffer, starting at the given timestamp in seconds. Typically creates exactly\n     * one sample, but may create multiple if the AudioBuffer is exceedingly large.\n     */\n    static fromAudioBuffer(audioBuffer, timestamp) {\n        if (!(audioBuffer instanceof AudioBuffer)) {\n            throw new TypeError('audioBuffer must be an AudioBuffer.');\n        }\n        const MAX_FLOAT_COUNT = 48000 * 5; // 5 seconds of mono 48 kHz audio per sample\n        const numberOfChannels = audioBuffer.numberOfChannels;\n        const sampleRate = audioBuffer.sampleRate;\n        const totalFrames = audioBuffer.length;\n        const maxFramesPerChunk = Math.floor(MAX_FLOAT_COUNT / numberOfChannels);\n        let currentRelativeFrame = 0;\n        let remainingFrames = totalFrames;\n        const result = [];\n        // Create AudioSamples in a chunked fashion so we don't create huge Float32Arrays\n        while (remainingFrames > 0) {\n            const framesToCopy = Math.min(maxFramesPerChunk, remainingFrames);\n            const chunkData = new Float32Array(numberOfChannels * framesToCopy);\n            for (let channel = 0; channel < numberOfChannels; channel++) {\n                audioBuffer.copyFromChannel(chunkData.subarray(channel * framesToCopy, (channel + 1) * framesToCopy), channel, currentRelativeFrame);\n            }\n            const audioSample = new AudioSample({\n                format: 'f32-planar',\n                sampleRate,\n                numberOfFrames: framesToCopy,\n                numberOfChannels,\n                timestamp: timestamp + currentRelativeFrame / sampleRate,\n                data: chunkData,\n            });\n            result.push(audioSample);\n            currentRelativeFrame += framesToCopy;\n            remainingFrames -= framesToCopy;\n        }\n        return result;\n    }\n}\nconst getBytesPerSample = (format) => {\n    switch (format) {\n        case 'u8':\n        case 'u8-planar':\n            return 1;\n        case 's16':\n        case 's16-planar':\n            return 2;\n        case 's32':\n        case 's32-planar':\n            return 4;\n        case 'f32':\n        case 'f32-planar':\n            return 4;\n        default:\n            throw new Error('Unknown AudioSampleFormat');\n    }\n};\nconst formatIsPlanar = (format) => {\n    switch (format) {\n        case 'u8-planar':\n        case 's16-planar':\n        case 's32-planar':\n        case 'f32-planar':\n            return true;\n        default:\n            return false;\n    }\n};\nconst getReadFunction = (format) => {\n    switch (format) {\n        case 'u8':\n        case 'u8-planar':\n            return (view, offset) => (view.getUint8(offset) - 128) / 128;\n        case 's16':\n        case 's16-planar':\n            return (view, offset) => view.getInt16(offset, true) / 32768;\n        case 's32':\n        case 's32-planar':\n            return (view, offset) => view.getInt32(offset, true) / 2147483648;\n        case 'f32':\n        case 'f32-planar':\n            return (view, offset) => view.getFloat32(offset, true);\n    }\n};\nconst getWriteFunction = (format) => {\n    switch (format) {\n        case 'u8':\n        case 'u8-planar':\n            return (view, offset, value) => view.setUint8(offset, clamp((value + 1) * 127.5, 0, 255));\n        case 's16':\n        case 's16-planar':\n            return (view, offset, value) => view.setInt16(offset, clamp(Math.round(value * 32767), -32768, 32767), true);\n        case 's32':\n        case 's32-planar':\n            return (view, offset, value) => view.setInt32(offset, clamp(Math.round(value * 2147483647), -2147483648, 2147483647), true);\n        case 'f32':\n        case 'f32-planar':\n            return (view, offset, value) => view.setFloat32(offset, value, true);\n    }\n};\nconst isAudioData = (x) => {\n    return typeof AudioData !== 'undefined' && x instanceof AudioData;\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { assertNever, textDecoder, textEncoder } from '../misc.js';\nimport { readBytes, readF32Be, readF64Be, readU8 } from '../reader.js';\n/** Wrapper around a number to be able to differentiate it in the writer. */\nexport class EBMLFloat32 {\n    constructor(value) {\n        this.value = value;\n    }\n}\n/** Wrapper around a number to be able to differentiate it in the writer. */\nexport class EBMLFloat64 {\n    constructor(value) {\n        this.value = value;\n    }\n}\n/** Wrapper around a number to be able to differentiate it in the writer. */\nexport class EBMLSignedInt {\n    constructor(value) {\n        this.value = value;\n    }\n}\nexport class EBMLUnicodeString {\n    constructor(value) {\n        this.value = value;\n    }\n}\n/** Defines some of the EBML IDs used by Matroska files. */\nexport var EBMLId;\n(function (EBMLId) {\n    EBMLId[EBMLId[\"EBML\"] = 440786851] = \"EBML\";\n    EBMLId[EBMLId[\"EBMLVersion\"] = 17030] = \"EBMLVersion\";\n    EBMLId[EBMLId[\"EBMLReadVersion\"] = 17143] = \"EBMLReadVersion\";\n    EBMLId[EBMLId[\"EBMLMaxIDLength\"] = 17138] = \"EBMLMaxIDLength\";\n    EBMLId[EBMLId[\"EBMLMaxSizeLength\"] = 17139] = \"EBMLMaxSizeLength\";\n    EBMLId[EBMLId[\"DocType\"] = 17026] = \"DocType\";\n    EBMLId[EBMLId[\"DocTypeVersion\"] = 17031] = \"DocTypeVersion\";\n    EBMLId[EBMLId[\"DocTypeReadVersion\"] = 17029] = \"DocTypeReadVersion\";\n    EBMLId[EBMLId[\"Void\"] = 236] = \"Void\";\n    EBMLId[EBMLId[\"Segment\"] = 408125543] = \"Segment\";\n    EBMLId[EBMLId[\"SeekHead\"] = 290298740] = \"SeekHead\";\n    EBMLId[EBMLId[\"Seek\"] = 19899] = \"Seek\";\n    EBMLId[EBMLId[\"SeekID\"] = 21419] = \"SeekID\";\n    EBMLId[EBMLId[\"SeekPosition\"] = 21420] = \"SeekPosition\";\n    EBMLId[EBMLId[\"Duration\"] = 17545] = \"Duration\";\n    EBMLId[EBMLId[\"Info\"] = 357149030] = \"Info\";\n    EBMLId[EBMLId[\"TimestampScale\"] = 2807729] = \"TimestampScale\";\n    EBMLId[EBMLId[\"MuxingApp\"] = 19840] = \"MuxingApp\";\n    EBMLId[EBMLId[\"WritingApp\"] = 22337] = \"WritingApp\";\n    EBMLId[EBMLId[\"Tracks\"] = 374648427] = \"Tracks\";\n    EBMLId[EBMLId[\"TrackEntry\"] = 174] = \"TrackEntry\";\n    EBMLId[EBMLId[\"TrackNumber\"] = 215] = \"TrackNumber\";\n    EBMLId[EBMLId[\"TrackUID\"] = 29637] = \"TrackUID\";\n    EBMLId[EBMLId[\"TrackType\"] = 131] = \"TrackType\";\n    EBMLId[EBMLId[\"FlagEnabled\"] = 185] = \"FlagEnabled\";\n    EBMLId[EBMLId[\"FlagDefault\"] = 136] = \"FlagDefault\";\n    EBMLId[EBMLId[\"FlagForced\"] = 21930] = \"FlagForced\";\n    EBMLId[EBMLId[\"FlagLacing\"] = 156] = \"FlagLacing\";\n    EBMLId[EBMLId[\"Name\"] = 21358] = \"Name\";\n    EBMLId[EBMLId[\"Language\"] = 2274716] = \"Language\";\n    EBMLId[EBMLId[\"LanguageBCP47\"] = 2274717] = \"LanguageBCP47\";\n    EBMLId[EBMLId[\"CodecID\"] = 134] = \"CodecID\";\n    EBMLId[EBMLId[\"CodecPrivate\"] = 25506] = \"CodecPrivate\";\n    EBMLId[EBMLId[\"CodecDelay\"] = 22186] = \"CodecDelay\";\n    EBMLId[EBMLId[\"SeekPreRoll\"] = 22203] = \"SeekPreRoll\";\n    EBMLId[EBMLId[\"DefaultDuration\"] = 2352003] = \"DefaultDuration\";\n    EBMLId[EBMLId[\"Video\"] = 224] = \"Video\";\n    EBMLId[EBMLId[\"PixelWidth\"] = 176] = \"PixelWidth\";\n    EBMLId[EBMLId[\"PixelHeight\"] = 186] = \"PixelHeight\";\n    EBMLId[EBMLId[\"AlphaMode\"] = 21440] = \"AlphaMode\";\n    EBMLId[EBMLId[\"Audio\"] = 225] = \"Audio\";\n    EBMLId[EBMLId[\"SamplingFrequency\"] = 181] = \"SamplingFrequency\";\n    EBMLId[EBMLId[\"Channels\"] = 159] = \"Channels\";\n    EBMLId[EBMLId[\"BitDepth\"] = 25188] = \"BitDepth\";\n    EBMLId[EBMLId[\"SimpleBlock\"] = 163] = \"SimpleBlock\";\n    EBMLId[EBMLId[\"BlockGroup\"] = 160] = \"BlockGroup\";\n    EBMLId[EBMLId[\"Block\"] = 161] = \"Block\";\n    EBMLId[EBMLId[\"BlockAdditions\"] = 30113] = \"BlockAdditions\";\n    EBMLId[EBMLId[\"BlockMore\"] = 166] = \"BlockMore\";\n    EBMLId[EBMLId[\"BlockAdditional\"] = 165] = \"BlockAdditional\";\n    EBMLId[EBMLId[\"BlockAddID\"] = 238] = \"BlockAddID\";\n    EBMLId[EBMLId[\"BlockDuration\"] = 155] = \"BlockDuration\";\n    EBMLId[EBMLId[\"ReferenceBlock\"] = 251] = \"ReferenceBlock\";\n    EBMLId[EBMLId[\"Cluster\"] = 524531317] = \"Cluster\";\n    EBMLId[EBMLId[\"Timestamp\"] = 231] = \"Timestamp\";\n    EBMLId[EBMLId[\"Cues\"] = 475249515] = \"Cues\";\n    EBMLId[EBMLId[\"CuePoint\"] = 187] = \"CuePoint\";\n    EBMLId[EBMLId[\"CueTime\"] = 179] = \"CueTime\";\n    EBMLId[EBMLId[\"CueTrackPositions\"] = 183] = \"CueTrackPositions\";\n    EBMLId[EBMLId[\"CueTrack\"] = 247] = \"CueTrack\";\n    EBMLId[EBMLId[\"CueClusterPosition\"] = 241] = \"CueClusterPosition\";\n    EBMLId[EBMLId[\"Colour\"] = 21936] = \"Colour\";\n    EBMLId[EBMLId[\"MatrixCoefficients\"] = 21937] = \"MatrixCoefficients\";\n    EBMLId[EBMLId[\"TransferCharacteristics\"] = 21946] = \"TransferCharacteristics\";\n    EBMLId[EBMLId[\"Primaries\"] = 21947] = \"Primaries\";\n    EBMLId[EBMLId[\"Range\"] = 21945] = \"Range\";\n    EBMLId[EBMLId[\"Projection\"] = 30320] = \"Projection\";\n    EBMLId[EBMLId[\"ProjectionType\"] = 30321] = \"ProjectionType\";\n    EBMLId[EBMLId[\"ProjectionPoseRoll\"] = 30325] = \"ProjectionPoseRoll\";\n    EBMLId[EBMLId[\"Attachments\"] = 423732329] = \"Attachments\";\n    EBMLId[EBMLId[\"AttachedFile\"] = 24999] = \"AttachedFile\";\n    EBMLId[EBMLId[\"FileDescription\"] = 18046] = \"FileDescription\";\n    EBMLId[EBMLId[\"FileName\"] = 18030] = \"FileName\";\n    EBMLId[EBMLId[\"FileMediaType\"] = 18016] = \"FileMediaType\";\n    EBMLId[EBMLId[\"FileData\"] = 18012] = \"FileData\";\n    EBMLId[EBMLId[\"FileUID\"] = 18094] = \"FileUID\";\n    EBMLId[EBMLId[\"Chapters\"] = 272869232] = \"Chapters\";\n    EBMLId[EBMLId[\"Tags\"] = 307544935] = \"Tags\";\n    EBMLId[EBMLId[\"Tag\"] = 29555] = \"Tag\";\n    EBMLId[EBMLId[\"Targets\"] = 25536] = \"Targets\";\n    EBMLId[EBMLId[\"TargetTypeValue\"] = 26826] = \"TargetTypeValue\";\n    EBMLId[EBMLId[\"TargetType\"] = 25546] = \"TargetType\";\n    EBMLId[EBMLId[\"TagTrackUID\"] = 25541] = \"TagTrackUID\";\n    EBMLId[EBMLId[\"TagEditionUID\"] = 25545] = \"TagEditionUID\";\n    EBMLId[EBMLId[\"TagChapterUID\"] = 25540] = \"TagChapterUID\";\n    EBMLId[EBMLId[\"TagAttachmentUID\"] = 25542] = \"TagAttachmentUID\";\n    EBMLId[EBMLId[\"SimpleTag\"] = 26568] = \"SimpleTag\";\n    EBMLId[EBMLId[\"TagName\"] = 17827] = \"TagName\";\n    EBMLId[EBMLId[\"TagLanguage\"] = 17530] = \"TagLanguage\";\n    EBMLId[EBMLId[\"TagString\"] = 17543] = \"TagString\";\n    EBMLId[EBMLId[\"TagBinary\"] = 17541] = \"TagBinary\";\n    EBMLId[EBMLId[\"ContentEncodings\"] = 28032] = \"ContentEncodings\";\n    EBMLId[EBMLId[\"ContentEncoding\"] = 25152] = \"ContentEncoding\";\n    EBMLId[EBMLId[\"ContentEncodingOrder\"] = 20529] = \"ContentEncodingOrder\";\n    EBMLId[EBMLId[\"ContentEncodingScope\"] = 20530] = \"ContentEncodingScope\";\n    EBMLId[EBMLId[\"ContentCompression\"] = 20532] = \"ContentCompression\";\n    EBMLId[EBMLId[\"ContentCompAlgo\"] = 16980] = \"ContentCompAlgo\";\n    EBMLId[EBMLId[\"ContentCompSettings\"] = 16981] = \"ContentCompSettings\";\n    EBMLId[EBMLId[\"ContentEncryption\"] = 20533] = \"ContentEncryption\";\n})(EBMLId || (EBMLId = {}));\nexport const LEVEL_0_EBML_IDS = [\n    EBMLId.EBML,\n    EBMLId.Segment,\n];\n// All the stuff that can appear in a segment, basically\nexport const LEVEL_1_EBML_IDS = [\n    EBMLId.SeekHead,\n    EBMLId.Info,\n    EBMLId.Cluster,\n    EBMLId.Tracks,\n    EBMLId.Cues,\n    EBMLId.Attachments,\n    EBMLId.Chapters,\n    EBMLId.Tags,\n];\nexport const LEVEL_0_AND_1_EBML_IDS = [\n    ...LEVEL_0_EBML_IDS,\n    ...LEVEL_1_EBML_IDS,\n];\nexport const measureUnsignedInt = (value) => {\n    if (value < (1 << 8)) {\n        return 1;\n    }\n    else if (value < (1 << 16)) {\n        return 2;\n    }\n    else if (value < (1 << 24)) {\n        return 3;\n    }\n    else if (value < 2 ** 32) {\n        return 4;\n    }\n    else if (value < 2 ** 40) {\n        return 5;\n    }\n    else {\n        return 6;\n    }\n};\nexport const measureUnsignedBigInt = (value) => {\n    if (value < (1n << 8n)) {\n        return 1;\n    }\n    else if (value < (1n << 16n)) {\n        return 2;\n    }\n    else if (value < (1n << 24n)) {\n        return 3;\n    }\n    else if (value < (1n << 32n)) {\n        return 4;\n    }\n    else if (value < (1n << 40n)) {\n        return 5;\n    }\n    else if (value < (1n << 48n)) {\n        return 6;\n    }\n    else if (value < (1n << 56n)) {\n        return 7;\n    }\n    else {\n        return 8;\n    }\n};\nexport const measureSignedInt = (value) => {\n    if (value >= -(1 << 6) && value < (1 << 6)) {\n        return 1;\n    }\n    else if (value >= -(1 << 13) && value < (1 << 13)) {\n        return 2;\n    }\n    else if (value >= -(1 << 20) && value < (1 << 20)) {\n        return 3;\n    }\n    else if (value >= -(1 << 27) && value < (1 << 27)) {\n        return 4;\n    }\n    else if (value >= -(2 ** 34) && value < 2 ** 34) {\n        return 5;\n    }\n    else {\n        return 6;\n    }\n};\nexport const measureVarInt = (value) => {\n    if (value < (1 << 7) - 1) {\n        /** Top bit is set, leaving 7 bits to hold the integer, but we can't store\n         * 127 because \"all bits set to one\" is a reserved value. Same thing for the\n         * other cases below:\n         */\n        return 1;\n    }\n    else if (value < (1 << 14) - 1) {\n        return 2;\n    }\n    else if (value < (1 << 21) - 1) {\n        return 3;\n    }\n    else if (value < (1 << 28) - 1) {\n        return 4;\n    }\n    else if (value < 2 ** 35 - 1) {\n        return 5;\n    }\n    else if (value < 2 ** 42 - 1) {\n        return 6;\n    }\n    else {\n        throw new Error('EBML varint size not supported ' + value);\n    }\n};\nexport class EBMLWriter {\n    constructor(writer) {\n        this.writer = writer;\n        this.helper = new Uint8Array(8);\n        this.helperView = new DataView(this.helper.buffer);\n        /**\n         * Stores the position from the start of the file to where EBML elements have been written. This is used to\n         * rewrite/edit elements that were already added before, and to measure sizes of things.\n         */\n        this.offsets = new WeakMap();\n        /** Same as offsets, but stores position where the element's data starts (after ID and size fields). */\n        this.dataOffsets = new WeakMap();\n    }\n    writeByte(value) {\n        this.helperView.setUint8(0, value);\n        this.writer.write(this.helper.subarray(0, 1));\n    }\n    writeFloat32(value) {\n        this.helperView.setFloat32(0, value, false);\n        this.writer.write(this.helper.subarray(0, 4));\n    }\n    writeFloat64(value) {\n        this.helperView.setFloat64(0, value, false);\n        this.writer.write(this.helper);\n    }\n    writeUnsignedInt(value, width = measureUnsignedInt(value)) {\n        let pos = 0;\n        // Each case falls through:\n        switch (width) {\n            case 6:\n                // Need to use division to access >32 bits of floating point var\n                this.helperView.setUint8(pos++, (value / 2 ** 40) | 0);\n            // eslint-disable-next-line no-fallthrough\n            case 5:\n                this.helperView.setUint8(pos++, (value / 2 ** 32) | 0);\n            // eslint-disable-next-line no-fallthrough\n            case 4:\n                this.helperView.setUint8(pos++, value >> 24);\n            // eslint-disable-next-line no-fallthrough\n            case 3:\n                this.helperView.setUint8(pos++, value >> 16);\n            // eslint-disable-next-line no-fallthrough\n            case 2:\n                this.helperView.setUint8(pos++, value >> 8);\n            // eslint-disable-next-line no-fallthrough\n            case 1:\n                this.helperView.setUint8(pos++, value);\n                break;\n            default:\n                throw new Error('Bad unsigned int size ' + width);\n        }\n        this.writer.write(this.helper.subarray(0, pos));\n    }\n    writeUnsignedBigInt(value, width = measureUnsignedBigInt(value)) {\n        let pos = 0;\n        for (let i = width - 1; i >= 0; i--) {\n            this.helperView.setUint8(pos++, Number((value >> BigInt(i * 8)) & 0xffn));\n        }\n        this.writer.write(this.helper.subarray(0, pos));\n    }\n    writeSignedInt(value, width = measureSignedInt(value)) {\n        if (value < 0) {\n            // Two's complement stuff\n            value += 2 ** (width * 8);\n        }\n        this.writeUnsignedInt(value, width);\n    }\n    writeVarInt(value, width = measureVarInt(value)) {\n        let pos = 0;\n        switch (width) {\n            case 1:\n                this.helperView.setUint8(pos++, (1 << 7) | value);\n                break;\n            case 2:\n                this.helperView.setUint8(pos++, (1 << 6) | (value >> 8));\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 3:\n                this.helperView.setUint8(pos++, (1 << 5) | (value >> 16));\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 4:\n                this.helperView.setUint8(pos++, (1 << 4) | (value >> 24));\n                this.helperView.setUint8(pos++, value >> 16);\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 5:\n                /**\n                 * JavaScript converts its doubles to 32-bit integers for bitwise\n                 * operations, so we need to do a division by 2^32 instead of a\n                 * right-shift of 32 to retain those top 3 bits\n                 */\n                this.helperView.setUint8(pos++, (1 << 3) | ((value / 2 ** 32) & 0x7));\n                this.helperView.setUint8(pos++, value >> 24);\n                this.helperView.setUint8(pos++, value >> 16);\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 6:\n                this.helperView.setUint8(pos++, (1 << 2) | ((value / 2 ** 40) & 0x3));\n                this.helperView.setUint8(pos++, (value / 2 ** 32) | 0);\n                this.helperView.setUint8(pos++, value >> 24);\n                this.helperView.setUint8(pos++, value >> 16);\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            default:\n                throw new Error('Bad EBML varint size ' + width);\n        }\n        this.writer.write(this.helper.subarray(0, pos));\n    }\n    writeAsciiString(str) {\n        this.writer.write(new Uint8Array(str.split('').map(x => x.charCodeAt(0))));\n    }\n    writeEBML(data) {\n        if (data === null)\n            return;\n        if (data instanceof Uint8Array) {\n            this.writer.write(data);\n        }\n        else if (Array.isArray(data)) {\n            for (const elem of data) {\n                this.writeEBML(elem);\n            }\n        }\n        else {\n            this.offsets.set(data, this.writer.getPos());\n            this.writeUnsignedInt(data.id); // ID field\n            if (Array.isArray(data.data)) {\n                const sizePos = this.writer.getPos();\n                const sizeSize = data.size === -1 ? 1 : (data.size ?? 4);\n                if (data.size === -1) {\n                    // Write the reserved all-one-bits marker for unknown/unbounded size.\n                    this.writeByte(0xff);\n                }\n                else {\n                    this.writer.seek(this.writer.getPos() + sizeSize);\n                }\n                const startPos = this.writer.getPos();\n                this.dataOffsets.set(data, startPos);\n                this.writeEBML(data.data);\n                if (data.size !== -1) {\n                    const size = this.writer.getPos() - startPos;\n                    const endPos = this.writer.getPos();\n                    this.writer.seek(sizePos);\n                    this.writeVarInt(size, sizeSize);\n                    this.writer.seek(endPos);\n                }\n            }\n            else if (typeof data.data === 'number') {\n                const size = data.size ?? measureUnsignedInt(data.data);\n                this.writeVarInt(size);\n                this.writeUnsignedInt(data.data, size);\n            }\n            else if (typeof data.data === 'bigint') {\n                const size = data.size ?? measureUnsignedBigInt(data.data);\n                this.writeVarInt(size);\n                this.writeUnsignedBigInt(data.data, size);\n            }\n            else if (typeof data.data === 'string') {\n                this.writeVarInt(data.data.length);\n                this.writeAsciiString(data.data);\n            }\n            else if (data.data instanceof Uint8Array) {\n                this.writeVarInt(data.data.byteLength, data.size);\n                this.writer.write(data.data);\n            }\n            else if (data.data instanceof EBMLFloat32) {\n                this.writeVarInt(4);\n                this.writeFloat32(data.data.value);\n            }\n            else if (data.data instanceof EBMLFloat64) {\n                this.writeVarInt(8);\n                this.writeFloat64(data.data.value);\n            }\n            else if (data.data instanceof EBMLSignedInt) {\n                const size = data.size ?? measureSignedInt(data.data.value);\n                this.writeVarInt(size);\n                this.writeSignedInt(data.data.value, size);\n            }\n            else if (data.data instanceof EBMLUnicodeString) {\n                const bytes = textEncoder.encode(data.data.value);\n                this.writeVarInt(bytes.length);\n                this.writer.write(bytes);\n            }\n            else {\n                assertNever(data.data);\n            }\n        }\n    }\n}\nexport const MAX_VAR_INT_SIZE = 8;\nexport const MIN_HEADER_SIZE = 2; // 1-byte ID and 1-byte size\nexport const MAX_HEADER_SIZE = 2 * MAX_VAR_INT_SIZE; // 8-byte ID and 8-byte size\nexport const readVarIntSize = (slice) => {\n    const firstByte = readU8(slice);\n    slice.skip(-1);\n    if (firstByte === 0) {\n        return null; // Invalid VINT\n    }\n    let width = 1;\n    let mask = 0x80;\n    while ((firstByte & mask) === 0) {\n        width++;\n        mask >>= 1;\n    }\n    return width;\n};\nexport const readVarInt = (slice) => {\n    // Read the first byte to determine the width of the variable-length integer\n    const firstByte = readU8(slice);\n    if (firstByte === 0) {\n        return null; // Invalid VINT\n    }\n    // Find the position of VINT_MARKER, which determines the width\n    let width = 1;\n    let mask = 1 << 7;\n    while ((firstByte & mask) === 0) {\n        width++;\n        mask >>= 1;\n    }\n    // First byte's value needs the marker bit cleared\n    let value = firstByte & (mask - 1);\n    // Read remaining bytes\n    for (let i = 1; i < width; i++) {\n        value *= 1 << 8;\n        value += readU8(slice);\n    }\n    return value;\n};\nexport const readUnsignedInt = (slice, width) => {\n    if (width < 1 || width > 8) {\n        throw new Error('Bad unsigned int size ' + width);\n    }\n    let value = 0;\n    // Read bytes from most significant to least significant\n    for (let i = 0; i < width; i++) {\n        value *= 1 << 8;\n        value += readU8(slice);\n    }\n    return value;\n};\nexport const readUnsignedBigInt = (slice, width) => {\n    if (width < 1) {\n        throw new Error('Bad unsigned int size ' + width);\n    }\n    let value = 0n;\n    for (let i = 0; i < width; i++) {\n        value <<= 8n;\n        value += BigInt(readU8(slice));\n    }\n    return value;\n};\nexport const readSignedInt = (slice, width) => {\n    let value = readUnsignedInt(slice, width);\n    // If the highest bit is set, convert from two's complement\n    if (value & (1 << (width * 8 - 1))) {\n        value -= 2 ** (width * 8);\n    }\n    return value;\n};\nexport const readElementId = (slice) => {\n    const size = readVarIntSize(slice);\n    if (size === null) {\n        return null;\n    }\n    const id = readUnsignedInt(slice, size);\n    return id;\n};\nexport const readElementSize = (slice) => {\n    let size = readU8(slice);\n    if (size === 0xff) {\n        size = null;\n    }\n    else {\n        slice.skip(-1);\n        size = readVarInt(slice);\n        // In some (livestreamed) files, this is the value of the size field. While this technically is just a very\n        // large number, it is intended to behave like the reserved size 0xFF, meaning the size is undefined. We\n        // catch the number here. Note that it cannot be perfectly represented as a double, but the comparison works\n        // nonetheless.\n        // eslint-disable-next-line no-loss-of-precision\n        if (size === 0x00ffffffffffffff) {\n            size = null;\n        }\n    }\n    return size;\n};\nexport const readElementHeader = (slice) => {\n    const id = readElementId(slice);\n    if (id === null) {\n        return null;\n    }\n    const size = readElementSize(slice);\n    return { id, size };\n};\nexport const readAsciiString = (slice, length) => {\n    const bytes = readBytes(slice, length);\n    // Actual string length might be shorter due to null terminators\n    let strLength = 0;\n    while (strLength < length && bytes[strLength] !== 0) {\n        strLength += 1;\n    }\n    return String.fromCharCode(...bytes.subarray(0, strLength));\n};\nexport const readUnicodeString = (slice, length) => {\n    const bytes = readBytes(slice, length);\n    // Actual string length might be shorter due to null terminators\n    let strLength = 0;\n    while (strLength < length && bytes[strLength] !== 0) {\n        strLength += 1;\n    }\n    return textDecoder.decode(bytes.subarray(0, strLength));\n};\nexport const readFloat = (slice, width) => {\n    if (width === 0) {\n        return 0;\n    }\n    if (width !== 4 && width !== 8) {\n        throw new Error('Bad float size ' + width);\n    }\n    return width === 4 ? readF32Be(slice) : readF64Be(slice);\n};\n/** Returns the byte offset in the file of the next element with a matching ID. */\nexport const searchForNextElementId = async (reader, startPos, ids, until) => {\n    const idsSet = new Set(ids);\n    let currentPos = startPos;\n    while (until === null || currentPos < until) {\n        let slice = reader.requestSliceRange(currentPos, MIN_HEADER_SIZE, MAX_HEADER_SIZE);\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            break;\n        const elementHeader = readElementHeader(slice);\n        if (!elementHeader) {\n            break;\n        }\n        if (idsSet.has(elementHeader.id)) {\n            return { pos: currentPos, found: true };\n        }\n        assertDefinedSize(elementHeader.size);\n        currentPos = slice.filePos + elementHeader.size;\n    }\n    return { pos: (until !== null && until > currentPos) ? until : currentPos, found: false };\n};\n/** Searches for the next occurrence of an element ID using a naive byte-wise search. */\nexport const resync = async (reader, startPos, ids, until) => {\n    const CHUNK_SIZE = 2 ** 16; // So we don't need to grab thousands of slices\n    const idsSet = new Set(ids);\n    let currentPos = startPos;\n    while (currentPos < until) {\n        let slice = reader.requestSliceRange(currentPos, 0, Math.min(CHUNK_SIZE, until - currentPos));\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            break;\n        if (slice.length < MAX_VAR_INT_SIZE)\n            break;\n        for (let i = 0; i < slice.length - MAX_VAR_INT_SIZE; i++) {\n            slice.filePos = currentPos;\n            const elementId = readElementId(slice);\n            if (elementId !== null && idsSet.has(elementId)) {\n                return currentPos;\n            }\n            currentPos++;\n        }\n    }\n    return null;\n};\nexport const CODEC_STRING_MAP = {\n    'avc': 'V_MPEG4/ISO/AVC',\n    'hevc': 'V_MPEGH/ISO/HEVC',\n    'vp8': 'V_VP8',\n    'vp9': 'V_VP9',\n    'av1': 'V_AV1',\n    'aac': 'A_AAC',\n    'mp3': 'A_MPEG/L3',\n    'opus': 'A_OPUS',\n    'vorbis': 'A_VORBIS',\n    'flac': 'A_FLAC',\n    'pcm-u8': 'A_PCM/INT/LIT',\n    'pcm-s16': 'A_PCM/INT/LIT',\n    'pcm-s16be': 'A_PCM/INT/BIG',\n    'pcm-s24': 'A_PCM/INT/LIT',\n    'pcm-s24be': 'A_PCM/INT/BIG',\n    'pcm-s32': 'A_PCM/INT/LIT',\n    'pcm-s32be': 'A_PCM/INT/BIG',\n    'pcm-f32': 'A_PCM/FLOAT/IEEE',\n    'pcm-f64': 'A_PCM/FLOAT/IEEE',\n    'webvtt': 'S_TEXT/WEBVTT',\n};\nexport function assertDefinedSize(size) {\n    if (size === null) {\n        throw new Error('Undefined element size is used in a place where it is not supported.');\n    }\n}\n;\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nexport const buildMatroskaMimeType = (info) => {\n    const base = info.hasVideo\n        ? 'video/'\n        : info.hasAudio\n            ? 'audio/'\n            : 'application/';\n    let string = base + (info.isWebM ? 'webm' : 'x-matroska');\n    if (info.codecStrings.length > 0) {\n        const uniqueCodecMimeTypes = [...new Set(info.codecStrings.filter(Boolean))];\n        string += `; codecs=\"${uniqueCodecMimeTypes.join(', ')}\"`;\n    }\n    return string;\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst cueBlockHeaderRegex = /(?:(.+?)\\n)?((?:\\d{2}:)?\\d{2}:\\d{2}.\\d{3})\\s+-->\\s+((?:\\d{2}:)?\\d{2}:\\d{2}.\\d{3})/g;\nconst preambleStartRegex = /^WEBVTT(.|\\n)*?\\n{2}/;\nexport const inlineTimestampRegex = /<(?:(\\d{2}):)?(\\d{2}):(\\d{2}).(\\d{3})>/g;\nexport class SubtitleParser {\n    constructor(options) {\n        this.preambleText = null;\n        this.preambleEmitted = false;\n        this.options = options;\n    }\n    parse(text) {\n        text = text.replaceAll('\\r\\n', '\\n').replaceAll('\\r', '\\n');\n        cueBlockHeaderRegex.lastIndex = 0;\n        let match;\n        if (!this.preambleText) {\n            if (!preambleStartRegex.test(text)) {\n                throw new Error('WebVTT preamble incorrect.');\n            }\n            match = cueBlockHeaderRegex.exec(text);\n            const preamble = text.slice(0, match?.index ?? text.length).trimEnd();\n            if (!preamble) {\n                throw new Error('No WebVTT preamble provided.');\n            }\n            this.preambleText = preamble;\n            if (match) {\n                text = text.slice(match.index);\n                cueBlockHeaderRegex.lastIndex = 0;\n            }\n        }\n        while ((match = cueBlockHeaderRegex.exec(text))) {\n            const notes = text.slice(0, match.index);\n            const cueIdentifier = match[1];\n            const matchEnd = match.index + match[0].length;\n            const bodyStart = text.indexOf('\\n', matchEnd) + 1;\n            const cueSettings = text.slice(matchEnd, bodyStart).trim();\n            let bodyEnd = text.indexOf('\\n\\n', matchEnd);\n            if (bodyEnd === -1)\n                bodyEnd = text.length;\n            const startTime = parseSubtitleTimestamp(match[2]);\n            const endTime = parseSubtitleTimestamp(match[3]);\n            const duration = endTime - startTime;\n            const body = text.slice(bodyStart, bodyEnd).trim();\n            text = text.slice(bodyEnd).trimStart();\n            cueBlockHeaderRegex.lastIndex = 0;\n            const cue = {\n                timestamp: startTime / 1000,\n                duration: duration / 1000,\n                text: body,\n                identifier: cueIdentifier,\n                settings: cueSettings,\n                notes,\n            };\n            const meta = {};\n            if (!this.preambleEmitted) {\n                meta.config = {\n                    description: this.preambleText,\n                };\n                this.preambleEmitted = true;\n            }\n            this.options.output(cue, meta);\n        }\n    }\n}\nconst timestampRegex = /(?:(\\d{2}):)?(\\d{2}):(\\d{2}).(\\d{3})/;\nexport const parseSubtitleTimestamp = (string) => {\n    const match = timestampRegex.exec(string);\n    if (!match)\n        throw new Error('Expected match.');\n    return 60 * 60 * 1000 * Number(match[1] || '0')\n        + 60 * 1000 * Number(match[2])\n        + 1000 * Number(match[3])\n        + Number(match[4]);\n};\nexport const formatSubtitleTimestamp = (timestamp) => {\n    const hours = Math.floor(timestamp / (60 * 60 * 1000));\n    const minutes = Math.floor((timestamp % (60 * 60 * 1000)) / (60 * 1000));\n    const seconds = Math.floor((timestamp % (60 * 1000)) / 1000);\n    const milliseconds = timestamp % 1000;\n    return hours.toString().padStart(2, '0') + ':'\n        + minutes.toString().padStart(2, '0') + ':'\n        + seconds.toString().padStart(2, '0') + '.'\n        + milliseconds.toString().padStart(3, '0');\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { assert } from './misc.js';\nexport class Writer {\n    constructor() {\n        /** Setting this to true will cause the writer to ensure data is written in a strictly monotonic, streamable way. */\n        this.ensureMonotonicity = false;\n        this.trackedWrites = null;\n        this.trackedStart = -1;\n        this.trackedEnd = -1;\n    }\n    start() { }\n    maybeTrackWrites(data) {\n        if (!this.trackedWrites) {\n            return;\n        }\n        // Handle negative relative write positions\n        let pos = this.getPos();\n        if (pos < this.trackedStart) {\n            if (pos + data.byteLength <= this.trackedStart) {\n                return;\n            }\n            data = data.subarray(this.trackedStart - pos);\n            pos = 0;\n        }\n        const neededSize = pos + data.byteLength - this.trackedStart;\n        let newLength = this.trackedWrites.byteLength;\n        while (newLength < neededSize) {\n            newLength *= 2;\n        }\n        // Check if we need to resize the buffer\n        if (newLength !== this.trackedWrites.byteLength) {\n            const copy = new Uint8Array(newLength);\n            copy.set(this.trackedWrites, 0);\n            this.trackedWrites = copy;\n        }\n        this.trackedWrites.set(data, pos - this.trackedStart);\n        this.trackedEnd = Math.max(this.trackedEnd, pos + data.byteLength);\n    }\n    startTrackingWrites() {\n        this.trackedWrites = new Uint8Array(2 ** 10);\n        this.trackedStart = this.getPos();\n        this.trackedEnd = this.trackedStart;\n    }\n    stopTrackingWrites() {\n        if (!this.trackedWrites) {\n            throw new Error('Internal error: Can\\'t get tracked writes since nothing was tracked.');\n        }\n        const slice = this.trackedWrites.subarray(0, this.trackedEnd - this.trackedStart);\n        const result = {\n            data: slice,\n            start: this.trackedStart,\n            end: this.trackedEnd,\n        };\n        this.trackedWrites = null;\n        return result;\n    }\n}\nconst ARRAY_BUFFER_INITIAL_SIZE = 2 ** 16;\nconst ARRAY_BUFFER_MAX_SIZE = 2 ** 32;\nexport class BufferTargetWriter extends Writer {\n    constructor(target) {\n        super();\n        this.pos = 0;\n        this.maxPos = 0;\n        this.target = target;\n        this.supportsResize = 'resize' in new ArrayBuffer(0);\n        if (this.supportsResize) {\n            try {\n                // @ts-expect-error Don't want to bump \"lib\" in tsconfig\n                this.buffer = new ArrayBuffer(ARRAY_BUFFER_INITIAL_SIZE, { maxByteLength: ARRAY_BUFFER_MAX_SIZE });\n            }\n            catch {\n                this.buffer = new ArrayBuffer(ARRAY_BUFFER_INITIAL_SIZE);\n                this.supportsResize = false;\n            }\n        }\n        else {\n            this.buffer = new ArrayBuffer(ARRAY_BUFFER_INITIAL_SIZE);\n        }\n        this.bytes = new Uint8Array(this.buffer);\n    }\n    ensureSize(size) {\n        let newLength = this.buffer.byteLength;\n        while (newLength < size)\n            newLength *= 2;\n        if (newLength === this.buffer.byteLength)\n            return;\n        if (newLength > ARRAY_BUFFER_MAX_SIZE) {\n            throw new Error(`ArrayBuffer exceeded maximum size of ${ARRAY_BUFFER_MAX_SIZE} bytes. Please consider using another`\n                + ` target.`);\n        }\n        if (this.supportsResize) {\n            // Use resize if it exists\n            // @ts-expect-error Don't want to bump \"lib\" in tsconfig\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n            this.buffer.resize(newLength);\n            // The Uint8Array scales automatically\n        }\n        else {\n            const newBuffer = new ArrayBuffer(newLength);\n            const newBytes = new Uint8Array(newBuffer);\n            newBytes.set(this.bytes, 0);\n            this.buffer = newBuffer;\n            this.bytes = newBytes;\n        }\n    }\n    write(data) {\n        this.maybeTrackWrites(data);\n        this.ensureSize(this.pos + data.byteLength);\n        this.bytes.set(data, this.pos);\n        this.target.onwrite?.(this.pos, this.pos + data.byteLength);\n        this.pos += data.byteLength;\n        this.maxPos = Math.max(this.maxPos, this.pos);\n    }\n    seek(newPos) {\n        this.pos = newPos;\n    }\n    getPos() {\n        return this.pos;\n    }\n    async flush() { }\n    async finalize() {\n        this.ensureSize(this.pos);\n        this.target.buffer = this.buffer.slice(0, Math.max(this.maxPos, this.pos));\n    }\n    async close() { }\n    getSlice(start, end) {\n        return this.bytes.slice(start, end);\n    }\n}\nconst DEFAULT_CHUNK_SIZE = 2 ** 24;\nconst MAX_CHUNKS_AT_ONCE = 2;\n/**\n * Writes to a StreamTarget every time it is flushed, sending out all of the new data written since the\n * last flush. This is useful for streaming applications, like piping the output to disk. When using the chunked mode,\n * data will first be accumulated in larger chunks, and then the entire chunk will be flushed out at once when ready.\n */\nexport class StreamTargetWriter extends Writer {\n    constructor(target) {\n        super();\n        this.pos = 0;\n        this.sections = [];\n        this.lastWriteEnd = 0;\n        this.lastFlushEnd = 0;\n        this.writer = null;\n        /**\n         * The data is divided up into fixed-size chunks, whose contents are first filled in RAM and then flushed out.\n         * A chunk is flushed if all of its contents have been written.\n         */\n        this.chunks = [];\n        this.target = target;\n        this.chunked = target._options.chunked ?? false;\n        this.chunkSize = target._options.chunkSize ?? DEFAULT_CHUNK_SIZE;\n    }\n    start() {\n        this.writer = this.target._writable.getWriter();\n    }\n    write(data) {\n        if (this.pos > this.lastWriteEnd) {\n            const paddingBytesNeeded = this.pos - this.lastWriteEnd;\n            this.pos = this.lastWriteEnd;\n            this.write(new Uint8Array(paddingBytesNeeded));\n        }\n        this.maybeTrackWrites(data);\n        this.sections.push({\n            data: data.slice(),\n            start: this.pos,\n        });\n        this.target.onwrite?.(this.pos, this.pos + data.byteLength);\n        this.pos += data.byteLength;\n        this.lastWriteEnd = Math.max(this.lastWriteEnd, this.pos);\n    }\n    seek(newPos) {\n        this.pos = newPos;\n    }\n    getPos() {\n        return this.pos;\n    }\n    async flush() {\n        if (this.pos > this.lastWriteEnd) {\n            // There's a \"void\" between the last written byte and the next byte we're about to write. Let's pad that\n            // void with zeroes explicitly.\n            const paddingBytesNeeded = this.pos - this.lastWriteEnd;\n            this.pos = this.lastWriteEnd;\n            this.write(new Uint8Array(paddingBytesNeeded));\n        }\n        assert(this.writer);\n        if (this.sections.length === 0)\n            return;\n        const chunks = [];\n        const sorted = [...this.sections].sort((a, b) => a.start - b.start);\n        chunks.push({\n            start: sorted[0].start,\n            size: sorted[0].data.byteLength,\n        });\n        // Figure out how many contiguous chunks we have\n        for (let i = 1; i < sorted.length; i++) {\n            const lastChunk = chunks[chunks.length - 1];\n            const section = sorted[i];\n            if (section.start <= lastChunk.start + lastChunk.size) {\n                lastChunk.size = Math.max(lastChunk.size, section.start + section.data.byteLength - lastChunk.start);\n            }\n            else {\n                chunks.push({\n                    start: section.start,\n                    size: section.data.byteLength,\n                });\n            }\n        }\n        for (const chunk of chunks) {\n            chunk.data = new Uint8Array(chunk.size);\n            // Make sure to write the data in the correct order for correct overwriting\n            for (const section of this.sections) {\n                // Check if the section is in the chunk\n                if (chunk.start <= section.start && section.start < chunk.start + chunk.size) {\n                    chunk.data.set(section.data, section.start - chunk.start);\n                }\n            }\n            if (this.writer.desiredSize !== null && this.writer.desiredSize <= 0) {\n                await this.writer.ready; // Allow the writer to apply backpressure\n            }\n            if (this.chunked) {\n                // Let's first gather the data into bigger chunks before writing it\n                this.writeDataIntoChunks(chunk.data, chunk.start);\n                this.tryToFlushChunks();\n            }\n            else {\n                if (this.ensureMonotonicity && chunk.start !== this.lastFlushEnd) {\n                    throw new Error('Internal error: Monotonicity violation.');\n                }\n                // Write out the data immediately\n                void this.writer.write({\n                    type: 'write',\n                    data: chunk.data,\n                    position: chunk.start,\n                });\n                this.lastFlushEnd = chunk.start + chunk.data.byteLength;\n            }\n        }\n        this.sections.length = 0;\n    }\n    writeDataIntoChunks(data, position) {\n        // First, find the chunk to write the data into, or create one if none exists\n        let chunkIndex = this.chunks.findIndex(x => x.start <= position && position < x.start + this.chunkSize);\n        if (chunkIndex === -1)\n            chunkIndex = this.createChunk(position);\n        const chunk = this.chunks[chunkIndex];\n        // Figure out how much to write to the chunk, and then write to the chunk\n        const relativePosition = position - chunk.start;\n        const toWrite = data.subarray(0, Math.min(this.chunkSize - relativePosition, data.byteLength));\n        chunk.data.set(toWrite, relativePosition);\n        // Create a section describing the region of data that was just written to\n        const section = {\n            start: relativePosition,\n            end: relativePosition + toWrite.byteLength,\n        };\n        this.insertSectionIntoChunk(chunk, section);\n        // Queue chunk for flushing to target if it has been fully written to\n        if (chunk.written[0].start === 0 && chunk.written[0].end === this.chunkSize) {\n            chunk.shouldFlush = true;\n        }\n        // Make sure we don't hold too many chunks in memory at once to keep memory usage down\n        if (this.chunks.length > MAX_CHUNKS_AT_ONCE) {\n            // Flush all but the last chunk\n            for (let i = 0; i < this.chunks.length - 1; i++) {\n                this.chunks[i].shouldFlush = true;\n            }\n            this.tryToFlushChunks();\n        }\n        // If the data didn't fit in one chunk, recurse with the remaining data\n        if (toWrite.byteLength < data.byteLength) {\n            this.writeDataIntoChunks(data.subarray(toWrite.byteLength), position + toWrite.byteLength);\n        }\n    }\n    insertSectionIntoChunk(chunk, section) {\n        let low = 0;\n        let high = chunk.written.length - 1;\n        let index = -1;\n        // Do a binary search to find the last section with a start not larger than `section`'s start\n        while (low <= high) {\n            const mid = Math.floor(low + (high - low + 1) / 2);\n            if (chunk.written[mid].start <= section.start) {\n                low = mid + 1;\n                index = mid;\n            }\n            else {\n                high = mid - 1;\n            }\n        }\n        // Insert the new section\n        chunk.written.splice(index + 1, 0, section);\n        if (index === -1 || chunk.written[index].end < section.start)\n            index++;\n        // Merge overlapping sections\n        while (index < chunk.written.length - 1 && chunk.written[index].end >= chunk.written[index + 1].start) {\n            chunk.written[index].end = Math.max(chunk.written[index].end, chunk.written[index + 1].end);\n            chunk.written.splice(index + 1, 1);\n        }\n    }\n    createChunk(includesPosition) {\n        const start = Math.floor(includesPosition / this.chunkSize) * this.chunkSize;\n        const chunk = {\n            start,\n            data: new Uint8Array(this.chunkSize),\n            written: [],\n            shouldFlush: false,\n        };\n        this.chunks.push(chunk);\n        this.chunks.sort((a, b) => a.start - b.start);\n        return this.chunks.indexOf(chunk);\n    }\n    tryToFlushChunks(force = false) {\n        assert(this.writer);\n        for (let i = 0; i < this.chunks.length; i++) {\n            const chunk = this.chunks[i];\n            if (!chunk.shouldFlush && !force)\n                continue;\n            for (const section of chunk.written) {\n                const position = chunk.start + section.start;\n                if (this.ensureMonotonicity && position !== this.lastFlushEnd) {\n                    throw new Error('Internal error: Monotonicity violation.');\n                }\n                void this.writer.write({\n                    type: 'write',\n                    data: chunk.data.subarray(section.start, section.end),\n                    position,\n                });\n                this.lastFlushEnd = chunk.start + section.end;\n            }\n            this.chunks.splice(i--, 1);\n        }\n    }\n    finalize() {\n        if (this.chunked) {\n            this.tryToFlushChunks(true);\n        }\n        assert(this.writer);\n        return this.writer.close();\n    }\n    async close() {\n        return this.writer?.close();\n    }\n}\nexport class NullTargetWriter extends Writer {\n    constructor(target) {\n        super();\n        this.target = target;\n        this.pos = 0;\n    }\n    write(data) {\n        this.maybeTrackWrites(data);\n        this.target.onwrite?.(this.pos, this.pos + data.byteLength);\n        this.pos += data.byteLength;\n    }\n    getPos() {\n        return this.pos;\n    }\n    seek(newPos) {\n        this.pos = newPos;\n    }\n    async flush() { }\n    async finalize() { }\n    async close() { }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { BufferTargetWriter, NullTargetWriter, StreamTargetWriter } from './writer.js';\nimport * as nodeAlias from './node.js';\nimport { assert } from './misc.js';\nconst node = typeof nodeAlias !== 'undefined'\n    ? nodeAlias // Aliasing it prevents some bundler warnings\n    : undefined;\n/**\n * Base class for targets, specifying where output files are written.\n * @group Output targets\n * @public\n */\nexport class Target {\n    constructor() {\n        /** @internal */\n        this._output = null;\n        /**\n         * Called each time data is written to the target. Will be called with the byte range into which data was written.\n         *\n         * Use this callback to track the size of the output file as it grows. But be warned, this function is chatty and\n         * gets called *extremely* often.\n         */\n        this.onwrite = null;\n    }\n}\n/**\n * A target that writes data directly into an ArrayBuffer in memory. Great for performance, but not suitable for very\n * large files. The buffer will be available once the output has been finalized.\n * @group Output targets\n * @public\n */\nexport class BufferTarget extends Target {\n    constructor() {\n        super(...arguments);\n        /** Stores the final output buffer. Until the output is finalized, this will be `null`. */\n        this.buffer = null;\n    }\n    /** @internal */\n    _createWriter() {\n        return new BufferTargetWriter(this);\n    }\n}\n/**\n * This target writes data to a [`WritableStream`](https://developer.mozilla.org/en-US/docs/Web/API/WritableStream),\n * making it a general-purpose target for writing data anywhere. It is also compatible with\n * [`FileSystemWritableFileStream`](https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream) for\n * use with the [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_API). The\n * `WritableStream` can also apply backpressure, which will propagate to the output and throttle the encoders.\n * @group Output targets\n * @public\n */\nexport class StreamTarget extends Target {\n    /** Creates a new {@link StreamTarget} which writes to the specified `writable`. */\n    constructor(writable, options = {}) {\n        super();\n        if (!(writable instanceof WritableStream)) {\n            throw new TypeError('StreamTarget requires a WritableStream instance.');\n        }\n        if (options != null && typeof options !== 'object') {\n            throw new TypeError('StreamTarget options, when provided, must be an object.');\n        }\n        if (options.chunked !== undefined && typeof options.chunked !== 'boolean') {\n            throw new TypeError('options.chunked, when provided, must be a boolean.');\n        }\n        if (options.chunkSize !== undefined && (!Number.isInteger(options.chunkSize) || options.chunkSize < 1024)) {\n            throw new TypeError('options.chunkSize, when provided, must be an integer and not smaller than 1024.');\n        }\n        this._writable = writable;\n        this._options = options;\n    }\n    /** @internal */\n    _createWriter() {\n        return new StreamTargetWriter(this);\n    }\n}\n/**\n * A target that writes to a file at the specified path. Intended for server-side usage in Node, Bun, or Deno.\n *\n * Writing is chunked by default. The internally held file handle will be closed when `.finalize()` or `.cancel()` are\n * called on the corresponding {@link Output}.\n * @group Output targets\n * @public\n */\nexport class FilePathTarget extends Target {\n    /** Creates a new {@link FilePathTarget} that writes to the file at the specified file path. */\n    constructor(filePath, options = {}) {\n        if (typeof filePath !== 'string') {\n            throw new TypeError('filePath must be a string.');\n        }\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        super();\n        /** @internal */\n        this._fileHandle = null;\n        // Let's back this target with a StreamTarget, makes the implementation very simple\n        const writable = new WritableStream({\n            start: async () => {\n                this._fileHandle = await node.fs.open(filePath, 'w');\n            },\n            write: async (chunk) => {\n                assert(this._fileHandle);\n                await this._fileHandle.write(chunk.data, 0, chunk.data.byteLength, chunk.position);\n            },\n            close: async () => {\n                if (this._fileHandle) {\n                    await this._fileHandle.close();\n                    this._fileHandle = null;\n                }\n            },\n        });\n        this._streamTarget = new StreamTarget(writable, {\n            chunked: true,\n            ...options,\n        });\n        this._streamTarget._output = this._output;\n    }\n    /** @internal */\n    _createWriter() {\n        return this._streamTarget._createWriter();\n    }\n}\n/**\n * This target just discards all incoming data. It is useful for when you need an {@link Output} but extract data from\n * it differently, for example through format-specific callbacks (`onMoof`, `onMdat`, ...) or encoder events.\n * @group Output targets\n * @public\n */\nexport class NullTarget extends Target {\n    /** @internal */\n    _createWriter() {\n        return new NullTargetWriter(this);\n    }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { Bitstream, COLOR_PRIMARIES_MAP, MATRIX_COEFFICIENTS_MAP, TRANSFER_CHARACTERISTICS_MAP, UNDETERMINED_LANGUAGE, assert, assertNever, colorSpaceIsComplete, imageMimeTypeToExtension, keyValueIterator, normalizeRotation, promiseWithResolvers, roundToMultiple, textEncoder, toUint8Array, uint8ArraysAreEqual, writeBits, } from '../misc.js';\nimport { CODEC_STRING_MAP, EBMLFloat32, EBMLFloat64, EBMLId, EBMLSignedInt, EBMLUnicodeString, EBMLWriter, } from './ebml.js';\nimport { buildMatroskaMimeType } from './matroska-misc.js';\nimport { WebMOutputFormat } from '../output-format.js';\nimport { formatSubtitleTimestamp, inlineTimestampRegex, parseSubtitleTimestamp, } from '../subtitles.js';\nimport { OPUS_SAMPLE_RATE, PCM_AUDIO_CODECS, generateAv1CodecConfigurationFromCodecString, generateVp9CodecConfigurationFromCodecString, parsePcmCodec, validateAudioChunkMetadata, validateSubtitleMetadata, validateVideoChunkMetadata, } from '../codec.js';\nimport { Muxer } from '../muxer.js';\nimport { parseOpusIdentificationHeader } from '../codec-data.js';\nimport { AttachedFile } from '../tags.js';\nconst MIN_CLUSTER_TIMESTAMP_MS = -(2 ** 15);\nconst MAX_CLUSTER_TIMESTAMP_MS = 2 ** 15 - 1;\nconst APP_NAME = 'Mediabunny';\nconst SEGMENT_SIZE_BYTES = 6;\nconst CLUSTER_SIZE_BYTES = 5;\nconst TRACK_TYPE_MAP = {\n    video: 1,\n    audio: 2,\n    subtitle: 17,\n};\nexport class MatroskaMuxer extends Muxer {\n    constructor(output, format) {\n        super(output);\n        this.trackDatas = [];\n        this.allTracksKnown = promiseWithResolvers();\n        this.segment = null;\n        this.segmentInfo = null;\n        this.seekHead = null;\n        this.tracksElement = null;\n        this.tagsElement = null;\n        this.attachmentsElement = null;\n        this.segmentDuration = null;\n        this.cues = null;\n        this.currentCluster = null;\n        this.currentClusterStartMsTimestamp = null;\n        this.currentClusterMaxMsTimestamp = null;\n        this.trackDatasInCurrentCluster = new Map();\n        this.duration = 0;\n        this.writer = output._writer;\n        this.format = format;\n        this.ebmlWriter = new EBMLWriter(this.writer);\n        if (this.format._options.appendOnly) {\n            this.writer.ensureMonotonicity = true;\n        }\n    }\n    async start() {\n        const release = await this.mutex.acquire();\n        this.writeEBMLHeader();\n        this.createSegmentInfo();\n        this.createCues();\n        await this.writer.flush();\n        release();\n    }\n    writeEBMLHeader() {\n        if (this.format._options.onEbmlHeader) {\n            this.writer.startTrackingWrites();\n        }\n        const ebmlHeader = { id: EBMLId.EBML, data: [\n                { id: EBMLId.EBMLVersion, data: 1 },\n                { id: EBMLId.EBMLReadVersion, data: 1 },\n                { id: EBMLId.EBMLMaxIDLength, data: 4 },\n                { id: EBMLId.EBMLMaxSizeLength, data: 8 },\n                { id: EBMLId.DocType, data: this.format instanceof WebMOutputFormat ? 'webm' : 'matroska' },\n                { id: EBMLId.DocTypeVersion, data: 2 },\n                { id: EBMLId.DocTypeReadVersion, data: 2 },\n            ] };\n        this.ebmlWriter.writeEBML(ebmlHeader);\n        if (this.format._options.onEbmlHeader) {\n            const { data, start } = this.writer.stopTrackingWrites(); // start should be 0\n            this.format._options.onEbmlHeader(data, start);\n        }\n    }\n    /**\n     * Creates a SeekHead element which is positioned near the start of the file and allows the media player to seek to\n     * relevant sections more easily. Since we don't know the positions of those sections yet, we'll set them later.\n     */\n    maybeCreateSeekHead(writeOffsets) {\n        if (this.format._options.appendOnly) {\n            return;\n        }\n        const kaxCues = new Uint8Array([0x1c, 0x53, 0xbb, 0x6b]);\n        const kaxInfo = new Uint8Array([0x15, 0x49, 0xa9, 0x66]);\n        const kaxTracks = new Uint8Array([0x16, 0x54, 0xae, 0x6b]);\n        const kaxAttachments = new Uint8Array([0x19, 0x41, 0xa4, 0x69]);\n        const kaxTags = new Uint8Array([0x12, 0x54, 0xc3, 0x67]);\n        const seekHead = { id: EBMLId.SeekHead, data: [\n                { id: EBMLId.Seek, data: [\n                        { id: EBMLId.SeekID, data: kaxCues },\n                        {\n                            id: EBMLId.SeekPosition,\n                            size: 5,\n                            data: writeOffsets\n                                ? this.ebmlWriter.offsets.get(this.cues) - this.segmentDataOffset\n                                : 0,\n                        },\n                    ] },\n                { id: EBMLId.Seek, data: [\n                        { id: EBMLId.SeekID, data: kaxInfo },\n                        {\n                            id: EBMLId.SeekPosition,\n                            size: 5,\n                            data: writeOffsets\n                                ? this.ebmlWriter.offsets.get(this.segmentInfo) - this.segmentDataOffset\n                                : 0,\n                        },\n                    ] },\n                { id: EBMLId.Seek, data: [\n                        { id: EBMLId.SeekID, data: kaxTracks },\n                        {\n                            id: EBMLId.SeekPosition,\n                            size: 5,\n                            data: writeOffsets\n                                ? this.ebmlWriter.offsets.get(this.tracksElement) - this.segmentDataOffset\n                                : 0,\n                        },\n                    ] },\n                this.attachmentsElement\n                    ? { id: EBMLId.Seek, data: [\n                            { id: EBMLId.SeekID, data: kaxAttachments },\n                            {\n                                id: EBMLId.SeekPosition,\n                                size: 5,\n                                data: writeOffsets\n                                    ? this.ebmlWriter.offsets.get(this.attachmentsElement) - this.segmentDataOffset\n                                    : 0,\n                            },\n                        ] }\n                    : null,\n                this.tagsElement\n                    ? { id: EBMLId.Seek, data: [\n                            { id: EBMLId.SeekID, data: kaxTags },\n                            {\n                                id: EBMLId.SeekPosition,\n                                size: 5,\n                                data: writeOffsets\n                                    ? this.ebmlWriter.offsets.get(this.tagsElement) - this.segmentDataOffset\n                                    : 0,\n                            },\n                        ] }\n                    : null,\n            ] };\n        this.seekHead = seekHead;\n    }\n    createSegmentInfo() {\n        const segmentDuration = { id: EBMLId.Duration, data: new EBMLFloat64(0) };\n        this.segmentDuration = segmentDuration;\n        const segmentInfo = { id: EBMLId.Info, data: [\n                { id: EBMLId.TimestampScale, data: 1e6 },\n                { id: EBMLId.MuxingApp, data: APP_NAME },\n                { id: EBMLId.WritingApp, data: APP_NAME },\n                !this.format._options.appendOnly ? segmentDuration : null,\n            ] };\n        this.segmentInfo = segmentInfo;\n    }\n    createTracks() {\n        const tracksElement = { id: EBMLId.Tracks, data: [] };\n        this.tracksElement = tracksElement;\n        for (const trackData of this.trackDatas) {\n            const codecId = CODEC_STRING_MAP[trackData.track.source._codec];\n            assert(codecId);\n            let seekPreRollNs = 0;\n            if (trackData.type === 'audio' && trackData.track.source._codec === 'opus') {\n                seekPreRollNs = 1e6 * 80; // In \"Matroska ticks\" (nanoseconds)\n                const description = trackData.info.decoderConfig.description;\n                if (description) {\n                    const bytes = toUint8Array(description);\n                    const header = parseOpusIdentificationHeader(bytes);\n                    // Use the preSkip value from the header\n                    seekPreRollNs = Math.round(1e9 * (header.preSkip / OPUS_SAMPLE_RATE));\n                }\n            }\n            tracksElement.data.push({ id: EBMLId.TrackEntry, data: [\n                    { id: EBMLId.TrackNumber, data: trackData.track.id },\n                    { id: EBMLId.TrackUID, data: trackData.track.id },\n                    { id: EBMLId.TrackType, data: TRACK_TYPE_MAP[trackData.type] },\n                    { id: EBMLId.FlagLacing, data: 0 },\n                    { id: EBMLId.Language, data: trackData.track.metadata.languageCode ?? UNDETERMINED_LANGUAGE },\n                    { id: EBMLId.CodecID, data: codecId },\n                    { id: EBMLId.CodecDelay, data: 0 },\n                    { id: EBMLId.SeekPreRoll, data: seekPreRollNs },\n                    trackData.track.metadata.name !== undefined\n                        ? { id: EBMLId.Name, data: new EBMLUnicodeString(trackData.track.metadata.name) }\n                        : null,\n                    (trackData.type === 'video' ? this.videoSpecificTrackInfo(trackData) : null),\n                    (trackData.type === 'audio' ? this.audioSpecificTrackInfo(trackData) : null),\n                    (trackData.type === 'subtitle' ? this.subtitleSpecificTrackInfo(trackData) : null),\n                ] });\n        }\n    }\n    videoSpecificTrackInfo(trackData) {\n        const { frameRate, rotation } = trackData.track.metadata;\n        const elements = [\n            (trackData.info.decoderConfig.description\n                ? {\n                    id: EBMLId.CodecPrivate,\n                    data: toUint8Array(trackData.info.decoderConfig.description),\n                }\n                : null),\n            (frameRate\n                ? {\n                    id: EBMLId.DefaultDuration,\n                    data: 1e9 / frameRate,\n                }\n                : null),\n        ];\n        // Convert from clockwise to counter-clockwise\n        const flippedRotation = rotation ? normalizeRotation(-rotation) : 0;\n        const colorSpace = trackData.info.decoderConfig.colorSpace;\n        const videoElement = { id: EBMLId.Video, data: [\n                { id: EBMLId.PixelWidth, data: trackData.info.width },\n                { id: EBMLId.PixelHeight, data: trackData.info.height },\n                trackData.info.alphaMode ? { id: EBMLId.AlphaMode, data: 1 } : null,\n                (colorSpaceIsComplete(colorSpace)\n                    ? {\n                        id: EBMLId.Colour,\n                        data: [\n                            {\n                                id: EBMLId.MatrixCoefficients,\n                                data: MATRIX_COEFFICIENTS_MAP[colorSpace.matrix],\n                            },\n                            {\n                                id: EBMLId.TransferCharacteristics,\n                                data: TRANSFER_CHARACTERISTICS_MAP[colorSpace.transfer],\n                            },\n                            {\n                                id: EBMLId.Primaries,\n                                data: COLOR_PRIMARIES_MAP[colorSpace.primaries],\n                            },\n                            {\n                                id: EBMLId.Range,\n                                data: colorSpace.fullRange ? 2 : 1,\n                            },\n                        ],\n                    }\n                    : null),\n                (flippedRotation\n                    ? {\n                        id: EBMLId.Projection,\n                        data: [\n                            {\n                                id: EBMLId.ProjectionType,\n                                data: 0, // rectangular\n                            },\n                            {\n                                id: EBMLId.ProjectionPoseRoll,\n                                data: new EBMLFloat32((flippedRotation + 180) % 360 - 180), // [0, 270] -> [-180, 90]\n                            },\n                        ],\n                    }\n                    : null),\n            ] };\n        elements.push(videoElement);\n        return elements;\n    }\n    audioSpecificTrackInfo(trackData) {\n        const pcmInfo = PCM_AUDIO_CODECS.includes(trackData.track.source._codec)\n            ? parsePcmCodec(trackData.track.source._codec)\n            : null;\n        return [\n            (trackData.info.decoderConfig.description\n                ? {\n                    id: EBMLId.CodecPrivate,\n                    data: toUint8Array(trackData.info.decoderConfig.description),\n                }\n                : null),\n            { id: EBMLId.Audio, data: [\n                    { id: EBMLId.SamplingFrequency, data: new EBMLFloat32(trackData.info.sampleRate) },\n                    { id: EBMLId.Channels, data: trackData.info.numberOfChannels },\n                    pcmInfo ? { id: EBMLId.BitDepth, data: 8 * pcmInfo.sampleSize } : null,\n                ] },\n        ];\n    }\n    subtitleSpecificTrackInfo(trackData) {\n        return [\n            { id: EBMLId.CodecPrivate, data: textEncoder.encode(trackData.info.config.description) },\n        ];\n    }\n    maybeCreateTags() {\n        const simpleTags = [];\n        const addSimpleTag = (key, value) => {\n            simpleTags.push({ id: EBMLId.SimpleTag, data: [\n                    { id: EBMLId.TagName, data: new EBMLUnicodeString(key) },\n                    typeof value === 'string'\n                        ? { id: EBMLId.TagString, data: new EBMLUnicodeString(value) }\n                        : { id: EBMLId.TagBinary, data: value },\n                ] });\n        };\n        const metadataTags = this.output._metadataTags;\n        const writtenTags = new Set();\n        for (const { key, value } of keyValueIterator(metadataTags)) {\n            switch (key) {\n                case 'title':\n                    {\n                        addSimpleTag('TITLE', value);\n                        writtenTags.add('TITLE');\n                    }\n                    ;\n                    break;\n                case 'description':\n                    {\n                        addSimpleTag('DESCRIPTION', value);\n                        writtenTags.add('DESCRIPTION');\n                    }\n                    ;\n                    break;\n                case 'artist':\n                    {\n                        addSimpleTag('ARTIST', value);\n                        writtenTags.add('ARTIST');\n                    }\n                    ;\n                    break;\n                case 'album':\n                    {\n                        addSimpleTag('ALBUM', value);\n                        writtenTags.add('ALBUM');\n                    }\n                    ;\n                    break;\n                case 'albumArtist':\n                    {\n                        addSimpleTag('ALBUM_ARTIST', value);\n                        writtenTags.add('ALBUM_ARTIST');\n                    }\n                    ;\n                    break;\n                case 'genre':\n                    {\n                        addSimpleTag('GENRE', value);\n                        writtenTags.add('GENRE');\n                    }\n                    ;\n                    break;\n                case 'comment':\n                    {\n                        addSimpleTag('COMMENT', value);\n                        writtenTags.add('COMMENT');\n                    }\n                    ;\n                    break;\n                case 'lyrics':\n                    {\n                        addSimpleTag('LYRICS', value);\n                        writtenTags.add('LYRICS');\n                    }\n                    ;\n                    break;\n                case 'date':\n                    {\n                        addSimpleTag('DATE', value.toISOString().slice(0, 10));\n                        writtenTags.add('DATE');\n                    }\n                    ;\n                    break;\n                case 'trackNumber':\n                    {\n                        const string = metadataTags.tracksTotal !== undefined\n                            ? `${value}/${metadataTags.tracksTotal}`\n                            : value.toString();\n                        addSimpleTag('PART_NUMBER', string);\n                        writtenTags.add('PART_NUMBER');\n                    }\n                    ;\n                    break;\n                case 'discNumber':\n                    {\n                        const string = metadataTags.discsTotal !== undefined\n                            ? `${value}/${metadataTags.discsTotal}`\n                            : value.toString();\n                        addSimpleTag('DISC', string);\n                        writtenTags.add('DISC');\n                    }\n                    ;\n                    break;\n                case 'tracksTotal':\n                case 'discsTotal':\n                    {\n                        // Handled with trackNumber and discNumber respectively\n                    }\n                    ;\n                    break;\n                case 'images':\n                case 'raw':\n                    {\n                        // Handled elsewhere\n                    }\n                    ;\n                    break;\n                default: assertNever(key);\n            }\n        }\n        if (metadataTags.raw) {\n            for (const key in metadataTags.raw) {\n                const value = metadataTags.raw[key];\n                if (value == null || writtenTags.has(key)) {\n                    continue;\n                }\n                if (typeof value === 'string' || value instanceof Uint8Array) {\n                    addSimpleTag(key, value);\n                }\n            }\n        }\n        if (simpleTags.length === 0) {\n            return;\n        }\n        this.tagsElement = {\n            id: EBMLId.Tags,\n            data: [{ id: EBMLId.Tag, data: [\n                        { id: EBMLId.Targets, data: [\n                                { id: EBMLId.TargetTypeValue, data: 50 },\n                                { id: EBMLId.TargetType, data: 'MOVIE' },\n                            ] },\n                        ...simpleTags,\n                    ] }],\n        };\n    }\n    maybeCreateAttachments() {\n        const metadataTags = this.output._metadataTags;\n        const elements = [];\n        const existingFileUids = new Set();\n        const images = metadataTags.images ?? [];\n        for (const image of images) {\n            let imageName = image.name;\n            if (imageName === undefined) {\n                const baseName = image.kind === 'coverFront' ? 'cover' : image.kind === 'coverBack' ? 'back' : 'image';\n                imageName = baseName + (imageMimeTypeToExtension(image.mimeType) ?? '');\n            }\n            let fileUid;\n            while (true) {\n                // Generate a random 64-bit unsigned integer\n                fileUid = 0n;\n                for (let i = 0; i < 8; i++) {\n                    fileUid <<= 8n;\n                    fileUid |= BigInt(Math.floor(Math.random() * 256));\n                }\n                if (fileUid !== 0n && !existingFileUids.has(fileUid)) {\n                    break;\n                }\n            }\n            existingFileUids.add(fileUid);\n            elements.push({\n                id: EBMLId.AttachedFile,\n                data: [\n                    image.description !== undefined\n                        ? { id: EBMLId.FileDescription, data: new EBMLUnicodeString(image.description) }\n                        : null,\n                    { id: EBMLId.FileName, data: new EBMLUnicodeString(imageName) },\n                    { id: EBMLId.FileMediaType, data: image.mimeType },\n                    { id: EBMLId.FileData, data: image.data },\n                    { id: EBMLId.FileUID, data: fileUid },\n                ],\n            });\n        }\n        // Add all AttachedFiles from the raw metadata\n        for (const [key, value] of Object.entries(metadataTags.raw ?? {})) {\n            if (!(value instanceof AttachedFile)) {\n                continue;\n            }\n            const keyIsNumeric = /^\\d+$/.test(key);\n            if (!keyIsNumeric) {\n                continue;\n            }\n            if (images.find(x => x.mimeType === value.mimeType && uint8ArraysAreEqual(x.data, value.data))) {\n                // This attached file has very likely already been added as an image above\n                // (happens when remuxing Matroska)\n                continue;\n            }\n            elements.push({\n                id: EBMLId.AttachedFile,\n                data: [\n                    value.description !== undefined\n                        ? { id: EBMLId.FileDescription, data: new EBMLUnicodeString(value.description) }\n                        : null,\n                    { id: EBMLId.FileName, data: new EBMLUnicodeString(value.name ?? '') },\n                    { id: EBMLId.FileMediaType, data: value.mimeType ?? '' },\n                    { id: EBMLId.FileData, data: value.data },\n                    { id: EBMLId.FileUID, data: BigInt(key) },\n                ],\n            });\n        }\n        if (elements.length === 0) {\n            return;\n        }\n        this.attachmentsElement = { id: EBMLId.Attachments, data: elements };\n    }\n    createSegment() {\n        this.createTracks();\n        this.maybeCreateTags();\n        this.maybeCreateAttachments();\n        this.maybeCreateSeekHead(false);\n        const segment = {\n            id: EBMLId.Segment,\n            size: this.format._options.appendOnly ? -1 : SEGMENT_SIZE_BYTES,\n            data: [\n                this.seekHead, // null if append-only\n                this.segmentInfo,\n                this.tracksElement,\n                // Matroska spec says put this at the end of the file, but I think placing it before the first cluster\n                // makes more sense, and FFmpeg agrees (argumentum ad ffmpegum fallacy)\n                this.attachmentsElement,\n                this.tagsElement,\n            ],\n        };\n        this.segment = segment;\n        if (this.format._options.onSegmentHeader) {\n            this.writer.startTrackingWrites();\n        }\n        this.ebmlWriter.writeEBML(segment);\n        if (this.format._options.onSegmentHeader) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onSegmentHeader(data, start);\n        }\n    }\n    createCues() {\n        this.cues = { id: EBMLId.Cues, data: [] };\n    }\n    get segmentDataOffset() {\n        assert(this.segment);\n        return this.ebmlWriter.dataOffsets.get(this.segment);\n    }\n    allTracksAreKnown() {\n        for (const track of this.output._tracks) {\n            if (!track.source._closed && !this.trackDatas.some(x => x.track === track)) {\n                return false; // We haven't seen a sample from this open track yet\n            }\n        }\n        return true;\n    }\n    async getMimeType() {\n        await this.allTracksKnown.promise;\n        const codecStrings = this.trackDatas.map((trackData) => {\n            if (trackData.type === 'video') {\n                return trackData.info.decoderConfig.codec;\n            }\n            else if (trackData.type === 'audio') {\n                return trackData.info.decoderConfig.codec;\n            }\n            else {\n                const map = {\n                    webvtt: 'wvtt',\n                };\n                return map[trackData.track.source._codec];\n            }\n        });\n        return buildMatroskaMimeType({\n            isWebM: this.format instanceof WebMOutputFormat,\n            hasVideo: this.trackDatas.some(x => x.type === 'video'),\n            hasAudio: this.trackDatas.some(x => x.type === 'audio'),\n            codecStrings,\n        });\n    }\n    getVideoTrackData(track, packet, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        validateVideoChunkMetadata(meta);\n        assert(meta);\n        assert(meta.decoderConfig);\n        assert(meta.decoderConfig.codedWidth !== undefined);\n        assert(meta.decoderConfig.codedHeight !== undefined);\n        const newTrackData = {\n            track,\n            type: 'video',\n            info: {\n                width: meta.decoderConfig.codedWidth,\n                height: meta.decoderConfig.codedHeight,\n                decoderConfig: meta.decoderConfig,\n                alphaMode: !!packet.sideData.alpha, // The first packet determines if this track has alpha or not\n            },\n            chunkQueue: [],\n            lastWrittenMsTimestamp: null,\n        };\n        if (track.source._codec === 'vp9') {\n            // https://www.webmproject.org/docs/container specifies that VP9 \"SHOULD\" make use of the CodecPrivate\n            // field. Since WebCodecs makes no use of the description field for VP9, we need to derive it ourselves:\n            newTrackData.info.decoderConfig = {\n                ...newTrackData.info.decoderConfig,\n                description: new Uint8Array(generateVp9CodecConfigurationFromCodecString(newTrackData.info.decoderConfig.codec)),\n            };\n        }\n        else if (track.source._codec === 'av1') {\n            // Per https://github.com/ietf-wg-cellar/matroska-specification/blob/master/codec/av1.md, AV1 requires\n            // CodecPrivate to be set, but WebCodecs makes no use of the description field for AV1. Thus, let's derive\n            // it ourselves:\n            newTrackData.info.decoderConfig = {\n                ...newTrackData.info.decoderConfig,\n                description: new Uint8Array(generateAv1CodecConfigurationFromCodecString(newTrackData.info.decoderConfig.codec)),\n            };\n        }\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    getAudioTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        validateAudioChunkMetadata(meta);\n        assert(meta);\n        assert(meta.decoderConfig);\n        const newTrackData = {\n            track,\n            type: 'audio',\n            info: {\n                numberOfChannels: meta.decoderConfig.numberOfChannels,\n                sampleRate: meta.decoderConfig.sampleRate,\n                decoderConfig: meta.decoderConfig,\n            },\n            chunkQueue: [],\n            lastWrittenMsTimestamp: null,\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    getSubtitleTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        validateSubtitleMetadata(meta);\n        assert(meta);\n        assert(meta.config);\n        const newTrackData = {\n            track,\n            type: 'subtitle',\n            info: {\n                config: meta.config,\n            },\n            chunkQueue: [],\n            lastWrittenMsTimestamp: null,\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    async addEncodedVideoPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getVideoTrackData(track, packet, meta);\n            const isKeyFrame = packet.type === 'key';\n            let timestamp = this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, isKeyFrame);\n            let duration = packet.duration;\n            if (track.metadata.frameRate !== undefined) {\n                // Constrain the time values to the frame rate\n                timestamp = roundToMultiple(timestamp, 1 / track.metadata.frameRate);\n                duration = roundToMultiple(duration, 1 / track.metadata.frameRate);\n            }\n            const additions = trackData.info.alphaMode\n                ? packet.sideData.alpha ?? null\n                : null;\n            const videoChunk = this.createInternalChunk(packet.data, timestamp, duration, packet.type, additions);\n            if (track.source._codec === 'vp9')\n                this.fixVP9ColorSpace(trackData, videoChunk);\n            trackData.chunkQueue.push(videoChunk);\n            await this.interleaveChunks();\n        }\n        finally {\n            release();\n        }\n    }\n    async addEncodedAudioPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getAudioTrackData(track, meta);\n            const isKeyFrame = packet.type === 'key';\n            const timestamp = this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, isKeyFrame);\n            const audioChunk = this.createInternalChunk(packet.data, timestamp, packet.duration, packet.type);\n            trackData.chunkQueue.push(audioChunk);\n            await this.interleaveChunks();\n        }\n        finally {\n            release();\n        }\n    }\n    async addSubtitleCue(track, cue, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getSubtitleTrackData(track, meta);\n            const timestamp = this.validateAndNormalizeTimestamp(trackData.track, cue.timestamp, true);\n            let bodyText = cue.text;\n            const timestampMs = Math.round(timestamp * 1000);\n            // Replace in-body timestamps so that they're relative to the cue start time\n            inlineTimestampRegex.lastIndex = 0;\n            bodyText = bodyText.replace(inlineTimestampRegex, (match) => {\n                const time = parseSubtitleTimestamp(match.slice(1, -1));\n                const offsetTime = time - timestampMs;\n                return `<${formatSubtitleTimestamp(offsetTime)}>`;\n            });\n            const body = textEncoder.encode(bodyText);\n            const additions = `${cue.settings ?? ''}\\n${cue.identifier ?? ''}\\n${cue.notes ?? ''}`;\n            const subtitleChunk = this.createInternalChunk(body, timestamp, cue.duration, 'key', additions.trim() ? textEncoder.encode(additions) : null);\n            trackData.chunkQueue.push(subtitleChunk);\n            await this.interleaveChunks();\n        }\n        finally {\n            release();\n        }\n    }\n    async interleaveChunks(isFinalCall = false) {\n        if (!isFinalCall && !this.allTracksAreKnown()) {\n            return; // We can't interleave yet as we don't yet know how many tracks we'll truly have\n        }\n        outer: while (true) {\n            let trackWithMinTimestamp = null;\n            let minTimestamp = Infinity;\n            for (const trackData of this.trackDatas) {\n                if (!isFinalCall && trackData.chunkQueue.length === 0 && !trackData.track.source._closed) {\n                    break outer;\n                }\n                if (trackData.chunkQueue.length > 0 && trackData.chunkQueue[0].timestamp < minTimestamp) {\n                    trackWithMinTimestamp = trackData;\n                    minTimestamp = trackData.chunkQueue[0].timestamp;\n                }\n            }\n            if (!trackWithMinTimestamp) {\n                break;\n            }\n            const chunk = trackWithMinTimestamp.chunkQueue.shift();\n            this.writeBlock(trackWithMinTimestamp, chunk);\n        }\n        if (!isFinalCall) {\n            await this.writer.flush();\n        }\n    }\n    /**\n     * Due to [a bug in Chromium](https://bugs.chromium.org/p/chromium/issues/detail?id=1377842), VP9 streams often\n     * lack color space information. This method patches in that information.\n     */\n    fixVP9ColorSpace(trackData, chunk) {\n        // http://downloads.webmproject.org/docs/vp9/vp9-bitstream_superframe-and-uncompressed-header_v1.0.pdf\n        if (chunk.type !== 'key')\n            return;\n        if (!trackData.info.decoderConfig.colorSpace || !trackData.info.decoderConfig.colorSpace.matrix)\n            return;\n        const bitstream = new Bitstream(chunk.data);\n        bitstream.skipBits(2);\n        const profileLowBit = bitstream.readBits(1);\n        const profileHighBit = bitstream.readBits(1);\n        const profile = (profileHighBit << 1) + profileLowBit;\n        if (profile === 3)\n            bitstream.skipBits(1);\n        const showExistingFrame = bitstream.readBits(1);\n        if (showExistingFrame)\n            return;\n        const frameType = bitstream.readBits(1);\n        if (frameType !== 0)\n            return; // Just to be sure\n        bitstream.skipBits(2);\n        const syncCode = bitstream.readBits(24);\n        if (syncCode !== 0x498342)\n            return;\n        if (profile >= 2)\n            bitstream.skipBits(1);\n        const colorSpaceID = {\n            rgb: 7,\n            bt709: 2,\n            bt470bg: 1,\n            smpte170m: 3,\n        }[trackData.info.decoderConfig.colorSpace.matrix];\n        // The bitstream position is now at the start of the color space bits.\n        // We can use the global writeBits function here as requested.\n        writeBits(chunk.data, bitstream.pos, bitstream.pos + 3, colorSpaceID);\n    }\n    /** Converts a read-only external chunk into an internal one for easier use. */\n    createInternalChunk(data, timestamp, duration, type, additions = null) {\n        const internalChunk = {\n            data,\n            type,\n            timestamp,\n            duration,\n            additions,\n        };\n        return internalChunk;\n    }\n    /** Writes a block containing media data to the file. */\n    writeBlock(trackData, chunk) {\n        // Due to the interlacing algorithm, this code will be run once we've seen one chunk from every media track.\n        if (!this.segment) {\n            this.createSegment();\n        }\n        const msTimestamp = Math.round(1000 * chunk.timestamp);\n        // We wanna only finalize this cluster (and begin a new one) if we know that each track will be able to\n        // start the new one with a key frame.\n        const keyFrameQueuedEverywhere = this.trackDatas.every((otherTrackData) => {\n            if (trackData === otherTrackData) {\n                return chunk.type === 'key';\n            }\n            const firstQueuedSample = otherTrackData.chunkQueue[0];\n            if (firstQueuedSample) {\n                return firstQueuedSample.type === 'key';\n            }\n            return otherTrackData.track.source._closed;\n        });\n        let shouldCreateNewCluster = false;\n        if (!this.currentCluster) {\n            shouldCreateNewCluster = true;\n        }\n        else {\n            assert(this.currentClusterStartMsTimestamp !== null);\n            assert(this.currentClusterMaxMsTimestamp !== null);\n            const relativeTimestamp = msTimestamp - this.currentClusterStartMsTimestamp;\n            shouldCreateNewCluster = (keyFrameQueuedEverywhere\n                // This check is required because that means there is already a block with this timestamp in the\n                // CURRENT chunk, meaning that starting the next cluster at the same timestamp is forbidden (since\n                // the already-written block would belong into it instead).\n                && msTimestamp > this.currentClusterMaxMsTimestamp\n                && relativeTimestamp >= 1000 * (this.format._options.minimumClusterDuration ?? 1))\n                // The cluster would exceed its maximum allowed length. This puts us in an unfortunate position and forces\n                // us to begin the next cluster with a delta frame. Although this is undesirable, it is not forbidden by the\n                // spec and is supported by players.\n                || relativeTimestamp > MAX_CLUSTER_TIMESTAMP_MS;\n        }\n        if (shouldCreateNewCluster) {\n            this.createNewCluster(msTimestamp);\n        }\n        const relativeTimestamp = msTimestamp - this.currentClusterStartMsTimestamp;\n        if (relativeTimestamp < MIN_CLUSTER_TIMESTAMP_MS) {\n            // The block lies too far in the past, it's not representable within this cluster\n            return;\n        }\n        const prelude = new Uint8Array(4);\n        const view = new DataView(prelude.buffer);\n        // 0x80 to indicate it's the last byte of a multi-byte number\n        view.setUint8(0, 0x80 | trackData.track.id);\n        view.setInt16(1, relativeTimestamp, false);\n        const msDuration = Math.round(1000 * chunk.duration);\n        if (!chunk.additions) {\n            // No additions, we can write out a SimpleBlock\n            view.setUint8(3, Number(chunk.type === 'key') << 7); // Flags (keyframe flag only present for SimpleBlock)\n            const simpleBlock = { id: EBMLId.SimpleBlock, data: [\n                    prelude,\n                    chunk.data,\n                ] };\n            this.ebmlWriter.writeEBML(simpleBlock);\n        }\n        else {\n            const blockGroup = { id: EBMLId.BlockGroup, data: [\n                    { id: EBMLId.Block, data: [\n                            prelude,\n                            chunk.data,\n                        ] },\n                    chunk.type === 'delta'\n                        ? {\n                            id: EBMLId.ReferenceBlock,\n                            data: new EBMLSignedInt(trackData.lastWrittenMsTimestamp - msTimestamp),\n                        }\n                        : null,\n                    chunk.additions\n                        ? { id: EBMLId.BlockAdditions, data: [\n                                { id: EBMLId.BlockMore, data: [\n                                        { id: EBMLId.BlockAddID, data: 1 }, // Some players expect BlockAddID to come first\n                                        { id: EBMLId.BlockAdditional, data: chunk.additions },\n                                    ] },\n                            ] }\n                        : null,\n                    msDuration > 0 ? { id: EBMLId.BlockDuration, data: msDuration } : null,\n                ] };\n            this.ebmlWriter.writeEBML(blockGroup);\n        }\n        this.duration = Math.max(this.duration, msTimestamp + msDuration);\n        trackData.lastWrittenMsTimestamp = msTimestamp;\n        if (!this.trackDatasInCurrentCluster.has(trackData)) {\n            this.trackDatasInCurrentCluster.set(trackData, {\n                firstMsTimestamp: msTimestamp,\n            });\n        }\n        this.currentClusterMaxMsTimestamp = Math.max(this.currentClusterMaxMsTimestamp, msTimestamp);\n    }\n    /** Creates a new Cluster element to contain media chunks. */\n    createNewCluster(msTimestamp) {\n        if (this.currentCluster) {\n            this.finalizeCurrentCluster();\n        }\n        if (this.format._options.onCluster) {\n            this.writer.startTrackingWrites();\n        }\n        this.currentCluster = {\n            id: EBMLId.Cluster,\n            size: this.format._options.appendOnly ? -1 : CLUSTER_SIZE_BYTES,\n            data: [\n                { id: EBMLId.Timestamp, data: msTimestamp },\n            ],\n        };\n        this.ebmlWriter.writeEBML(this.currentCluster);\n        this.currentClusterStartMsTimestamp = msTimestamp;\n        this.currentClusterMaxMsTimestamp = msTimestamp;\n        this.trackDatasInCurrentCluster.clear();\n    }\n    finalizeCurrentCluster() {\n        assert(this.currentCluster);\n        if (!this.format._options.appendOnly) {\n            const clusterSize = this.writer.getPos() - this.ebmlWriter.dataOffsets.get(this.currentCluster);\n            const endPos = this.writer.getPos();\n            // Write the size now that we know it\n            this.writer.seek(this.ebmlWriter.offsets.get(this.currentCluster) + 4);\n            this.ebmlWriter.writeVarInt(clusterSize, CLUSTER_SIZE_BYTES);\n            this.writer.seek(endPos);\n        }\n        if (this.format._options.onCluster) {\n            assert(this.currentClusterStartMsTimestamp !== null);\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onCluster(data, start, this.currentClusterStartMsTimestamp / 1000);\n        }\n        const clusterOffsetFromSegment = this.ebmlWriter.offsets.get(this.currentCluster) - this.segmentDataOffset;\n        // Group tracks by their first timestamp and create a CuePoint for each unique timestamp\n        const groupedByTimestamp = new Map();\n        for (const [trackData, { firstMsTimestamp }] of this.trackDatasInCurrentCluster) {\n            if (!groupedByTimestamp.has(firstMsTimestamp)) {\n                groupedByTimestamp.set(firstMsTimestamp, []);\n            }\n            groupedByTimestamp.get(firstMsTimestamp).push(trackData);\n        }\n        const groupedAndSortedByTimestamp = [...groupedByTimestamp.entries()].sort((a, b) => a[0] - b[0]);\n        // Add CuePoints to the Cues element for better seeking\n        for (const [msTimestamp, trackDatas] of groupedAndSortedByTimestamp) {\n            assert(this.cues);\n            this.cues.data.push({ id: EBMLId.CuePoint, data: [\n                    { id: EBMLId.CueTime, data: msTimestamp },\n                    // Create CueTrackPositions for each track that starts at this timestamp\n                    ...trackDatas.map((trackData) => {\n                        return { id: EBMLId.CueTrackPositions, data: [\n                                { id: EBMLId.CueTrack, data: trackData.track.id },\n                                { id: EBMLId.CueClusterPosition, data: clusterOffsetFromSegment },\n                            ] };\n                    }),\n                ] });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    async onTrackClose() {\n        const release = await this.mutex.acquire();\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        // Since a track is now closed, we may be able to write out chunks that were previously waiting\n        await this.interleaveChunks();\n        release();\n    }\n    /** Finalizes the file, making it ready for use. Must be called after all media chunks have been added. */\n    async finalize() {\n        const release = await this.mutex.acquire();\n        this.allTracksKnown.resolve();\n        if (!this.segment) {\n            this.createSegment();\n        }\n        // Flush any remaining queued chunks to the file\n        await this.interleaveChunks(true);\n        if (this.currentCluster) {\n            this.finalizeCurrentCluster();\n        }\n        assert(this.cues);\n        this.ebmlWriter.writeEBML(this.cues);\n        if (!this.format._options.appendOnly) {\n            const endPos = this.writer.getPos();\n            // Write the Segment size\n            const segmentSize = this.writer.getPos() - this.segmentDataOffset;\n            this.writer.seek(this.ebmlWriter.offsets.get(this.segment) + 4);\n            this.ebmlWriter.writeVarInt(segmentSize, SEGMENT_SIZE_BYTES);\n            // Write the duration of the media to the Segment\n            this.segmentDuration.data = new EBMLFloat64(this.duration);\n            this.writer.seek(this.ebmlWriter.offsets.get(this.segmentDuration));\n            this.ebmlWriter.writeEBML(this.segmentDuration);\n            // Fill in SeekHead position data and write it again\n            assert(this.seekHead);\n            this.writer.seek(this.ebmlWriter.offsets.get(this.seekHead));\n            this.maybeCreateSeekHead(true);\n            this.ebmlWriter.writeEBML(this.seekHead);\n            this.writer.seek(endPos);\n        }\n        release();\n    }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { AdtsMuxer } from './adts/adts-muxer.js';\nimport { AUDIO_CODECS, NON_PCM_AUDIO_CODECS, PCM_AUDIO_CODECS, SUBTITLE_CODECS, VIDEO_CODECS, } from './codec.js';\nimport { FlacMuxer } from './flac/flac-muxer.js';\nimport { IsobmffMuxer } from './isobmff/isobmff-muxer.js';\nimport { MatroskaMuxer } from './matroska/matroska-muxer.js';\nimport { Mp3Muxer } from './mp3/mp3-muxer.js';\nimport { OggMuxer } from './ogg/ogg-muxer.js';\nimport { WaveMuxer } from './wave/wave-muxer.js';\n/**\n * Base class representing an output media file format.\n * @group Output formats\n * @public\n */\nexport class OutputFormat {\n    /** Returns a list of video codecs that this output format can contain. */\n    getSupportedVideoCodecs() {\n        return this.getSupportedCodecs()\n            .filter(codec => VIDEO_CODECS.includes(codec));\n    }\n    /** Returns a list of audio codecs that this output format can contain. */\n    getSupportedAudioCodecs() {\n        return this.getSupportedCodecs()\n            .filter(codec => AUDIO_CODECS.includes(codec));\n    }\n    /** Returns a list of subtitle codecs that this output format can contain. */\n    getSupportedSubtitleCodecs() {\n        return this.getSupportedCodecs()\n            .filter(codec => SUBTITLE_CODECS.includes(codec));\n    }\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _codecUnsupportedHint(codec) {\n        return '';\n    }\n}\n/**\n * Format representing files compatible with the ISO base media file format (ISOBMFF), like MP4 or MOV files.\n * @group Output formats\n * @public\n */\nexport class IsobmffOutputFormat extends OutputFormat {\n    /** Internal constructor. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.fastStart !== undefined\n            && ![false, 'in-memory', 'reserve', 'fragmented'].includes(options.fastStart)) {\n            throw new TypeError('options.fastStart, when provided, must be false, \\'in-memory\\', \\'reserve\\', or \\'fragmented\\'.');\n        }\n        if (options.minimumFragmentDuration !== undefined\n            && (!Number.isFinite(options.minimumFragmentDuration) || options.minimumFragmentDuration < 0)) {\n            throw new TypeError('options.minimumFragmentDuration, when provided, must be a non-negative number.');\n        }\n        if (options.onFtyp !== undefined && typeof options.onFtyp !== 'function') {\n            throw new TypeError('options.onFtyp, when provided, must be a function.');\n        }\n        if (options.onMoov !== undefined && typeof options.onMoov !== 'function') {\n            throw new TypeError('options.onMoov, when provided, must be a function.');\n        }\n        if (options.onMdat !== undefined && typeof options.onMdat !== 'function') {\n            throw new TypeError('options.onMdat, when provided, must be a function.');\n        }\n        if (options.onMoof !== undefined && typeof options.onMoof !== 'function') {\n            throw new TypeError('options.onMoof, when provided, must be a function.');\n        }\n        if (options.metadataFormat !== undefined\n            && !['mdir', 'mdta', 'udta', 'auto'].includes(options.metadataFormat)) {\n            throw new TypeError('options.metadataFormat, when provided, must be either \\'auto\\', \\'mdir\\', \\'mdta\\', or \\'udta\\'.');\n        }\n        super();\n        this._options = options;\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: Infinity },\n            audio: { min: 0, max: Infinity },\n            subtitle: { min: 0, max: Infinity },\n            total: { min: 1, max: 2 ** 32 - 1 }, // Have fun reaching this one\n        };\n    }\n    get supportsVideoRotationMetadata() {\n        return true;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new IsobmffMuxer(output, this);\n    }\n}\n/**\n * MPEG-4 Part 14 (MP4) file format. Supports most codecs.\n * @group Output formats\n * @public\n */\nexport class Mp4OutputFormat extends IsobmffOutputFormat {\n    /** Creates a new {@link Mp4OutputFormat} configured with the specified `options`. */\n    constructor(options) {\n        super(options);\n    }\n    /** @internal */\n    get _name() {\n        return 'MP4';\n    }\n    get fileExtension() {\n        return '.mp4';\n    }\n    get mimeType() {\n        return 'video/mp4';\n    }\n    getSupportedCodecs() {\n        return [\n            ...VIDEO_CODECS,\n            ...NON_PCM_AUDIO_CODECS,\n            // These are supported via ISO/IEC 23003-5\n            'pcm-s16',\n            'pcm-s16be',\n            'pcm-s24',\n            'pcm-s24be',\n            'pcm-s32',\n            'pcm-s32be',\n            'pcm-f32',\n            'pcm-f32be',\n            'pcm-f64',\n            'pcm-f64be',\n            ...SUBTITLE_CODECS,\n        ];\n    }\n    /** @internal */\n    _codecUnsupportedHint(codec) {\n        if (new MovOutputFormat().getSupportedCodecs().includes(codec)) {\n            return ' Switching to MOV will grant support for this codec.';\n        }\n        return '';\n    }\n}\n/**\n * QuickTime File Format (QTFF), often called MOV. Supports all video and audio codecs, but not subtitle codecs.\n * @group Output formats\n * @public\n */\nexport class MovOutputFormat extends IsobmffOutputFormat {\n    /** Creates a new {@link MovOutputFormat} configured with the specified `options`. */\n    constructor(options) {\n        super(options);\n    }\n    /** @internal */\n    get _name() {\n        return 'MOV';\n    }\n    get fileExtension() {\n        return '.mov';\n    }\n    get mimeType() {\n        return 'video/quicktime';\n    }\n    getSupportedCodecs() {\n        return [\n            ...VIDEO_CODECS,\n            ...AUDIO_CODECS,\n        ];\n    }\n    /** @internal */\n    _codecUnsupportedHint(codec) {\n        if (new Mp4OutputFormat().getSupportedCodecs().includes(codec)) {\n            return ' Switching to MP4 will grant support for this codec.';\n        }\n        return '';\n    }\n}\n/**\n * Matroska file format.\n *\n * Supports writing transparent video. For a video track to be marked as transparent, the first packet added must\n * contain alpha side data.\n *\n * @group Output formats\n * @public\n */\nexport class MkvOutputFormat extends OutputFormat {\n    /** Creates a new {@link MkvOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.appendOnly !== undefined && typeof options.appendOnly !== 'boolean') {\n            throw new TypeError('options.appendOnly, when provided, must be a boolean.');\n        }\n        if (options.minimumClusterDuration !== undefined\n            && (!Number.isFinite(options.minimumClusterDuration) || options.minimumClusterDuration < 0)) {\n            throw new TypeError('options.minimumClusterDuration, when provided, must be a non-negative number.');\n        }\n        if (options.onEbmlHeader !== undefined && typeof options.onEbmlHeader !== 'function') {\n            throw new TypeError('options.onEbmlHeader, when provided, must be a function.');\n        }\n        if (options.onSegmentHeader !== undefined && typeof options.onSegmentHeader !== 'function') {\n            throw new TypeError('options.onHeader, when provided, must be a function.');\n        }\n        if (options.onCluster !== undefined && typeof options.onCluster !== 'function') {\n            throw new TypeError('options.onCluster, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new MatroskaMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'Matroska';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: Infinity },\n            audio: { min: 0, max: Infinity },\n            subtitle: { min: 0, max: Infinity },\n            total: { min: 1, max: 127 },\n        };\n    }\n    get fileExtension() {\n        return '.mkv';\n    }\n    get mimeType() {\n        return 'video/x-matroska';\n    }\n    getSupportedCodecs() {\n        return [\n            ...VIDEO_CODECS,\n            ...NON_PCM_AUDIO_CODECS,\n            ...PCM_AUDIO_CODECS.filter(codec => !['pcm-s8', 'pcm-f32be', 'pcm-f64be', 'ulaw', 'alaw'].includes(codec)),\n            ...SUBTITLE_CODECS,\n        ];\n    }\n    get supportsVideoRotationMetadata() {\n        // While it technically does support it with ProjectionPoseRoll, many players appear to ignore this value\n        return false;\n    }\n}\n/**\n * WebM file format, based on Matroska.\n *\n * Supports writing transparent video. For a video track to be marked as transparent, the first packet added must\n * contain alpha side data.\n *\n * @group Output formats\n * @public\n */\nexport class WebMOutputFormat extends MkvOutputFormat {\n    /** Creates a new {@link WebMOutputFormat} configured with the specified `options`. */\n    constructor(options) {\n        super(options);\n    }\n    getSupportedCodecs() {\n        return [\n            ...VIDEO_CODECS.filter(codec => ['vp8', 'vp9', 'av1'].includes(codec)),\n            ...AUDIO_CODECS.filter(codec => ['opus', 'vorbis'].includes(codec)),\n            ...SUBTITLE_CODECS,\n        ];\n    }\n    /** @internal */\n    get _name() {\n        return 'WebM';\n    }\n    get fileExtension() {\n        return '.webm';\n    }\n    get mimeType() {\n        return 'video/webm';\n    }\n    /** @internal */\n    _codecUnsupportedHint(codec) {\n        if (new MkvOutputFormat().getSupportedCodecs().includes(codec)) {\n            return ' Switching to MKV will grant support for this codec.';\n        }\n        return '';\n    }\n}\n/**\n * MP3 file format.\n * @group Output formats\n * @public\n */\nexport class Mp3OutputFormat extends OutputFormat {\n    /** Creates a new {@link Mp3OutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.xingHeader !== undefined && typeof options.xingHeader !== 'boolean') {\n            throw new TypeError('options.xingHeader, when provided, must be a boolean.');\n        }\n        if (options.onXingFrame !== undefined && typeof options.onXingFrame !== 'function') {\n            throw new TypeError('options.onXingFrame, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new Mp3Muxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'MP3';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.mp3';\n    }\n    get mimeType() {\n        return 'audio/mpeg';\n    }\n    getSupportedCodecs() {\n        return ['mp3'];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * WAVE file format, based on RIFF.\n * @group Output formats\n * @public\n */\nexport class WavOutputFormat extends OutputFormat {\n    /** Creates a new {@link WavOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.large !== undefined && typeof options.large !== 'boolean') {\n            throw new TypeError('options.large, when provided, must be a boolean.');\n        }\n        if (options.metadataFormat !== undefined && !['info', 'id3'].includes(options.metadataFormat)) {\n            throw new TypeError('options.metadataFormat, when provided, must be either \\'info\\' or \\'id3\\'.');\n        }\n        if (options.onHeader !== undefined && typeof options.onHeader !== 'function') {\n            throw new TypeError('options.onHeader, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new WaveMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'WAVE';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.wav';\n    }\n    get mimeType() {\n        return 'audio/wav';\n    }\n    getSupportedCodecs() {\n        return [\n            ...PCM_AUDIO_CODECS.filter(codec => ['pcm-s16', 'pcm-s24', 'pcm-s32', 'pcm-f32', 'pcm-u8', 'ulaw', 'alaw'].includes(codec)),\n        ];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * Ogg file format.\n * @group Output formats\n * @public\n */\nexport class OggOutputFormat extends OutputFormat {\n    /** Creates a new {@link OggOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.onPage !== undefined && typeof options.onPage !== 'function') {\n            throw new TypeError('options.onPage, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new OggMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'Ogg';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 0, max: Infinity },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 2 ** 32 },\n        };\n    }\n    get fileExtension() {\n        return '.ogg';\n    }\n    get mimeType() {\n        return 'application/ogg';\n    }\n    getSupportedCodecs() {\n        return [\n            ...AUDIO_CODECS.filter(codec => ['vorbis', 'opus'].includes(codec)),\n        ];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * ADTS file format.\n * @group Output formats\n * @public\n */\nexport class AdtsOutputFormat extends OutputFormat {\n    /** Creates a new {@link AdtsOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.onFrame !== undefined && typeof options.onFrame !== 'function') {\n            throw new TypeError('options.onFrame, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new AdtsMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'ADTS';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.aac';\n    }\n    get mimeType() {\n        return 'audio/aac';\n    }\n    getSupportedCodecs() {\n        return ['aac'];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * FLAC file format.\n * @group Output formats\n * @public\n */\nexport class FlacOutputFormat extends OutputFormat {\n    /** Creates a new {@link FlacOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new FlacMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'FLAC';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.flac';\n    }\n    get mimeType() {\n        return 'audio/flac';\n    }\n    getSupportedCodecs() {\n        return ['flac'];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { AUDIO_CODECS, buildAudioCodecString, buildVideoCodecString, getAudioEncoderConfigExtension, getVideoEncoderConfigExtension, inferCodecFromCodecString, PCM_AUDIO_CODECS, SUBTITLE_CODECS, VIDEO_CODECS, } from './codec.js';\nimport { customAudioEncoders, customVideoEncoders } from './custom-coder.js';\nexport const validateVideoEncodingConfig = (config) => {\n    if (!config || typeof config !== 'object') {\n        throw new TypeError('Encoding config must be an object.');\n    }\n    if (!VIDEO_CODECS.includes(config.codec)) {\n        throw new TypeError(`Invalid video codec '${config.codec}'. Must be one of: ${VIDEO_CODECS.join(', ')}.`);\n    }\n    if (!(config.bitrate instanceof Quality) && (!Number.isInteger(config.bitrate) || config.bitrate <= 0)) {\n        throw new TypeError('config.bitrate must be a positive integer or a quality.');\n    }\n    if (config.keyFrameInterval !== undefined\n        && (!Number.isFinite(config.keyFrameInterval) || config.keyFrameInterval < 0)) {\n        throw new TypeError('config.keyFrameInterval, when provided, must be a non-negative number.');\n    }\n    if (config.sizeChangeBehavior !== undefined\n        && !['deny', 'passThrough', 'fill', 'contain', 'cover'].includes(config.sizeChangeBehavior)) {\n        throw new TypeError('config.sizeChangeBehavior, when provided, must be \\'deny\\', \\'passThrough\\', \\'fill\\', \\'contain\\''\n            + ' or \\'cover\\'.');\n    }\n    if (config.onEncodedPacket !== undefined && typeof config.onEncodedPacket !== 'function') {\n        throw new TypeError('config.onEncodedChunk, when provided, must be a function.');\n    }\n    if (config.onEncoderConfig !== undefined && typeof config.onEncoderConfig !== 'function') {\n        throw new TypeError('config.onEncoderConfig, when provided, must be a function.');\n    }\n    validateVideoEncodingAdditionalOptions(config.codec, config);\n};\nexport const validateVideoEncodingAdditionalOptions = (codec, options) => {\n    if (!options || typeof options !== 'object') {\n        throw new TypeError('Encoding options must be an object.');\n    }\n    if (options.alpha !== undefined && !['discard', 'keep'].includes(options.alpha)) {\n        throw new TypeError('options.alpha, when provided, must be \\'discard\\' or \\'keep\\'.');\n    }\n    if (options.bitrateMode !== undefined && !['constant', 'variable'].includes(options.bitrateMode)) {\n        throw new TypeError('bitrateMode, when provided, must be \\'constant\\' or \\'variable\\'.');\n    }\n    if (options.latencyMode !== undefined && !['quality', 'realtime'].includes(options.latencyMode)) {\n        throw new TypeError('latencyMode, when provided, must be \\'quality\\' or \\'realtime\\'.');\n    }\n    if (options.fullCodecString !== undefined && typeof options.fullCodecString !== 'string') {\n        throw new TypeError('fullCodecString, when provided, must be a string.');\n    }\n    if (options.fullCodecString !== undefined && inferCodecFromCodecString(options.fullCodecString) !== codec) {\n        throw new TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${codec}).`);\n    }\n    if (options.hardwareAcceleration !== undefined\n        && !['no-preference', 'prefer-hardware', 'prefer-software'].includes(options.hardwareAcceleration)) {\n        throw new TypeError('hardwareAcceleration, when provided, must be \\'no-preference\\', \\'prefer-hardware\\' or'\n            + ' \\'prefer-software\\'.');\n    }\n    if (options.scalabilityMode !== undefined && typeof options.scalabilityMode !== 'string') {\n        throw new TypeError('scalabilityMode, when provided, must be a string.');\n    }\n    if (options.contentHint !== undefined && typeof options.contentHint !== 'string') {\n        throw new TypeError('contentHint, when provided, must be a string.');\n    }\n};\nexport const buildVideoEncoderConfig = (options) => {\n    const resolvedBitrate = options.bitrate instanceof Quality\n        ? options.bitrate._toVideoBitrate(options.codec, options.width, options.height)\n        : options.bitrate;\n    return {\n        codec: options.fullCodecString ?? buildVideoCodecString(options.codec, options.width, options.height, resolvedBitrate),\n        width: options.width,\n        height: options.height,\n        bitrate: resolvedBitrate,\n        bitrateMode: options.bitrateMode,\n        alpha: options.alpha ?? 'discard',\n        framerate: options.framerate,\n        latencyMode: options.latencyMode,\n        hardwareAcceleration: options.hardwareAcceleration,\n        scalabilityMode: options.scalabilityMode,\n        contentHint: options.contentHint,\n        ...getVideoEncoderConfigExtension(options.codec),\n    };\n};\nexport const validateAudioEncodingConfig = (config) => {\n    if (!config || typeof config !== 'object') {\n        throw new TypeError('Encoding config must be an object.');\n    }\n    if (!AUDIO_CODECS.includes(config.codec)) {\n        throw new TypeError(`Invalid audio codec '${config.codec}'. Must be one of: ${AUDIO_CODECS.join(', ')}.`);\n    }\n    if (config.bitrate === undefined\n        && (!PCM_AUDIO_CODECS.includes(config.codec) || config.codec === 'flac')) {\n        throw new TypeError('config.bitrate must be provided for compressed audio codecs.');\n    }\n    if (config.bitrate !== undefined\n        && !(config.bitrate instanceof Quality)\n        && (!Number.isInteger(config.bitrate) || config.bitrate <= 0)) {\n        throw new TypeError('config.bitrate, when provided, must be a positive integer or a quality.');\n    }\n    if (config.onEncodedPacket !== undefined && typeof config.onEncodedPacket !== 'function') {\n        throw new TypeError('config.onEncodedChunk, when provided, must be a function.');\n    }\n    if (config.onEncoderConfig !== undefined && typeof config.onEncoderConfig !== 'function') {\n        throw new TypeError('config.onEncoderConfig, when provided, must be a function.');\n    }\n    validateAudioEncodingAdditionalOptions(config.codec, config);\n};\nexport const validateAudioEncodingAdditionalOptions = (codec, options) => {\n    if (!options || typeof options !== 'object') {\n        throw new TypeError('Encoding options must be an object.');\n    }\n    if (options.bitrateMode !== undefined && !['constant', 'variable'].includes(options.bitrateMode)) {\n        throw new TypeError('bitrateMode, when provided, must be \\'constant\\' or \\'variable\\'.');\n    }\n    if (options.fullCodecString !== undefined && typeof options.fullCodecString !== 'string') {\n        throw new TypeError('fullCodecString, when provided, must be a string.');\n    }\n    if (options.fullCodecString !== undefined && inferCodecFromCodecString(options.fullCodecString) !== codec) {\n        throw new TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${codec}).`);\n    }\n};\nexport const buildAudioEncoderConfig = (options) => {\n    const resolvedBitrate = options.bitrate instanceof Quality\n        ? options.bitrate._toAudioBitrate(options.codec)\n        : options.bitrate;\n    return {\n        codec: options.fullCodecString ?? buildAudioCodecString(options.codec, options.numberOfChannels, options.sampleRate),\n        numberOfChannels: options.numberOfChannels,\n        sampleRate: options.sampleRate,\n        bitrate: resolvedBitrate,\n        bitrateMode: options.bitrateMode,\n        ...getAudioEncoderConfigExtension(options.codec),\n    };\n};\n/**\n * Represents a subjective media quality level.\n * @group Encoding\n * @public\n */\nexport class Quality {\n    /** @internal */\n    constructor(factor) {\n        this._factor = factor;\n    }\n    /** @internal */\n    _toVideoBitrate(codec, width, height) {\n        const pixels = width * height;\n        const codecEfficiencyFactors = {\n            avc: 1.0, // H.264/AVC (baseline)\n            hevc: 0.6, // H.265/HEVC (~40% more efficient than AVC)\n            vp9: 0.6, // Similar to HEVC\n            av1: 0.4, // ~60% more efficient than AVC\n            vp8: 1.2, // Slightly less efficient than AVC\n        };\n        const referencePixels = 1920 * 1080;\n        const referenceBitrate = 3000000;\n        const scaleFactor = Math.pow(pixels / referencePixels, 0.95); // Slight non-linear scaling\n        const baseBitrate = referenceBitrate * scaleFactor;\n        const codecAdjustedBitrate = baseBitrate * codecEfficiencyFactors[codec];\n        const finalBitrate = codecAdjustedBitrate * this._factor;\n        return Math.ceil(finalBitrate / 1000) * 1000;\n    }\n    /** @internal */\n    _toAudioBitrate(codec) {\n        if (PCM_AUDIO_CODECS.includes(codec) || codec === 'flac') {\n            return undefined;\n        }\n        const baseRates = {\n            aac: 128000, // 128kbps base for AAC\n            opus: 64000, // 64kbps base for Opus\n            mp3: 160000, // 160kbps base for MP3\n            vorbis: 64000, // 64kbps base for Vorbis\n        };\n        const baseBitrate = baseRates[codec];\n        if (!baseBitrate) {\n            throw new Error(`Unhandled codec: ${codec}`);\n        }\n        let finalBitrate = baseBitrate * this._factor;\n        if (codec === 'aac') {\n            // AAC only works with specific bitrates, let's find the closest\n            const validRates = [96000, 128000, 160000, 192000];\n            finalBitrate = validRates.reduce((prev, curr) => Math.abs(curr - finalBitrate) < Math.abs(prev - finalBitrate) ? curr : prev);\n        }\n        else if (codec === 'opus' || codec === 'vorbis') {\n            finalBitrate = Math.max(6000, finalBitrate);\n        }\n        else if (codec === 'mp3') {\n            const validRates = [\n                8000, 16000, 24000, 32000, 40000, 48000, 64000, 80000,\n                96000, 112000, 128000, 160000, 192000, 224000, 256000, 320000,\n            ];\n            finalBitrate = validRates.reduce((prev, curr) => Math.abs(curr - finalBitrate) < Math.abs(prev - finalBitrate) ? curr : prev);\n        }\n        return Math.round(finalBitrate / 1000) * 1000;\n    }\n}\n/**\n * Represents a very low media quality.\n * @group Encoding\n * @public\n */\nexport const QUALITY_VERY_LOW = new Quality(0.3);\n/**\n * Represents a low media quality.\n * @group Encoding\n * @public\n */\nexport const QUALITY_LOW = new Quality(0.6);\n/**\n * Represents a medium media quality.\n * @group Encoding\n * @public\n */\nexport const QUALITY_MEDIUM = new Quality(1);\n/**\n * Represents a high media quality.\n * @group Encoding\n * @public\n */\nexport const QUALITY_HIGH = new Quality(2);\n/**\n * Represents a very high media quality.\n * @group Encoding\n * @public\n */\nexport const QUALITY_VERY_HIGH = new Quality(4);\n/**\n * Checks if the browser is able to encode the given codec.\n * @group Encoding\n * @public\n */\nexport const canEncode = (codec) => {\n    if (VIDEO_CODECS.includes(codec)) {\n        return canEncodeVideo(codec);\n    }\n    else if (AUDIO_CODECS.includes(codec)) {\n        return canEncodeAudio(codec);\n    }\n    else if (SUBTITLE_CODECS.includes(codec)) {\n        return canEncodeSubtitles(codec);\n    }\n    throw new TypeError(`Unknown codec '${codec}'.`);\n};\n/**\n * Checks if the browser is able to encode the given video codec with the given parameters.\n * @group Encoding\n * @public\n */\nexport const canEncodeVideo = async (codec, options = {}) => {\n    const { width = 1280, height = 720, bitrate = 1e6, ...restOptions } = options;\n    if (!VIDEO_CODECS.includes(codec)) {\n        return false;\n    }\n    if (!Number.isInteger(width) || width <= 0) {\n        throw new TypeError('width must be a positive integer.');\n    }\n    if (!Number.isInteger(height) || height <= 0) {\n        throw new TypeError('height must be a positive integer.');\n    }\n    if (!(bitrate instanceof Quality) && (!Number.isInteger(bitrate) || bitrate <= 0)) {\n        throw new TypeError('bitrate must be a positive integer or a quality.');\n    }\n    validateVideoEncodingAdditionalOptions(codec, restOptions);\n    let encoderConfig = null;\n    if (customVideoEncoders.length > 0) {\n        encoderConfig ??= buildVideoEncoderConfig({\n            codec,\n            width,\n            height,\n            bitrate,\n            framerate: undefined,\n            ...restOptions,\n        });\n        if (customVideoEncoders.some(x => x.supports(codec, encoderConfig))) {\n            // There's a custom encoder\n            return true;\n        }\n    }\n    if (typeof VideoEncoder === 'undefined') {\n        return false;\n    }\n    const hasOddDimension = width % 2 === 1 || height % 2 === 1;\n    if (hasOddDimension\n        && (codec === 'avc' || codec === 'hevc')) {\n        // Disallow odd dimensions for certain codecs\n        return false;\n    }\n    encoderConfig ??= buildVideoEncoderConfig({\n        codec,\n        width,\n        height,\n        bitrate,\n        framerate: undefined,\n        ...restOptions,\n        alpha: 'discard', // Since we handle alpha ourselves\n    });\n    const support = await VideoEncoder.isConfigSupported(encoderConfig);\n    return support.supported === true;\n};\n/**\n * Checks if the browser is able to encode the given audio codec with the given parameters.\n * @group Encoding\n * @public\n */\nexport const canEncodeAudio = async (codec, options = {}) => {\n    const { numberOfChannels = 2, sampleRate = 48000, bitrate = 128e3, ...restOptions } = options;\n    if (!AUDIO_CODECS.includes(codec)) {\n        return false;\n    }\n    if (!Number.isInteger(numberOfChannels) || numberOfChannels <= 0) {\n        throw new TypeError('numberOfChannels must be a positive integer.');\n    }\n    if (!Number.isInteger(sampleRate) || sampleRate <= 0) {\n        throw new TypeError('sampleRate must be a positive integer.');\n    }\n    if (!(bitrate instanceof Quality) && (!Number.isInteger(bitrate) || bitrate <= 0)) {\n        throw new TypeError('bitrate must be a positive integer.');\n    }\n    validateAudioEncodingAdditionalOptions(codec, restOptions);\n    let encoderConfig = null;\n    if (customAudioEncoders.length > 0) {\n        encoderConfig ??= buildAudioEncoderConfig({\n            codec,\n            numberOfChannels,\n            sampleRate,\n            bitrate,\n            ...restOptions,\n        });\n        if (customAudioEncoders.some(x => x.supports(codec, encoderConfig))) {\n            // There's a custom encoder\n            return true;\n        }\n    }\n    if (PCM_AUDIO_CODECS.includes(codec)) {\n        return true; // Because we encode these ourselves\n    }\n    if (typeof AudioEncoder === 'undefined') {\n        return false;\n    }\n    encoderConfig ??= buildAudioEncoderConfig({\n        codec,\n        numberOfChannels,\n        sampleRate,\n        bitrate,\n        ...restOptions,\n    });\n    const support = await AudioEncoder.isConfigSupported(encoderConfig);\n    return support.supported === true;\n};\n/**\n * Checks if the browser is able to encode the given subtitle codec.\n * @group Encoding\n * @public\n */\nexport const canEncodeSubtitles = async (codec) => {\n    if (!SUBTITLE_CODECS.includes(codec)) {\n        return false;\n    }\n    return true;\n};\n/**\n * Returns the list of all media codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getEncodableCodecs = async () => {\n    const [videoCodecs, audioCodecs, subtitleCodecs] = await Promise.all([\n        getEncodableVideoCodecs(),\n        getEncodableAudioCodecs(),\n        getEncodableSubtitleCodecs(),\n    ]);\n    return [...videoCodecs, ...audioCodecs, ...subtitleCodecs];\n};\n/**\n * Returns the list of all video codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getEncodableVideoCodecs = async (checkedCodecs = VIDEO_CODECS, options) => {\n    const bools = await Promise.all(checkedCodecs.map(codec => canEncodeVideo(codec, options)));\n    return checkedCodecs.filter((_, i) => bools[i]);\n};\n/**\n * Returns the list of all audio codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getEncodableAudioCodecs = async (checkedCodecs = AUDIO_CODECS, options) => {\n    const bools = await Promise.all(checkedCodecs.map(codec => canEncodeAudio(codec, options)));\n    return checkedCodecs.filter((_, i) => bools[i]);\n};\n/**\n * Returns the list of all subtitle codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getEncodableSubtitleCodecs = async (checkedCodecs = SUBTITLE_CODECS) => {\n    const bools = await Promise.all(checkedCodecs.map(canEncodeSubtitles));\n    return checkedCodecs.filter((_, i) => bools[i]);\n};\n/**\n * Returns the first video codec from the given list that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getFirstEncodableVideoCodec = async (checkedCodecs, options) => {\n    for (const codec of checkedCodecs) {\n        if (await canEncodeVideo(codec, options)) {\n            return codec;\n        }\n    }\n    return null;\n};\n/**\n * Returns the first audio codec from the given list that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getFirstEncodableAudioCodec = async (checkedCodecs, options) => {\n    for (const codec of checkedCodecs) {\n        if (await canEncodeAudio(codec, options)) {\n            return codec;\n        }\n    }\n    return null;\n};\n/**\n * Returns the first subtitle codec from the given list that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nexport const getFirstEncodableSubtitleCodec = async (checkedCodecs) => {\n    for (const codec of checkedCodecs) {\n        if (await canEncodeSubtitles(codec)) {\n            return codec;\n        }\n    }\n    return null;\n};\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { AUDIO_CODECS, parsePcmCodec, PCM_AUDIO_CODECS, SUBTITLE_CODECS, VIDEO_CODECS, } from './codec.js';\nimport { assert, assertNever, CallSerializer, clamp, isFirefox, promiseWithResolvers, setInt24, setUint24, } from './misc.js';\nimport { SubtitleParser } from './subtitles.js';\nimport { toAlaw, toUlaw } from './pcm.js';\nimport { customVideoEncoders, customAudioEncoders, } from './custom-coder.js';\nimport { EncodedPacket } from './packet.js';\nimport { AudioSample, VideoSample } from './sample.js';\nimport { buildAudioEncoderConfig, buildVideoEncoderConfig, validateAudioEncodingConfig, validateVideoEncodingConfig, } from './encode.js';\n/**\n * Base class for media sources. Media sources are used to add media samples to an output file.\n * @group Media sources\n * @public\n */\nexport class MediaSource {\n    constructor() {\n        /** @internal */\n        this._connectedTrack = null;\n        /** @internal */\n        this._closingPromise = null;\n        /** @internal */\n        this._closed = false;\n        /**\n         * @internal\n         * A time offset in seconds that is added to all timestamps generated by this source.\n         */\n        this._timestampOffset = 0;\n    }\n    /** @internal */\n    _ensureValidAdd() {\n        if (!this._connectedTrack) {\n            throw new Error('Source is not connected to an output track.');\n        }\n        if (this._connectedTrack.output.state === 'canceled') {\n            throw new Error('Output has been canceled.');\n        }\n        if (this._connectedTrack.output.state === 'finalizing' || this._connectedTrack.output.state === 'finalized') {\n            throw new Error('Output has been finalized.');\n        }\n        if (this._connectedTrack.output.state === 'pending') {\n            throw new Error('Output has not started.');\n        }\n        if (this._closed) {\n            throw new Error('Source is closed.');\n        }\n    }\n    /** @internal */\n    async _start() { }\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async _flushAndClose(forceClose) { }\n    /**\n     * Closes this source. This prevents future samples from being added and signals to the output file that no further\n     * samples will come in for this track. Calling `.close()` is optional but recommended after adding the\n     * last sample - for improved performance and reduced memory usage.\n     */\n    close() {\n        if (this._closingPromise) {\n            return;\n        }\n        const connectedTrack = this._connectedTrack;\n        if (!connectedTrack) {\n            throw new Error('Cannot call close without connecting the source to an output track.');\n        }\n        if (connectedTrack.output.state === 'pending') {\n            throw new Error('Cannot call close before output has been started.');\n        }\n        this._closingPromise = (async () => {\n            await this._flushAndClose(false);\n            this._closed = true;\n            if (connectedTrack.output.state === 'finalizing' || connectedTrack.output.state === 'finalized') {\n                return;\n            }\n            connectedTrack.output._muxer.onTrackClose(connectedTrack);\n        })();\n    }\n    /** @internal */\n    async _flushOrWaitForOngoingClose(forceClose) {\n        if (this._closingPromise) {\n            // Since closing also flushes, we don't want to do it twice\n            return this._closingPromise;\n        }\n        else {\n            return this._flushAndClose(forceClose);\n        }\n    }\n}\n/**\n * Base class for video sources - sources for video tracks.\n * @group Media sources\n * @public\n */\nexport class VideoSource extends MediaSource {\n    /** Internal constructor. */\n    constructor(codec) {\n        super();\n        /** @internal */\n        this._connectedTrack = null;\n        if (!VIDEO_CODECS.includes(codec)) {\n            throw new TypeError(`Invalid video codec '${codec}'. Must be one of: ${VIDEO_CODECS.join(', ')}.`);\n        }\n        this._codec = codec;\n    }\n}\n/**\n * The most basic video source; can be used to directly pipe encoded packets into the output file.\n * @group Media sources\n * @public\n */\nexport class EncodedVideoPacketSource extends VideoSource {\n    /** Creates a new {@link EncodedVideoPacketSource} whose packets are encoded using `codec`. */\n    constructor(codec) {\n        super(codec);\n    }\n    /**\n     * Adds an encoded packet to the output video track. Packets must be added in *decode order*, while a packet's\n     * timestamp must be its *presentation timestamp*. B-frames are handled automatically.\n     *\n     * @param meta - Additional metadata from the encoder. You should pass this for the first call, including a valid\n     * decoder config.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(packet, meta) {\n        if (!(packet instanceof EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        if (packet.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be added.');\n        }\n        if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n            throw new TypeError('meta, when provided, must be an object.');\n        }\n        this._ensureValidAdd();\n        return this._connectedTrack.output._muxer.addEncodedVideoPacket(this._connectedTrack, packet, meta);\n    }\n}\nclass VideoEncoderWrapper {\n    constructor(source, encodingConfig) {\n        this.source = source;\n        this.encodingConfig = encodingConfig;\n        this.ensureEncoderPromise = null;\n        this.encoderInitialized = false;\n        this.encoder = null;\n        this.muxer = null;\n        this.lastMultipleOfKeyFrameInterval = -1;\n        this.codedWidth = null;\n        this.codedHeight = null;\n        this.resizeCanvas = null;\n        this.customEncoder = null;\n        this.customEncoderCallSerializer = new CallSerializer();\n        this.customEncoderQueueSize = 0;\n        // Alpha stuff\n        this.alphaEncoder = null;\n        this.splitter = null;\n        this.splitterCreationFailed = false;\n        this.alphaFrameQueue = [];\n        /**\n         * Encoders typically throw their errors \"out of band\", meaning asynchronously in some other execution context.\n         * However, we want to surface these errors to the user within the normal control flow, so they don't go uncaught.\n         * So, we keep track of the encoder error and throw it as soon as we get the chance.\n         */\n        this.error = null;\n        this.errorNeedsNewStack = true;\n    }\n    async add(videoSample, shouldClose, encodeOptions) {\n        try {\n            this.checkForEncoderError();\n            this.source._ensureValidAdd();\n            // Ensure video sample size remains constant\n            if (this.codedWidth !== null && this.codedHeight !== null) {\n                if (videoSample.codedWidth !== this.codedWidth || videoSample.codedHeight !== this.codedHeight) {\n                    const sizeChangeBehavior = this.encodingConfig.sizeChangeBehavior ?? 'deny';\n                    if (sizeChangeBehavior === 'passThrough') {\n                        // Do nada\n                    }\n                    else if (sizeChangeBehavior === 'deny') {\n                        throw new Error(`Video sample size must remain constant. Expected ${this.codedWidth}x${this.codedHeight},`\n                            + ` got ${videoSample.codedWidth}x${videoSample.codedHeight}. To allow the sample size to`\n                            + ` change over time, set \\`sizeChangeBehavior\\` to a value other than 'strict' in the`\n                            + ` encoding options.`);\n                    }\n                    else {\n                        let canvasIsNew = false;\n                        if (!this.resizeCanvas) {\n                            if (typeof document !== 'undefined') {\n                                // Prefer an HTMLCanvasElement\n                                this.resizeCanvas = document.createElement('canvas');\n                                this.resizeCanvas.width = this.codedWidth;\n                                this.resizeCanvas.height = this.codedHeight;\n                            }\n                            else {\n                                this.resizeCanvas = new OffscreenCanvas(this.codedWidth, this.codedHeight);\n                            }\n                            canvasIsNew = true;\n                        }\n                        const context = this.resizeCanvas.getContext('2d', {\n                            alpha: isFirefox(), // Firefox has VideoFrame glitches with opaque canvases\n                        });\n                        assert(context);\n                        if (!canvasIsNew) {\n                            if (isFirefox()) {\n                                context.fillStyle = 'black';\n                                context.fillRect(0, 0, this.codedWidth, this.codedHeight);\n                            }\n                            else {\n                                context.clearRect(0, 0, this.codedWidth, this.codedHeight);\n                            }\n                        }\n                        videoSample.drawWithFit(context, { fit: sizeChangeBehavior });\n                        if (shouldClose) {\n                            videoSample.close();\n                        }\n                        videoSample = new VideoSample(this.resizeCanvas, {\n                            timestamp: videoSample.timestamp,\n                            duration: videoSample.duration,\n                            rotation: videoSample.rotation,\n                        });\n                        shouldClose = true;\n                    }\n                }\n            }\n            else {\n                this.codedWidth = videoSample.codedWidth;\n                this.codedHeight = videoSample.codedHeight;\n            }\n            if (!this.encoderInitialized) {\n                if (!this.ensureEncoderPromise) {\n                    this.ensureEncoder(videoSample);\n                }\n                // No, this \"if\" statement is not useless. Sometimes, the above call to `ensureEncoder` might have\n                // synchronously completed and the encoder is already initialized. In this case, we don't need to await\n                // the promise anymore. This also fixes nasty async race condition bugs when multiple code paths are\n                // calling this method: It's important that the call that initialized the encoder go through this\n                // code first.\n                if (!this.encoderInitialized) {\n                    await this.ensureEncoderPromise;\n                }\n            }\n            assert(this.encoderInitialized);\n            const keyFrameInterval = this.encodingConfig.keyFrameInterval ?? 5;\n            const multipleOfKeyFrameInterval = Math.floor(videoSample.timestamp / keyFrameInterval);\n            // Ensure a key frame every keyFrameInterval seconds. It is important that all video tracks follow the same\n            // \"key frame\" rhythm, because aligned key frames are required to start new fragments in ISOBMFF or clusters\n            // in Matroska (or at least desirable).\n            const finalEncodeOptions = {\n                ...encodeOptions,\n                keyFrame: encodeOptions?.keyFrame\n                    || keyFrameInterval === 0\n                    || multipleOfKeyFrameInterval !== this.lastMultipleOfKeyFrameInterval,\n            };\n            this.lastMultipleOfKeyFrameInterval = multipleOfKeyFrameInterval;\n            if (this.customEncoder) {\n                this.customEncoderQueueSize++;\n                // We clone the sample so it cannot be closed on us from the outside before it reaches the encoder\n                const clonedSample = videoSample.clone();\n                const promise = this.customEncoderCallSerializer\n                    .call(() => this.customEncoder.encode(clonedSample, finalEncodeOptions))\n                    .then(() => this.customEncoderQueueSize--)\n                    .catch((error) => this.error ??= error)\n                    .finally(() => {\n                    clonedSample.close();\n                    // `videoSample` gets closed in the finally block at the end of the method\n                });\n                if (this.customEncoderQueueSize >= 4) {\n                    await promise;\n                }\n            }\n            else {\n                assert(this.encoder);\n                const videoFrame = videoSample.toVideoFrame();\n                if (!this.alphaEncoder) {\n                    // No alpha encoder, simple case\n                    this.encoder.encode(videoFrame, finalEncodeOptions);\n                    videoFrame.close();\n                }\n                else {\n                    // We're expected to encode alpha as well\n                    const frameDefinitelyHasNoAlpha = !!videoFrame.format && !videoFrame.format.includes('A');\n                    if (frameDefinitelyHasNoAlpha || this.splitterCreationFailed) {\n                        this.alphaFrameQueue.push(null);\n                        this.encoder.encode(videoFrame, finalEncodeOptions);\n                        videoFrame.close();\n                    }\n                    else {\n                        const width = videoFrame.displayWidth;\n                        const height = videoFrame.displayHeight;\n                        if (!this.splitter) {\n                            try {\n                                this.splitter = new ColorAlphaSplitter(width, height);\n                            }\n                            catch (error) {\n                                console.error('Due to an error, only color data will be encoded.', error);\n                                this.splitterCreationFailed = true;\n                                this.alphaFrameQueue.push(null);\n                                this.encoder.encode(videoFrame, finalEncodeOptions);\n                                videoFrame.close();\n                            }\n                        }\n                        if (this.splitter) {\n                            const colorFrame = this.splitter.extractColor(videoFrame);\n                            const alphaFrame = this.splitter.extractAlpha(videoFrame);\n                            this.alphaFrameQueue.push(alphaFrame);\n                            this.encoder.encode(colorFrame, finalEncodeOptions);\n                            colorFrame.close();\n                            videoFrame.close();\n                        }\n                    }\n                }\n                if (shouldClose) {\n                    videoSample.close();\n                }\n                // We need to do this after sending the frame to the encoder as the frame otherwise might be closed\n                if (this.encoder.encodeQueueSize >= 4) {\n                    await new Promise(resolve => this.encoder.addEventListener('dequeue', resolve, { once: true }));\n                }\n            }\n            await this.muxer.mutex.currentPromise; // Allow the writer to apply backpressure\n        }\n        finally {\n            if (shouldClose) {\n                // Make sure it's always closed, even if there was an error\n                videoSample.close();\n            }\n        }\n    }\n    ensureEncoder(videoSample) {\n        const encoderError = new Error();\n        this.ensureEncoderPromise = (async () => {\n            const encoderConfig = buildVideoEncoderConfig({\n                width: videoSample.codedWidth,\n                height: videoSample.codedHeight,\n                ...this.encodingConfig,\n                framerate: this.source._connectedTrack?.metadata.frameRate,\n            });\n            this.encodingConfig.onEncoderConfig?.(encoderConfig);\n            const MatchingCustomEncoder = customVideoEncoders.find(x => x.supports(this.encodingConfig.codec, encoderConfig));\n            if (MatchingCustomEncoder) {\n                // @ts-expect-error \"Can't create instance of abstract class ü§ì\"\n                this.customEncoder = new MatchingCustomEncoder();\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.codec = this.encodingConfig.codec;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.config = encoderConfig;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.onPacket = (packet, meta) => {\n                    if (!(packet instanceof EncodedPacket)) {\n                        throw new TypeError('The first argument passed to onPacket must be an EncodedPacket.');\n                    }\n                    if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n                        throw new TypeError('The second argument passed to onPacket must be an object or undefined.');\n                    }\n                    this.encodingConfig.onEncodedPacket?.(packet, meta);\n                    void this.muxer.addEncodedVideoPacket(this.source._connectedTrack, packet, meta)\n                        .catch((error) => {\n                        this.error ??= error;\n                        this.errorNeedsNewStack = false;\n                    });\n                };\n                await this.customEncoder.init();\n            }\n            else {\n                if (typeof VideoEncoder === 'undefined') {\n                    throw new Error('VideoEncoder is not supported by this browser.');\n                }\n                encoderConfig.alpha = 'discard'; // Since we handle alpha ourselves\n                if (this.encodingConfig.alpha === 'keep') {\n                    // Encoding alpha requires using two parallel encoders, so we need to make sure they stay in sync\n                    // and that neither of them drops frames. Setting latencyMode to 'quality' achieves this, because\n                    // \"User Agents MUST not drop frames to achieve the target bitrate and/or framerate.\"\n                    encoderConfig.latencyMode = 'quality';\n                }\n                const hasOddDimension = encoderConfig.width % 2 === 1 || encoderConfig.height % 2 === 1;\n                if (hasOddDimension\n                    && (this.encodingConfig.codec === 'avc' || this.encodingConfig.codec === 'hevc')) {\n                    // Throw a special error for this case as it gets hit often\n                    throw new Error(`The dimensions ${encoderConfig.width}x${encoderConfig.height} are not supported for codec`\n                        + ` '${this.encodingConfig.codec}'; both width and height must be even numbers. Make sure to`\n                        + ` round your dimensions to the nearest even number.`);\n                }\n                const support = await VideoEncoder.isConfigSupported(encoderConfig);\n                if (!support.supported) {\n                    throw new Error(`This specific encoder configuration (${encoderConfig.codec}, ${encoderConfig.bitrate} bps,`\n                        + ` ${encoderConfig.width}x${encoderConfig.height}, hardware acceleration:`\n                        + ` ${encoderConfig.hardwareAcceleration ?? 'no-preference'}) is not supported by this browser.`\n                        + ` Consider using another codec or changing your video parameters.`);\n                }\n                /** Queue of color chunks waiting for their alpha counterpart. */\n                const colorChunkQueue = [];\n                /** Each value is the number of encoded alpha chunks at which a null alpha chunk should be added. */\n                const nullAlphaChunkQueue = [];\n                let encodedAlphaChunkCount = 0;\n                let alphaEncoderQueue = 0;\n                const addPacket = (colorChunk, alphaChunk, meta) => {\n                    const sideData = {};\n                    if (alphaChunk) {\n                        const alphaData = new Uint8Array(alphaChunk.byteLength);\n                        alphaChunk.copyTo(alphaData);\n                        sideData.alpha = alphaData;\n                    }\n                    const packet = EncodedPacket.fromEncodedChunk(colorChunk, sideData);\n                    this.encodingConfig.onEncodedPacket?.(packet, meta);\n                    void this.muxer.addEncodedVideoPacket(this.source._connectedTrack, packet, meta)\n                        .catch((error) => {\n                        this.error ??= error;\n                        this.errorNeedsNewStack = false;\n                    });\n                };\n                this.encoder = new VideoEncoder({\n                    output: (chunk, meta) => {\n                        if (!this.alphaEncoder) {\n                            // We're done\n                            addPacket(chunk, null, meta);\n                            return;\n                        }\n                        const alphaFrame = this.alphaFrameQueue.shift();\n                        assert(alphaFrame !== undefined);\n                        if (alphaFrame) {\n                            this.alphaEncoder.encode(alphaFrame, {\n                                // Crucial: The alpha frame is forced to be a key frame whenever the color frame\n                                // also is. Without this, playback can glitch and even crash in some browsers.\n                                // This is the reason why the two encoders are wired in series and not in parallel.\n                                keyFrame: chunk.type === 'key',\n                            });\n                            alphaEncoderQueue++;\n                            alphaFrame.close();\n                            colorChunkQueue.push({ chunk, meta });\n                        }\n                        else {\n                            // There was no alpha component for this frame\n                            if (alphaEncoderQueue === 0) {\n                                // No pending alpha encodes either, so we're done\n                                addPacket(chunk, null, meta);\n                            }\n                            else {\n                                // There are still alpha encodes pending, so we can't add the packet immediately since\n                                // we'd end up with out-of-order packets. Instead, let's queue a null alpha chunk to be\n                                // added in the future, after the current encoder workload has completed:\n                                nullAlphaChunkQueue.push(encodedAlphaChunkCount + alphaEncoderQueue);\n                                colorChunkQueue.push({ chunk, meta });\n                            }\n                        }\n                    },\n                    error: (error) => {\n                        error.stack = encoderError.stack; // Provide a more useful stack trace\n                        this.error ??= error;\n                    },\n                });\n                this.encoder.configure(encoderConfig);\n                if (this.encodingConfig.alpha === 'keep') {\n                    // We need to encode alpha as well, which we do with a separate encoder\n                    this.alphaEncoder = new VideoEncoder({\n                        // We ignore the alpha chunk's metadata\n                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                        output: (chunk, meta) => {\n                            alphaEncoderQueue--;\n                            // There has to be a color chunk because the encoders are wired in series\n                            const colorChunk = colorChunkQueue.shift();\n                            assert(colorChunk !== undefined);\n                            addPacket(colorChunk.chunk, chunk, colorChunk.meta);\n                            // See if there are any null alpha chunks queued up\n                            encodedAlphaChunkCount++;\n                            while (nullAlphaChunkQueue.length > 0\n                                && nullAlphaChunkQueue[0] === encodedAlphaChunkCount) {\n                                nullAlphaChunkQueue.shift();\n                                const colorChunk = colorChunkQueue.shift();\n                                assert(colorChunk !== undefined);\n                                addPacket(colorChunk.chunk, null, colorChunk.meta);\n                            }\n                        },\n                        error: (error) => {\n                            error.stack = encoderError.stack; // Provide a more useful stack trace\n                            this.error ??= error;\n                        },\n                    });\n                    this.alphaEncoder.configure(encoderConfig);\n                }\n            }\n            assert(this.source._connectedTrack);\n            this.muxer = this.source._connectedTrack.output._muxer;\n            this.encoderInitialized = true;\n        })();\n    }\n    async flushAndClose(forceClose) {\n        if (!forceClose)\n            this.checkForEncoderError();\n        if (this.customEncoder) {\n            if (!forceClose) {\n                void this.customEncoderCallSerializer.call(() => this.customEncoder.flush());\n            }\n            await this.customEncoderCallSerializer.call(() => this.customEncoder.close());\n        }\n        else if (this.encoder) {\n            if (!forceClose) {\n                // These are wired in series, therefore they must also be flushed in series\n                await this.encoder.flush();\n                await this.alphaEncoder?.flush();\n            }\n            if (this.encoder.state !== 'closed') {\n                this.encoder.close();\n            }\n            if (this.alphaEncoder && this.alphaEncoder.state !== 'closed') {\n                this.alphaEncoder.close();\n            }\n            this.alphaFrameQueue.forEach(x => x?.close());\n            this.splitter?.close();\n        }\n        if (!forceClose)\n            this.checkForEncoderError();\n    }\n    getQueueSize() {\n        if (this.customEncoder) {\n            return this.customEncoderQueueSize;\n        }\n        else {\n            // Because the color and alpha encoders are wired in series, there's no need to also include the alpha\n            // encoder's queue size here\n            return this.encoder?.encodeQueueSize ?? 0;\n        }\n    }\n    checkForEncoderError() {\n        if (this.error) {\n            if (this.errorNeedsNewStack) {\n                this.error.stack = new Error().stack; // Provide an even more useful stack trace\n            }\n            throw this.error;\n        }\n    }\n}\n/** Utility class for splitting a composite frame into separate color and alpha components. */\nclass ColorAlphaSplitter {\n    constructor(initialWidth, initialHeight) {\n        this.lastFrame = null;\n        if (typeof OffscreenCanvas !== 'undefined') {\n            this.canvas = new OffscreenCanvas(initialWidth, initialHeight);\n        }\n        else {\n            this.canvas = document.createElement('canvas');\n            this.canvas.width = initialWidth;\n            this.canvas.height = initialHeight;\n        }\n        const gl = this.canvas.getContext('webgl2', {\n            alpha: true, // Needed due to the YUV thing we do for alpha\n        }); // Casting because of some TypeScript weirdness\n        if (!gl) {\n            throw new Error('Couldn\\'t acquire WebGL 2 context.');\n        }\n        this.gl = gl;\n        this.colorProgram = this.createColorProgram();\n        this.alphaProgram = this.createAlphaProgram();\n        this.vao = this.createVAO();\n        this.sourceTexture = this.createTexture();\n        this.alphaResolutionLocation = this.gl.getUniformLocation(this.alphaProgram, 'u_resolution');\n        this.gl.useProgram(this.colorProgram);\n        this.gl.uniform1i(this.gl.getUniformLocation(this.colorProgram, 'u_sourceTexture'), 0);\n        this.gl.useProgram(this.alphaProgram);\n        this.gl.uniform1i(this.gl.getUniformLocation(this.alphaProgram, 'u_sourceTexture'), 0);\n    }\n    createVertexShader() {\n        return this.createShader(this.gl.VERTEX_SHADER, `#version 300 es\n\t\t\tin vec2 a_position;\n\t\t\tin vec2 a_texCoord;\n\t\t\tout vec2 v_texCoord;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tgl_Position = vec4(a_position, 0.0, 1.0);\n\t\t\t\tv_texCoord = a_texCoord;\n\t\t\t}\n\t\t`);\n    }\n    createColorProgram() {\n        const vertexShader = this.createVertexShader();\n        // This shader is simple, simply copy the color information while setting alpha to 1\n        const fragmentShader = this.createShader(this.gl.FRAGMENT_SHADER, `#version 300 es\n\t\t\tprecision highp float;\n\t\t\t\n\t\t\tuniform sampler2D u_sourceTexture;\n\t\t\tin vec2 v_texCoord;\n\t\t\tout vec4 fragColor;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 source = texture(u_sourceTexture, v_texCoord);\n\t\t\t\tfragColor = vec4(source.rgb, 1.0);\n\t\t\t}\n\t\t`);\n        const program = this.gl.createProgram();\n        this.gl.attachShader(program, vertexShader);\n        this.gl.attachShader(program, fragmentShader);\n        this.gl.linkProgram(program);\n        return program;\n    }\n    createAlphaProgram() {\n        const vertexShader = this.createVertexShader();\n        // This shader's more complex. The main reason is that this shader writes data in I420 (yuv420) pixel format\n        // instead of regular RGBA. In other words, we use the shader to write out I420 data into an RGBA canvas, which\n        // we then later read out with JavaScript. The reason being that browsers weirdly encode canvases and mess up\n        // the color spaces, and the only way to have full control over the color space is by outputting YUV data\n        // directly (avoiding the RGB conversion). Doing this conversion in JS is painfully slow, so let's utlize the\n        // GPU since we're already calling it anyway.\n        const fragmentShader = this.createShader(this.gl.FRAGMENT_SHADER, `#version 300 es\n\t\t\tprecision highp float;\n\t\t\t\n\t\t\tuniform sampler2D u_sourceTexture;\n\t\t\tuniform vec2 u_resolution; // The width and height of the canvas\n\t\t\tin vec2 v_texCoord;\n\t\t\tout vec4 fragColor;\n\n\t\t\t// This function determines the value for a single byte in the YUV stream\n\t\t\tfloat getByteValue(float byteOffset) {\n\t\t\t\tfloat width = u_resolution.x;\n\t\t\t\tfloat height = u_resolution.y;\n\n\t\t\t\tfloat yPlaneSize = width * height;\n\n\t\t\t\tif (byteOffset < yPlaneSize) {\n\t\t\t\t\t// This byte is in the luma plane. Find the corresponding pixel coordinates to sample from\n\t\t\t\t\tfloat y = floor(byteOffset / width);\n\t\t\t\t\tfloat x = mod(byteOffset, width);\n\t\t\t\t\t\n\t\t\t\t\t// Add 0.5 to sample the center of the texel\n\t\t\t\t\tvec2 sampleCoord = (vec2(x, y) + 0.5) / u_resolution;\n\t\t\t\t\t\n\t\t\t\t\t// The luma value is the alpha from the source texture\n\t\t\t\t\treturn texture(u_sourceTexture, sampleCoord).a;\n\t\t\t\t} else {\n\t\t\t\t\t// Write a fixed value for chroma and beyond\n\t\t\t\t\treturn 128.0 / 255.0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\t// Each fragment writes 4 bytes (R, G, B, A)\n\t\t\t\tfloat pixelIndex = floor(gl_FragCoord.y) * u_resolution.x + floor(gl_FragCoord.x);\n\t\t\t\tfloat baseByteOffset = pixelIndex * 4.0;\n\n\t\t\t\tvec4 result;\n\t\t\t\tfor (int i = 0; i < 4; i++) {\n\t\t\t\t\tfloat currentByteOffset = baseByteOffset + float(i);\n\t\t\t\t\tresult[i] = getByteValue(currentByteOffset);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfragColor = result;\n\t\t\t}\n\t\t`);\n        const program = this.gl.createProgram();\n        this.gl.attachShader(program, vertexShader);\n        this.gl.attachShader(program, fragmentShader);\n        this.gl.linkProgram(program);\n        return program;\n    }\n    createShader(type, source) {\n        const shader = this.gl.createShader(type);\n        this.gl.shaderSource(shader, source);\n        this.gl.compileShader(shader);\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            console.error('Shader compile error:', this.gl.getShaderInfoLog(shader));\n        }\n        return shader;\n    }\n    createVAO() {\n        const vao = this.gl.createVertexArray();\n        this.gl.bindVertexArray(vao);\n        const vertices = new Float32Array([\n            -1, -1, 0, 1,\n            1, -1, 1, 1,\n            -1, 1, 0, 0,\n            1, 1, 1, 0,\n        ]);\n        const buffer = this.gl.createBuffer();\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertices, this.gl.STATIC_DRAW);\n        const positionLocation = this.gl.getAttribLocation(this.colorProgram, 'a_position');\n        const texCoordLocation = this.gl.getAttribLocation(this.colorProgram, 'a_texCoord');\n        this.gl.enableVertexAttribArray(positionLocation);\n        this.gl.vertexAttribPointer(positionLocation, 2, this.gl.FLOAT, false, 16, 0);\n        this.gl.enableVertexAttribArray(texCoordLocation);\n        this.gl.vertexAttribPointer(texCoordLocation, 2, this.gl.FLOAT, false, 16, 8);\n        return vao;\n    }\n    createTexture() {\n        const texture = this.gl.createTexture();\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n        return texture;\n    }\n    updateTexture(sourceFrame) {\n        if (this.lastFrame === sourceFrame) {\n            return;\n        }\n        if (sourceFrame.displayWidth !== this.canvas.width || sourceFrame.displayHeight !== this.canvas.height) {\n            this.canvas.width = sourceFrame.displayWidth;\n            this.canvas.height = sourceFrame.displayHeight;\n        }\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.sourceTexture);\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, sourceFrame);\n        this.lastFrame = sourceFrame;\n    }\n    extractColor(sourceFrame) {\n        this.updateTexture(sourceFrame);\n        this.gl.useProgram(this.colorProgram);\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        this.gl.bindVertexArray(this.vao);\n        this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n        return new VideoFrame(this.canvas, {\n            timestamp: sourceFrame.timestamp,\n            duration: sourceFrame.duration ?? undefined,\n            alpha: 'discard',\n        });\n    }\n    extractAlpha(sourceFrame) {\n        this.updateTexture(sourceFrame);\n        this.gl.useProgram(this.alphaProgram);\n        this.gl.uniform2f(this.alphaResolutionLocation, this.canvas.width, this.canvas.height);\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        this.gl.bindVertexArray(this.vao);\n        this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n        const { width, height } = this.canvas;\n        const chromaSamples = Math.ceil(width / 2) * Math.ceil(height / 2);\n        const yuvSize = width * height + chromaSamples * 2;\n        const requiredHeight = Math.ceil(yuvSize / (width * 4));\n        let yuv = new Uint8Array(4 * width * requiredHeight);\n        this.gl.readPixels(0, 0, width, requiredHeight, this.gl.RGBA, this.gl.UNSIGNED_BYTE, yuv);\n        yuv = yuv.subarray(0, yuvSize);\n        assert(yuv[width * height] === 128); // Where chroma data starts\n        assert(yuv[yuv.length - 1] === 128); // Assert the YUV data has been fully written\n        // Defining this separately because TypeScript doesn't know `transfer` and I can't be bothered to do declaration\n        // merging right now\n        const init = {\n            format: 'I420',\n            codedWidth: width,\n            codedHeight: height,\n            timestamp: sourceFrame.timestamp,\n            duration: sourceFrame.duration ?? undefined,\n            transfer: [yuv.buffer],\n        };\n        return new VideoFrame(yuv, init);\n    }\n    close() {\n        this.gl.getExtension('WEBGL_lose_context')?.loseContext();\n        this.gl = null;\n    }\n}\n/**\n * This source can be used to add raw, unencoded video samples (frames) to an output video track. These frames will\n * automatically be encoded and then piped into the output.\n * @group Media sources\n * @public\n */\nexport class VideoSampleSource extends VideoSource {\n    /**\n     * Creates a new {@link VideoSampleSource} whose samples are encoded according to the specified\n     * {@link VideoEncodingConfig}.\n     */\n    constructor(encodingConfig) {\n        validateVideoEncodingConfig(encodingConfig);\n        super(encodingConfig.codec);\n        this._encoder = new VideoEncoderWrapper(this, encodingConfig);\n    }\n    /**\n     * Encodes a video sample (frame) and then adds it to the output.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(videoSample, encodeOptions) {\n        if (!(videoSample instanceof VideoSample)) {\n            throw new TypeError('videoSample must be a VideoSample.');\n        }\n        return this._encoder.add(videoSample, false, encodeOptions);\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * This source can be used to add video frames to the output track from a fixed canvas element. Since canvases are often\n * used for rendering, this source provides a convenient wrapper around {@link VideoSampleSource}.\n * @group Media sources\n * @public\n */\nexport class CanvasSource extends VideoSource {\n    /**\n     * Creates a new {@link CanvasSource} from a canvas element or `OffscreenCanvas` whose samples are encoded\n     * according to the specified {@link VideoEncodingConfig}.\n     */\n    constructor(canvas, encodingConfig) {\n        if (!(typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement)\n            && !(typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n            throw new TypeError('canvas must be an HTMLCanvasElement or OffscreenCanvas.');\n        }\n        validateVideoEncodingConfig(encodingConfig);\n        super(encodingConfig.codec);\n        this._encoder = new VideoEncoderWrapper(this, encodingConfig);\n        this._canvas = canvas;\n    }\n    /**\n     * Captures the current canvas state as a video sample (frame), encodes it and adds it to the output.\n     *\n     * @param timestamp - The timestamp of the sample, in seconds.\n     * @param duration - The duration of the sample, in seconds.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(timestamp, duration = 0, encodeOptions) {\n        if (!Number.isFinite(timestamp) || timestamp < 0) {\n            throw new TypeError('timestamp must be a non-negative number.');\n        }\n        if (!Number.isFinite(duration) || duration < 0) {\n            throw new TypeError('duration must be a non-negative number.');\n        }\n        const sample = new VideoSample(this._canvas, { timestamp, duration });\n        return this._encoder.add(sample, true, encodeOptions);\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * Video source that encodes the frames of a\n * [`MediaStreamVideoTrack`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack) and pipes them into the\n * output. This is useful for capturing live or real-time data such as webcams or screen captures. Frames will\n * automatically start being captured once the connected {@link Output} is started, and will keep being captured until\n * the {@link Output} is finalized or this source is closed.\n * @group Media sources\n * @public\n */\nexport class MediaStreamVideoTrackSource extends VideoSource {\n    /** A promise that rejects upon any error within this source. This promise never resolves. */\n    get errorPromise() {\n        this._errorPromiseAccessed = true;\n        return this._promiseWithResolvers.promise;\n    }\n    /**\n     * Creates a new {@link MediaStreamVideoTrackSource} from a\n     * [`MediaStreamVideoTrack`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack), which will pull\n     * video samples from the stream in real time and encode them according to {@link VideoEncodingConfig}.\n     */\n    constructor(track, encodingConfig) {\n        if (!(track instanceof MediaStreamTrack) || track.kind !== 'video') {\n            throw new TypeError('track must be a video MediaStreamTrack.');\n        }\n        validateVideoEncodingConfig(encodingConfig);\n        encodingConfig = {\n            ...encodingConfig,\n            latencyMode: 'realtime',\n        };\n        super(encodingConfig.codec);\n        /** @internal */\n        this._abortController = null;\n        /** @internal */\n        this._workerTrackId = null;\n        /** @internal */\n        this._workerListener = null;\n        /** @internal */\n        this._promiseWithResolvers = promiseWithResolvers();\n        /** @internal */\n        this._errorPromiseAccessed = false;\n        this._encoder = new VideoEncoderWrapper(this, encodingConfig);\n        this._track = track;\n    }\n    /** @internal */\n    async _start() {\n        if (!this._errorPromiseAccessed) {\n            console.warn('Make sure not to ignore the `errorPromise` field on MediaStreamVideoTrackSource, so that any internal'\n                + ' errors get bubbled up properly.');\n        }\n        this._abortController = new AbortController();\n        let firstVideoFrameTimestamp = null;\n        let errored = false;\n        const onVideoFrame = (videoFrame) => {\n            if (errored) {\n                videoFrame.close();\n                return;\n            }\n            if (firstVideoFrameTimestamp === null) {\n                firstVideoFrameTimestamp = videoFrame.timestamp / 1e6;\n                const muxer = this._connectedTrack.output._muxer;\n                if (muxer.firstMediaStreamTimestamp === null) {\n                    muxer.firstMediaStreamTimestamp = performance.now() / 1000;\n                    this._timestampOffset = -firstVideoFrameTimestamp;\n                }\n                else {\n                    this._timestampOffset = (performance.now() / 1000 - muxer.firstMediaStreamTimestamp)\n                        - firstVideoFrameTimestamp;\n                }\n            }\n            if (this._encoder.getQueueSize() >= 4) {\n                // Drop frames if the encoder is overloaded\n                videoFrame.close();\n                return;\n            }\n            void this._encoder.add(new VideoSample(videoFrame), true)\n                .catch((error) => {\n                errored = true;\n                this._abortController?.abort();\n                this._promiseWithResolvers.reject(error);\n                if (this._workerTrackId !== null) {\n                    // Tell the worker to stop the track\n                    sendMessageToMediaStreamTrackProcessorWorker({\n                        type: 'stopTrack',\n                        trackId: this._workerTrackId,\n                    });\n                }\n            });\n        };\n        if (typeof MediaStreamTrackProcessor !== 'undefined') {\n            // We can do it here directly, perfect\n            const processor = new MediaStreamTrackProcessor({ track: this._track });\n            const consumer = new WritableStream({ write: onVideoFrame });\n            processor.readable.pipeTo(consumer, {\n                signal: this._abortController.signal,\n            }).catch((error) => {\n                // Handle AbortError silently\n                if (error instanceof DOMException && error.name === 'AbortError')\n                    return;\n                this._promiseWithResolvers.reject(error);\n            });\n        }\n        else {\n            // It might still be supported in a worker, so let's check that\n            const supportedInWorker = await mediaStreamTrackProcessorIsSupportedInWorker();\n            if (supportedInWorker) {\n                this._workerTrackId = nextMediaStreamTrackProcessorWorkerId++;\n                sendMessageToMediaStreamTrackProcessorWorker({\n                    type: 'videoTrack',\n                    trackId: this._workerTrackId,\n                    track: this._track,\n                }, [this._track]);\n                this._workerListener = (event) => {\n                    const message = event.data;\n                    if (message.type === 'videoFrame' && message.trackId === this._workerTrackId) {\n                        onVideoFrame(message.videoFrame);\n                    }\n                    else if (message.type === 'error' && message.trackId === this._workerTrackId) {\n                        this._promiseWithResolvers.reject(message.error);\n                    }\n                };\n                mediaStreamTrackProcessorWorker.addEventListener('message', this._workerListener);\n            }\n            else {\n                throw new Error('MediaStreamTrackProcessor is required but not supported by this browser.');\n            }\n        }\n    }\n    /** @internal */\n    async _flushAndClose(forceClose) {\n        if (this._abortController) {\n            this._abortController.abort();\n            this._abortController = null;\n        }\n        if (this._workerTrackId !== null) {\n            assert(this._workerListener);\n            sendMessageToMediaStreamTrackProcessorWorker({\n                type: 'stopTrack',\n                trackId: this._workerTrackId,\n            });\n            // Wait for the worker to stop the track\n            await new Promise((resolve) => {\n                const listener = (event) => {\n                    const message = event.data;\n                    if (message.type === 'trackStopped' && message.trackId === this._workerTrackId) {\n                        assert(this._workerListener);\n                        mediaStreamTrackProcessorWorker.removeEventListener('message', this._workerListener);\n                        mediaStreamTrackProcessorWorker.removeEventListener('message', listener);\n                        resolve();\n                    }\n                };\n                mediaStreamTrackProcessorWorker.addEventListener('message', listener);\n            });\n        }\n        await this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * Base class for audio sources - sources for audio tracks.\n * @group Media sources\n * @public\n */\nexport class AudioSource extends MediaSource {\n    /** Internal constructor. */\n    constructor(codec) {\n        super();\n        /** @internal */\n        this._connectedTrack = null;\n        if (!AUDIO_CODECS.includes(codec)) {\n            throw new TypeError(`Invalid audio codec '${codec}'. Must be one of: ${AUDIO_CODECS.join(', ')}.`);\n        }\n        this._codec = codec;\n    }\n}\n/**\n * The most basic audio source; can be used to directly pipe encoded packets into the output file.\n * @group Media sources\n * @public\n */\nexport class EncodedAudioPacketSource extends AudioSource {\n    /** Creates a new {@link EncodedAudioPacketSource} whose packets are encoded using `codec`. */\n    constructor(codec) {\n        super(codec);\n    }\n    /**\n     * Adds an encoded packet to the output audio track. Packets must be added in *decode order*.\n     *\n     * @param meta - Additional metadata from the encoder. You should pass this for the first call, including a valid\n     * decoder config.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(packet, meta) {\n        if (!(packet instanceof EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        if (packet.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be added.');\n        }\n        if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n            throw new TypeError('meta, when provided, must be an object.');\n        }\n        this._ensureValidAdd();\n        return this._connectedTrack.output._muxer.addEncodedAudioPacket(this._connectedTrack, packet, meta);\n    }\n}\nclass AudioEncoderWrapper {\n    constructor(source, encodingConfig) {\n        this.source = source;\n        this.encodingConfig = encodingConfig;\n        this.ensureEncoderPromise = null;\n        this.encoderInitialized = false;\n        this.encoder = null;\n        this.muxer = null;\n        this.lastNumberOfChannels = null;\n        this.lastSampleRate = null;\n        this.isPcmEncoder = false;\n        this.outputSampleSize = null;\n        this.writeOutputValue = null;\n        this.customEncoder = null;\n        this.customEncoderCallSerializer = new CallSerializer();\n        this.customEncoderQueueSize = 0;\n        /**\n         * Encoders typically throw their errors \"out of band\", meaning asynchronously in some other execution context.\n         * However, we want to surface these errors to the user within the normal control flow, so they don't go uncaught.\n         * So, we keep track of the encoder error and throw it as soon as we get the chance.\n         */\n        this.error = null;\n        this.errorNeedsNewStack = true;\n    }\n    async add(audioSample, shouldClose) {\n        try {\n            this.checkForEncoderError();\n            this.source._ensureValidAdd();\n            // Ensure audio parameters remain constant\n            if (this.lastNumberOfChannels !== null && this.lastSampleRate !== null) {\n                if (audioSample.numberOfChannels !== this.lastNumberOfChannels\n                    || audioSample.sampleRate !== this.lastSampleRate) {\n                    throw new Error(`Audio parameters must remain constant. Expected ${this.lastNumberOfChannels} channels at`\n                        + ` ${this.lastSampleRate} Hz, got ${audioSample.numberOfChannels} channels at`\n                        + ` ${audioSample.sampleRate} Hz.`);\n                }\n            }\n            else {\n                this.lastNumberOfChannels = audioSample.numberOfChannels;\n                this.lastSampleRate = audioSample.sampleRate;\n            }\n            if (!this.encoderInitialized) {\n                if (!this.ensureEncoderPromise) {\n                    this.ensureEncoder(audioSample);\n                }\n                // No, this \"if\" statement is not useless. Sometimes, the above call to `ensureEncoder` might have\n                // synchronously completed and the encoder is already initialized. In this case, we don't need to await\n                // the promise anymore. This also fixes nasty async race condition bugs when multiple code paths are\n                // calling this method: It's important that the call that initialized the encoder go through this\n                // code first.\n                if (!this.encoderInitialized) {\n                    await this.ensureEncoderPromise;\n                }\n            }\n            assert(this.encoderInitialized);\n            if (this.customEncoder) {\n                this.customEncoderQueueSize++;\n                // We clone the sample so it cannot be closed on us from the outside before it reaches the encoder\n                const clonedSample = audioSample.clone();\n                const promise = this.customEncoderCallSerializer\n                    .call(() => this.customEncoder.encode(clonedSample))\n                    .then(() => this.customEncoderQueueSize--)\n                    .catch((error) => this.error ??= error)\n                    .finally(() => {\n                    clonedSample.close();\n                    // `audioSample` gets closed in the finally block at the end of the method\n                });\n                if (this.customEncoderQueueSize >= 4) {\n                    await promise;\n                }\n                await this.muxer.mutex.currentPromise; // Allow the writer to apply backpressure\n            }\n            else if (this.isPcmEncoder) {\n                await this.doPcmEncoding(audioSample, shouldClose);\n            }\n            else {\n                assert(this.encoder);\n                const audioData = audioSample.toAudioData();\n                this.encoder.encode(audioData);\n                audioData.close();\n                if (shouldClose) {\n                    audioSample.close();\n                }\n                if (this.encoder.encodeQueueSize >= 4) {\n                    await new Promise(resolve => this.encoder.addEventListener('dequeue', resolve, { once: true }));\n                }\n                await this.muxer.mutex.currentPromise; // Allow the writer to apply backpressure\n            }\n        }\n        finally {\n            if (shouldClose) {\n                // Make sure it's always closed, even if there was an error\n                audioSample.close();\n            }\n        }\n    }\n    async doPcmEncoding(audioSample, shouldClose) {\n        assert(this.outputSampleSize);\n        assert(this.writeOutputValue);\n        // Need to extract data from the audio data before we close it\n        const { numberOfChannels, numberOfFrames, sampleRate, timestamp } = audioSample;\n        const CHUNK_SIZE = 2048;\n        const outputs = [];\n        // Prepare all of the output buffers, each being bounded by CHUNK_SIZE so we don't generate huge packets\n        for (let frame = 0; frame < numberOfFrames; frame += CHUNK_SIZE) {\n            const frameCount = Math.min(CHUNK_SIZE, audioSample.numberOfFrames - frame);\n            const outputSize = frameCount * numberOfChannels * this.outputSampleSize;\n            const outputBuffer = new ArrayBuffer(outputSize);\n            const outputView = new DataView(outputBuffer);\n            outputs.push({ frameCount, view: outputView });\n        }\n        const allocationSize = audioSample.allocationSize(({ planeIndex: 0, format: 'f32-planar' }));\n        const floats = new Float32Array(allocationSize / Float32Array.BYTES_PER_ELEMENT);\n        for (let i = 0; i < numberOfChannels; i++) {\n            audioSample.copyTo(floats, { planeIndex: i, format: 'f32-planar' });\n            for (let j = 0; j < outputs.length; j++) {\n                const { frameCount, view } = outputs[j];\n                for (let k = 0; k < frameCount; k++) {\n                    this.writeOutputValue(view, (k * numberOfChannels + i) * this.outputSampleSize, floats[j * CHUNK_SIZE + k]);\n                }\n            }\n        }\n        if (shouldClose) {\n            audioSample.close();\n        }\n        const meta = {\n            decoderConfig: {\n                codec: this.encodingConfig.codec,\n                numberOfChannels,\n                sampleRate,\n            },\n        };\n        for (let i = 0; i < outputs.length; i++) {\n            const { frameCount, view } = outputs[i];\n            const outputBuffer = view.buffer;\n            const startFrame = i * CHUNK_SIZE;\n            const packet = new EncodedPacket(new Uint8Array(outputBuffer), 'key', timestamp + startFrame / sampleRate, frameCount / sampleRate);\n            this.encodingConfig.onEncodedPacket?.(packet, meta);\n            await this.muxer.addEncodedAudioPacket(this.source._connectedTrack, packet, meta); // With backpressure\n        }\n    }\n    ensureEncoder(audioSample) {\n        const encoderError = new Error();\n        this.ensureEncoderPromise = (async () => {\n            const { numberOfChannels, sampleRate } = audioSample;\n            const encoderConfig = buildAudioEncoderConfig({\n                numberOfChannels,\n                sampleRate,\n                ...this.encodingConfig,\n            });\n            this.encodingConfig.onEncoderConfig?.(encoderConfig);\n            const MatchingCustomEncoder = customAudioEncoders.find(x => x.supports(this.encodingConfig.codec, encoderConfig));\n            if (MatchingCustomEncoder) {\n                // @ts-expect-error \"Can't create instance of abstract class ü§ì\"\n                this.customEncoder = new MatchingCustomEncoder();\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.codec = this.encodingConfig.codec;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.config = encoderConfig;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.onPacket = (packet, meta) => {\n                    if (!(packet instanceof EncodedPacket)) {\n                        throw new TypeError('The first argument passed to onPacket must be an EncodedPacket.');\n                    }\n                    if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n                        throw new TypeError('The second argument passed to onPacket must be an object or undefined.');\n                    }\n                    this.encodingConfig.onEncodedPacket?.(packet, meta);\n                    void this.muxer.addEncodedAudioPacket(this.source._connectedTrack, packet, meta)\n                        .catch((error) => {\n                        this.error ??= error;\n                        this.errorNeedsNewStack = false;\n                    });\n                };\n                await this.customEncoder.init();\n            }\n            else if (PCM_AUDIO_CODECS.includes(this.encodingConfig.codec)) {\n                this.initPcmEncoder();\n            }\n            else {\n                if (typeof AudioEncoder === 'undefined') {\n                    throw new Error('AudioEncoder is not supported by this browser.');\n                }\n                const support = await AudioEncoder.isConfigSupported(encoderConfig);\n                if (!support.supported) {\n                    throw new Error(`This specific encoder configuration (${encoderConfig.codec}, ${encoderConfig.bitrate} bps,`\n                        + ` ${encoderConfig.numberOfChannels} channels, ${encoderConfig.sampleRate} Hz) is not`\n                        + ` supported by this browser. Consider using another codec or changing your audio parameters.`);\n                }\n                this.encoder = new AudioEncoder({\n                    output: (chunk, meta) => {\n                        const packet = EncodedPacket.fromEncodedChunk(chunk);\n                        this.encodingConfig.onEncodedPacket?.(packet, meta);\n                        void this.muxer.addEncodedAudioPacket(this.source._connectedTrack, packet, meta)\n                            .catch((error) => {\n                            this.error ??= error;\n                            this.errorNeedsNewStack = false;\n                        });\n                    },\n                    error: (error) => {\n                        error.stack = encoderError.stack; // Provide a more useful stack trace\n                        this.error ??= error;\n                    },\n                });\n                this.encoder.configure(encoderConfig);\n            }\n            assert(this.source._connectedTrack);\n            this.muxer = this.source._connectedTrack.output._muxer;\n            this.encoderInitialized = true;\n        })();\n    }\n    initPcmEncoder() {\n        this.isPcmEncoder = true;\n        const codec = this.encodingConfig.codec;\n        const { dataType, sampleSize, littleEndian } = parsePcmCodec(codec);\n        this.outputSampleSize = sampleSize;\n        // All these functions receive a float sample as input and map it into the desired format\n        switch (sampleSize) {\n            case 1:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint8(byteOffset, clamp((value + 1) * 127.5, 0, 255));\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => {\n                            view.setInt8(byteOffset, clamp(Math.round(value * 128), -128, 127));\n                        };\n                    }\n                    else if (dataType === 'ulaw') {\n                        this.writeOutputValue = (view, byteOffset, value) => {\n                            const int16 = clamp(Math.floor(value * 32767), -32768, 32767);\n                            view.setUint8(byteOffset, toUlaw(int16));\n                        };\n                    }\n                    else if (dataType === 'alaw') {\n                        this.writeOutputValue = (view, byteOffset, value) => {\n                            const int16 = clamp(Math.floor(value * 32767), -32768, 32767);\n                            view.setUint8(byteOffset, toAlaw(int16));\n                        };\n                    }\n                    else {\n                        assert(false);\n                    }\n                }\n                ;\n                break;\n            case 2:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint16(byteOffset, clamp((value + 1) * 32767.5, 0, 65535), littleEndian);\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setInt16(byteOffset, clamp(Math.round(value * 32767), -32768, 32767), littleEndian);\n                    }\n                    else {\n                        assert(false);\n                    }\n                }\n                ;\n                break;\n            case 3:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => setUint24(view, byteOffset, clamp((value + 1) * 8388607.5, 0, 16777215), littleEndian);\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => setInt24(view, byteOffset, clamp(Math.round(value * 8388607), -8388608, 8388607), littleEndian);\n                    }\n                    else {\n                        assert(false);\n                    }\n                }\n                ;\n                break;\n            case 4:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint32(byteOffset, clamp((value + 1) * 2147483647.5, 0, 4294967295), littleEndian);\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setInt32(byteOffset, clamp(Math.round(value * 2147483647), -2147483648, 2147483647), littleEndian);\n                    }\n                    else if (dataType === 'float') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setFloat32(byteOffset, value, littleEndian);\n                    }\n                    else {\n                        assert(false);\n                    }\n                }\n                ;\n                break;\n            case 8:\n                {\n                    if (dataType === 'float') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setFloat64(byteOffset, value, littleEndian);\n                    }\n                    else {\n                        assert(false);\n                    }\n                }\n                ;\n                break;\n            default:\n                {\n                    assertNever(sampleSize);\n                    assert(false);\n                }\n                ;\n        }\n    }\n    async flushAndClose(forceClose) {\n        if (!forceClose)\n            this.checkForEncoderError();\n        if (this.customEncoder) {\n            if (!forceClose) {\n                void this.customEncoderCallSerializer.call(() => this.customEncoder.flush());\n            }\n            await this.customEncoderCallSerializer.call(() => this.customEncoder.close());\n        }\n        else if (this.encoder) {\n            if (!forceClose) {\n                await this.encoder.flush();\n            }\n            if (this.encoder.state !== 'closed') {\n                this.encoder.close();\n            }\n        }\n        if (!forceClose)\n            this.checkForEncoderError();\n    }\n    getQueueSize() {\n        if (this.customEncoder) {\n            return this.customEncoderQueueSize;\n        }\n        else if (this.isPcmEncoder) {\n            return 0;\n        }\n        else {\n            return this.encoder?.encodeQueueSize ?? 0;\n        }\n    }\n    checkForEncoderError() {\n        if (this.error) {\n            if (this.errorNeedsNewStack) {\n                this.error.stack = new Error().stack; // Provide an even more useful stack trace\n            }\n            throw this.error;\n        }\n    }\n}\n/**\n * This source can be used to add raw, unencoded audio samples to an output audio track. These samples will\n * automatically be encoded and then piped into the output.\n * @group Media sources\n * @public\n */\nexport class AudioSampleSource extends AudioSource {\n    /**\n     * Creates a new {@link AudioSampleSource} whose samples are encoded according to the specified\n     * {@link AudioEncodingConfig}.\n     */\n    constructor(encodingConfig) {\n        validateAudioEncodingConfig(encodingConfig);\n        super(encodingConfig.codec);\n        this._encoder = new AudioEncoderWrapper(this, encodingConfig);\n    }\n    /**\n     * Encodes an audio sample and then adds it to the output.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(audioSample) {\n        if (!(audioSample instanceof AudioSample)) {\n            throw new TypeError('audioSample must be an AudioSample.');\n        }\n        return this._encoder.add(audioSample, false);\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * This source can be used to add audio data from an AudioBuffer to the output track. This is useful when working with\n * the Web Audio API.\n * @group Media sources\n * @public\n */\nexport class AudioBufferSource extends AudioSource {\n    /**\n     * Creates a new {@link AudioBufferSource} whose `AudioBuffer` instances are encoded according to the specified\n     * {@link AudioEncodingConfig}.\n     */\n    constructor(encodingConfig) {\n        validateAudioEncodingConfig(encodingConfig);\n        super(encodingConfig.codec);\n        /** @internal */\n        this._accumulatedTime = 0;\n        this._encoder = new AudioEncoderWrapper(this, encodingConfig);\n    }\n    /**\n     * Converts an AudioBuffer to audio samples, encodes them and adds them to the output. The first AudioBuffer will\n     * be played at timestamp 0, and any subsequent AudioBuffer will have a timestamp equal to the total duration of\n     * all previous AudioBuffers.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    async add(audioBuffer) {\n        if (!(audioBuffer instanceof AudioBuffer)) {\n            throw new TypeError('audioBuffer must be an AudioBuffer.');\n        }\n        const iterator = AudioSample._fromAudioBuffer(audioBuffer, this._accumulatedTime);\n        this._accumulatedTime += audioBuffer.duration;\n        for (const audioSample of iterator) {\n            await this._encoder.add(audioSample, true);\n        }\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * Audio source that encodes the data of a\n * [`MediaStreamAudioTrack`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack) and pipes it into the\n * output. This is useful for capturing live or real-time audio such as microphones or audio from other media elements.\n * Audio will automatically start being captured once the connected {@link Output} is started, and will keep being\n * captured until the {@link Output} is finalized or this source is closed.\n * @group Media sources\n * @public\n */\nexport class MediaStreamAudioTrackSource extends AudioSource {\n    /** A promise that rejects upon any error within this source. This promise never resolves. */\n    get errorPromise() {\n        this._errorPromiseAccessed = true;\n        return this._promiseWithResolvers.promise;\n    }\n    /**\n     * Creates a new {@link MediaStreamAudioTrackSource} from a `MediaStreamAudioTrack`, which will pull audio samples\n     * from the stream in real time and encode them according to {@link AudioEncodingConfig}.\n     */\n    constructor(track, encodingConfig) {\n        if (!(track instanceof MediaStreamTrack) || track.kind !== 'audio') {\n            throw new TypeError('track must be an audio MediaStreamTrack.');\n        }\n        validateAudioEncodingConfig(encodingConfig);\n        super(encodingConfig.codec);\n        /** @internal */\n        this._abortController = null;\n        /** @internal */\n        this._audioContext = null;\n        /** @internal */\n        this._scriptProcessorNode = null; // Deprecated but goated\n        /** @internal */\n        this._promiseWithResolvers = promiseWithResolvers();\n        /** @internal */\n        this._errorPromiseAccessed = false;\n        this._encoder = new AudioEncoderWrapper(this, encodingConfig);\n        this._track = track;\n    }\n    /** @internal */\n    async _start() {\n        if (!this._errorPromiseAccessed) {\n            console.warn('Make sure not to ignore the `errorPromise` field on MediaStreamVideoTrackSource, so that any internal'\n                + ' errors get bubbled up properly.');\n        }\n        this._abortController = new AbortController();\n        if (typeof MediaStreamTrackProcessor !== 'undefined') {\n            // Great, MediaStreamTrackProcessor is supported, this is the preferred way of doing things\n            let firstAudioDataTimestamp = null;\n            const processor = new MediaStreamTrackProcessor({ track: this._track });\n            const consumer = new WritableStream({\n                write: (audioData) => {\n                    if (firstAudioDataTimestamp === null) {\n                        firstAudioDataTimestamp = audioData.timestamp / 1e6;\n                        const muxer = this._connectedTrack.output._muxer;\n                        if (muxer.firstMediaStreamTimestamp === null) {\n                            muxer.firstMediaStreamTimestamp = performance.now() / 1000;\n                            this._timestampOffset = -firstAudioDataTimestamp;\n                        }\n                        else {\n                            this._timestampOffset = (performance.now() / 1000 - muxer.firstMediaStreamTimestamp)\n                                - firstAudioDataTimestamp;\n                        }\n                    }\n                    if (this._encoder.getQueueSize() >= 4) {\n                        // Drop data if the encoder is overloaded\n                        audioData.close();\n                        return;\n                    }\n                    void this._encoder.add(new AudioSample(audioData), true)\n                        .catch((error) => {\n                        this._abortController?.abort();\n                        this._promiseWithResolvers.reject(error);\n                    });\n                },\n            });\n            processor.readable.pipeTo(consumer, {\n                signal: this._abortController.signal,\n            }).catch((error) => {\n                // Handle AbortError silently\n                if (error instanceof DOMException && error.name === 'AbortError')\n                    return;\n                this._promiseWithResolvers.reject(error);\n            });\n        }\n        else {\n            // Let's fall back to an AudioContext approach\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n            const AudioContext = window.AudioContext || window.webkitAudioContext;\n            this._audioContext = new AudioContext({ sampleRate: this._track.getSettings().sampleRate });\n            const sourceNode = this._audioContext.createMediaStreamSource(new MediaStream([this._track]));\n            this._scriptProcessorNode = this._audioContext.createScriptProcessor(4096);\n            if (this._audioContext.state === 'suspended') {\n                await this._audioContext.resume();\n            }\n            sourceNode.connect(this._scriptProcessorNode);\n            this._scriptProcessorNode.connect(this._audioContext.destination);\n            let audioReceived = false;\n            let totalDuration = 0;\n            this._scriptProcessorNode.onaudioprocess = (event) => {\n                const iterator = AudioSample._fromAudioBuffer(event.inputBuffer, totalDuration);\n                totalDuration += event.inputBuffer.duration;\n                for (const audioSample of iterator) {\n                    if (!audioReceived) {\n                        audioReceived = true;\n                        const muxer = this._connectedTrack.output._muxer;\n                        if (muxer.firstMediaStreamTimestamp === null) {\n                            muxer.firstMediaStreamTimestamp = performance.now() / 1000;\n                        }\n                        else {\n                            this._timestampOffset = performance.now() / 1000 - muxer.firstMediaStreamTimestamp;\n                        }\n                    }\n                    if (this._encoder.getQueueSize() >= 4) {\n                        // Drop data if the encoder is overloaded\n                        audioSample.close();\n                        continue;\n                    }\n                    void this._encoder.add(audioSample, true)\n                        .catch((error) => {\n                        void this._audioContext.suspend();\n                        this._promiseWithResolvers.reject(error);\n                    });\n                }\n            };\n        }\n    }\n    /** @internal */\n    async _flushAndClose(forceClose) {\n        if (this._abortController) {\n            this._abortController.abort();\n            this._abortController = null;\n        }\n        if (this._audioContext) {\n            assert(this._scriptProcessorNode);\n            this._scriptProcessorNode.disconnect();\n            await this._audioContext.suspend();\n        }\n        await this._encoder.flushAndClose(forceClose);\n    }\n}\nconst mediaStreamTrackProcessorWorkerCode = () => {\n    const sendMessage = (message, transfer) => {\n        if (transfer) {\n            self.postMessage(message, { transfer });\n        }\n        else {\n            self.postMessage(message);\n        }\n    };\n    // Immediately send a message to the main thread, letting them know of the support\n    sendMessage({\n        type: 'support',\n        supported: typeof MediaStreamTrackProcessor !== 'undefined',\n    });\n    const abortControllers = new Map();\n    const stoppedTracks = new Set();\n    self.addEventListener('message', (event) => {\n        const message = event.data;\n        switch (message.type) {\n            case 'videoTrack':\n                {\n                    const processor = new MediaStreamTrackProcessor({ track: message.track });\n                    const consumer = new WritableStream({\n                        write: (videoFrame) => {\n                            if (stoppedTracks.has(message.trackId)) {\n                                videoFrame.close();\n                                return;\n                            }\n                            // Send it to the main thread\n                            sendMessage({\n                                type: 'videoFrame',\n                                trackId: message.trackId,\n                                videoFrame,\n                            }, [videoFrame]);\n                        },\n                    });\n                    const abortController = new AbortController();\n                    abortControllers.set(message.trackId, abortController);\n                    processor.readable.pipeTo(consumer, {\n                        signal: abortController.signal,\n                    }).catch((error) => {\n                        // Handle AbortError silently\n                        if (error instanceof DOMException && error.name === 'AbortError')\n                            return;\n                        sendMessage({\n                            type: 'error',\n                            trackId: message.trackId,\n                            error,\n                        });\n                    });\n                }\n                ;\n                break;\n            case 'stopTrack':\n                {\n                    const abortController = abortControllers.get(message.trackId);\n                    if (abortController) {\n                        abortController.abort();\n                        abortControllers.delete(message.trackId);\n                    }\n                    stoppedTracks.add(message.trackId);\n                    sendMessage({\n                        type: 'trackStopped',\n                        trackId: message.trackId,\n                    });\n                }\n                ;\n                break;\n            default: assertNever(message);\n        }\n    });\n};\nlet nextMediaStreamTrackProcessorWorkerId = 0;\nlet mediaStreamTrackProcessorWorker = null;\nconst initMediaStreamTrackProcessorWorker = () => {\n    const blob = new Blob([`(${mediaStreamTrackProcessorWorkerCode.toString()})()`], { type: 'application/javascript' });\n    const url = URL.createObjectURL(blob);\n    mediaStreamTrackProcessorWorker = new Worker(url);\n};\nlet mediaStreamTrackProcessorIsSupportedInWorkerCache = null;\nconst mediaStreamTrackProcessorIsSupportedInWorker = async () => {\n    if (mediaStreamTrackProcessorIsSupportedInWorkerCache !== null) {\n        return mediaStreamTrackProcessorIsSupportedInWorkerCache;\n    }\n    if (!mediaStreamTrackProcessorWorker) {\n        initMediaStreamTrackProcessorWorker();\n    }\n    return new Promise((resolve) => {\n        assert(mediaStreamTrackProcessorWorker);\n        const listener = (event) => {\n            const message = event.data;\n            if (message.type === 'support') {\n                mediaStreamTrackProcessorIsSupportedInWorkerCache = message.supported;\n                mediaStreamTrackProcessorWorker.removeEventListener('message', listener);\n                resolve(message.supported);\n            }\n        };\n        mediaStreamTrackProcessorWorker.addEventListener('message', listener);\n    });\n};\nconst sendMessageToMediaStreamTrackProcessorWorker = (message, transfer) => {\n    assert(mediaStreamTrackProcessorWorker);\n    if (transfer) {\n        mediaStreamTrackProcessorWorker.postMessage(message, transfer);\n    }\n    else {\n        mediaStreamTrackProcessorWorker.postMessage(message);\n    }\n};\n/**\n * Base class for subtitle sources - sources for subtitle tracks.\n * @group Media sources\n * @public\n */\nexport class SubtitleSource extends MediaSource {\n    /** Internal constructor. */\n    constructor(codec) {\n        super();\n        /** @internal */\n        this._connectedTrack = null;\n        if (!SUBTITLE_CODECS.includes(codec)) {\n            throw new TypeError(`Invalid subtitle codec '${codec}'. Must be one of: ${SUBTITLE_CODECS.join(', ')}.`);\n        }\n        this._codec = codec;\n    }\n}\n/**\n * This source can be used to add subtitles from a subtitle text file.\n * @group Media sources\n * @public\n */\nexport class TextSubtitleSource extends SubtitleSource {\n    /** Creates a new {@link TextSubtitleSource} where added text chunks are in the specified `codec`. */\n    constructor(codec) {\n        super(codec);\n        /** @internal */\n        this._error = null;\n        this._parser = new SubtitleParser({\n            codec,\n            output: (cue, metadata) => {\n                void this._connectedTrack?.output._muxer.addSubtitleCue(this._connectedTrack, cue, metadata)\n                    .catch((error) => {\n                    this._error ??= error;\n                });\n            },\n        });\n    }\n    /**\n     * Parses the subtitle text according to the specified codec and adds it to the output track. You don't have to\n     * add the entire subtitle file at once here; you can provide it in chunks.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(text) {\n        if (typeof text !== 'string') {\n            throw new TypeError('text must be a string.');\n        }\n        this._checkForError();\n        this._ensureValidAdd();\n        this._parser.parse(text);\n        return this._connectedTrack.output._muxer.mutex.currentPromise;\n    }\n    /** @internal */\n    _checkForError() {\n        if (this._error) {\n            throw this._error;\n        }\n    }\n    /** @internal */\n    async _flushAndClose(forceClose) {\n        if (!forceClose) {\n            this._checkForError();\n        }\n    }\n}\n","/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { AsyncMutex, isIso639Dash2LanguageCode } from './misc.js';\nimport { validateMetadataTags } from './tags.js';\nimport { OutputFormat } from './output-format.js';\nimport { AudioSource, SubtitleSource, VideoSource } from './media-source.js';\nimport { Target } from './target.js';\n/**\n * List of all track types.\n * @group Miscellaneous\n * @public\n */\nexport const ALL_TRACK_TYPES = ['video', 'audio', 'subtitle'];\nconst validateBaseTrackMetadata = (metadata) => {\n    if (!metadata || typeof metadata !== 'object') {\n        throw new TypeError('metadata must be an object.');\n    }\n    if (metadata.languageCode !== undefined && !isIso639Dash2LanguageCode(metadata.languageCode)) {\n        throw new TypeError('metadata.languageCode, when provided, must be a three-letter, ISO 639-2/T language code.');\n    }\n    if (metadata.name !== undefined && typeof metadata.name !== 'string') {\n        throw new TypeError('metadata.name, when provided, must be a string.');\n    }\n    if (metadata.maximumPacketCount !== undefined\n        && (!Number.isInteger(metadata.maximumPacketCount) || metadata.maximumPacketCount < 0)) {\n        throw new TypeError('metadata.maximumPacketCount, when provided, must be a non-negative integer.');\n    }\n};\n/**\n * Main class orchestrating the creation of a new media file.\n * @group Output files\n * @public\n */\nexport class Output {\n    /**\n     * Creates a new instance of {@link Output} which can then be used to create a new media file according to the\n     * specified {@link OutputOptions}.\n     */\n    constructor(options) {\n        /** The current state of the output. */\n        this.state = 'pending';\n        /** @internal */\n        this._tracks = [];\n        /** @internal */\n        this._startPromise = null;\n        /** @internal */\n        this._cancelPromise = null;\n        /** @internal */\n        this._finalizePromise = null;\n        /** @internal */\n        this._mutex = new AsyncMutex();\n        /** @internal */\n        this._metadataTags = {};\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!(options.format instanceof OutputFormat)) {\n            throw new TypeError('options.format must be an OutputFormat.');\n        }\n        if (!(options.target instanceof Target)) {\n            throw new TypeError('options.target must be a Target.');\n        }\n        if (options.target._output) {\n            throw new Error('Target is already used for another output.');\n        }\n        options.target._output = this;\n        this.format = options.format;\n        this.target = options.target;\n        this._writer = options.target._createWriter();\n        this._muxer = options.format._createMuxer(this);\n    }\n    /** Adds a video track to the output with the given source. Can only be called before the output is started. */\n    addVideoTrack(source, metadata = {}) {\n        if (!(source instanceof VideoSource)) {\n            throw new TypeError('source must be a VideoSource.');\n        }\n        validateBaseTrackMetadata(metadata);\n        if (metadata.rotation !== undefined && ![0, 90, 180, 270].includes(metadata.rotation)) {\n            throw new TypeError(`Invalid video rotation: ${metadata.rotation}. Has to be 0, 90, 180 or 270.`);\n        }\n        if (!this.format.supportsVideoRotationMetadata && metadata.rotation) {\n            throw new Error(`${this.format._name} does not support video rotation metadata.`);\n        }\n        if (metadata.frameRate !== undefined\n            && (!Number.isFinite(metadata.frameRate) || metadata.frameRate <= 0)) {\n            throw new TypeError(`Invalid video frame rate: ${metadata.frameRate}. Must be a positive number.`);\n        }\n        this._addTrack('video', source, metadata);\n    }\n    /** Adds an audio track to the output with the given source. Can only be called before the output is started. */\n    addAudioTrack(source, metadata = {}) {\n        if (!(source instanceof AudioSource)) {\n            throw new TypeError('source must be an AudioSource.');\n        }\n        validateBaseTrackMetadata(metadata);\n        this._addTrack('audio', source, metadata);\n    }\n    /** Adds a subtitle track to the output with the given source. Can only be called before the output is started. */\n    addSubtitleTrack(source, metadata = {}) {\n        if (!(source instanceof SubtitleSource)) {\n            throw new TypeError('source must be a SubtitleSource.');\n        }\n        validateBaseTrackMetadata(metadata);\n        this._addTrack('subtitle', source, metadata);\n    }\n    /**\n     * Sets descriptive metadata tags about the media file, such as title, author, date, or cover art. When called\n     * multiple times, only the metadata from the last call will be used.\n     *\n     * Can only be called before the output is started.\n     */\n    setMetadataTags(tags) {\n        validateMetadataTags(tags);\n        if (this.state !== 'pending') {\n            throw new Error('Cannot set metadata tags after output has been started or canceled.');\n        }\n        this._metadataTags = tags;\n    }\n    /** @internal */\n    _addTrack(type, source, metadata) {\n        if (this.state !== 'pending') {\n            throw new Error('Cannot add track after output has been started or canceled.');\n        }\n        if (source._connectedTrack) {\n            throw new Error('Source is already used for a track.');\n        }\n        // Verify maximum track count constraints\n        const supportedTrackCounts = this.format.getSupportedTrackCounts();\n        const presentTracksOfThisType = this._tracks.reduce((count, track) => count + (track.type === type ? 1 : 0), 0);\n        const maxCount = supportedTrackCounts[type].max;\n        if (presentTracksOfThisType === maxCount) {\n            throw new Error(maxCount === 0\n                ? `${this.format._name} does not support ${type} tracks.`\n                : (`${this.format._name} does not support more than ${maxCount} ${type} track`\n                    + `${maxCount === 1 ? '' : 's'}.`));\n        }\n        const maxTotalCount = supportedTrackCounts.total.max;\n        if (this._tracks.length === maxTotalCount) {\n            throw new Error(`${this.format._name} does not support more than ${maxTotalCount} tracks`\n                + `${maxTotalCount === 1 ? '' : 's'} in total.`);\n        }\n        const track = {\n            id: this._tracks.length + 1,\n            output: this,\n            type,\n            source: source,\n            metadata,\n        };\n        if (track.type === 'video') {\n            const supportedVideoCodecs = this.format.getSupportedVideoCodecs();\n            if (supportedVideoCodecs.length === 0) {\n                throw new Error(`${this.format._name} does not support video tracks.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n            else if (!supportedVideoCodecs.includes(track.source._codec)) {\n                throw new Error(`Codec '${track.source._codec}' cannot be contained within ${this.format._name}. Supported`\n                    + ` video codecs are: ${supportedVideoCodecs.map(codec => `'${codec}'`).join(', ')}.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n        }\n        else if (track.type === 'audio') {\n            const supportedAudioCodecs = this.format.getSupportedAudioCodecs();\n            if (supportedAudioCodecs.length === 0) {\n                throw new Error(`${this.format._name} does not support audio tracks.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n            else if (!supportedAudioCodecs.includes(track.source._codec)) {\n                throw new Error(`Codec '${track.source._codec}' cannot be contained within ${this.format._name}. Supported`\n                    + ` audio codecs are: ${supportedAudioCodecs.map(codec => `'${codec}'`).join(', ')}.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n        }\n        else if (track.type === 'subtitle') {\n            const supportedSubtitleCodecs = this.format.getSupportedSubtitleCodecs();\n            if (supportedSubtitleCodecs.length === 0) {\n                throw new Error(`${this.format._name} does not support subtitle tracks.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n            else if (!supportedSubtitleCodecs.includes(track.source._codec)) {\n                throw new Error(`Codec '${track.source._codec}' cannot be contained within ${this.format._name}. Supported`\n                    + ` subtitle codecs are: ${supportedSubtitleCodecs.map(codec => `'${codec}'`).join(', ')}.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n        }\n        this._tracks.push(track);\n        source._connectedTrack = track;\n    }\n    /**\n     * Starts the creation of the output file. This method should be called after all tracks have been added. Only after\n     * the output has started can media samples be added to the tracks.\n     *\n     * @returns A promise that resolves when the output has successfully started and is ready to receive media samples.\n     */\n    async start() {\n        // Verify minimum track count constraints\n        const supportedTrackCounts = this.format.getSupportedTrackCounts();\n        for (const trackType of ALL_TRACK_TYPES) {\n            const presentTracksOfThisType = this._tracks.reduce((count, track) => count + (track.type === trackType ? 1 : 0), 0);\n            const minCount = supportedTrackCounts[trackType].min;\n            if (presentTracksOfThisType < minCount) {\n                throw new Error(minCount === supportedTrackCounts[trackType].max\n                    ? (`${this.format._name} requires exactly ${minCount} ${trackType}`\n                        + ` track${minCount === 1 ? '' : 's'}.`)\n                    : (`${this.format._name} requires at least ${minCount} ${trackType}`\n                        + ` track${minCount === 1 ? '' : 's'}.`));\n            }\n        }\n        const totalMinCount = supportedTrackCounts.total.min;\n        if (this._tracks.length < totalMinCount) {\n            throw new Error(totalMinCount === supportedTrackCounts.total.max\n                ? (`${this.format._name} requires exactly ${totalMinCount} track`\n                    + `${totalMinCount === 1 ? '' : 's'}.`)\n                : (`${this.format._name} requires at least ${totalMinCount} track`\n                    + `${totalMinCount === 1 ? '' : 's'}.`));\n        }\n        if (this.state === 'canceled') {\n            throw new Error('Output has been canceled.');\n        }\n        if (this._startPromise) {\n            console.warn('Output has already been started.');\n            return this._startPromise;\n        }\n        return this._startPromise = (async () => {\n            this.state = 'started';\n            this._writer.start();\n            const release = await this._mutex.acquire();\n            await this._muxer.start();\n            const promises = this._tracks.map(track => track.source._start());\n            await Promise.all(promises);\n            release();\n        })();\n    }\n    /**\n     * Resolves with the full MIME type of the output file, including track codecs.\n     *\n     * The returned promise will resolve only once the precise codec strings of all tracks are known.\n     */\n    getMimeType() {\n        return this._muxer.getMimeType();\n    }\n    /**\n     * Cancels the creation of the output file, releasing internal resources like encoders and preventing further\n     * samples from being added.\n     *\n     * @returns A promise that resolves once all internal resources have been released.\n     */\n    async cancel() {\n        if (this._cancelPromise) {\n            console.warn('Output has already been canceled.');\n            return this._cancelPromise;\n        }\n        else if (this.state === 'finalizing' || this.state === 'finalized') {\n            console.warn('Output has already been finalized.');\n            return;\n        }\n        return this._cancelPromise = (async () => {\n            this.state = 'canceled';\n            const release = await this._mutex.acquire();\n            const promises = this._tracks.map(x => x.source._flushOrWaitForOngoingClose(true)); // Force close\n            await Promise.all(promises);\n            await this._writer.close();\n            release();\n        })();\n    }\n    /**\n     * Finalizes the output file. This method must be called after all media samples across all tracks have been added.\n     * Once the Promise returned by this method completes, the output file is ready.\n     */\n    async finalize() {\n        if (this.state === 'pending') {\n            throw new Error('Cannot finalize before starting.');\n        }\n        if (this.state === 'canceled') {\n            throw new Error('Cannot finalize after canceling.');\n        }\n        if (this._finalizePromise) {\n            console.warn('Output has already been finalized.');\n            return this._finalizePromise;\n        }\n        return this._finalizePromise = (async () => {\n            this.state = 'finalizing';\n            const release = await this._mutex.acquire();\n            const promises = this._tracks.map(x => x.source._flushOrWaitForOngoingClose(false));\n            await Promise.all(promises);\n            await this._muxer.finalize();\n            await this._writer.flush();\n            await this._writer.finalize();\n            this.state = 'finalized';\n            release();\n        })();\n    }\n}\n","/**\n * WebCodecs VP9 encoder wrapper using Mediabunny\n *\n * This encoder uses the native WebCodecs API for hardware-accelerated\n * VP9 encoding with high quality output. It provides a unified API\n * similar to webm-encoder-wrapper.js and mp4-h264 encoder.\n *\n * REQUIREMENTS:\n * - Modern browsers (WebCodecs API)\n * - Mediabunny library for WebM muxing (MPL-2.0 License)\n *   https://mediabunny.dev\n *\n * ADVANTAGES:\n * - Hardware accelerated encoding\n * - High quality output (better than webm-wasm realtime mode)\n * - Non-blocking (truly asynchronous)\n * - Direct canvas integration via VideoFrame\n */\n\n// @ts-ignore - mediabunny is an external module\nimport { Output, WebMOutputFormat, BufferTarget, CanvasSource, QUALITY_HIGH, QUALITY_VERY_HIGH } from 'mediabunny';\n\nexport class WebCodecsVP9Encoder {\n  constructor() {\n    this.output = null;\n    this.canvasSource = null;\n    this.canvas = null;\n    this.ctx = null;\n    this.frameCount = 0;\n    this.frameDuration = 0;\n    this.currentTimestamp = 0;\n    this.isFinalized = false;\n    this.isStarted = false;\n  }\n\n  /**\n     * Check if WebCodecs is supported in this browser\n     * @returns {boolean}\n     */\n  static isSupported() {\n    return typeof VideoEncoder !== 'undefined' &&\n               typeof VideoFrame !== 'undefined';\n  }\n\n  /**\n     * Create and initialize the encoder\n     * @param {Object} options - Configuration object\n     * @param {number} options.width - Video width in pixels\n     * @param {number} options.height - Video height in pixels\n     * @param {number} options.fps - Frames per second\n     * @param {number} options.bitrate - Bitrate in kbps\n     * @param {string} options.quality - Quality preset: 'medium', 'high', 'very-high'\n     * @param {string} options.latencyMode - Latency mode: 'quality' or 'realtime'\n     * @param {string} options.bitrateMode - Bitrate mode: 'variable' or 'constant'\n     * @param {number} options.keyFrameInterval - Frames between keyframes\n     * @param {string} options.contentHint - Content hint: '', 'motion', 'detail', 'text'\n     * @returns {Promise<WebCodecsVP9Encoder>} This instance\n     */\n  async create(options) {\n    const {\n      width,\n      height,\n      fps,\n      bitrate,\n      quality = 'high',\n      latencyMode = 'quality',\n      bitrateMode = 'variable',\n      keyFrameInterval = 120,\n      contentHint = ''\n    } = options;\n\n    if (!WebCodecsVP9Encoder.isSupported()) {\n      throw new Error('WebCodecs API not supported in this browser.');\n    }\n\n    console.log('[WebCodecs VP9] Initializing with:', {\n      width,\n      height,\n      fps,\n      bitrate: `${bitrate} kbps`,\n      quality,\n      latencyMode,\n      bitrateMode,\n      keyFrameInterval,\n      contentHint: contentHint || 'auto',\n      codec: 'VP9',\n      api: 'WebCodecs + Mediabunny'\n    });\n\n    // Store frame duration in seconds\n    this.frameDuration = 1 / fps;\n    this.keyFrameInterval = keyFrameInterval;\n    this.framesSinceKeyframe = 0;\n\n    // Create a temporary canvas for encoding\n    // We'll draw frames to this canvas and encode them\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.ctx = this.canvas.getContext('2d', {\n      willReadFrequently: false,\n      alpha: false\n    });\n\n    // Create Mediabunny output with WebM format\n    this.output = new Output({\n      format: new WebMOutputFormat(),\n      target: new BufferTarget()\n    });\n\n    // Map quality preset to Mediabunny Quality constant\n    let qualityConstant;\n    if (quality === 'very-high') {\n      qualityConstant = QUALITY_VERY_HIGH;\n      console.log('[WebCodecs VP9] Quality: VERY_HIGH');\n    } else if (quality === 'medium') {\n      qualityConstant = QUALITY_HIGH; // Use HIGH even for medium (good enough)\n      console.log('[WebCodecs VP9] Quality: MEDIUM (using HIGH)');\n    } else {\n      qualityConstant = QUALITY_HIGH; // default\n      console.log('[WebCodecs VP9] Quality: HIGH');\n    }\n\n    // Build CanvasSource config with all options\n    const canvasConfig = {\n      codec: 'vp9',\n      bitrate: qualityConstant,\n      latencyMode,\n      bitrateMode,\n      keyFrameInterval\n    };\n\n    // Add content hint if specified\n    if (contentHint) {\n      canvasConfig.contentHint = contentHint;\n    }\n\n    console.log('[WebCodecs VP9] Canvas config:', canvasConfig);\n\n    // Create canvas source with all options\n    this.canvasSource = new CanvasSource(this.canvas, canvasConfig);\n\n    // Add video track to output\n    this.output.addVideoTrack(this.canvasSource);\n\n    // Start the output (required before adding frames)\n    await this.output.start();\n    this.isStarted = true;\n\n    console.log('[WebCodecs VP9] Initialization complete, ready to receive frames');\n    return this;\n  }\n\n  /**\n     * Add an RGBA frame to the video\n     * @param {Uint8Array} rgbaBuffer - RGBA pixel data (width * height * 4 bytes)\n     */\n  async addFrame(rgbaBuffer) {\n    if (this.isFinalized) {\n      throw new Error('Cannot add frames after finalization');\n    }\n\n    if (!this.isStarted) {\n      throw new Error('Encoder not started - call create() first');\n    }\n\n    if (!this.canvas || !this.ctx) {\n      throw new Error('Canvas not initialized - call create() first');\n    }\n\n    this.frameCount++;\n\n    if (this.frameCount % 30 === 0) {\n      console.log(`[WebCodecs VP9] Encoding frame ${this.frameCount}`);\n    }\n\n    // Debug first frame\n    if (this.frameCount === 1) {\n      console.log(`[WebCodecs VP9] First frame - buffer size: ${rgbaBuffer.byteLength} bytes`);\n    }\n\n    // Convert RGBA buffer to ImageData\n    const imageData = new ImageData(\n      // @ts-ignore - rgbaBuffer.buffer can be SharedArrayBuffer which is compatible\n      new Uint8ClampedArray(rgbaBuffer.buffer || rgbaBuffer),\n      this.canvas.width,\n      this.canvas.height\n    );\n\n    // Draw to canvas\n    this.ctx.putImageData(imageData, 0, 0);\n\n    // Add frame to CanvasSource with timestamp and duration (in seconds)\n    // Mediabunny reads from the canvas automatically\n    await this.canvasSource.add(this.currentTimestamp, this.frameDuration);\n\n    // Increment timestamp for next frame\n    this.currentTimestamp += this.frameDuration;\n  }\n\n  /**\n     * Finalize encoding and get the WebM file\n     * @returns {Promise<ArrayBuffer>} The complete WebM video data\n     */\n  async end() {\n    if (this.isFinalized) {\n      throw new Error('Encoder already finalized');\n    }\n\n    console.log(`[WebCodecs VP9] Finalizing encoding (${this.frameCount} total frames, ${this.currentTimestamp.toFixed(2)}s duration)`);\n    this.isFinalized = true;\n\n    try {\n      // Finalize the output and get the video buffer\n      await this.output.finalize();\n\n      const videoBuffer = this.output.target.buffer;\n\n      if (!videoBuffer) {\n        throw new Error('No video buffer produced');\n      }\n\n      console.log(`[WebCodecs VP9] Successfully finalized video: ${videoBuffer.byteLength} bytes`);\n\n      return videoBuffer;\n    } catch (error) {\n      console.error('[WebCodecs VP9] Finalization error:', error);\n      throw new Error(`WebCodecs VP9 encoding failed: ${error.message || error}`);\n    }\n  }\n\n  /**\n     * Cleanup resources\n     */\n  destroy() {\n    console.log('[WebCodecs VP9] Destroying encoder');\n\n    if (this.canvasSource) {\n      // Mediabunny handles cleanup internally\n      this.canvasSource = null;\n    }\n\n    if (this.output) {\n      this.output = null;\n    }\n\n    if (this.canvas) {\n      this.canvas = null;\n    }\n\n    this.ctx = null;\n    this.frameCount = 0;\n    this.currentTimestamp = 0;\n    this.frameDuration = 0;\n    this.isFinalized = false;\n    this.isStarted = false;\n  }\n}\n"],"names":[],"mappings":";;;;EAAA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,gBAAgB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;EACzD,EAAE,MAAM,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG;EAC5C,EAAE,MAAM,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG;EACtC,EAAE,MAAM,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG;;EAEtC,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EAC9C,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACjD,cAAc,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;;EAEpE,EAAE,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE;EAClD,EAAE,OAAO,CAAC,OAAO,GAAG,GAAG,IAAI,GAAG,CAAC;EAC/B;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,iBAAiB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;EAC1D,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC;EACjB,EAAE,MAAM,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG;EAC5C,EAAE,MAAM,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG;;EAE5C,EAAE,MAAM,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG;EACtC,EAAE,MAAM,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG;;EAEtC,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC;EACnD,cAAc,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACnD,cAAc,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC;;EAErD,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAC1D,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;EACf;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,OAAO,GAAG,GAAG,EAAE;EAClE,EAAE,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC;EAClB,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC;;EAEnB,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,OAAO;EACtC,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,OAAO;EACtC,EAAE,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;EACpD,cAAc,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;EACzD,cAAc,EAAE,GAAG,CAAC;EACpB,cAAc,EAAE,CAAC,CAAC,CAAC;;EAEnB,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,OAAO;EACtC,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,OAAO;EACtC,EAAE,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;EACpD,cAAc,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;EACzD,cAAc,EAAE,GAAG,CAAC;EACpB,cAAc,EAAE,CAAC,CAAC,CAAC;;EAEnB,EAAE,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;EACnB;;EA8BA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,YAAY,CAAC,MAAM,EAAE,eAAe,GAAG,IAAI,EAAE;EAC7D,EAAE,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,MAAM;;EAEjD,EAAE,MAAM,SAAS,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,EAAE,IAAI,mBAAmB,GAAG,CAAC;;EAE7B,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EAC1C,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;EACtC,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;EAClC,IAAI,MAAM,eAAe,GAAG,iBAAiB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;;EAErE,IAAI,mBAAmB,IAAI,eAAe;;EAE1C;EACA,IAAI,OAAO,mBAAmB,IAAI,eAAe,EAAE;EACnD;EACA,MAAM,MAAM,SAAS,GAAG,mBAAmB,GAAG,eAAe;EAC7D,MAAM,MAAM,CAAC,GAAG,CAAC,IAAI,SAAS,GAAG,eAAe,CAAC,CAAC;;EAElD;EACA,MAAM,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC;EAC7C,MAAM,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC;EAC7C,MAAM,SAAS,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;;EAEtC,MAAM,mBAAmB,IAAI,eAAe;EAC5C,IAAI;EACJ,EAAE;;EAEF;EACA,EAAE,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;EAChD,EAAE,MAAM,aAAa,GAAG,SAAS,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;EACvD,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,CAAC,EAAE;EACpF,IAAI,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC;EAChC,EAAE;;EAEF,EAAE,OAAO,SAAS;EAClB;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,sBAAsB,CAAC,MAAM,EAAE,eAAe,GAAG,IAAI,EAAE,OAAO,GAAG,GAAG,EAAE;EACtF,EAAE,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,MAAM;EACjD,EAAE,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,YAAY,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;;EAExE;EACA,EAAE,MAAM,WAAW,GAAG,EAAE;EACxB,EAAE,MAAM,gBAAgB,GAAG,EAAE,CAAC;;EAE9B,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;EAC9C;EACA,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC1C,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;EACzB,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAC7B,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;EAE1D;EACA,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,gBAAgB,EAAE,CAAC,EAAE,EAAE;EAC/C,MAAM,MAAM,CAAC,GAAG,CAAC,GAAG,gBAAgB;EACpC,MAAM,MAAM,KAAK,GAAG,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC;EAC/D,MAAM,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC;EAC7B,IAAI;EACJ,EAAE;;EAEF;EACA,EAAE,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;EAE7C;EACA,EAAE,OAAO,YAAY,CAAC,WAAW,EAAE,eAAe,CAAC;EACnD;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,0BAA0B,CAAC,GAAG,EAAE,SAAS,EAAE;EAC3D,EAAE,IAAI,CAAC,SAAS,EAAE,OAAO,IAAI;;EAE7B;EACA,EAAE,IAAI,aAAa,GAAG,EAAE;EACxB,EAAE,IAAI,SAAS,CAAC,IAAI,KAAK,mBAAmB,IAAI,SAAS,CAAC,QAAQ,EAAE;EACpE,IAAI,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,KAAK;EACvD,MAAM,MAAM,EAAE,OAAO,CAAC,QAAQ,CAAC;EAC/B,KAAK,CAAC,CAAC;EACP,EAAE,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;EACvC,IAAI,aAAa,GAAG,SAAS;EAC7B,EAAE,CAAC,MAAM;EACT,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF,EAAE,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;;EAE7C;EACA,EAAE,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;EAClC,IAAI,OAAO;EACX,MAAM,MAAM,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM;EACrC,MAAM,IAAI,EAAE,GAAG,CAAC,OAAO;EACvB,KAAK;EACL,EAAE;;EAEF;EACA,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,CAAC,IAAI,KAAK,GAAG,QAAQ,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,QAAQ;;EAExF,EAAE,aAAa,CAAC,OAAO,CAAC,EAAE,IAAI;EAC9B,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,MAAM;EAChC,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC;EAC9B,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC;EAC9B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC;EAChC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC;EAChC,EAAE,CAAC,CAAC;;EAEJ;EACA,EAAE,MAAM,SAAS,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC;EACrC,EAAE,MAAM,SAAS,GAAG,CAAC,KAAK,GAAG,KAAK,IAAI,CAAC;;EAEvC;EACA;EACA,EAAE,MAAM,MAAM,GAAG;EACjB,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;EACjB,IAAI,CAAC,IAAI,EAAE,KAAK;EAChB,GAAG;;EAEH,EAAE,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EAChC,EAAE,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,GAAG,IAAI;;EAE9D;EACA,EAAE,MAAM,MAAM,GAAG,GAAG,CAAC,eAAe,CAAC,MAAM,EAAE;EAC7C,IAAI,OAAO,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO;EAC3E,GAAG,CAAC;;EAEJ,EAAE,OAAO;EACT,IAAI,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;EAClC,IAAI,IAAI,EAAE,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,OAAO;EAC5C,GAAG;EACH;;EChQA;EACA;EACA;EACA;EACA;EACA;;;EAQA,MAAM,KAAK,GAAG,CAAC,EAAE,KAAK,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;;EAErE;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA,MAAM,iBAAiB,GAAG;EAC1B,EAAE,KAAK;EACP,EAAE,CAAC,IAAI,EAAE,CAAC,eAAe,CAAC,EAAE,YAAY,CAAC;EACzC,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE;EACvC,IAAI,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU;EAC3D,IAAI,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE;EACjC,GAAG,CAAC;EACJ,CAAC;;EAED;EACA;EACA;EACA;EACA,MAAM,qBAAqB,GAAG;EAC9B,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE;EACzB,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;EAC3B,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE;EAC1B,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE;EAC5B,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;EAC3B,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE;EAC5B,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;EAC3B,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE;EAC5B,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,oBAAoB,GAAG,CAAC,IAAI,KAAK;EACvC,EAAE,OAAO,IAAI,GAAG,GAAG,EAAE,IAAI,IAAI,GAAG;EAChC,EAAE,OAAO,IAAI,GAAG,IAAI,EAAE,IAAI,IAAI,GAAG;EACjC,EAAE,OAAO,IAAI;EACb,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA,MAAM,iBAAiB,GAAG,CAAC,KAAK,KAAK;EACrC,EAAE,OAAO,KAAK;EACd,WAAW,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;EAC/B,WAAW,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ;EACvC,WAAW,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ;EACvC,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA,MAAM,wBAAwB,GAAG,CAAC,OAAO,EAAE,GAAG,KAAK;EACnD;EACA,EAAE,IAAI,OAAO,CAAC,IAAI,EAAE;EACpB,IAAI,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;EAC9C,EAAE;;EAEF;EACA,EAAE,IAAI,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;EAC/C,IAAI,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC;EACrD,EAAE;;EAEF;EACA,EAAE,IAAI;EACN,IAAI,IAAI,GAAG,CAAC,QAAQ,CAAC,+BAA+B,CAAC,EAAE;EACvD,MAAM,GAAG,CAAC,WAAW,CAAC,+BAA+B,CAAC;EACtD,IAAI;EACJ,IAAI,IAAI,GAAG,CAAC,SAAS,CAAC,yBAAyB,CAAC,EAAE;EAClD,MAAM,GAAG,CAAC,YAAY,CAAC,yBAAyB,CAAC;EACjD,IAAI;EACJ,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;EACf,CAAC;;EAWD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,mBAAmB,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK;EAChD,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;EACpC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;EACpC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;EACpC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;;EAEpC,EAAE,MAAM,KAAK,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;EAC7D,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK,EAAE,OAAO,IAAI,CAAC;;EAE3C,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,KAAK;EACnE,EAAE,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,KAAK;;EAEpE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;EAC5C;EACA,IAAI,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC;EACjC,IAAI,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC;EACjC,IAAI,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE;EACtB,IAAI,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE;EACtB,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;EACvC,EAAE;EACF,EAAE,OAAO,IAAI,CAAC;EACd,CAAC;;EAED;EACA;EACA;EACA;EACA;EACO,MAAM,oBAAoB,CAAC;EAClC,EAAE,WAAW,CAAC,OAAO,GAAG,EAAE,EAAE;EAC5B,IAAI,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC;EAC/C,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,KAAK,SAAS,GAAG,OAAO,CAAC,OAAO,GAAG,IAAI;EACzE,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,KAAK,SAAS,GAAG,OAAO,CAAC,OAAO,GAAG,IAAI;EACzE,IAAI,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,KAAK;EACrD,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,cAAc,CAAC,MAAM,EAAE;EACzB,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,IAAI;;EAEpC;EACA,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG;EAC9D,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG;EAC9D,IAAI,MAAM,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS;;EAEzD,IAAI,OAAO,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK;EACrE,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,eAAe,CAAC,MAAM,EAAE;EAC1B,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,MAAM;;EAEtC;EACA,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;EACzC,IAAI,MAAM,GAAG,GAAG,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG;EAChD,IAAI,MAAM,GAAG,GAAG,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG;EAChD,IAAI,MAAM,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS;;EAEzD,IAAI,MAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;EAC9D,IAAI,MAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;;EAEhE;EACA,IAAI,IAAI,OAAO,EAAE;EACjB,MAAM,OAAO,CAAC,cAAc,EAAE,cAAc,CAAC;EAC7C,IAAI,CAAC,MAAM;EACX;EACA,MAAM,OAAO;EACb,QAAQ,GAAG,EAAE,cAAc;EAC3B,QAAQ,GAAG,EAAE,cAAc;EAC3B;EACA,QAAQ,IAAI,MAAM,CAAC,OAAO,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,cAAc,EAAE,cAAc,CAAC,EAAE,GAAG,EAAE;EACrF,OAAO;EACP,IAAI;EACJ,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,kBAAkB,CAAC,IAAI,EAAE;EAC3B,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,OAAO,KAAK;EAClE,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,OAAO,KAAK;EAClE,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,aAAa,CAAC,IAAI,EAAE;EACtB,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAO;EACzE,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAO;EACzE,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,sBAAsB,CAAC,OAAO,EAAE;EAClC,IAAI,MAAM,WAAW,GAAG,EAAE,GAAG,OAAO,EAAE;;EAEtC;EACA,IAAI,IAAI,OAAO,CAAC,MAAM,KAAK,SAAS,IAAI,OAAO,CAAC,MAAM,KAAK,IAAI,EAAE;EACjE,MAAM,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,MAAM,CAAC;EAC/D,IAAI;;EAEJ;EACA,IAAI,IAAI,OAAO,CAAC,IAAI,KAAK,SAAS,IAAI,OAAO,CAAC,IAAI,KAAK,IAAI,EAAE;EAC7D,MAAM,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;EACzD,IAAI;;EAEJ,IAAI,OAAO,WAAW;EACtB,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,iBAAiB,CAAC,UAAU,EAAE,QAAQ,EAAE,KAAK,GAAG,EAAE,EAAE;EACtD,IAAI,MAAM,IAAI,GAAG,EAAE;;EAEnB;EACA,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,GAAG;EAC9E,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,GAAG;EAC9E,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG;EACtE,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG;;EAEtE,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,EAAE,EAAE;EACrC,MAAM,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK;EACzB,MAAM,MAAM,GAAG,GAAG,OAAO,GAAG,CAAC,KAAK,GAAG,OAAO,IAAI,CAAC;EACjD,MAAM,MAAM,GAAG,GAAG,OAAO,GAAG,CAAC,KAAK,GAAG,OAAO,IAAI,CAAC;;EAEjD,MAAM,IAAI,IAAI,CAAC,YAAY,EAAE;EAC7B;EACA,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;EACnD,MAAM,CAAC,MAAM;EACb;EACA,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;EAC7B,MAAM;EACN,IAAI;;EAEJ,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,mBAAmB,CAAC,GAAG,EAAE;EAC3B,IAAI,MAAM,MAAM,GAAG,EAAE;EACrB,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,CAAC,OAAO,EAAE;EAC5C,IAAI,MAAM,IAAI,GAAG,GAAG,CAAC,OAAO,EAAE;;EAE9B,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;EACtC,MAAM,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,kBAAkB,CAAC,CAAC;EACvD,IAAI;;EAEJ,IAAI,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;EACxC,MAAM,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;EACtF,IAAI;;EAEJ,IAAI,OAAO;EACX,MAAM,KAAK,EAAE,MAAM,CAAC,MAAM,KAAK,CAAC;EAChC,MAAM;EACN,KAAK;EACL,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,aAAa,CAAC,GAAG,EAAE;EACrB,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;EACzB;EACA,MAAM,OAAO,GAAG,CAAC,SAAS,EAAE;EAC5B,IAAI;;EAEJ;EACA,IAAI,MAAM,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS;;EAEzD;EACA,IAAI,OAAO;EACX,MAAM,OAAO,EAAE,MAAM,IAAI;EACzB,MAAM,OAAO,EAAE,MAAM,IAAI;EACzB,MAAM,QAAQ,EAAE,MAAM,KAAK;EAC3B,MAAM,QAAQ,EAAE,MAAM,KAAK;EAC3B,MAAM,SAAS,EAAE,MAAM,CAAC,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,KAAK,GAAG,KAAK,IAAI,CAAC;EAC9D,KAAK;EACL,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,aAAa,CAAC,WAAW,EAAE;EAC7B,IAAI,OAAO,OAAO,GAAG,EAAE,OAAO,KAAK;EACnC;EACA,MAAM,MAAM,aAAa,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC;EAC/C,MAAM,MAAM,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;EACjD,MAAM,MAAM,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;;EAEjD;EACA,MAAM,GAAG,CAAC,KAAK,GAAG,CAAC,OAAO,KAAK,aAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;EAClF,MAAM,GAAG,CAAC,MAAM,GAAG,CAAC,OAAO,KAAK,cAAc,CAAC,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;EACpF,MAAM,GAAG,CAAC,MAAM,GAAG,CAAC,OAAO,KAAK,cAAc,CAAC,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;;EAEpF,MAAM,IAAI;EACV;EACA,QAAQ,MAAM,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC;EACvC,MAAM,CAAC,SAAS;EAChB;EACA,QAAQ,GAAG,CAAC,KAAK,GAAG,aAAa;EACjC,QAAQ,GAAG,CAAC,MAAM,GAAG,cAAc;EACnC,QAAQ,GAAG,CAAC,MAAM,GAAG,cAAc;EACnC,MAAM;EACN,IAAI,CAAC;EACL,EAAE;EACF;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,eAAe,aAAa,CAAC,GAAG,EAAE,QAAQ,EAAE,kBAAkB,EAAE,EAAE,UAAU,EAAE,YAAY,EAAE,GAAG,EAAE,EAAE;EACnG,EAAE,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,IAAI,UAAU;;EAE5C,EAAE,IAAI,YAAY,EAAE;EACpB,IAAI,YAAY,CAAC,CAAC,UAAU,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;EAC1C,EAAE;;EAEF;EACA,EAAE,MAAM,YAAY,GAAG;EACvB,IAAI,MAAM,EAAE,QAAQ,CAAC,MAAM;EAC3B,IAAI,QAAQ,EAAE,kBAAkB;EAChC,IAAI,SAAS,EAAE;EACf,GAAG;;EAEH;EACA,EAAE,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE,YAAY,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI;EACpE,EAAE,IAAI,QAAQ,CAAC,OAAO,KAAK,SAAS,EAAE,YAAY,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO;EAC7E,EAAE,IAAI,QAAQ,CAAC,KAAK,KAAK,SAAS,EAAE,YAAY,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK;;EAEvE;EACA,EAAE,IAAI,kBAAkB,KAAK,CAAC,IAAI,kBAAkB,GAAG,EAAE,EAAE;EAC3D;EACA,IAAI,MAAM,aAAa,GAAG,EAAE,MAAM,EAAE,QAAQ,CAAC,MAAM,EAAE;EACrD,IAAI,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE,aAAa,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI;EACvE,IAAI,IAAI,QAAQ,CAAC,OAAO,KAAK,SAAS,EAAE,aAAa,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO;EAChF,IAAI,IAAI,QAAQ,CAAC,KAAK,KAAK,SAAS,EAAE,aAAa,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK;;EAE1E,IAAI,GAAG,CAAC,MAAM,CAAC,aAAa,CAAC;EAC7B;EACA,EAAE,CAAC,MAAM;EACT,IAAI,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC;EAC3B,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,EAAE;;EAEF,EAAE,IAAI,UAAU,EAAE,UAAU,EAAE;;EAE9B;EACA,EAAE,IAAI,QAAQ,CAAC,QAAQ,EAAE;EACzB,IAAI,IAAI,YAAY,EAAE;EACtB,MAAM,YAAY,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,UAAU,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;EACtE,IAAI;EACJ,IAAI,MAAM,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC;EAClC,IAAI,IAAI,UAAU,EAAE,UAAU,EAAE;EAChC,EAAE;EACF;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,SAAS,kBAAkB,CAAC,SAAS,EAAE,aAAa,EAAE;EACtD,EAAE,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;;EAErD;EACA,EAAE,MAAM,cAAc,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,KAAK,GAAG,IAAI,EAAE,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;;EAEnF;EACA,EAAE,MAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,GAAG,cAAc,CAAC;;EAEpE;EACA,EAAE,MAAM,iBAAiB,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,cAAc,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC;;EAExF,EAAE,OAAO,SAAS,CAAC,GAAG,CAAC,EAAE,KAAK;EAC9B,IAAI,QAAQ,EAAE,EAAE;EAChB,IAAI,kBAAkB,EAAE;EACxB,GAAG,CAAC,CAAC;EACL;;EAmCA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,iBAAiB,GAAG,OAAO,GAAG,EAAE,QAAQ,EAAE,EAAE,UAAU,EAAE,cAAc,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK;EAC3G;EACA,EAAE,MAAM,WAAW,GAAG,CAAC,OAAO,EAAE,SAAS,KAAK;EAC9C,IAAI,IAAI,IAAI,GAAG,OAAO,GAAG,SAAS;EAClC,IAAI,IAAI,IAAI,GAAG,GAAG,EAAE;EACpB;EACA,MAAM,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,CAAC;EAChC,IAAI;EACJ,IAAI,OAAO,IAAI;EACf,EAAE,CAAC;;EAEH,EAAE,MAAM,UAAU,GAAG,GAAG,GAAG,cAAc,CAAC;EAC1C,EAAE,MAAM,SAAS,GAAG,QAAQ,GAAG,UAAU;EACzC,EAAE,IAAI,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;;EAEvC,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;EACvC;EACA,IAAI,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,UAAU,EAAE,UAAU,EAAE;;EAEhD,IAAI,cAAc,GAAG,WAAW,CAAC,cAAc,EAAE,cAAc,CAAC;;EAEhE;EACA,IAAI,MAAM,QAAQ,GAAG,CAAC,GAAG,UAAU;;EAEnC;EACA,IAAI,IAAI,YAAY;EACpB,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;EAC7B,MAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;EACrC;EACA,QAAQ,YAAY,GAAG,KAAK;EAC5B,MAAM,CAAC,MAAM,IAAI,KAAK,CAAC,IAAI,KAAK,SAAS,IAAI,KAAK,CAAC,EAAE,KAAK,SAAS,EAAE;EACrE;EACA,QAAQ,YAAY,GAAG,KAAK,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,IAAI,QAAQ;EACtE,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,IAAI,YAAY,GAAG;EACvB,MAAM,OAAO,EAAE,cAAc;EAC7B,MAAM,QAAQ,EAAE,SAAS;EACzB,MAAM,SAAS,EAAE,IAAI;EACrB,MAAM,MAAM,EAAE,CAAC,IAAI;EACnB,KAAK;;EAEL;EACA,IAAI,IAAI,YAAY,KAAK,SAAS,EAAE;EACpC,MAAM,YAAY,CAAC,KAAK,GAAG,YAAY;EACvC,IAAI;;EAEJ;EACA,IAAI,IAAI,MAAM,EAAE;EAChB,MAAM,MAAM,UAAU,GAAG,MAAM,CAAC,cAAc,EAAE,QAAQ,CAAC;EACzD;EACA,MAAM,IAAI,UAAU,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE;EACxD,QAAQ,YAAY,GAAG,EAAE,GAAG,YAAY,EAAE,GAAG,UAAU,EAAE;EACzD,MAAM;EACN,IAAI;;EAEJ,IAAI,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC;EAC5B,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,EAAE;;EAEF,EAAE,IAAI,UAAU,EAAE,UAAU,EAAE;EAC9B,CAAC;;EAED;EACA,MAAM,iBAAiB,GAAG,IAAI,OAAO,EAAE;;EAEhC,MAAM,iBAAiB,CAAC;EAC/B,EAAE,WAAW,CAAC,GAAG,EAAE;EACnB,IAAI,IAAI,CAAC,GAAG,GAAG,GAAG;EAClB,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,mBAAmB,EAAE;EAClD,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,mBAAmB,CAAC,WAAW,GAAG,KAAK,EAAE;EAC3C;EACA,IAAI,IAAI,CAAC,WAAW,IAAI,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;EACzD,MAAM,OAAO,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;EAC5C,IAAI;;EAEJ,IAAI,MAAM,IAAI,GAAG;EACjB;EACA,MAAM,UAAU,EAAE,KAAK;EACvB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,cAAc,EAAE,KAAK;EAC3B,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,eAAe,EAAE,KAAK;;EAE5B;EACA,MAAM,QAAQ,EAAE,KAAK;EACrB,MAAM,WAAW,EAAE,KAAK;EACxB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,QAAQ,EAAE,KAAK;;EAErB;EACA,MAAM,SAAS,EAAE,KAAK;EACtB,MAAM,UAAU,EAAE,KAAK;;EAEvB;EACA,MAAM,SAAS,EAAE,KAAK;EACtB,MAAM,UAAU,EAAE,KAAK;;EAEvB;EACA,MAAM,MAAM,EAAE,IAAI;EAClB,MAAM,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;EAClC,MAAM,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;EAC9B,MAAM,WAAW,EAAE,EAAE;EACrB;EACA,MAAM,KAAK,EAAE,IAAI;;EAEjB;EACA,MAAM,aAAa,EAAE;EACrB,QAAQ,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE;EACpD,QAAQ,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE;EACvD,QAAQ,SAAS,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI;EACtD;EACA,KAAK;;EAEL;EACA,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;EACrC,IAAI,MAAM,OAAO,GAAG,KAAK,EAAE,OAAO,IAAI,EAAE;;EAExC;EACA,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,MAAM,IAAI;EAC7C,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,YAAY,EAAE;EACxC,QAAQ,IAAI,CAAC,UAAU,GAAG,IAAI;EAC9B,MAAM;;EAEN;EACA,MAAM,IAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE;EAC/D,QAAQ,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,OAAO;EACzC,MAAM;EACN,IAAI,CAAC,CAAC;;EAEN;EACA,IAAI,IAAI,KAAK,EAAE,MAAM,EAAE;EACvB,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI;EAC3B,IAAI;;EAEJ;EACA,IAAI,IAAI,KAAK,EAAE,MAAM,EAAE;EACvB,MAAM,IAAI,CAAC,UAAU,GAAG,IAAI;EAC5B,IAAI;;EAEJ;EACA,IAAI,MAAM,YAAY,GAAG,IAAI,GAAG,EAAE;EAClC,IAAI,MAAM,MAAM,GAAG,KAAK,EAAE,MAAM,IAAI,EAAE;;EAEtC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI;EAC5B,MAAM,MAAM,OAAO,GAAG,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE;EAC5C,MAAM,MAAM,WAAW,GAAG,KAAK,CAAC,cAAc,CAAC;;EAE/C;EACA,MAAM,IAAI,WAAW,EAAE;EACvB,QAAQ,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;EACnD,MAAM;;EAEN;EACA,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;EACtE,QAAQ,IAAI,CAAC,YAAY,GAAG,IAAI;EAChC,MAAM;EACN,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,gBAAgB,EAAE;EAC3E,QAAQ,IAAI,CAAC,cAAc,GAAG,IAAI;EAClC,MAAM;EACN,MAAM,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;EACnC,QAAQ,IAAI,CAAC,eAAe,GAAG,IAAI;EACnC,MAAM;EACN,MAAM,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;EACrE,QAAQ,IAAI,CAAC,eAAe,GAAG,IAAI;EACnC,MAAM;EACN,IAAI,CAAC,CAAC;;EAEN;EACA;EACA;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;EAErE;EACA;EACA;EACA,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;EACxE,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI;EAC1B,MAAM,IAAI,CAAC,WAAW,GAAG,IAAI;;EAE7B;EACA,MAAM,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;EAClC,QAAQ,MAAM,WAAW,GAAG,KAAK,CAAC,cAAc,CAAC;EACjD,QAAQ,IAAI,WAAW,KAAK,gBAAgB,IAAI,WAAW,KAAK,MAAM,EAAE;EACxE,UAAU,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAM;EACvC,UAAU,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;EAC1C,UAAU,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;EAClD;EACA,YAAY,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ;EACxD,YAAY,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,GAAG,WAAW;EAC9D,YAAY,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ;EAC3D,YAAY,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,GAAG,WAAW;EACjE,YAAY;EACZ,UAAU;EACV,QAAQ;EACR,MAAM;EACN,IAAI;;EAEJ;EACA;EACA,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;EACtC,MAAM,IAAI,CAAC,YAAY,GAAG,IAAI;;EAE9B;EACA,MAAM,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;EAClC,QAAQ,MAAM,WAAW,GAAG,KAAK,CAAC,cAAc,CAAC;EACjD,QAAQ,IAAI,WAAW,KAAK,UAAU,EAAE;EACxC,UAAU,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAM;EACvC,UAAU,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;EAC1C,UAAU,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;EAClD,YAAY,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,GAAG,QAAQ;EAC5D,YAAY,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,GAAG,WAAW;EAClE,YAAY;EACZ,UAAU;EACV,QAAQ;EACR,MAAM;EACN,IAAI;;EAEJ;EACA;EACA,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;EACnC,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI;EAC1B,IAAI;;EAEJ;EACA;EACA;EACA,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;EACtE,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI;EAC3B,IAAI;;EAEJ;EACA;EACA;EACA,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;EACtE,MAAM,IAAI,CAAC,UAAU,GAAG,IAAI;EAC5B,IAAI;;EAEJ;EACA;EACA,IAAI,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;;EAItC;EACA,IAAI,IAAI;EACR,MAAM,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;EACxC,IAAI,CAAC,CAAC,OAAO,CAAC,EAAE;EAChB;EACA,IAAI;;EAEJ;EACA,IAAI,MAAM,QAAQ,GAAG,KAAK,EAAE,MAAM,IAAI,EAAE;EACxC,IAAI,IAAI,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;EACvE,MAAM,IAAI,CAAC,KAAK,GAAG,WAAW;EAC9B,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;EAC9E,MAAM,IAAI,CAAC,KAAK,GAAG,UAAU;EAC7B,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;EAC1C,MAAM,IAAI,CAAC,KAAK,GAAG,MAAM;EACzB,IAAI,CAAC,MAAM;EACX,MAAM,IAAI,CAAC,KAAK,GAAG,UAAU;EAC7B,IAAI;;EAEJ,IAAI,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAAC;;EAElD;EACA,IAAI,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC;;EAEzC,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,aAAa,uBAAuB,CAAC,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,YAAY,EAAE;EAChF,IAAI,IAAI;EACR;EACA,MAAM,MAAM,OAAO,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG;EAC/C,MAAM,MAAM,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACvE,MAAM,MAAM,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;;EAEvE;EACA;EACA,MAAM,MAAM,MAAM,GAAG,YAAY,GAAG,GAAG,CAAC;;EAExC,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,MAAM;EAC/D,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,MAAM;EAC/D,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,MAAM;EAC/D,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,MAAM;;EAE/D;EACA;EACA,MAAM,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,EAAE;EAC3D,QAAQ,MAAM,EAAE,IAAI;EACpB,QAAQ,OAAO,EAAE,CAAC;EAClB,QAAQ,QAAQ,EAAE,CAAC;EACnB,OAAO,CAAC;;EAER;EACA;EACA,MAAM,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;;EAE5D,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,wCAAwC,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxJ,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;EACpB,MAAM,OAAO,CAAC,KAAK,CAAC,4CAA4C,EAAE,KAAK,CAAC;EACxE,IAAI;EACJ,EAAE;;EAEF;EACA;EACA;EACA,EAAE,MAAM,sBAAsB,GAAG;EACjC,IAAI,MAAM,MAAM,GAAG,EAAE;EACrB,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;;EAEvC,IAAI,IAAI,CAAC,MAAM,EAAE,OAAO,MAAM;;EAE9B,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,EAAE;;EAErC;EACA,IAAI,MAAM,CAAC,IAAI;EACf,MAAM,MAAM;EACZ,MAAM,EAAE;EACR,MAAM,EAAE;EACR,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC;EACtB,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG;EACrB,KAAK;;EAEL;EACA,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;EACtC;EACA,MAAM,MAAM,OAAO,GAAG,CAAC;EACvB,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,EAAE,CAAC,EAAE,EAAE;EACxC,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,EAAE,CAAC,EAAE,EAAE;EAC1C,UAAU,MAAM,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC;EAChE,UAAU,MAAM,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC;EAChE,UAAU,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;EACjC,QAAQ;EACR,MAAM;EACN,IAAI;;EAEJ,IAAI,OAAO,MAAM;EACjB,EAAE;;EAEF;EACA;EACA;EACA,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,GAAG,EAAE,EAAE;EACjD,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;;EAE9C;EACA,IAAI,OAAO;EACX,MAAM,KAAK,EAAE,IAAI;EACjB,MAAM,SAAS,EAAE,OAAO,GAAG,EAAE,OAAO,KAAK;EACzC,QAAQ,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EACpD,QAAQ,OAAO,CAAC,GAAG,CAAC,oCAAoC,EAAE,QAAQ,EAAE,IAAI,CAAC;;EAEzE,QAAQ,MAAM,UAAU,GAAG,EAAE;;EAE7B;EACA,QAAQ,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;;EAElD;EACA,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;EAC1C,UAAU,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC;EACxD,QAAQ;;EAER,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE;EAC9C,UAAU,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE,CAAC;EAC3D,QAAQ;;EAER;EACA,QAAQ,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,0BAA0B,EAAE,CAAC;;EAE1D;EACA,QAAQ,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE,CAAC;;EAExD;EACA,QAAQ,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;;EAElD;EACA,QAAQ,MAAM,gBAAgB,GAAG,QAAQ,GAAG,UAAU,CAAC,MAAM;;EAE7D,QAAQ,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;EAC5C,UAAU,MAAM,SAAS,CAAC,OAAO,EAAE,gBAAgB,CAAC;EACpD,UAAU,UAAU,EAAE,CAAC;EACvB,QAAQ;;EAER,QAAQ,YAAY,CAAC,uBAAuB,CAAC;EAC7C,MAAM;EACN,KAAK;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,kBAAkB,GAAG;EACvB,IAAI,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK;EACxC,MAAM,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EAClD,MAAM,YAAY,CAAC,oBAAoB,CAAC;;EAExC,MAAM,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;EAC5C,MAAM,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,EAAE,CAAC,CAAC;;EAEvD;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,IAAI,EAAE,YAAY;EAC1B,QAAQ,KAAK,EAAE,CAAC;EAChB,QAAQ,OAAO,EAAE,CAAC;EAClB,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,IAAI,EAAE,WAAW,GAAG,CAAC;EAC7B,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;EAClB,IAAI,CAAC;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,sBAAsB,GAAG;EAC3B,IAAI,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK;EACxC,MAAM,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EAClD,MAAM,YAAY,CAAC,uBAAuB,CAAC;;EAE3C;EACA,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE;EAClC,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,OAAO,IAAI,EAAE;EAC1D,QAAQ,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;EACzD,UAAU,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK;EAC9B,SAAS;;EAET,QAAQ,IAAI,aAAa,EAAE;EAC3B,UAAU,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;EAC9B,YAAY,MAAM,EAAE,aAAa;EACjC,YAAY,YAAY,EAAE;EAC1B,WAAW,CAAC;EACZ,UAAU,MAAM,KAAK,CAAC,GAAG,CAAC;EAC1B,UAAU,UAAU,EAAE;EACtB,QAAQ;EACR,MAAM;;EAEN;EACA,MAAM,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,sBAAsB,EAAE;;EAExD,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE;EAC3D,QAAQ,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;EACvB,UAAU,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;EAC3B,UAAU,IAAI,EAAE,EAAE;EAClB,UAAU,KAAK,EAAE,EAAE;EACnB,UAAU,OAAO,EAAE,CAAC,GAAG,GAAG;EAC1B,UAAU,QAAQ,EAAE,QAAQ,GAAG,CAAC;EAChC,UAAU,SAAS,EAAE;EACrB,SAAS,CAAC;EACV,QAAQ,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACtC,QAAQ,UAAU,EAAE;EACpB,MAAM;EACN,IAAI,CAAC;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,yBAAyB,GAAG;EAC9B,IAAI,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK;EACxC,MAAM,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EAClD,MAAM,YAAY,CAAC,uBAAuB,CAAC;;EAE3C;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,KAAK,EAAE,EAAE;EACjB,QAAQ,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC;EACpC,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,GAAG;EAC5C,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;EAClB,IAAI,CAAC;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,0BAA0B,GAAG;EAC/B,IAAI,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK;EACxC,MAAM,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EAClD,MAAM,YAAY,CAAC,sBAAsB,CAAC;;EAE1C,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;EACzC,MAAM,IAAI,CAAC,MAAM,EAAE;EACnB,QAAQ,MAAM,KAAK,CAAC,QAAQ,CAAC;EAC7B,QAAQ;EACR,MAAM;;EAEN,MAAM,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACtC,MAAM,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACtC,MAAM,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,EAAE;;EAEvC;EACA,MAAM,MAAM,IAAI,GAAG;EACnB,QAAQ,MAAM;EACd,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC;EAClE,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC;EAClE,QAAQ;EACR,OAAO;;EAEP,MAAM,MAAM,YAAY,GAAG,QAAQ,GAAG,IAAI,CAAC,MAAM;;EAEjD,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EAC5C,QAAQ,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;EACvB,UAAU,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;EACzB,UAAU,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC;EACzD,UAAU,OAAO,EAAE,CAAC,GAAG,EAAE;EACzB,UAAU,KAAK,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;EAC9B,UAAU,QAAQ,EAAE,YAAY;EAChC,UAAU,SAAS,EAAE;EACrB,SAAS,CAAC;EACV,QAAQ,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACtC,QAAQ,UAAU,EAAE;EACpB,MAAM;EACN,IAAI,CAAC;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,wBAAwB,GAAG;EAC7B,IAAI,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK;EACxC,MAAM,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EAClD,MAAM,YAAY,CAAC,sBAAsB,CAAC;;EAE1C;EACA,MAAM,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;;EAEhD,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,OAAO,EAAE,YAAY,GAAG,GAAG;EACnC,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;EAChC,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,KAAK,EAAE,EAAE;EACjB,QAAQ,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC;EACpC,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;;EAElB,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,KAAK,EAAE,CAAC;EAChB,QAAQ,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC;EACpC,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;EAClB,IAAI,CAAC;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,kBAAkB,GAAG;EACvB,IAAI,OAAO,OAAO,OAAO,EAAE,QAAQ,KAAK;EACxC,MAAM,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,OAAO;EAClD,MAAM,YAAY,CAAC,oBAAoB,CAAC;;EAExC,MAAM,MAAM,YAAY,GAAG;EAC3B,QAAQ,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM;EACxC,QAAQ,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI;EACpC,QAAQ,OAAO,EAAE,CAAC;EAClB,QAAQ,KAAK,EAAE;EACf,OAAO;;EAEP;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;EACrB,QAAQ,GAAG,YAAY;EACvB,QAAQ,IAAI,EAAE,YAAY,CAAC,IAAI,GAAG,CAAC;EACnC,QAAQ,KAAK,EAAE,EAAE;EACjB,QAAQ,OAAO,EAAE,GAAG;EACpB,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;EACtB,QAAQ,GAAG,YAAY;EACvB,QAAQ,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAChC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACpC,MAAM,UAAU,EAAE;EAClB,IAAI,CAAC;EACL,EAAE;EACF;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,SAAS,oBAAoB,CAAC,GAAG,EAAE,WAAW,GAAG,KAAK,EAAE;EACxD,EAAE,IAAI;EACN,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE;EAChC,IAAI,IAAI,CAAC,KAAK,EAAE;EAChB,MAAM,OAAO,CAAC,IAAI,CAAC,4BAA4B,CAAC;EAChD,MAAM,OAAO,IAAI;EACjB,IAAI;;EAEJ;EACA,IAAI,IAAI,IAAI,GAAG,WAAW,GAAG,IAAI,GAAG,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC;EAC9D,IAAI,IAAI,CAAC,IAAI,EAAE;EACf;EACA,MAAM,MAAM,QAAQ,GAAG,IAAI,iBAAiB,CAAC,GAAG,CAAC;EACjD,MAAM,IAAI,WAAW,EAAE;EACvB,QAAQ,IAAI,GAAG,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC;EACjD,MAAM,CAAC,MAAM;EACb,QAAQ,IAAI,GAAG,QAAQ,CAAC,YAAY;EACpC,MAAM;EACN,IAAI;;EAEJ,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,IAAI,EAAE;;EAEvC;EACA,IAAI,MAAM,aAAa,GAAG,IAAI,GAAG,EAAE;EACnC,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,IAAI,IAAI;EACtD,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;EACzD,IAAI,CAAC,CAAC;;EAEN,IAAI,IAAI,aAAa,CAAC,IAAI,KAAK,CAAC,EAAE;EAClC,MAAM,OAAO,CAAC,IAAI,CAAC,kEAAkE,CAAC;EACtF,MAAM,OAAO,CAAC,IAAI,CAAC,sCAAsC,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG;EAC7E,QAAQ,CAAC,KAAK,CAAC,MAAM,IAAI,EAAE;EAC3B,WAAW,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC;EACxC,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC;EACrC,OAAO,CAAC,CAAC;EACT,MAAM,OAAO,IAAI;EACjB,IAAI;;EAEJ;EACA,IAAI,MAAM,cAAc,GAAG,EAAE;EAC7B,IAAI,aAAa,CAAC,OAAO,CAAC,QAAQ,IAAI;EACtC,MAAM,MAAM,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC;EAC5C,MAAM,IAAI,YAAY,IAAI,YAAY,CAAC,IAAI,KAAK,QAAQ,EAAE;EAC1D,QAAQ,cAAc,CAAC,QAAQ,CAAC,GAAG;EACnC,UAAU,IAAI,EAAE,YAAY,CAAC,IAAI;EACjC,UAAU,IAAI,YAAY,CAAC,KAAK,IAAI,EAAE,KAAK,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC;EAClE,UAAU,IAAI,YAAY,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,YAAY,CAAC,GAAG,EAAE,CAAC;EAC5D,UAAU,IAAI,YAAY,CAAC,OAAO,KAAK,SAAS,IAAI,EAAE,OAAO,EAAE,YAAY,CAAC,OAAO,EAAE,CAAC;EACtF,UAAU,IAAI,YAAY,CAAC,OAAO,KAAK,SAAS,IAAI,EAAE,OAAO,EAAE,YAAY,CAAC,OAAO,EAAE,CAAC;EACtF,UAAU,IAAI,YAAY,CAAC,WAAW,IAAI,EAAE,WAAW,EAAE,YAAY,CAAC,WAAW,EAAE,CAAC;EACpF,UAAU,IAAI,YAAY,CAAC,MAAM,IAAI,EAAE,MAAM,EAAE,YAAY,CAAC,MAAM,EAAE;EACpE,SAAS;EACT,MAAM;EACN,IAAI,CAAC,CAAC;;EAEN,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,uCAAuC,EAAE,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;EAC9I,IAAI,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE;EACnD,MAAM,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,IAAI,MAAM;EAC3D,MAAM,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,IAAI,MAAM;EACjE,MAAM,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,IAAI;EAC7D,KAAK,CAAC;;EAEN;EACA;EACA,IAAI,MAAM,aAAa,GAAG,EAAE;;EAE5B;EACA;EACA,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE;EACnF,MAAM,aAAa,CAAC,IAAI,CAAC;EACzB,QAAQ,EAAE,EAAE,cAAc;EAC1B,QAAQ,IAAI,EAAE,MAAM;EACpB,QAAQ,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ;EACjD,QAAQ,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;EAC5D,QAAQ,KAAK,EAAE;EACf,UAAU,cAAc,EAAE,CAAC;EAC3B,UAAU,YAAY,EAAE;EACxB;EACA,OAAO,CAAC;EACR,IAAI;;EAEJ;EACA,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,EAAE;EACzF,MAAM,aAAa,CAAC,IAAI,CAAC;EACzB,QAAQ,EAAE,EAAE,iBAAiB;EAC7B,QAAQ,IAAI,EAAE,MAAM;EACpB,QAAQ,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ;EACpD,QAAQ,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW;EAC/D,QAAQ,KAAK,EAAE;EACf,UAAU,cAAc,EAAE,CAAC;EAC3B,UAAU,YAAY,EAAE;EACxB;EACA,OAAO,CAAC;EACR,IAAI;;EAEJ;EACA,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,EAAE;EAC3F,MAAM,aAAa,CAAC,IAAI,CAAC;EACzB,QAAQ,EAAE,EAAE,kBAAkB;EAC9B,QAAQ,IAAI,EAAE,MAAM;EACpB,QAAQ,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ;EACrD,QAAQ,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW;EAChE,QAAQ,KAAK,EAAE;EACf,UAAU,cAAc,EAAE,CAAC;EAC3B,UAAU,YAAY,EAAE;EACxB;EACA,OAAO,CAAC;EACR,IAAI;;EAEJ,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,aAAa,CAAC,MAAM,CAAC,4CAA4C,CAAC,CAAC;;EAE1G,IAAI,MAAM,YAAY,GAAG;EACzB,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,OAAO,EAAE,cAAc;EAC7B,MAAM,MAAM,EAAE,aAAa;EAC3B,MAAM,MAAM,EAAE,KAAK,CAAC,MAAM;EAC1B,MAAM,MAAM,EAAE,KAAK,CAAC,MAAM;EAC1B,MAAM,EAAE,EAAE,KAAK,CAAC,EAAE,IAAI;EACtB,KAAK;;EAEL,IAAI,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,YAAY,CAAC;;EAEhE,IAAI,OAAO;EACX,MAAM,aAAa,EAAE,IAAI,CAAC,aAAa;EACvC,MAAM,KAAK,EAAE;EACb,KAAK;EACL,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;EAClB,IAAI,OAAO,CAAC,KAAK,CAAC,8CAA8C,EAAE,KAAK,CAAC;EACxE,IAAI,OAAO,IAAI;EACf,EAAE;EACF;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,SAAS,mCAAmC,CAAC,SAAS,EAAE,cAAc,EAAE,cAAc,EAAE,MAAM,EAAE,OAAO,GAAG,EAAE,EAAE;EAC9G,EAAE,MAAM,EAAE,MAAM,GAAG,IAAI,EAAE,YAAY,GAAG,KAAK,EAAE,GAAG,OAAO;EACzD,EAAE,MAAM,gBAAgB,GAAG,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE;;EAEpF,EAAE,OAAO,CAAC,GAAG,CAAC,+DAA+D;EAC7E,SAAS,gBAAgB,CAAC,MAAM,GAAG,CAAC,UAAU,EAAE,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;;EAErF;EACA,EAAE,MAAM,gBAAgB,GAAG,qBAAqB,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC;;EAElE;EACA;EACA,EAAE,MAAM,cAAc,GAAG,YAAY,GAAG,GAAG;;EAE3C,EAAE,IAAI,QAAQ,GAAG,IAAI;EACrB,EAAE,IAAI,SAAS,GAAG,QAAQ;;EAE1B,EAAE,KAAK,MAAM,SAAS,IAAI,gBAAgB,EAAE;EAC5C;EACA,IAAI,MAAM,OAAO,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG;EAC/C,IAAI,MAAM,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACrE,IAAI,MAAM,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;;EAErE;EACA,IAAI,KAAK,MAAM,IAAI,IAAI,MAAM,EAAE;EAC/B,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EACxD,MAAM,IAAI,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;;EAEvC,MAAM,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;EACpD,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;;EAErF;EACA;EACA,MAAM,MAAM,mBAAmB,GAAG,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;EAC3G,MAAM,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;EACrG,MAAM,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,mBAAmB,EAAE,iBAAiB,CAAC;;EAEzE;EACA,MAAM,MAAM,SAAS,GAAG,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;EAC3F,MAAM,MAAM,OAAO,GAAG,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;EACrF,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC;;EAElD,MAAM,IAAI,OAAO,GAAG,cAAc,EAAE,SAAS;;EAE7C;EACA,MAAM,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,SAAS,GAAG,cAAc,CAAC,CAAC;;EAEpF;EACA,MAAM,IAAI,KAAK,GAAG,OAAO,GAAG,CAAC,WAAW,GAAG,GAAG,IAAI,KAAK;;EAEvD;EACA,MAAM,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,EAAE,KAAK,IAAI,SAAS;EAC3D,MAAM,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,gBAAgB,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;EAC/E,QAAQ,KAAK,IAAI,GAAG,CAAC;EACrB,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,iCAAiC,EAAE,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,iBAAiB,CAAC,CAAC;EACrG,MAAM;;EAEN,MAAM,IAAI,KAAK,GAAG,SAAS,EAAE;EAC7B,QAAQ,SAAS,GAAG,KAAK;EACzB,QAAQ,MAAM,aAAa,GAAG,iBAAiB,GAAG,mBAAmB;EACrE,QAAQ,QAAQ,GAAG;EACnB,UAAU,IAAI;EACd,UAAU,MAAM,EAAE,aAAa,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW;EACtG,UAAU,QAAQ,EAAE,aAAa;EACjC,UAAU,QAAQ,EAAE,UAAU;EAC9B,UAAU,SAAS;EACnB,UAAU;EACV,SAAS;EACT,MAAM;EACN,IAAI;EACJ,EAAE;;EAEF;EACA;EACA;EACA,EAAE,MAAM,iBAAiB,GAAG,KAAK,CAAC;EAClC,EAAE,IAAI,QAAQ,IAAI,QAAQ,CAAC,QAAQ,GAAG,iBAAiB,EAAE;EACzD,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,wCAAwC,EAAE,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,wCAAwC,CAAC,CAAC;EAC3I,IAAI,QAAQ,GAAG,IAAI;EACnB,EAAE;;EAEF,EAAE,IAAI,QAAQ,EAAE;EAChB,IAAI,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,IAAI,SAAS;EAClE,IAAI,MAAM,WAAW,GAAG,gBAAgB,CAAC,QAAQ,CAAC,SAAS,CAAC;EAC5D;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,sBAAsB,EAAE,WAAW,GAAG,cAAc,GAAG,EAAE,CAAC,EAAE,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC;EACnH,YAAY,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7G,EAAE,CAAC,MAAM;EACT;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,mCAAmC,EAAE,CAAC,cAAc,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC;EAC7G,EAAE;;EAEF,EAAE,OAAO,QAAQ;EACjB;;EAEA;EACA;EACA;EACO,MAAM,gBAAgB,GAAG;EAChC;EACA;EACA;EACA,EAAE,QAAQ,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACvE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI;;EAE/C;EACA,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,MAAM,WAAW,GAAG,0BAA0B,CAAC,GAAG,EAAE,SAAS,CAAC;EACpE,MAAM,IAAI,WAAW,EAAE;EACvB,QAAQ,YAAY,CAAC,yCAAyC,CAAC;EAC/D,QAAQ,GAAG,CAAC,MAAM,CAAC;EACnB,UAAU,MAAM,EAAE,WAAW,CAAC,MAAM;EACpC,UAAU,IAAI,EAAE,WAAW,CAAC;EAC5B,SAAS,CAAC;EACV,QAAQ,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;EACzB,MAAM;EACN,IAAI;;EAEJ,IAAI,YAAY,CAAC,kBAAkB,CAAC;EACpC,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,UAAU,EAAE;;EAEzC,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,OAAO,EAAE,YAAY,GAAG,GAAG;EACjC,MAAM,QAAQ;EACd,MAAM,SAAS,EAAE,IAAI;EACrB,MAAM,MAAM,EAAE,CAAC,IAAI,CAAC;EACpB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACxE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI;EAC7C,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI;;EAE/C;EACA,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,MAAM,WAAW,GAAG,0BAA0B,CAAC,GAAG,EAAE,SAAS,CAAC;EACpE,MAAM,IAAI,WAAW,EAAE;EACvB,QAAQ,YAAY,CAAC,yCAAyC,CAAC;EAC/D,QAAQ,GAAG,CAAC,MAAM,CAAC;EACnB,UAAU,MAAM,EAAE,WAAW,CAAC,MAAM;EACpC,UAAU,IAAI,EAAE,WAAW,CAAC;EAC5B,SAAS,CAAC;EACV,QAAQ,MAAM,KAAK,CAAC,GAAG,CAAC;EACxB,MAAM;EACN,IAAI;;EAEJ,IAAI,YAAY,CAAC,kBAAkB,CAAC;EACpC,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,OAAO,EAAE;;EAEnC,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,IAAI,EAAE,SAAS,GAAG,CAAC;EACzB,MAAM,QAAQ,EAAE,QAAQ,GAAG,CAAC;EAC5B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,IAAI,EAAE,SAAS;EACrB,MAAM,QAAQ,EAAE,QAAQ,GAAG,CAAC;EAC5B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACtE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI;;EAE/C;EACA,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,MAAM,WAAW,GAAG,0BAA0B,CAAC,GAAG,EAAE,SAAS,CAAC;EACpE,MAAM,IAAI,WAAW,EAAE;EACvB,QAAQ,YAAY,CAAC,wCAAwC,CAAC;EAC9D,QAAQ,GAAG,CAAC,MAAM,CAAC;EACnB,UAAU,MAAM,EAAE,WAAW,CAAC,MAAM;EACpC,UAAU,IAAI,EAAE,WAAW,CAAC;EAC5B,SAAS,CAAC;EACV,QAAQ,MAAM,KAAK,CAAC,GAAG,CAAC;EACxB,MAAM;EACN,IAAI;;EAEJ,IAAI,YAAY,CAAC,uBAAuB,CAAC;EACzC,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EAClC,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;;EAElC,IAAI,IAAI,CAAC,MAAM,EAAE;;EAEjB,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;EACjC,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;;EAElC,IAAI,MAAM,MAAM,GAAG;EACnB,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,GAAG,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;EAC5C,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,GAAG,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,MAAM,GAAG,GAAG,CAAC;EAC3D,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;EAC9B,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,GAAG,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,MAAM,GAAG,GAAG,CAAC;EAC3D,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,GAAG,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;EAC5C,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG;EAC7B,KAAK;;EAEL,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;EAChC,MAAM,GAAG,CAAC,KAAK,CAAC;EAChB,QAAQ,MAAM,EAAE,KAAK;EACrB,QAAQ,QAAQ,EAAE,QAAQ,GAAG,MAAM,CAAC,MAAM;EAC1C,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;EAClB,IAAI;EACJ,EAAE,CAAC;;EAEH;EACA;EACA;EACA,EAAE,UAAU,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACzE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;;EAE9C,IAAI,YAAY,CAAC,mBAAmB,CAAC;EACrC,IAAI,MAAM,KAAK,GAAG,CAAC;EACnB,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,OAAO,EAAE;;EAEnC,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;EACpC,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE,GAAG,EAAE;EACtC,QAAQ,IAAI,EAAE,SAAS,GAAG,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC;EACzC,QAAQ,KAAK,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE;EAC/B,QAAQ,QAAQ,EAAE,QAAQ,GAAG,KAAK;EAClC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;EAClB,IAAI;;EAEJ;EACA,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,IAAI,EAAE,SAAS;EACrB,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,KAAK,EAAE,CAAC;EACd,MAAM,QAAQ,EAAE,QAAQ,GAAG,CAAC;EAC5B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,YAAY,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC3E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;;EAE9C,IAAI,YAAY,CAAC,+BAA+B,CAAC;EACjD,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EAClC,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,OAAO,EAAE;EACnC,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,UAAU,EAAE;EACzC,IAAI,MAAM,UAAU,GAAG,GAAG,CAAC,QAAQ,EAAE;;EAErC;EACA,IAAI,YAAY,CAAC,6BAA6B,CAAC;EAC/C,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,MAAM;EACZ,MAAM,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE,CAAC;EACvC,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,KAAK,EAAE,CAAC;EACd,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,8BAA8B,CAAC;EAChD,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,MAAM;EACZ,MAAM,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,CAAC;EACnC,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,6BAA6B,CAAC;EAC/C,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,OAAO,EAAE,GAAG;EAClB,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE,IAAI;EACrB,MAAM,MAAM,EAAE,CAAC,IAAI,CAAC;EACpB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,6BAA6B,CAAC;EAC/C,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE,CAAC;EACvC,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,OAAO,EAAE,GAAG;EAClB,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,6BAA6B,CAAC;EAC/C,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,MAAM;EACZ,MAAM,IAAI,EAAE,SAAS;EACrB,MAAM,OAAO,EAAE,YAAY;EAC3B,MAAM,KAAK,EAAE,UAAU;EACvB,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA,EAAE,gBAAgB,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC/E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;;EAE9C,IAAI,YAAY,CAAC,yBAAyB,CAAC;EAC3C,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EAClC,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,OAAO,EAAE;;EAEnC;EACA,IAAI,YAAY,CAAC,oBAAoB,CAAC;EACtC,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,MAAM;EACZ,MAAM,IAAI,EAAE,SAAS,GAAG,CAAC;EACzB,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAC9B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,4BAA4B,CAAC;EAC9C,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE,CAAC;EACvC,MAAM,OAAO,EAAE,GAAG;EAClB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,QAAQ,EAAE,QAAQ,GAAG,GAAG;EAC9B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,+BAA+B,CAAC;EACjD,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;EACpC,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;EAChC,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,OAAO,EAAE,KAAK;EACtB,QAAQ,QAAQ,EAAE,QAAQ,GAAG,IAAI;EACjC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;EAClB,IAAI;;EAEJ;EACA,IAAI,YAAY,CAAC,kBAAkB,CAAC;EACpC,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,IAAI,EAAE,SAAS;EACrB,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA,EAAE,QAAQ,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACvE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,sBAAsB,CAAC;EACxC,IAAI,MAAM,UAAU,GAAG,GAAG,CAAC,QAAQ,EAAE;;EAErC;EACA,IAAI,YAAY,CAAC,yBAAyB,CAAC;EAC3C;EACA,IAAI,MAAM,iBAAiB,CAAC,GAAG,EAAE,QAAQ,EAAE;EAC3C,MAAM,UAAU;EAChB,MACM,MAAM,EAAE,CAAC,cAAc,EAAE,QAAQ,KAAK;EAC5C;EACA;EACA,QAAQ,MAAM,UAAU,GAAG,QAAQ,GAAG;EACtC,YAAY,UAAU,GAAG,CAAC,EAAE,GAAG,UAAU,KAAK,QAAQ,GAAG,CAAC,CAAC;EAC3D,YAAY,EAAE,GAAG,CAAC,EAAE,GAAG,UAAU,KAAK,CAAC,QAAQ,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC;;EAE5D,QAAQ,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE;EACpC,MAAM;EACN,KAAK,CAAC;EACN,EAAE,CAAC;;EAEH;EACA;EACA;EACA,EAAE,aAAa,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC5E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,8BAA8B,CAAC;EAChD,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EAClC,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;;EAElC,IAAI,IAAI,CAAC,MAAM,EAAE;;EAEjB,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,SAAS,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,IAAI;EAC9C,IAAI,MAAM,SAAS,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,IAAI;;EAE9C;EACA,IAAI,MAAM,MAAM,GAAG;EACnB,MAAM,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE;EAClE,MAAM,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE;EACjE,MAAM,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE;EAClE,MAAM,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,MAAM;EAC/D,KAAK;;EAEL,IAAI,MAAM,YAAY,GAAG,QAAQ,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;;EAEvD;EACA,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;EAChC,MAAM,YAAY,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;EAClD,MAAM,GAAG,CAAC,KAAK,CAAC;EAChB,QAAQ,MAAM,EAAE,KAAK,CAAC,GAAG;EACzB,QAAQ,QAAQ,EAAE,YAAY,GAAG,GAAG;EACpC,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;EAClB,MAAM,MAAM,KAAK,CAAC,YAAY,GAAG,GAAG,CAAC,CAAC;EACtC,MAAM,UAAU,EAAE;EAClB,IAAI;;EAEJ;EACA,IAAI,YAAY,CAAC,2BAA2B,CAAC;EAC7C,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,MAAM;EACZ,MAAM,QAAQ,EAAE,YAAY;EAC5B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA;EACA,EAAE,WAAW,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC1E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,oBAAoB,CAAC;;EAEtC;EACA,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,OAAO,EAAE;EACrC,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,QAAQ,EAAE;;EAEvC;EACA;EACA,IAAI,IAAI,eAAe,GAAG,CAAC,CAAC;;EAE5B,IAAI,IAAI,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,EAAE,EAAE;EAC5C;EACA;EACA,MAAM,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EACpC,MAAM,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EACpC,MAAM,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,EAAE,GAAG,MAAM,CAAC,QAAQ,EAAE;EAC3D,MAAM,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,OAAO,EAAE;;EAEzD;EACA,MAAM,MAAM,YAAY,GAAG;EAC3B,QAAQ,MAAM;EACd,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,GAAG,EAAE;EAC5D,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,GAAG,EAAE;EAC5D,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE;EAC5D,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE;EAC5D,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE;EAC9E,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE;EAC9E,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE;EAC9E,QAAQ,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,IAAI,EAAE;EAC9E,OAAO;;EAEP;EACA,MAAM,IAAI,YAAY,GAAG,CAAC;EAC1B,MAAM,KAAK,MAAM,KAAK,IAAI,YAAY,EAAE;EACxC,QAAQ,MAAM,SAAS,GAAG,GAAG,CAAC,qBAAqB,CAAC,KAAK,CAAC;EAC1D,QAAQ,IAAI,SAAS,KAAK,IAAI,IAAI,SAAS,GAAG,YAAY,EAAE;EAC5D,UAAU,YAAY,GAAG,SAAS;EAClC,QAAQ;EACR,MAAM;;EAEN,MAAM,IAAI,YAAY,GAAG,CAAC,EAAE;EAC5B;EACA;EACA;EACA,QAAQ,MAAM,WAAW,GAAG,YAAY,GAAG,IAAI;EAC/C,QAAQ,MAAM,YAAY,GAAG,GAAG,CAAC;EACjC,QAAQ,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC;EACpF,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,oCAAoC,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChI,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,YAAY,CAAC,cAAc,CAAC;EAChC,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,EAAE,eAAe,CAAC;EACnE,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,IAAI,EAAE,YAAY;EACxB,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,oBAAoB,CAAC;EACtC,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA;EACA,IAAI,YAAY,CAAC,qBAAqB,CAAC;EACvC;EACA,IAAI,MAAM,iBAAiB,CAAC,GAAG,EAAE,QAAQ,GAAG,IAAI,EAAE;EAClD,MAAM,UAAU;EAChB,MACM,KAAK,EAAE,EAAE;EACf,MAAM,MAAM,EAAE,CAAC,cAAc,EAAE,QAAQ,KAAK;EAC5C;EACA,QAAQ,IAAI,QAAQ,IAAI,IAAI,EAAE;EAC9B;EACA,UAAU,MAAM,eAAe,GAAG,CAAC,QAAQ,GAAG,IAAI,IAAI,IAAI;;EAE1D;EACA,UAAU,MAAM,WAAW,GAAG,YAAY,GAAG,CAAC,WAAW,GAAG,YAAY,IAAI,eAAe;;EAE3F;EACA,UAAU,MAAM,YAAY,GAAG,EAAE,GAAG,CAAC,YAAY,GAAG,EAAE,IAAI,eAAe;;EAEzE;EACA,UAAU,IAAI,eAAe,GAAG,GAAG,EAAE;EACrC,YAAY,YAAY,CAAC,yBAAyB,CAAC;EACnD,UAAU;;EAEV;EACA,UAAU,OAAO;EACjB,YAAY,IAAI,EAAE,WAAW;EAC7B,YAAY,KAAK,EAAE;EACnB,WAAW;EACX,QAAQ;EACR;EACA,MAAM;EACN,KAAK,CAAC;EACN,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACxE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,qBAAqB,CAAC;;EAEvC,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,OAAO,EAAE;EACrC,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,QAAQ,EAAE;EACvC,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;;EAE3C;EACA,IAAI,YAAY,CAAC,wBAAwB,CAAC;EAC1C,IAAI,MAAM,WAAW,GAAG,EAAE,CAAC;EAC3B,IAAI,MAAM,cAAc,GAAG,QAAQ,GAAG,IAAI;EAC1C,IAAI,MAAM,eAAe,GAAG,cAAc,GAAG,WAAW;EACxD,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,EAAE,CAAC,CAAC;;EAErD,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE;EAC1C,MAAM,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,UAAU,EAAE;;EAEpC,MAAM,MAAM,QAAQ,GAAG,CAAC,GAAG,WAAW;EACtC,MAAM,MAAM,WAAW,GAAG,WAAW,GAAG,CAAC,WAAW,GAAG,YAAY,IAAI,QAAQ;EAC/E,MAAM,MAAM,YAAY,GAAG,YAAY,GAAG,CAAC,EAAE,GAAG,YAAY,IAAI,QAAQ;EACxE,MAAM,MAAM,gBAAgB,GAAG,EAAE,GAAG,QAAQ;;EAE5C,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,IAAI,EAAE,WAAW;EACzB,QAAQ,KAAK,EAAE,YAAY;EAC3B,QAAQ,OAAO,EAAE,cAAc,GAAG,gBAAgB;EAClD,QAAQ,QAAQ,EAAE,eAAe;EACjC,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI;EACrB,OAAO,CAAC;;EAER,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,IAAI;EACJ,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,YAAY,CAAC,mBAAmB,CAAC;EACrC;EACA,IAAI,MAAM,iBAAiB,CAAC,GAAG,EAAE,QAAQ,GAAG,IAAI,EAAE;EAClD,MAAM,UAAU;EAChB,MACM,KAAK,EAAE;EACb,KAAK,CAAC;;EAEN;EACA,IAAI,YAAY,CAAC,wBAAwB,CAAC;EAC1C,IAAI,MAAM,YAAY,GAAG,EAAE;EAC3B,IAAI,MAAM,eAAe,GAAG,QAAQ,GAAG,IAAI;EAC3C,IAAI,MAAM,gBAAgB,GAAG,eAAe,GAAG,YAAY;EAC3D,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;;EAE3C,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE;EAC3C,MAAM,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,UAAU,EAAE;;EAEpC,MAAM,MAAM,QAAQ,GAAG,CAAC,GAAG,YAAY;EACvC,MAAM,MAAM,WAAW,GAAG,YAAY,GAAG,CAAC,WAAW,GAAG,YAAY,IAAI,QAAQ;EAChF,MAAM,MAAM,YAAY,GAAG,EAAE,GAAG,CAAC,EAAE,GAAG,YAAY,IAAI,QAAQ;EAC9D,MAAM,MAAM,eAAe,GAAG,cAAc,GAAG,EAAE,GAAG,QAAQ;;EAE5D,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,IAAI,EAAE,WAAW;EACzB,QAAQ,KAAK,EAAE,YAAY;EAC3B,QAAQ,OAAO,EAAE,eAAe;EAChC,QAAQ,QAAQ,EAAE,gBAAgB;EAClC,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI;EACrB,OAAO,CAAC;;EAER,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,IAAI;EACJ,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACxE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,kBAAkB,CAAC;;EAEpC,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,OAAO,EAAE;EACrC,IAAI,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,EAAE,EAAE,CAAC;;EAEpD;EACA,IAAI,MAAM,iBAAiB,CAAC,GAAG,EAAE,QAAQ,EAAE;EAC3C,MAAM,UAAU;EAChB,MACM,KAAK,EAAE,EAAE;EACf,MAAM,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ,KAAK;EACrC;EACA,QAAQ,MAAM,WAAW,GAAG,WAAW,GAAG,CAAC,UAAU,GAAG,WAAW,IAAI,QAAQ;EAC/E,QAAQ,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE;EACpC,MAAM;EACN,KAAK,CAAC;EACN,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,UAAU,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACzE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,mBAAmB,CAAC;;EAErC,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,QAAQ,EAAE;EACpC,IAAI,MAAM,aAAa,GAAG,CAAC,CAAC;;EAE5B;EACA,IAAI,MAAM,iBAAiB,CAAC,GAAG,EAAE,QAAQ,EAAE;EAC3C,MAAM,UAAU;EAChB,MACM,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ,KAAK;EACrC;EACA,QAAQ,MAAM,YAAY,GAAG,QAAQ,GAAG,aAAa,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;EACnE,QAAQ,MAAM,SAAS,GAAG,SAAS,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE;EACtE,QAAQ,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE;EACnC,MAAM;EACN,KAAK,CAAC;EACN,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,QAAQ,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACvE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,uBAAuB,CAAC;;EAEzC,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;EAC3C,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,QAAQ,EAAE;EACvC,IAAI,MAAM,UAAU,GAAG,GAAG,CAAC;EAC3B,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC;;EAErB,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,EAAE,KAAK,EAAE,EAAE;EACjD,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,YAAY,CAAC,CAAC,SAAS,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;EACxD,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,OAAO,EAAE,cAAc,GAAG,UAAU,GAAG,CAAC;EAChD,QAAQ,KAAK,EAAE,EAAE;EACjB,QAAQ,QAAQ,EAAE,QAAQ,IAAI,MAAM,GAAG,CAAC,CAAC;EACzC,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;EAClD,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,MAAM,KAAK,CAAC,GAAG,CAAC;;EAEtB;EACA,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,OAAO,EAAE,cAAc,GAAG,UAAU,GAAG,CAAC;EAChD,QAAQ,KAAK,EAAE,EAAE;EACjB,QAAQ,QAAQ,EAAE,QAAQ,IAAI,MAAM,GAAG,CAAC,CAAC;EACzC,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;EACjD,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,MAAM,KAAK,CAAC,GAAG,CAAC;EACtB,IAAI;;EAEJ;EACA,IAAI,YAAY,CAAC,gBAAgB,CAAC;EAClC,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,OAAO,EAAE,cAAc;EAC7B,MAAM,KAAK,EAAE,YAAY;EACzB,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,aAAa,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC5E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,sBAAsB,CAAC;;EAExC,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,OAAO,EAAE;EACrC,IAAI,MAAM,cAAc,GAAG,CAAC,CAAC;EAC7B,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC;;EAE/B;EACA,IAAI,MAAM,iBAAiB,CAAC,GAAG,EAAE,QAAQ,EAAE;EAC3C,MAAM,UAAU;EAChB,MACM,KAAK,EAAE,EAAE;EACf,MAAM,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ,KAAK;EACrC;EACA,QAAQ,MAAM,aAAa,GAAG,QAAQ,GAAG,cAAc,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;EACrE,QAAQ,MAAM,SAAS,GAAG,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,cAAc;EAChF,QAAQ,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE;EAClC,MAAM;EACN,KAAK,CAAC;EACN,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACxE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,yBAAyB,CAAC;;EAE3C,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;EAClC,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;;EAElC,IAAI,IAAI,CAAC,MAAM,EAAE;;EAEjB,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE;EACpC,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;EACjC,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;;EAElC;EACA,IAAI,MAAM,MAAM,GAAG,EAAE;EACrB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;EACjC,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC;EACtC;EACA,MAAM,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI;EAC1C,MAAM,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI;;EAEnD,MAAM,MAAM,CAAC,IAAI,CAAC;EAClB,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC;EAC7C;EACA,QAAQ,KAAK,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE;EACtD;EACA,QAAQ,OAAO,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI;EACvC,OAAO,CAAC;EACR,IAAI;;EAEJ,IAAI,MAAM,YAAY,GAAG,QAAQ,GAAG,MAAM,CAAC,MAAM;;EAEjD,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;EAChC,MAAM,GAAG,CAAC,KAAK,CAAC;EAChB,QAAQ,MAAM,EAAE,KAAK,CAAC,GAAG;EACzB,QAAQ,KAAK,EAAE,KAAK,CAAC,KAAK;EAC1B,QAAQ,OAAO,EAAE,KAAK,CAAC,OAAO;EAC9B,QAAQ,QAAQ,EAAE,YAAY,GAAG,GAAG;EACpC,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC;EACtB,OAAO,CAAC;EACR,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC/B,MAAM,UAAU,EAAE;EAClB,IAAI;;EAEJ;EACA,IAAI,YAAY,CAAC,iBAAiB,CAAC;EACnC,IAAI,GAAG,CAAC,KAAK,CAAC;EACd,MAAM,MAAM;EACZ,MAAM,KAAK,EAAE,GAAG,CAAC,QAAQ,EAAE;EAC3B,MAAM,OAAO,EAAE,CAAC;EAChB,MAAM,QAAQ,EAAE,YAAY,GAAG,CAAC;EAChC,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,YAAY,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC3E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI;;EAE/C;EACA,IAAI,IAAI,aAAa,GAAG,EAAE;EAC1B,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,IAAI,SAAS,CAAC,IAAI,KAAK,mBAAmB,IAAI,SAAS,CAAC,QAAQ,EAAE;EACxE,QAAQ,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,KAAK;EAC3D,UAAU,MAAM,EAAE,OAAO,CAAC,QAAQ,CAAC,WAAW;EAC9C,UAAU,IAAI,EAAE,OAAO,CAAC,UAAU,CAAC,IAAI;EACvC,UAAU,OAAO,EAAE,OAAO,CAAC,UAAU,CAAC,OAAO;EAC7C,UAAU,KAAK,EAAE,OAAO,CAAC,UAAU,CAAC,KAAK;EACzC,UAAU,QAAQ,EAAE,OAAO,CAAC,UAAU,CAAC,QAAQ;EAC/C,UAAU,IAAI,EAAE,OAAO,CAAC,UAAU,CAAC;EACnC,SAAS,CAAC,CAAC;EACX,MAAM,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;EAC3C,QAAQ,aAAa,GAAG,SAAS;EACjC,MAAM;EACN,IAAI;;EAEJ,IAAI,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;EACpC,MAAM,YAAY,CAAC,kCAAkC,CAAC;EACtD,MAAM,MAAM,KAAK,CAAC,IAAI,CAAC;EACvB,MAAM;EACN,IAAI;;EAEJ,IAAI,YAAY,CAAC,CAAC,oBAAoB,EAAE,aAAa,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;;EAE5E;EACA,IAAI,MAAM,IAAI,GAAG,kBAAkB,CAAC,aAAa,EAAE,QAAQ,CAAC;;EAE5D;EACA,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EAC1C,MAAM,MAAM,EAAE,QAAQ,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;;EAEtD,MAAM,MAAM,aAAa,CAAC,GAAG,EAAE,QAAQ,EAAE,kBAAkB,EAAE;EAC7D,QAAQ,UAAU;EAClB,QAAQ,YAAY,EAAE,CAAC,GAAG,KAAK,YAAY,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;EAChF,OAAO,CAAC;EACR,IAAI;;EAEJ,IAAI,YAAY,CAAC,kBAAkB,CAAC;EACpC,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA;EACA,EAAE,gBAAgB,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EAC/E,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,gCAAgC,CAAC;;EAElD;EACA,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE;EAC9C,MAAM,YAAY,CAAC,4CAA4C,CAAC;EAChE;EACA,MAAM,MAAM,gBAAgB,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,CAAC;EACjF,MAAM;EACN,IAAI;;EAEJ,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;EAC3C,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,QAAQ,EAAE;EACvC,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;;EAElC;EACA,IAAI,MAAM,WAAW,GAAG,EAAE;EAC1B,IAAI,YAAY,CAAC,kCAAkC,CAAC;EACpD,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,KAAK,EAAE,WAAW;EACxB,MAAM,QAAQ,EAAE,IAAI;EACpB,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC;EACtB,IAAI,MAAM,cAAc,GAAG,GAAG,GAAG,KAAK;EACtC,IAAI,MAAM,SAAS,GAAG,CAAC,QAAQ,GAAG,IAAI,IAAI,KAAK,CAAC;;EAEhD;EACA,IAAI,MAAM,UAAU,GAAG,EAAE;EACzB,IAAI,MAAM,UAAU,GAAG,CAAC;;EAExB,IAAI,YAAY,CAAC,mCAAmC,CAAC;;EAErD;EACA,IAAI,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,KAAK,EAAE,IAAI,EAAE,EAAE;EAC7C,MAAM,IAAI,IAAI,GAAG,EAAE,KAAK,CAAC,EAAE,UAAU,EAAE;;EAEvC,MAAM,MAAM,QAAQ,GAAG,IAAI,GAAG,KAAK;EACnC,MAAM,MAAM,cAAc,GAAG,cAAc,IAAI,cAAc,GAAG,IAAI,CAAC;;EAErE;;EAEA;EACA;EACA,MAAM,MAAM,eAAe,GAAG,GAAG,CAAC,qBAAqB,CAAC,MAAM,CAAC;;EAE/D;EACA,MAAM,IAAI,UAAU,GAAG,GAAG,CAAC,OAAO,EAAE;EACpC,MAAM,IAAI,eAAe,KAAK,IAAI,IAAI,eAAe,IAAI,CAAC,EAAE;EAC5D;EACA;EACA;EACA;;EAEA,QAAQ,MAAM,WAAW,GAAG,eAAe,GAAG,IAAI;;EAElD;EACA;EACA,QAAQ,MAAM,QAAQ,GAAG,EAAE,CAAC;EAC5B,QAAQ,MAAM,mBAAmB,GAAG,WAAW,GAAG,GAAG,CAAC;;EAEtD,QAAQ,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,QAAQ,GAAG,mBAAmB,CAAC;EACjE,MAAM;;EAEN;EACA,MAAM,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;EACjC,MAAM,IAAI,UAAU,CAAC,MAAM,GAAG,UAAU,EAAE;EAC1C,QAAQ,UAAU,CAAC,KAAK,EAAE;EAC1B,MAAM;;EAEN;EACA,MAAM,MAAM,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM;;EAEpF;EACA,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,OAAO,EAAE,cAAc;EAC/B,QAAQ,IAAI,EAAE,YAAY;EAC1B,QAAQ,KAAK,EAAE,WAAW;EAC1B,QAAQ,QAAQ,EAAE,SAAS;EAC3B,QAAQ,SAAS,EAAE,IAAI;EACvB,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC;EACtB,OAAO,CAAC;;EAER,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;;EAE/B;EACA,MAAM,IAAI,IAAI,GAAG,EAAE,KAAK,CAAC,EAAE;EAC3B,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;EAClD,QAAQ,YAAY,CAAC,CAAC,uBAAuB,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;EAC1D,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,YAAY,CAAC,0BAA0B,CAAC;EAC5C,IAAI,GAAG,CAAC,MAAM,CAAC;EACf,MAAM,OAAO,EAAE,cAAc;EAC7B,MAAM,KAAK,EAAE,YAAY;EACzB,MAAM,QAAQ,EAAE,QAAQ,GAAG,IAAI;EAC/B,MAAM,SAAS,EAAE;EACjB,KAAK,CAAC;EACN,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;EAChB,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,2BAA2B,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,EAAE,cAAc,KAAK;EAC/E;EACA,IAAI,MAAM,gBAAgB,GAAG,cAAc,CAAC,gBAAgB,IAAI;EAChE,MAAM,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU;EAC7D,MAAM,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE;EACnC,KAAK;;EAEL;EACA,IAAI,IAAI,IAAI,GAAG,IAAI;EACnB,IAAI,IAAI,IAAI,GAAG,IAAI;EACnB,IAAI,IAAI,SAAS,GAAG,cAAc,CAAC;EACnC,IAAI,IAAI,YAAY,GAAG,gBAAgB,CAAC;EACxC,IAAI,MAAM,aAAa,GAAG,EAAE,CAAC;;EAE7B,IAAI,OAAO;EACX,MAAM,KAAK,EAAE,OAAO,GAAG,EAAE,OAAO,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,KAAK;EACnE;EACA;EACA;EACA;;EAEA;EACA,QAAQ,OAAO,CAAC,GAAG,CAAC,6CAA6C,CAAC;EAClE,QAAQ,IAAI;EACZ;EACA,UAAU,MAAM,SAAS,GAAG,oBAAoB,CAAC,GAAG,CAAC;;EAErD,UAAU,IAAI,SAAS,IAAI,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE;EACnE;EACA,YAAY,SAAS,GAAG,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ;EAC9D,YAAY,YAAY,GAAG,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;;EAEpE;EACA,YAAY,MAAM,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC;EAChF,YAAY,IAAI,WAAW,IAAI,WAAW,CAAC,UAAU,EAAE;EACvD,cAAc,WAAW,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC;EAC7D,YAAY;;EAEZ;EACA,YAAY,MAAM,aAAa,GAAG,GAAG,CAAC,YAAY,EAAE;EACpD,YAAY,MAAM,KAAK,GAAG,aAAa,CAAC,WAAW;EACnD,YAAY,MAAM,MAAM,GAAG,aAAa,CAAC,YAAY;;EAErD,YAAY,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EAChD,YAAY,IAAI,CAAC,EAAE,GAAG,uBAAuB;EAC7C,YAAY,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG;AACjC;AACA;AACA;AACA,mCAAmC,EAAE,KAAK,CAAC;AAC3C,oCAAoC,EAAE,MAAM,CAAC;AAC7C;AACA;AACA,wBAAwB,CAAC;EACzB,YAAY,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;;EAE3C,YAAY,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC;;EAE/C;EACA,YAAY,IAAI,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC;EACtC,cAAc,SAAS,EAAE,IAAI;EAC7B,cAAc,KAAK,EAAE,SAAS,CAAC,KAAK;EACpC,cAAc,MAAM,EAAE,GAAG,CAAC,SAAS,EAAE;EACrC,cAAc,IAAI,EAAE,EAAE;EACtB,cAAc,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE;EACvC,cAAc,KAAK,EAAE,CAAC;EACtB,cAAc,qBAAqB,EAAE,KAAK;EAC1C,cAAc,WAAW,EAAE;EAC3B,aAAa,CAAC;;EAEd;EACA,YAAY,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;EACpE,YAAY,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC;EACnE,UAAU,CAAC,MAAM;EACjB,YAAY,OAAO,CAAC,IAAI,CAAC,wDAAwD,CAAC;EAClF,UAAU;EACV,QAAQ,CAAC,CAAC,OAAO,KAAK,EAAE;EACxB,UAAU,OAAO,CAAC,KAAK,CAAC,0CAA0C,EAAE,KAAK,CAAC;EAC1E;EACA,UAAU,IAAI,IAAI,EAAE;EACpB,YAAY,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;EAC9C,YAAY,IAAI,GAAG,IAAI;EACvB,UAAU;EACV,UAAU,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;EACvC,YAAY,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC;EAC7C,YAAY,IAAI,GAAG,IAAI;EACvB,UAAU;EACV,QAAQ;;EAER,QAAQ,MAAM,QAAQ,GAAG,cAAc,CAAC,gBAAgB,GAAG,MAAM,GAAG,MAAM;EAC1E,QAAQ,YAAY,CAAC,CAAC,oBAAoB,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC;;EAE1D;EACA,QAAQ,IAAI,CAAC,IAAI,EAAE;EACnB,UAAU,OAAO,CAAC,KAAK,CAAC,uDAAuD,CAAC;EAChF,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC;EAC/C,QAAQ,IAAI,CAAC,MAAM,EAAE;EACrB,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,SAAS,CAAC,mCAAmC,CAAC,CAAC;EAClG,UAAU;EACV,QAAQ;;EAER,QAAQ,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;EAC/C,QAAQ,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;;EAEtC;EACA;EACA,QAAQ,MAAM,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;EACpE,UAAU,WAAW,EAAE,YAAY;EACnC,UAAU,MAAM,EAAE;EAClB,YAAY,KAAK;EACjB,YAAY,CAAC,IAAI,EAAE,CAAC,eAAe,CAAC,EAAE,YAAY,CAAC;EACnD,YAAY,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,gBAAgB,CAAC;EAClE;EACA,SAAS,CAAC;;EAEV,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,eAAe,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,qBAAqB,CAAC,CAAC;;EAEzG,QAAQ,IAAI,CAAC,eAAe,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;EAC9D,UAAU,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;EAC/C,UAAU;EACV,QAAQ;;EAER;EACA;EACA,QAAQ,YAAY,CAAC,sCAAsC,CAAC;;EAE5D,QAAQ,MAAM,SAAS,GAAG,KAAK,CAAC;;EAEhC,QAAQ,IAAI,mBAAmB,GAAG,IAAI;EACtC,QAAQ,IAAI,uBAAuB,GAAG,QAAQ;;EAE9C;EACA,QAAQ,KAAK,MAAM,GAAG,IAAI,qBAAqB,EAAE;EACjD,UAAU,MAAM,QAAQ,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG;EACtD,UAAU,MAAM,MAAM,GAAG;EACzB,YAAY,MAAM,CAAC,GAAG,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;EACvD,YAAY,MAAM,CAAC,GAAG,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ;EACtD,WAAW;EACX,UAAU,MAAM,QAAQ,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;;EAEnD;EACA,UAAU,KAAK,MAAM,IAAI,IAAI,eAAe,EAAE;EAC9C,YAAY,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EAC9D,YAAY,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW;;EAEpD,YAAY,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACpD,cAAc,MAAM,YAAY,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;EAChD,cAAc,MAAM,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC;;EAE1C,cAAc,MAAM,IAAI,GAAG,mBAAmB,CAAC,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,UAAU,CAAC;EAC1F,cAAc,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,GAAG,uBAAuB,EAAE;EACnE,gBAAgB,uBAAuB,GAAG,IAAI;EAC9C,gBAAgB,mBAAmB,GAAG;EACtC,kBAAkB,IAAI;EACtB,kBAAkB,SAAS,EAAE,GAAG,CAAC,IAAI;EACrC,kBAAkB,QAAQ,EAAE,IAAI;EAChC,kBAAkB,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,IAAI;EACvD,iBAAiB;EACjB,cAAc;EACd,YAAY;EACZ,UAAU;EACV,QAAQ;;EAER,QAAQ,IAAI,CAAC,mBAAmB,EAAE;EAClC,UAAU,OAAO,CAAC,GAAG,CAAC,8EAA8E,CAAC;EACrG;EACA,UAAU,IAAI,WAAW,GAAG,IAAI;EAChC,UAAU,IAAI,WAAW,GAAG,QAAQ;EACpC,UAAU,KAAK,MAAM,IAAI,IAAI,eAAe,EAAE;EAC9C,YAAY,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EAC9D,YAAY,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EAC3D,cAAc,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,KAAK;EACtC,cAAc,MAAM,EAAE,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG;EACzC,cAAc,MAAM,EAAE,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG;EACzC,cAAc,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;EAC3D,cAAc,IAAI,QAAQ,GAAG,WAAW,EAAE;EAC1C,gBAAgB,WAAW,GAAG,QAAQ;EACtC,gBAAgB,WAAW,GAAG,IAAI;EAClC,cAAc;EACd,YAAY;EACZ,UAAU;EACV,UAAU,IAAI,CAAC,WAAW,EAAE;EAC5B,YAAY,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC;EACtD,YAAY;EACZ,UAAU;EACV,UAAU,mBAAmB,GAAG;EAChC,YAAY,IAAI,EAAE,WAAW;EAC7B,YAAY,SAAS,EAAE,UAAU;EACjC,YAAY,QAAQ,EAAE,WAAW;EACjC,YAAY,SAAS,EAAE,WAAW,CAAC,UAAU,EAAE,KAAK,IAAI;EACxD,WAAW;EACX,QAAQ;;EAER,QAAQ,MAAM,WAAW,GAAG,mBAAmB,CAAC,IAAI;EACpD,QAAQ,MAAM,aAAa,GAAG,mBAAmB,CAAC,SAAS;;EAE3D,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,oCAAoC,EAAE,aAAa,CAAC,IAAI,EAAE,CAAC,mBAAmB,CAAC,QAAQ,GAAG,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;;EAEnL;EACA;EACA,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,eAAe,CAAC,MAAM,CAAC,kDAAkD,CAAC,CAAC;;EAEtH,QAAQ,IAAI,UAAU,GAAG,WAAW,CAAC,QAAQ,CAAC,WAAW;;EAEzD;EACA,QAAQ,IAAI,UAAU,CAAC,MAAM,IAAI,CAAC,EAAE;EACpC,UAAU,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;EACpD,UAAU,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;EACtE,UAAU,MAAM,WAAW,GAAG,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC;EACpF,UAAU,MAAM,WAAW,GAAG,oBAAoB,CAAC,WAAW,GAAG,cAAc,CAAC;EAChF,UAAU,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,EAAE;EAC1C,YAAY,UAAU,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC,OAAO,EAAE;EAClD,UAAU;EACV,QAAQ;;EAER;;EAEA;EACA,QAAQ,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;;EAE3E,QAAQ,MAAM,WAAW,GAAG,cAAc,CAAC,KAAK;EAChD,QAAQ,GAAG,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;EAC3E,QAAQ,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACjC,QAAQ,UAAU,EAAE;;EAEpB,QAAQ,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;EAClD,QAAQ,MAAM,UAAU,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE;;EAE3D,QAAQ,IAAI,sBAAsB,GAAG,cAAc;EACnD,QAAQ,IAAI,UAAU,CAAC,MAAM,IAAI,CAAC,EAAE;EACpC,UAAU,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;EACtD,UAAU,sBAAsB,GAAG,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,CAAC;EAC7F,QAAQ;;EAER,QAAQ,MAAM,eAAe,GAAG,cAAc,CAAC,QAAQ,IAAI,EAAE;EAC7D,QAAQ,MAAM,UAAU,GAAG,cAAc,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;;EAE7G,QAAQ,GAAG,CAAC,MAAM,CAAC;EACnB,UAAU,MAAM,EAAE,UAAU;EAC5B,UAAU,OAAO,EAAE,sBAAsB;EACzC,UAAU,IAAI,EAAE,UAAU;EAC1B,UAAU,KAAK,EAAE,WAAW;EAC5B,UAAU,QAAQ,EAAE,IAAI;EACxB,UAAU,SAAS,EAAE,IAAI;EACzB,UAAU,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;EACjE,UAAU,WAAW,EAAE,IAAI;EAC3B,UAAU,cAAc,EAAE;EAC1B,SAAS,CAAC;EACV,QAAQ,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EACjC,QAAQ,UAAU,EAAE;;EAEpB;EACA,QAAQ,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;EAC9B,QAAQ,UAAU,EAAE;;EAEpB,QAAQ,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC;EACpE,MAAM,CAAC;EACP,MAAM,SAAS,EAAE,OAAO,GAAG,EAAE,OAAO,KAAK;EACzC;EACA;EACA;EACA,QAAQ,MAAM,WAAW,GAAG;EAC5B,UAAU,GAAG,OAAO;EACpB,UAAU,IAAI;EACd,UAAU,IAAI;EACd,UAAU,SAAS;EACnB,UAAU,YAAY;EACtB,UAAU;EACV,SAAS;EACT,QAAQ,MAAM,gBAAgB,CAAC,sBAAsB,CAAC,GAAG,EAAE,OAAO,EAAE,WAAW,EAAE,cAAc,CAAC;EAChG,MAAM,CAAC;EACP,MAAM,mBAAmB,EAAE,cAAc,CAAC;EAC1C,KAAK;EACL,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA;EACA,EAAE,sBAAsB,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,EAAE,cAAc,KAAK;EACrG,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,YAAY,CAAC,6BAA6B,CAAC;;EAE/C;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE,OAAO,CAAC,IAAI,CAAC;EAClE,IAAI,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE,OAAO,OAAO,CAAC,IAAI,CAAC;;EAEhF;EACA,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;EACvB,MAAM,OAAO,CAAC,GAAG,CAAC,6CAA6C,CAAC;EAChE,MAAM,IAAI;EACV,QAAQ,MAAM,SAAS,GAAG,oBAAoB,CAAC,GAAG,CAAC;;EAEnD,QAAQ,IAAI,CAAC,SAAS,EAAE;EACxB,UAAU,OAAO,CAAC,KAAK,CAAC,wDAAwD,CAAC;EACjF,QAAQ,CAAC,MAAM,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE;EAC5D,UAAU,OAAO,CAAC,KAAK,CAAC,4CAA4C,CAAC;EACrE,UAAU,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,SAAS,CAAC,aAAa,CAAC;EAClF,QAAQ;;EAER,QAAQ,IAAI,SAAS,IAAI,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE;EACjE,UAAU,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ;EACpE,UAAU,OAAO,CAAC,YAAY,GAAG,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW;;EAE1E;EACA,UAAU,MAAM,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC;EAC9E,UAAU,IAAI,WAAW,IAAI,WAAW,CAAC,UAAU,EAAE;EACrD,YAAY,WAAW,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC;EAC3D,UAAU;;EAEV;EACA,UAAU,MAAM,aAAa,GAAG,GAAG,CAAC,YAAY,EAAE;EAClD,UAAU,MAAM,KAAK,GAAG,aAAa,CAAC,WAAW;EACjD,UAAU,MAAM,MAAM,GAAG,aAAa,CAAC,YAAY;;EAEnD,UAAU,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EACtD,UAAU,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,uBAAuB;EACnD,UAAU,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG;AACvC;AACA;AACA;AACA,+BAA+B,EAAE,KAAK,CAAC;AACvC,gCAAgC,EAAE,MAAM,CAAC;AACzC;AACA;AACA,oBAAoB,CAAC;EACrB,UAAU,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC;;EAEjD;EACA,UAAU,OAAO,CAAC,IAAI,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC;EAC5C,YAAY,SAAS,EAAE,OAAO,CAAC,IAAI;EACnC,YAAY,KAAK,EAAE,SAAS,CAAC,KAAK;EAClC,YAAY,MAAM,EAAE,GAAG,CAAC,SAAS,EAAE;EACnC,YAAY,IAAI,EAAE,EAAE;EACpB,YAAY,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE;EACrC,YAAY,KAAK,EAAE,CAAC;EACpB,YAAY,WAAW,EAAE;EACzB,WAAW,CAAC;;EAEZ,UAAU,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;EAC1E,UAAU,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC;;EAEjE;EACA,UAAU,OAAO,CAAC,GAAG,CAAC,+DAA+D,CAAC;EACtF,UAAU,IAAI;EACd,YAAY,MAAM,aAAa,GAAG,yBAAyB;EAC3D,YAAY,MAAM,YAAY,GAAG,+BAA+B;;EAEhE;EACA,YAAY,IAAI,GAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;EAC5C,cAAc,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC;EAC3C,YAAY;EACZ,YAAY,IAAI,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE;EAC9C,cAAc,GAAG,CAAC,YAAY,CAAC,aAAa,CAAC;EAC7C,YAAY;;EAEZ;EACA,YAAY,GAAG,CAAC,SAAS,CAAC,aAAa,EAAE;EACzC,cAAc,IAAI,EAAE,SAAS;EAC7B,cAAc,IAAI,EAAE;EACpB,gBAAgB,IAAI,EAAE,mBAAmB;EACzC,gBAAgB,QAAQ,EAAE;EAC1B;EACA,aAAa,CAAC;;EAEd;EACA,YAAY,GAAG,CAAC,QAAQ,CAAC;EACzB,cAAc,EAAE,EAAE,YAAY;EAC9B,cAAc,IAAI,EAAE,MAAM;EAC1B,cAAc,MAAM,EAAE,aAAa;EACnC,cAAc,MAAM,EAAE;EACtB,gBAAgB,WAAW,EAAE,OAAO;EACpC,gBAAgB,UAAU,EAAE;EAC5B,eAAe;EACf,cAAc,KAAK,EAAE;EACrB,gBAAgB,YAAY,EAAE,SAAS;EACvC,gBAAgB,YAAY,EAAE,CAAC;EAC/B,gBAAgB,cAAc,EAAE;EAChC;EACA,aAAa,CAAC;;EAEd,YAAY,OAAO,CAAC,GAAG,CAAC,kDAAkD,CAAC;EAC3E,UAAU,CAAC,CAAC,OAAO,UAAU,EAAE;EAC/B,YAAY,OAAO,CAAC,IAAI,CAAC,+CAA+C,EAAE,UAAU,CAAC;EACrF,UAAU;EACV,QAAQ;EACR,MAAM,CAAC,CAAC,OAAO,KAAK,EAAE;EACtB,QAAQ,OAAO,CAAC,KAAK,CAAC,0CAA0C,EAAE,KAAK,CAAC;EACxE,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;EAChC,MAAM,OAAO,CAAC,aAAa,GAAG,EAAE;EAChC,IAAI;;EAEJ;EACA,IAAI,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI;EAC7B,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,cAAc;EACzD,IAAI,MAAM,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,gBAAgB;;EAEjE;EACA,IAAI,IAAI,CAAC,IAAI,EAAE;EACf,MAAM,OAAO,CAAC,KAAK,CAAC,wDAAwD,CAAC;EAC7E,MAAM,YAAY,CAAC,uDAAuD,CAAC;EAC3E,MAAM,MAAM,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,CAAC;EACzF,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC;EAC3C,IAAI,IAAI,CAAC,MAAM,EAAE;EACjB,MAAM,YAAY,CAAC,+CAA+C,CAAC;EACnE;EACA,MAAM,wBAAwB,CAAC,OAAO,EAAE,GAAG,CAAC;EAC5C,MAAM,MAAM,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,CAAC;EACzF,MAAM;EACN,IAAI;;EAEJ,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;EAC3C,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE;;EAElC;EACA,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;EACvD,MAAM,WAAW,EAAE,YAAY;EAC/B,MAAM,MAAM,EAAE;EACd,KAAK,CAAC;;EAEN,IAAI,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;EACxC,MAAM,YAAY,CAAC,6CAA6C,CAAC;EACjE;EACA,MAAM,wBAAwB,CAAC,OAAO,EAAE,GAAG,CAAC;EAC5C,MAAM,MAAM,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,CAAC;EACzF,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,IAAI,WAAW,GAAG,IAAI;EAC1B,IAAI,IAAI,WAAW,GAAG,QAAQ;;EAE9B,IAAI,KAAK,MAAM,IAAI,IAAI,MAAM,EAAE;EAC/B,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;;EAExD;EACA,MAAM,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EACrD,QAAQ,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,KAAK;EAChC,QAAQ,MAAM,EAAE,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG;EACnC,QAAQ,MAAM,EAAE,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG;EACnC,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;;EAErD,QAAQ,IAAI,QAAQ,GAAG,WAAW,EAAE;EACpC,UAAU,WAAW,GAAG,QAAQ;EAChC,UAAU,WAAW,GAAG,IAAI;EAC5B,QAAQ;EACR,MAAM;EACN,IAAI;;EAEJ,IAAI,IAAI,CAAC,WAAW,EAAE;EACtB,MAAM,YAAY,CAAC,kDAAkD,CAAC;EACtE;EACA,MAAM,wBAAwB,CAAC,OAAO,EAAE,GAAG,CAAC;EAC5C,MAAM,MAAM,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,CAAC;EACzF,MAAM;EACN,IAAI;;EAEJ,IAAI,IAAI,UAAU,GAAG,WAAW,CAAC,QAAQ,CAAC,WAAW;EACrD,IAAI,MAAM,SAAS,GAAG,WAAW,CAAC,UAAU,EAAE,KAAK,IAAI,MAAM;;EAE7D;EACA;EACA;EACA,IAAI,IAAI,UAAU,CAAC,MAAM,IAAI,CAAC,EAAE;EAChC,MAAM,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;EAChD,MAAM,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;EAClE,MAAM,MAAM,WAAW,GAAG,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC;;EAEhF;EACA;EACA,MAAM,MAAM,WAAW,GAAG,oBAAoB,CAAC,WAAW,GAAG,cAAc,CAAC;;EAE5E;EACA;EACA,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,EAAE;EACtC,QAAQ,UAAU,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC,OAAO,EAAE;EAC9C,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,wEAAwE,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC1H,MAAM,CAAC,MAAM;EACb,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,+DAA+D,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EACjH,MAAM;EACN,IAAI;;EAEJ;EACA;EACA;EACA,IAAI,MAAM,eAAe,GAAG,OAAO,SAAS,EAAE,eAAe,EAAE,OAAO,KAAK;EAC3E,MAAM,MAAM,cAAc,GAAG,gBAAgB;EAC7C,QAAQ,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC;EAC9C,QAAQ,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;EACjC,OAAO;;EAEP;EACA,MAAM,MAAM,eAAe,GAAG,oBAAoB,CAAC,QAAQ;EAC3D,MAAM,MAAM,cAAc,GAAG,oBAAoB,CAAC,OAAO;EACzD,MAAM,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,SAAS;;EAE7D;EACA,MAAM,IAAI,OAAO,CAAC,IAAI,IAAI,cAAc,CAAC,YAAY,EAAE;EACvD,QAAQ,MAAM,iBAAiB,CAAC,uBAAuB;EACvD,UAAU,OAAO,CAAC,IAAI;EACtB,UAAU,SAAS;EACnB,UAAU,cAAc;EACxB,UAAU,cAAc,CAAC;EACzB,SAAS;EACT,MAAM;;EAEN;EACA;EACA,MAAM,MAAM,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;EAChE,QAAQ,WAAW,EAAE,YAAY;EACjC,QAAQ,MAAM,EAAE;EAChB,OAAO,CAAC;;EAER,MAAM,IAAI,eAAe,GAAG,IAAI;EAChC,MAAM,IAAI,SAAS,GAAG,QAAQ,CAAC;EAC/B,MAAM,IAAI,cAAc,GAAG,CAAC,CAAC;;EAE7B;EACA,MAAM,MAAM,mBAAmB,GAAG,MAAM;;EAExC,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,4CAA4C,EAAE,gBAAgB,CAAC,EAAE,eAAe,GAAG,IAAI,GAAG,eAAe,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,cAAc,GAAG,IAAI,GAAG,cAAc,GAAG,GAAG,GAAG,EAAE,CAAC,WAAW,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACtO,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,qCAAqC,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;EACjF,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,kCAAkC,EAAE,CAAC,mBAAmB,GAAG,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEpG,MAAM,KAAK,MAAM,IAAI,IAAI,aAAa,EAAE;EACxC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EAC1D,UAAU;EACV,QAAQ;;EAER,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;EAClC,UAAU;EACV,QAAQ;;EAER,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;EACtD,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;;EAEvF;EACA,QAAQ,MAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EACnD,QAAQ,MAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EACnD,QAAQ,MAAM,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC;;EAEhF;EACA,QAAQ,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EAC/C,QAAQ,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EAC/C,QAAQ,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;;EAEtE,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC;;EAEhE,QAAQ,IAAI,OAAO,IAAI,mBAAmB,EAAE;EAC5C,UAAU,SAAS;EACnB,QAAQ;;EAER;EACA;EACA,QAAQ,MAAM,aAAa,GAAG,aAAa,GAAG,eAAe;EAC7D,QAAQ,MAAM,eAAe,GAAG,aAAa,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW;;EAEpH;EACA,QAAQ,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;;EAExC,QAAQ,MAAM,cAAc,GAAG,eAAe,CAAC,CAAC,CAAC;EACjD,QAAQ,MAAM,eAAe,GAAG,eAAe,CAAC,CAAC,CAAC;;EAElD;EACA,QAAQ,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,EAAE;EACvF,UAAU,OAAO,CAAC,IAAI,CAAC,CAAC,yCAAyC,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;EACvF,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,MAAM,kBAAkB,GAAG,gBAAgB;EACnD,UAAU,cAAc,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;EAC9C,UAAU,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;EAC/C,SAAS;;EAET;EACA,QAAQ,IAAI,KAAK,CAAC,kBAAkB,CAAC,EAAE;EACvC,UAAU,OAAO,CAAC,IAAI,CAAC,CAAC,iCAAiC,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;EAC/E,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,kBAAkB,GAAG,cAAc,CAAC,CAAC;;EAE/F;EACA,QAAQ,IAAI,KAAK,CAAC,WAAW,CAAC,EAAE;EAChC,UAAU,OAAO,CAAC,IAAI,CAAC,CAAC,qCAAqC,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;EACnF,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,IAAI,WAAW,GAAG,GAAG,EAAE;;EAE/B,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC;;EAEjE;EACA;EACA;;EAEA,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,EAAE,IAAI;EAC9C,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,GAAG;EAC5C,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,EAAE,KAAK;;EAEhD,QAAQ,MAAM,SAAS,GAAG,OAAO,IAAI,cAAc,IAAI,OAAO,KAAK,cAAc;EACjF,QAAQ,MAAM,UAAU,GAAG,QAAQ,IAAI,eAAe,IAAI,QAAQ,KAAK,eAAe;EACtF,QAAQ,MAAM,WAAW,GAAG,SAAS,IAAI,gBAAgB,IAAI,SAAS,KAAK,gBAAgB;;EAE3F,QAAQ,IAAI,KAAK,GAAG,CAAC;;EAErB;EACA,QAAQ,IAAI,SAAS,EAAE;EACvB,UAAU,KAAK,GAAG,CAAC,GAAG,QAAQ,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC;EACzD,QAAQ,CAAC,MAAM,IAAI,UAAU,EAAE;EAC/B;EACA,UAAU,KAAK,GAAG,GAAG,GAAG,QAAQ,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC;EAC3D,QAAQ,CAAC,MAAM,IAAI,WAAW,EAAE;EAChC;EACA,UAAU,KAAK,GAAG,IAAI,GAAG,QAAQ,GAAG,EAAE,GAAG,WAAW,GAAG,EAAE,CAAC;EAC1D;EACA,QAAQ,CAAC,MAAM;EACf;EACA,UAAU,KAAK,GAAG,KAAK,GAAG,QAAQ,GAAG,GAAG,GAAG,WAAW,GAAG,GAAG;EAC5D;EACA,QAAQ;;EAER,QAAQ,cAAc,EAAE;;EAExB;EACA,QAAQ,MAAM,cAAc,GAAG,OAAO,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,IAAI,QAAQ,IAAI,SAAS,CAAC;EACjF,QAAQ,MAAM,aAAa,GAAG,SAAS,GAAG,YAAY,IAAI,UAAU,GAAG,aAAa,IAAI,WAAW,GAAG,cAAc,GAAG,cAAc,CAAC,CAAC;EACvI,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,cAAc,CAAC,EAAE,EAAE,cAAc,CAAC,EAAE,EAAE,aAAa,CAAC,WAAW,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,GAAG,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE/M,QAAQ,IAAI,KAAK,GAAG,SAAS,EAAE;EAC/B,UAAU,SAAS,GAAG,KAAK;EAC3B,UAAU,eAAe,GAAG;EAC5B,YAAY,IAAI;EAChB,YAAY,MAAM,EAAE,eAAe;EACnC,YAAY,QAAQ,EAAE,aAAa;EACnC,YAAY,WAAW;EACvB,YAAY,QAAQ;EACpB,YAAY,KAAK;EACjB,YAAY,QAAQ;EACpB,YAAY;EACZ,WAAW;EACX,QAAQ;EACR,MAAM;;EAEN,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,sBAAsB,EAAE,cAAc,CAAC,iCAAiC,EAAE,SAAS,KAAK,QAAQ,GAAG,YAAY,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE5J;EACA,MAAM,IAAI,CAAC,eAAe,IAAI,OAAO,CAAC,IAAI,IAAI,cAAc,CAAC,YAAY,EAAE;EAC3E,QAAQ,MAAM,YAAY,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE;EACnD;EACA,QAAQ,MAAM,UAAU,GAAG,YAAY,KAAK,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;;EAE/D,QAAQ,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;EAC5C,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,qCAAqC,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,mBAAmB,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC;;EAE1H;EACA,UAAU,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;EACzC,UAAU,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;;EAEjE;EACA,UAAU,MAAM,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;EAClE,YAAY,WAAW,EAAE,YAAY;EACrC,YAAY,MAAM,EAAE;EACpB,WAAW,CAAC;;EAEZ,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,wBAAwB,EAAE,WAAW,CAAC,MAAM,CAAC,kBAAkB,EAAE,SAAS,CAAC,CAAC,CAAC;;EAEpG;EACA,UAAU,KAAK,MAAM,IAAI,IAAI,WAAW,EAAE;EAC1C,YAAY,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;EAC9D,YAAY,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;;EAEtC,YAAY,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;EAC1D,YAAY,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;;EAE3F,YAAY,MAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EACvD,YAAY,MAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EACvD,YAAY,MAAM,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC;;EAEpF,YAAY,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EACnD,YAAY,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;EACnD,YAAY,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;;EAE1E,YAAY,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC;;EAEpE,YAAY,IAAI,OAAO,GAAG,mBAAmB,EAAE;EAC/C;EACA,cAAc,MAAM,aAAa,GAAG,aAAa,GAAG,eAAe;EACnE,cAAc,MAAM,eAAe,GAAG,aAAa,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW;;EAE1H,cAAc,IAAI,eAAe,CAAC,MAAM,IAAI,CAAC,EAAE;EAC/C,gBAAgB,MAAM,cAAc,GAAG,eAAe,CAAC,CAAC,CAAC;EACzD,gBAAgB,MAAM,eAAe,GAAG,eAAe,CAAC,CAAC,CAAC;EAC1D,gBAAgB,MAAM,kBAAkB,GAAG,gBAAgB;EAC3D,kBAAkB,cAAc,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;EACtD,kBAAkB,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;EACvD,iBAAiB;EACjB,gBAAgB,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,kBAAkB,GAAG,cAAc,CAAC,CAAC;;EAEvG,gBAAgB,IAAI,WAAW,IAAI,GAAG,EAAE;EACxC,kBAAkB,OAAO,CAAC,GAAG,CAAC,CAAC,oCAAoC,EAAE,SAAS,CAAC,cAAc,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzH,kBAAkB,eAAe,GAAG;EACpC,oBAAoB,IAAI;EACxB,oBAAoB,MAAM,EAAE,eAAe;EAC3C,oBAAoB,QAAQ,EAAE,aAAa;EAC3C,oBAAoB,WAAW;EAC/B,oBAAoB,QAAQ,EAAE,OAAO;EACrC,oBAAoB,KAAK,EAAE,IAAI,GAAG,WAAW,GAAG,EAAE;EAClD,oBAAoB,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI;EACnD,oBAAoB,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE;EAC9C,mBAAmB;EACnB,kBAAkB;EAClB,gBAAgB;EAChB,cAAc;EACd,YAAY;EACZ,UAAU;;EAEV,UAAU,IAAI,eAAe,EAAE;EAC/B;EACA,YAAY,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;EACpC,YAAY;EACZ,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,IAAI,CAAC,eAAe,IAAI,OAAO,CAAC,IAAI,EAAE;EAC9C,UAAU,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;EAClC,QAAQ;EACR,MAAM;;EAEN,MAAM,OAAO,eAAe;EAC5B,IAAI,CAAC;;EAEL,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,SAAS,CAAC,EAAE,EAAE,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;EAEtF,IAAI,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,SAAS,CAAC,EAAE,EAAE,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;;EAElG;EACA,IAAI,MAAM,WAAW,GAAG,cAAc,CAAC,KAAK;EAC5C,IAAI,GAAG,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;EACvE,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA;EACA,IAAI,MAAM,eAAe,GAAG,cAAc,CAAC,QAAQ,IAAI,EAAE,CAAC;EAC1D,IAAI,MAAM,WAAW,GAAG,KAAK,CAAC;;EAE9B,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,4BAA4B,EAAE,eAAe,CAAC,KAAK,CAAC,CAAC;;EAEtE;EACA;;EAEA;EACA;EACA;EACA,IAAI,MAAM,SAAS,GAAG,UAAU,CAAC,GAAG,EAAE;;EAEtC;EACA;EACA,IAAI,IAAI,oBAAoB,GAAG,cAAc,CAAC;EAC9C,QAAQ,sBAAsB,CAAC,UAAU,EAAE,IAAI,CAAC;EAChD,QAAQ,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;;EAEvC;EACA,IAAI,oBAAoB,CAAC,SAAS,GAAG,WAAW,CAAC,UAAU,EAAE,KAAK;EAClE,IAAI,oBAAoB,CAAC,QAAQ,GAAG,WAAW,CAAC,UAAU,EAAE,IAAI;EAChE,IAAI,oBAAoB,CAAC,OAAO,GAAG,WAAW,CAAC,UAAU,EAAE,GAAG;;EAE9D;EACA,IAAI,MAAM,UAAU,GAAG,EAAE;EACzB,IAAI,MAAM,UAAU,GAAG,cAAc,CAAC,SAAS;;EAE/C,IAAI,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;;EAEpE;EACA,IAAI,MAAM,cAAc,GAAG,IAAI,GAAG,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;EACpD,IAAI,IAAI,mBAAmB,GAAG,CAAC,CAAC;EAChC,IAAI,IAAI,YAAY,GAAG,CAAC;EACxB,IAAI,IAAI,kBAAkB,GAAG,CAAC,CAAC;;EAE/B,IAAI,IAAI;EACR,MAAM,OAAO,IAAI,EAAE;EACnB,QAAQ,UAAU,EAAE;;EAEpB;EACA;EACA,QAAQ,MAAM,OAAO,GAAG,UAAU,CAAC,GAAG,EAAE,GAAG,SAAS;;EAEpD;EACA;EACA,QAAQ,IAAI,CAAC,UAAU,CAAC,YAAY,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,EAAE;EACpE,UAAU,IAAI,OAAO,IAAI,QAAQ,EAAE;EACnC,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,CAAC,OAAO,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,kBAAkB,CAAC,SAAS,EAAE,YAAY,CAAC,SAAS,CAAC,CAAC;EAClJ,YAAY;EACZ,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,IAAI,mBAAmB,IAAI,oBAAoB,CAAC,MAAM,EAAE;EAChE,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,4BAA4B,EAAE,YAAY,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,IAAI,EAAE,oBAAoB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;;EAEpJ;EACA,UAAU,IAAI,YAAY,IAAI,WAAW,EAAE;EAC3C,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,WAAW,CAAC,SAAS,CAAC,CAAC;EAC5E,YAAY;EACZ,UAAU;;EAEV,UAAU,MAAM,SAAS,GAAG,oBAAoB,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,CAAC;EACjF,UAAU,MAAM,eAAe,GAAG,oBAAoB,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,CAAC;;EAEvF;EACA,UAAU,IAAI,CAAC,eAAe,EAAE;EAChC,YAAY,OAAO,CAAC,KAAK,CAAC,0EAA0E,CAAC;EACrG,YAAY,OAAO,CAAC,KAAK,CAAC,CAAC,0CAA0C,EAAE,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC;EACrG,YAAY,OAAO,CAAC,KAAK,CAAC,mEAAmE,CAAC;EAC9F,YAAY;EACZ,UAAU;;EAEV,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,mCAAmC,EAAE,YAAY,GAAG,CAAC,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEnJ;EACA,UAAU,IAAI,WAAW,GAAG,MAAM,eAAe,CAAC,SAAS,EAAE,eAAe,EAAE,cAAc,CAAC;EAC7F,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,2BAA2B,EAAE,WAAW,GAAG,OAAO,GAAG,WAAW,CAAC,CAAC,CAAC;;EAE1F;EACA,UAAU,IAAI,CAAC,WAAW,EAAE;EAC5B,YAAY,MAAM,cAAc,GAAG,gBAAgB;EACnD,cAAc,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC;EACpD,cAAc,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;EACvC,aAAa;;EAEb;EACA,YAAY,MAAM,YAAY,GAAG,oBAAoB,CAAC,SAAS,IAAI,WAAW,CAAC,UAAU,EAAE,KAAK;EAChG,YAAY,MAAM,MAAM,GAAG,YAAY,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;;EAE9D;EACA;EACA,YAAY,MAAM,oBAAoB,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,cAAc,CAAC,YAAY,IAAI,KAAK,CAAC,CAAC;EAC/F,YAAY,WAAW,GAAG,mCAAmC;EAC7D,cAAc,SAAS;EACvB,cAAc,cAAc;EAC5B,cAAc,cAAc;EAC5B,cAAc,MAAM;EACpB,cAAc,EAAE,MAAM,EAAE,YAAY,EAAE,oBAAoB;EAC1D,aAAa;;EAEb,YAAY,IAAI,WAAW,EAAE;EAC7B,cAAc,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC;EACjF,cAAc,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;EAC9E,YAAY,CAAC,MAAM;EACnB,cAAc,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC;EACnE,YAAY;EACZ,UAAU;;EAEV;EACA,UAAU,IAAI,CAAC,WAAW,IAAI,cAAc,CAAC,mBAAmB,EAAE;EAClE,YAAY,OAAO,CAAC,GAAG,CAAC,+DAA+D,CAAC;;EAExF,YAAY,MAAM,cAAc,GAAG,gBAAgB;EACnD,cAAc,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC;EACpD,cAAc,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;EACvC,aAAa;;EAEb,YAAY,MAAM,YAAY,GAAG,MAAM,CAAC;EACxC,YAAY,MAAM,QAAQ,GAAG,CAAC,CAAC;EAC/B,YAAY,IAAI,SAAS,GAAG,IAAI;;EAEhC,YAAY,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE;EACvE;EACA,cAAc,MAAM,OAAO,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG;EAC9D,cAAc,MAAM,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACxF,cAAc,MAAM,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;;EAExF;EACA,cAAc,MAAM,YAAY,GAAG,oBAAoB,CAAC,SAAS,IAAI,WAAW,CAAC,UAAU,EAAE,KAAK;EAClG,cAAc,SAAS,GAAG,mCAAmC;EAC7D,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC;EACtC,gBAAgB,cAAc;EAC9B,gBAAgB,cAAc;EAC9B,gBAAgB,MAAM;EACtB,gBAAgB;EAChB,kBAAkB,MAAM,EAAE,YAAY,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE;EAC5D,kBAAkB,YAAY,EAAE,CAAC,cAAc,CAAC,YAAY,IAAI,KAAK,IAAI,GAAG;EAC5E;EACA,eAAe;;EAEf,cAAc,IAAI,SAAS,EAAE;EAC7B,gBAAgB,OAAO,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,GAAG,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;;EAEjH;EACA,gBAAgB,MAAM,kBAAkB,GAAG,EAAE;EAC7C,gBAAgB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,EAAE,EAAE;EAChD,kBAAkB,MAAM,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACnF,kBAAkB,MAAM,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACnF,kBAAkB,kBAAkB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;EACrD,gBAAgB;;EAEhB;EACA,gBAAgB,WAAW,GAAG;EAC9B,kBAAkB,GAAG,SAAS;EAC9B,kBAAkB,MAAM,EAAE,CAAC,GAAG,kBAAkB,EAAE,GAAG,SAAS,CAAC,MAAM;EACrE,iBAAiB;;EAEjB,gBAAgB,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;EACvF,cAAc;EACd,YAAY;;EAEZ,YAAY,IAAI,CAAC,SAAS,EAAE;EAC5B,cAAc,OAAO,CAAC,GAAG,CAAC,2FAA2F,CAAC;;EAEtH;EACA;EACA,cAAc,MAAM,qBAAqB,GAAG,YAAY,GAAG,QAAQ,CAAC;EACpE,cAAc,MAAM,OAAO,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG;;EAE9D;EACA,cAAc,MAAM,iBAAiB,GAAG,EAAE;EAC1C,cAAc,MAAM,eAAe,GAAG,EAAE;EACxC,cAAc,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,iBAAiB,EAAE,CAAC,EAAE,EAAE;EAC3D,gBAAgB,MAAM,QAAQ,GAAG,CAAC,GAAG,iBAAiB;EACtD,gBAAgB,MAAM,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,qBAAqB,GAAG,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EAC/F,gBAAgB,MAAM,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,qBAAqB,GAAG,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EAC/F,gBAAgB,eAAe,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;EAChD,cAAc;;EAEd,cAAc,WAAW,GAAG;EAC5B,gBAAgB,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE;EAC1F,gBAAgB,MAAM,EAAE,eAAe;EACvC,gBAAgB,QAAQ,EAAE,KAAK;EAC/B,gBAAgB,WAAW,EAAE,CAAC;EAC9B,gBAAgB,QAAQ,EAAE,CAAC;EAC3B,gBAAgB,SAAS,EAAE,IAAI;EAC/B,eAAe;;EAEf,cAAc,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;EACtF,YAAY;EACZ,UAAU;;EAEV,UAAU,IAAI,WAAW,EAAE;EAC3B;EACA;EACA;EACA;EACA,YAAY,IAAI,WAAW,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;EAC/C,cAAc,oBAAoB,GAAG,cAAc,CAAC;EACpD,kBAAkB,sBAAsB,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;EAC3E,kBAAkB,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;EAClE,YAAY,CAAC,MAAM;EACnB;EACA;EACA,cAAc,oBAAoB,GAAG,cAAc,CAAC;EACpD,kBAAkB,sBAAsB,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC;EAClE,kBAAkB,YAAY,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;EACzD,cAAc,OAAO,CAAC,GAAG,CAAC,CAAC,wCAAwC,EAAE,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,wBAAwB,CAAC,CAAC;EACzH,YAAY;EACZ;EACA,YAAY,oBAAoB,CAAC,SAAS,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK;EAC/E,YAAY,oBAAoB,CAAC,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI;EAC7E,YAAY,oBAAoB,CAAC,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG;;EAE3E,YAAY,mBAAmB,GAAG,CAAC;EACnC,YAAY,YAAY,EAAE;EAC1B,YAAY,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC;;EAEnD,YAAY,MAAM,YAAY,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,IAAI,MAAM;EAC7E,YAAY,MAAM,WAAW,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI;EACjE,YAAY,MAAM,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG;EAC/D,YAAY,MAAM,YAAY,GAAG,UAAU,IAAI,WAAW,IAAI,YAAY;;EAE1E;EACA,YAAY,MAAM,SAAS,GAAG,WAAW,CAAC,QAAQ,GAAG,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,KAAK;EACrG,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,YAAY,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC,CAAC;EAClF,wBAAwB,CAAC,CAAC,EAAE,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,WAAW,CAAC,QAAQ,GAAG,UAAU,GAAG,SAAS,CAAC,EAAE,CAAC;EAC/G,wBAAwB,CAAC,SAAS,EAAE,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE,CAAC;EACzF,yBAAyB,WAAW,CAAC,KAAK,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;EAC9F,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC,8BAA8B,EAAE,oBAAoB,CAAC,MAAM,CAAC,+BAA+B,CAAC,CAAC;;EAEtH;EACA,YAAY,IAAI,OAAO,CAAC,aAAa,EAAE;EACvC,cAAc,IAAI;EAClB;EACA,gBAAgB,MAAM,SAAS,GAAG,UAAU,CAAC,GAAG,EAAE,GAAG,SAAS;;EAE9D,gBAAgB,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC;EAC3C,kBAAkB,IAAI,EAAE,SAAS;EACjC,kBAAkB,UAAU,EAAE;EAC9B,oBAAoB,IAAI,EAAE,WAAW,IAAI,SAAS;EAClD,oBAAoB,GAAG,EAAE,UAAU,IAAI,EAAE;EACzC,oBAAoB,KAAK,EAAE,YAAY;EACvC,oBAAoB,UAAU,EAAE,YAAY;EAC5C,oBAAoB,QAAQ,EAAE,WAAW,CAAC,QAAQ;EAClD,oBAAoB,WAAW,EAAE,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;EAC/E,oBAAoB,SAAS,EAAE,UAAU,CAAC,SAAS,CAAC;EACpD,oBAAoB,KAAK,EAAE,WAAW,CAAC,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;EAC9F,oBAAoB,SAAS,EAAE,WAAW,CAAC,MAAM,CAAC,MAAM;EACxD,oBAAoB,MAAM,EAAE,WAAW,CAAC,IAAI,CAAC,EAAE;EAC/C,oBAAoB,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;EACtD,oBAAoB,KAAK,EAAE,OAAO,CAAC,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG;EAC1F,mBAAmB;EACnB,kBAAkB,QAAQ,EAAE;EAC5B,oBAAoB,IAAI,EAAE,YAAY;EACtC,oBAAoB,WAAW,EAAE,WAAW,CAAC;EAC7C;EACA,iBAAiB,CAAC;;EAElB;EACA,gBAAgB,MAAM,WAAW,GAAG,GAAG,CAAC,SAAS,CAAC,yBAAyB,CAAC;EAC5E,gBAAgB,IAAI,WAAW,EAAE;EACjC,kBAAkB,WAAW,CAAC,OAAO,CAAC;EACtC,oBAAoB,IAAI,EAAE,mBAAmB;EAC7C,oBAAoB,QAAQ,EAAE,OAAO,CAAC;EACtC,mBAAmB,CAAC;EACpB,kBAAkB,OAAO,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,YAAY,CAAC,0BAA0B,EAAE,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;EAC1I,gBAAgB;EAChB,cAAc,CAAC,CAAC,OAAO,KAAK,EAAE;EAC9B,gBAAgB,OAAO,CAAC,KAAK,CAAC,yCAAyC,EAAE,KAAK,CAAC;EAC/E,cAAc;EACd,YAAY;;EAEZ,YAAY,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,YAAY,CAAC,UAAU,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;EACzG,UAAU,CAAC,MAAM;EACjB;EACA,YAAY,OAAO,CAAC,KAAK,CAAC,CAAC,8DAA8D,EAAE,YAAY,CAAC,SAAS,CAAC,CAAC;EACnH,YAAY,OAAO,CAAC,KAAK,CAAC,mFAAmF,CAAC;EAC9G,YAAY,OAAO,CAAC,KAAK,CAAC,CAAC,4BAA4B,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChH,YAAY,OAAO,CAAC,KAAK,CAAC,CAAC,iCAAiC,EAAE,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;EACnG,YAAY,cAAc,CAAC,KAAK,EAAE,CAAC;EACnC,YAAY;EACZ,UAAU;EACV,QAAQ;;EAER;EACA,QAAQ,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,oBAAoB,CAAC,mBAAmB,CAAC;EACpE,QAAQ,MAAM,YAAY,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;;EAEzC;EACA,QAAQ,IAAI,YAAY,GAAG,GAAG,CAAC;EAC/B,QAAQ,IAAI,OAAO,GAAG,cAAc;;EAEpC,QAAQ,IAAI,mBAAmB,GAAG,oBAAoB,CAAC,MAAM,GAAG,CAAC,EAAE;EACnE,UAAU,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,oBAAoB,CAAC,mBAAmB,GAAG,CAAC,CAAC;EAClF,UAAU,OAAO,GAAG,gBAAgB,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,CAAC;;EAEhE;EACA,UAAU,MAAM,UAAU,GAAG,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,CAAC;;EAE1E;EACA;EACA,UAAU,YAAY,GAAG,CAAC,UAAU,GAAG,eAAe,IAAI,IAAI,GAAG,IAAI;;EAErE;EACA;EACA,UAAU,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC;EACnD,QAAQ,CAAC,MAAM,IAAI,mBAAmB,GAAG,CAAC,EAAE;EAC5C;EACA,UAAU,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,oBAAoB,CAAC,mBAAmB,GAAG,CAAC,CAAC;EAClF,UAAU,OAAO,GAAG,gBAAgB,CAAC,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC;EAChE,QAAQ;;EAER;EACA,QAAQ,MAAM,SAAS,GAAG,GAAG,CAAC,qBAAqB,CAAC,YAAY,CAAC;EACjE,QAAQ,IAAI,UAAU,GAAG,cAAc,CAAC,IAAI;;EAE5C,QAAQ,IAAI,SAAS,KAAK,IAAI,IAAI,SAAS,IAAI,CAAC,EAAE;EAClD,UAAU,MAAM,WAAW,GAAG,SAAS,GAAG,IAAI;EAC9C,UAAU,MAAM,QAAQ,GAAG,cAAc,CAAC,IAAI;EAC9C,UAAU,MAAM,mBAAmB,GAAG,WAAW,GAAG,GAAG;EACvD,UAAU,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,QAAQ,GAAG,mBAAmB,CAAC;EACnE,QAAQ;;EAER;EACA,QAAQ,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;EACnC,QAAQ,IAAI,UAAU,CAAC,MAAM,GAAG,UAAU,EAAE;EAC5C,UAAU,UAAU,CAAC,KAAK,EAAE;EAC5B,QAAQ;EACR,QAAQ,MAAM,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM;;EAEtF;EACA,QAAQ,GAAG,CAAC,MAAM,CAAC;EACnB,UAAU,MAAM,EAAE,YAAY;EAC9B,UAAU,OAAO;EACjB,UAAU,IAAI,EAAE,YAAY;EAC5B,UAAU,KAAK,EAAE,WAAW;EAC5B,UAAU,QAAQ,EAAE,YAAY;EAChC,UAAU,SAAS,EAAE,IAAI;EACzB,UAAU,MAAM,EAAE,CAAC,IAAI,CAAC;EACxB,UAAU,WAAW,EAAE,IAAI;EAC3B,UAAU,cAAc,EAAE,CAAC;EAC3B,SAAS,CAAC;;EAEV,QAAQ,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;;EAEjC,QAAQ,mBAAmB,EAAE;EAC7B,QAAQ,kBAAkB,EAAE;;EAE5B;EACA,QAAQ,IAAI,kBAAkB,GAAG,EAAE,KAAK,CAAC,EAAE;EAC3C,UAAU,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,GAAG,QAAQ,IAAI,GAAG,CAAC,CAAC;EAC9E,UAAU,YAAY,CAAC,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,yBAAyB,EAAE,OAAO,CAAC,GAAG,EAAE,YAAY,CAAC,UAAU,CAAC,CAAC;EAC/G,QAAQ;EACR,MAAM;;EAEN,MAAM,YAAY,CAAC,CAAC,EAAE,EAAE,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;EACxD,IAAI,CAAC,SAAS;EACd;EACA,MAAM,IAAI,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;EACrE,QAAQ,MAAM,YAAY,GAAG;EAC7B,UAAU,IAAI,EAAE,mBAAmB;EACnC,UAAU,QAAQ,EAAE,OAAO,CAAC;EAC5B,SAAS;EACT,QAAQ,OAAO,CAAC,GAAG,CAAC,uCAAuC,GAAG,OAAO,CAAC,aAAa,CAAC,MAAM,GAAG,aAAa,CAAC;EAC3G,QAAQ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAC1D,MAAM;;EAEN;EACA,MAAM,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC;EAC1D,MAAM,wBAAwB,CAAC,OAAO,EAAE,GAAG,CAAC;;EAE5C;EACA,MAAM,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC;EAC/D,MAAM,IAAI;EACV,QAAQ,MAAM,YAAY,GAAG,+BAA+B;EAC5D,QAAQ,MAAM,aAAa,GAAG,yBAAyB;;EAEvD,QAAQ,IAAI,GAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;EACxC,UAAU,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC;EACvC,QAAQ;EACR,QAAQ,IAAI,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE;EAC1C,UAAU,GAAG,CAAC,YAAY,CAAC,aAAa,CAAC;EACzC,QAAQ;EACR,QAAQ,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC;EAC7D,MAAM,CAAC,CAAC,OAAO,KAAK,EAAE;EACtB,QAAQ,OAAO,CAAC,KAAK,CAAC,gDAAgD,EAAE,KAAK,CAAC;EAC9E,MAAM;EACN,IAAI;EACJ,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,eAAe,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EACnD,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,CAAC;EACjB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,mBAAmB;EAC/B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,WAAW,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC/C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,eAAe;EAC3B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,aAAa,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EACjD,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,GAAG;EACnB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,KAAK;EACjB,MAAM,IAAI,EAAE,iBAAiB;EAC7B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,WAAW,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC/C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,GAAG;EACnB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,GAAG;EACnB,MAAM,YAAY,EAAE,IAAI;EACxB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,cAAc;EAC1B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,cAAc,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAClD,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,iBAAiB;EAC7B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,WAAW,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC/C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,cAAc;EAC1B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,YAAY,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAChD,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,GAAG;EACnB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,IAAI;EACxB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,iBAAiB;EAC7B,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA,EAAE,SAAS,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC7C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,YAAY;EACxB,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,gBAAgB,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC;EAC3C,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH,EAAE,SAAS,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC7C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,CAAC;EACjB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,IAAI;EAChB,MAAM,IAAI,EAAE,WAAW;EACvB,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,gBAAgB,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC;EACpD,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH,EAAE,QAAQ,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC5C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,CAAC;EAClB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,GAAG;EACf,MAAM,IAAI,EAAE,UAAU;EACtB,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,gBAAgB,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;EAC1C,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH,EAAE,UAAU,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK;EAC9C,IAAI,MAAM,OAAO,GAAG;EACpB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,IAAI,EAAE,EAAE;EACd,MAAM,KAAK,EAAE,EAAE;EACf,MAAM,SAAS,EAAE,EAAE;EACnB,MAAM,QAAQ,EAAE,EAAE;EAClB,MAAM,YAAY,EAAE,KAAK;EACzB,MAAM,eAAe,EAAE,KAAK;EAC5B,MAAM,IAAI,EAAE,KAAK;EACjB,MAAM,IAAI,EAAE,aAAa;EACzB,MAAM,mBAAmB,EAAE,IAAI;EAC/B,MAAM,gBAAgB,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;EAC1C,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK;EACL,IAAI,OAAO,gBAAgB,CAAC,2BAA2B,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EACvF,EAAE,CAAC;;EAEH;EACA;EACA;EACA;EACA;EACA,EAAE,UAAU,EAAE,OAAO,GAAG,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;EACzE,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK;EAC9C,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC;EAC5C,IAAI,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,IAAI,EAAE;;EAErC,IAAI,YAAY,CAAC,sCAAsC,CAAC;;EAExD;EACA,IAAI,MAAM,SAAS,GAAG,UAAU,CAAC,GAAG,EAAE;EACtC,IAAI,MAAM,cAAc,GAAG,GAAG,CAAC,UAAU,EAAE;EAC3C,IAAI,MAAM,aAAa,GAAG,GAAG,CAAC,SAAS,EAAE;;EAEzC;EACA,IAAI,GAAG,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;EAC1D,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;EAC7B,IAAI,UAAU,EAAE;;EAEhB;EACA,IAAI,MAAM,OAAO,GAAG,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC;EAC3C,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC;EAC7B,IAAI,MAAM,eAAe,GAAG,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC,CAAC;EAC5D,IAAI,MAAM,cAAc,GAAG,eAAe,GAAG,MAAM,CAAC;;EAEpD,IAAI,IAAI,UAAU,GAAG,aAAa,CAAC,GAAG;EACtC,IAAI,IAAI,UAAU,GAAG,aAAa,CAAC,GAAG;EACtC,IAAI,IAAI,cAAc,GAAG,cAAc;;EAEvC;EACA,IAAI,IAAI,YAAY,GAAG,CAAC;;EAExB,IAAI,YAAY,CAAC,gBAAgB,CAAC;;EAElC,IAAI,OAAO,IAAI,EAAE;EACjB,MAAM,UAAU,EAAE;;EAElB;EACA,MAAM,MAAM,OAAO,GAAG,UAAU,CAAC,GAAG,EAAE,GAAG,SAAS;EAClD;EACA,MAAM,IAAI,CAAC,UAAU,CAAC,YAAY,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,EAAE;EAClE,QAAQ,IAAI,OAAO,IAAI,QAAQ,EAAE;EACjC,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,8BAA8B,EAAE,CAAC,OAAO,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACtF,UAAU;EACV,QAAQ;EACR,MAAM;;EAEN;EACA,MAAM,MAAM,CAAC,GAAG,OAAO,GAAG,IAAI;EAC9B,MAAM,YAAY,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,IAAI,IAAI;EAC/E,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC;;EAE7D,MAAM,cAAc,GAAG,cAAc,GAAG,YAAY;;EAEpD;EACA,MAAM,MAAM,OAAO,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG;EACtD,MAAM,UAAU,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;EACtD,MAAM,UAAU,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;;EAEtD;EACA,MAAM,GAAG,CAAC,MAAM,CAAC;EACjB,QAAQ,MAAM,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC;EACxC,QAAQ,OAAO,EAAE,cAAc;EAC/B,QAAQ,QAAQ,EAAE,YAAY;EAC9B,QAAQ,SAAS,EAAE;EACnB,OAAO,CAAC;;EAER,MAAM,MAAM,KAAK,CAAC,YAAY,CAAC;EAC/B,IAAI;;EAEJ,IAAI,YAAY,CAAC,yBAAyB,CAAC;EAC3C,EAAE;EACF,CAAC;;ECjrHD;EACA;EACA;EACA;EACA;EACA;;EAEO,MAAM,mBAAmB,CAAC;EACjC,EAAE,WAAW,GAAG;EAChB,IAAI,IAAI,CAAC,eAAe,GAAG,IAAI;EAC/B,IAAI,IAAI,CAAC,SAAS,GAAG,KAAK;EAC1B,IAAI,IAAI,CAAC,eAAe,GAAG,IAAI;EAC/B,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,MAAM,GAAG,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,EAAE;EAC1C;EACA,IAAI,IAAI,IAAI,CAAC,SAAS,EAAE;EACxB,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;EACtB,MAAM,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE;EAChC,IAAI;;EAEJ;EACA,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI;EACzB,IAAI,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,EAAE;EAChD,IAAI,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC;;EAErD;EACA,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM;;EAE9C,IAAI,IAAI;EACR;EACA,MAAM,MAAM,SAAS,CAAC,GAAG,EAAE;EAC3B,QAAQ,MAAM;EACd,QAAQ,YAAY,EAAE,OAAO,CAAC,YAAY,KAAK,MAAM,CAAC,CAAC,CAAC;EACxD,QAAQ,UAAU,EAAE,MAAM;EAC1B,UAAU,IAAI,MAAM,CAAC,OAAO,EAAE;EAC9B,YAAY,MAAM,IAAI,YAAY,CAAC,mBAAmB,EAAE,YAAY,CAAC;EACrE,UAAU;EACV,QAAQ;EACR,OAAO,CAAC;;EAER,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;EAC9B,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;EACpB,MAAM,IAAI,KAAK,CAAC,IAAI,KAAK,YAAY,EAAE;EACvC,QAAQ,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE;EAClC,MAAM;EACN,MAAM,MAAM,KAAK;EACjB,IAAI,CAAC,SAAS;EACd,MAAM,IAAI,CAAC,OAAO,EAAE;EACpB,IAAI;EACJ,EAAE;;EAEF;EACA;EACA;EACA,EAAE,MAAM,CAAC,GAAG,EAAE;EACd,IAAI,IAAI,IAAI,CAAC,eAAe,EAAE;EAC9B,MAAM,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE;EAClC,IAAI;;EAEJ;EACA,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,eAAe,EAAE;EACrC,MAAM,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;EACtC,IAAI;;EAEJ,IAAI,IAAI,CAAC,OAAO,EAAE;EAClB,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,IAAI,GAAG;EACT,IAAI,IAAI,IAAI,CAAC,eAAe,EAAE;EAC9B,MAAM,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE;EAClC,IAAI;;EAEJ,IAAI,IAAI,CAAC,OAAO,EAAE;EAClB,EAAE;;EAEF;EACA;EACA;EACA,EAAE,IAAI,OAAO,GAAG;EAChB,IAAI,OAAO,IAAI,CAAC,SAAS;EACzB,EAAE;;EAEF;EACA;EACA;EACA,EAAE,IAAI,OAAO,GAAG;EAChB,IAAI,OAAO,IAAI,CAAC,eAAe,EAAE,MAAM,CAAC,OAAO,IAAI,KAAK;EACxD,EAAE;;EAEF;EACA;EACA;EACA,EAAE,OAAO,GAAG;EACZ,IAAI,IAAI,CAAC,SAAS,GAAG,KAAK;EAC1B,IAAI,IAAI,CAAC,eAAe,GAAG,IAAI;EAC/B,IAAI,IAAI,CAAC,eAAe,GAAG,IAAI;EAC/B,EAAE;;EAEF;EACA;EACA;EACA,EAAE,gBAAgB,CAAC,GAAG,EAAE;EACxB,IAAI,OAAO;EACX,MAAM,MAAM,EAAE,GAAG,CAAC,SAAS,EAAE;EAC7B,MAAM,IAAI,EAAE,GAAG,CAAC,OAAO,EAAE;EACzB,MAAM,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE;EAC/B,MAAM,KAAK,EAAE,GAAG,CAAC,QAAQ;EACzB,KAAK;EACL,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,kBAAkB,GAAG;EACvB;EACA,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI;EAC5E,IAAI,OAAO,MAAM;EACjB,MAAM,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,EAAE;EACpC,QAAQ,MAAM,IAAI,YAAY,CAAC,mBAAmB,EAAE,YAAY,CAAC;EACjE,MAAM;EACN,IAAI,CAAC;EACL,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,MAAM,WAAW,CAAC,GAAG,EAAE,WAAW,EAAE;EACtC,IAAI,MAAM,WAAW;EACrB,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;;EAE7B;EACA,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI;EAC5E,IAAI,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,EAAE;EAClC,MAAM,MAAM,IAAI,YAAY,CAAC,mBAAmB,EAAE,YAAY,CAAC;EAC/D,IAAI;EACJ,EAAE;EACF;;ECtJA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,MAAM,kBAAkB,CAAC;EAChC,EAAE,WAAW,GAAG;EAChB,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI;EACtB,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI;EAC1B,IAAI,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;EAC1B,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC;EACvB,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;EAC9B,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,MAAM,MAAM,CAAC,OAAO,EAAE;EACxB,IAAI,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,GAAG,KAAK,EAAE,GAAG,OAAO;;EAEzF;EACA,IAAI,IAAI,CAAC,YAAY,GAAG,QAAQ;;EAEhC,IAAI,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE;EACrD,MAAM,KAAK;EACX,MAAM,MAAM;EACZ,MAAM,GAAG;EACT,MAAM,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC;EAChC,MAAM,QAAQ,EAAE,QAAQ,GAAG,gBAAgB,GAAG,yBAAyB;EACvE,MAAM,OAAO;EACb,MAAM;EACN,KAAK,CAAC;;EAEN;EACA,IAAI,IAAI,kBAAkB;EAC1B,IAAI,IAAI;EACR,MAAM,MAAM,YAAY,GAAG,IAAI,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;;EAEnE;EACA,MAAM,IAAI,YAAY,CAAC,MAAM,KAAK,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE;EAC1D,QAAQ,MAAM,IAAI,KAAK;EACvB,UAAU,CAAC,0CAA0C,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,YAAY,CAAC,MAAM,CAAC;EAC3G,SAAS;EACT,MAAM;;EAEN;EACA,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;EAC7D,QAAQ,MAAM,IAAI,KAAK;EACvB,UAAU,CAAC,6EAA6E,EAAE,YAAY,CAAC,QAAQ,CAAC;EAChH,SAAS;EACT,MAAM;;EAEN,MAAM,kBAAkB,GAAG,YAAY,CAAC,IAAI;EAC5C,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;EACpB,MAAM,MAAM,IAAI,KAAK;EACrB,QAAQ,CAAC,8BAA8B,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC;EAC1D,gBAAgB,CAAC,cAAc,EAAE,SAAS,CAAC;EAC3C,OAAO;EACP,IAAI;;EAEJ;EACA;EACA,IAAI,MAAM,UAAU,GAAG,kBAAkB,CAAC,OAAO,CAAC,gBAAgB,EAAE,wBAAwB,CAAC;EAC7F,IAAI,IAAI;EACR,MAAM,OAAO,CAAC,GAAG,CAAC,8CAA8C,EAAE,UAAU,CAAC;EAC7E,MAAM,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC;EAC1C,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;EACpB,MAAM,MAAM,IAAI,KAAK;EACrB,QAAQ,iGAAiG;EACzG,gBAAgB,CAAC,YAAY,EAAE,UAAU,CAAC,EAAE,CAAC;EAC7C,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC;EACxC,OAAO;EACP,IAAI;;EAEJ;EACA,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,KAAK;EACnC;EACA,MAAM,IAAI,CAAC,CAAC,IAAI,YAAY,WAAW,EAAE;EACzC,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,+BAA+B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACxH,MAAM,CAAC,MAAM;EACb,QAAQ,OAAO,CAAC,GAAG,CAAC,gCAAgC;EACpD,UAAU,OAAO,CAAC,CAAC,IAAI,KAAK,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;EACvE,MAAM;;EAEN,MAAM,IAAI,CAAC,CAAC,IAAI,YAAY,WAAW,EAAE;EACzC;EACA;EACA,QAAQ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;EACrC,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,+BAA+B,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;;EAE5G;EACA;EACA,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,EAAE;EACnD,UAAU,OAAO,CAAC,GAAG,CAAC,wDAAwD,CAAC;EAC/E,UAAU,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC;EACjC,UAAU,IAAI,CAAC,UAAU,GAAG,IAAI;EAChC,QAAQ;EACR,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,EAAE;EAC3D,QAAQ,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC;EAClD;EACA,QAAQ,IAAI,IAAI,CAAC,YAAY,EAAE;EAC/B,UAAU,IAAI,CAAC,YAAY,EAAE;EAC7B,UAAU,IAAI,CAAC,YAAY,GAAG,IAAI;EAClC,QAAQ;EACR,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,CAAC,IAAI,KAAK,SAAS,EAAE;EAC1D;EACA,QAAQ,OAAO,CAAC,GAAG,CAAC,8DAA8D,CAAC;;EAEnF;EACA,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE;EAC7B,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,4CAA4C,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;EAEzG;EACA,UAAU,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,KAAK,GAAG,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;EAC9F,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,2BAA2B,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;;EAEtE;EACA,UAAU,MAAM,UAAU,GAAG,IAAI,UAAU,CAAC,SAAS,CAAC;EACtD,UAAU,IAAI,MAAM,GAAG,CAAC;EACxB,UAAU,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,WAAW,EAAE;EAChD,YAAY,UAAU,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC;EACzD,YAAY,MAAM,IAAI,KAAK,CAAC,UAAU;EACtC,UAAU;;EAEV,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,gCAAgC,EAAE,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;EACvF,UAAU,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC;EAC5C,UAAU,IAAI,CAAC,UAAU,GAAG,IAAI;EAChC,QAAQ;EACR,MAAM,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,IAAI,KAAK,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE;EAC7D,QAAQ,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;EACnE,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE;EAC7B,UAAU,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;EAC/B,UAAU,IAAI,CAAC,UAAU,GAAG,IAAI;EAChC,QAAQ;EACR,MAAM,CAAC,MAAM;EACb,QAAQ,OAAO,CAAC,GAAG,CAAC,2CAA2C,EAAE,CAAC,CAAC,IAAI,CAAC;EACxE,MAAM;EACN,IAAI,CAAC;;EAEL;EACA,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,KAAK,KAAK;EACrC,MAAM,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC;EAC1D,MAAM,IAAI,IAAI,CAAC,UAAU,EAAE;EAC3B,QAAQ,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;EAC9B,QAAQ,IAAI,CAAC,UAAU,GAAG,IAAI;EAC9B,MAAM;EACN,IAAI,CAAC;;EAEL;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC;EAC7D,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC;;EAEpC;EACA,IAAI,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;EAC3C,MAAM,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM;EACvC,QAAQ,IAAI,CAAC,YAAY,GAAG,IAAI;EAChC,QAAQ,MAAM,CAAC,IAAI,KAAK;EACxB,UAAU,sCAAsC;EAChD,oBAAoB;EACpB,SAAS,CAAC;EACV,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;;EAEhB;EACA,MAAM,IAAI,CAAC,YAAY,GAAG,MAAM;EAChC,QAAQ,YAAY,CAAC,OAAO,CAAC;EAC7B,QAAQ,OAAO,EAAE;EACjB,MAAM,CAAC;EACP,IAAI,CAAC,CAAC;;EAEN;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC;EACrD,IAAI,MAAM,MAAM,GAAG;EACnB,MAAM,KAAK;EACX,MAAM,MAAM;EACZ,MAAM,OAAO;EACb,MAAM,QAAQ;EACd,KAAK;EACL,IAAI,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC;EACxD,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC;;EAEnC;EACA,IAAI,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;;EAE1D,IAAI,OAAO,CAAC,GAAG,CAAC,iEAAiE,CAAC;EAClF,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,QAAQ,CAAC,UAAU,EAAE;EACvB,IAAI,IAAI,CAAC,UAAU,EAAE;EACrB,IAAI,IAAI,IAAI,CAAC,UAAU,GAAG,EAAE,KAAK,CAAC,EAAE;EACpC,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,8BAA8B,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;EACrE,IAAI;;EAEJ;EACA,IAAI,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;EAC/B,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,0CAA0C,EAAE,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;EAC7F,IAAI;;EAEJ;EACA;EACA;EACA,IAAI,MAAM,MAAM,GAAG,IAAI,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC;EACzD,IAAI,MAAM,IAAI,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC;EACvC,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;;EAExB;EACA;EACA,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC;EACnC,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,MAAM,GAAG,GAAG;EACd,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,oCAAoC,EAAE,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC;;EAE3I;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,qDAAqD,CAAC;EACtE,IAAI,IAAI;EACR,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;EACnC,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;EACpB,MAAM,OAAO,CAAC,KAAK,CAAC,oCAAoC,EAAE,KAAK,CAAC;EAChE,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;EACxE,IAAI;;EAEJ;EACA,IAAI,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;EAC5C;EACA,MAAM,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM;EACvC,QAAQ,OAAO,CAAC,KAAK,CAAC,2DAA2D,CAAC;EAClF,QAAQ,OAAO,CAAC,KAAK,CAAC,CAAC,iCAAiC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;EACpF,QAAQ,MAAM,CAAC,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;EAClF,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;;EAEhB;EACA,MAAM,IAAI,CAAC,UAAU,GAAG,CAAC,SAAS,KAAK;EACvC,QAAQ,YAAY,CAAC,OAAO,CAAC;EAC7B,QAAQ,IAAI,SAAS,EAAE;EACvB,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC,6CAA6C,EAAE,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;EACnG,UAAU,OAAO,CAAC,SAAS,CAAC;EAC5B,QAAQ,CAAC,MAAM;EACf,UAAU,MAAM,CAAC,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;EACnE,QAAQ;EACR,MAAM,CAAC;EACP,IAAI,CAAC,CAAC;EACN,EAAE;;EAEF;EACA;EACA;EACA,EAAE,OAAO,GAAG;EACZ,IAAI,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC;EACpD,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;EACrB,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;EAC7B,MAAM,IAAI,CAAC,MAAM,GAAG,IAAI;EACxB,IAAI;EACJ,IAAI,IAAI,CAAC,WAAW,GAAG,EAAE;EACzB,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI;EAC1B,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC;EACvB,EAAE;EACF;;ECxRA;EACA;EACA;EACA;EACA;;;EA8DA,MAAM,OAAO,GAAG,CAAC,MAAM,4CAA4C,MAAM,CAAC;;EAE1E;EACA;EACA;EACA;EACA;EACA,MAAM,QAAQ,GAAG,CAAC,MAAM,6CAA6C,MAAM,CAAC;;EAE5E;EACA;EACA;EACA;EACA;EACA,MAAM,aAAa,GAAG,CAAC,OAAO,uCAAuC,OAAO,CAAC;;EAE7E;EACA;EACA;EACA;EACA;EACA,MAAM,QAAQ,GAAG,CAAC,OAAO,6CAA6C,OAAO,CAAC;;EAE9E;;EAEA;EACA,MAAM,eAAe,GAAG,yCAAyC;EACjE,MAAM,uBAAuB,GAAG,8CAA8C;;EAE9E;EACA;EACA,MAAM,kBAAkB,GAAG,MAAM;EACjC,EAAE,IAAI;EACN,IAAI,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,oLAAe,CAAC;EACxC,IAAI,MAAM,IAAI,GAAG,GAAG,CAAC,QAAQ;EAC7B,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;EACvD,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE;EACd,IAAI,OAAO,IAAI;EACf,EAAE;EACF,CAAC;;EAED;EACA,MAAM,cAAc,GAAG,MAAM;EAC7B,EAAE,OAAO,OAAO,YAAY,KAAK,WAAW;EAC5C,WAAW,OAAO,UAAU,KAAK,WAAW;EAC5C,CAAC;;EAED;EACA,MAAM,gBAAgB,GAAG,MAAM;EAC/B,EAAE,IAAI,cAAc,EAAE,EAAE;EACxB,IAAI,OAAO,CAAC,GAAG,CAAC,4EAA4E,CAAC;EAC7F,IAAI,OAAO,UAAU;EACrB,EAAE;EACF,EAAE,OAAO,CAAC,GAAG,CAAC,mDAAmD,CAAC;EAClE,EAAE,OAAO,UAAU;EACnB,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,kBAAkB,GAAG;EAC3B;EACA,EAAE,KAAK,EAAE;EACT,IAAI,KAAK,EAAE,4CAA4C;EACvD,IAAI,WAAW,EAAE,0JAA0J;EAC3K,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,KAAK,QAAQ,CAAC,uBAAuB,CAAC,OAAO,EAAE,OAAO;EAChG,GAAG;;EAEH;EACA,EAAE,KAAK,EAAE;EACT,IAAI,KAAK,EAAE,eAAe;EAC1B,IAAI,WAAW,EAAE,+HAA+H;EAChJ,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,OAAO;EAClB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM;EACzC,MAAM,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI;EAC3F,KAAK;EACL,GAAG;EACH,EAAE,KAAK,EAAE;EACT,IAAI,KAAK,EAAE,eAAe;EAC1B,IAAI,WAAW,EAAE,+GAA+G;EAChI,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,OAAO;EAClB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM;EACzC,MAAM,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI;EAC5F,KAAK;EACL,GAAG;EACH,EAAE,SAAS,EAAE;EACb,IAAI,KAAK,EAAE,eAAe;EAC1B,IAAI,WAAW,EAAE,qHAAqH;EACtI,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,OAAO;EAClB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM;EACzC,MAAM,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI;EAC5F,KAAK;EACL,GAAG;EACH,EAAE,UAAU,EAAE;EACd,IAAI,KAAK,EAAE,gBAAgB;EAC3B,IAAI,WAAW,EAAE,gHAAgH;EACjI,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,OAAO;EAClB,IAAI,QAAQ,EAAE,CAAC,WAAW,CAAC;EAC3B;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM;EACzC,MAAM,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI;EAC7F,KAAK;EACL,GAAG;EACH,EAAE,QAAQ,EAAE;EACZ,IAAI,KAAK,EAAE,aAAa;EACxB,IAAI,WAAW,EAAE,iHAAiH;EAClI,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,OAAO;EAClB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM;EACzC,MAAM,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI;EAC3F,KAAK;EACL,GAAG;;EAEH;EACA,EAAE,YAAY,EAAE;EAChB,IAAI,KAAK,EAAE,2BAA2B;EACtC,IAAI,WAAW,EAAE,oJAAoJ;EACrK,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC;EACzC;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,YAAY,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACvI,GAAG;EACH,EAAE,QAAQ,EAAE;EACZ,IAAI,KAAK,EAAE,sBAAsB;EACjC,IAAI,WAAW,EAAE,4JAA4J;EAC7K,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,CAAC,iBAAiB,CAAC;EACjC;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EAC3I,GAAG;EACH,EAAE,OAAO,EAAE;EACX,IAAI,KAAK,EAAE,mBAAmB;EAC9B,IAAI,WAAW,EAAE,kJAAkJ;EACnK,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,aAAa,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACxI,GAAG;EACH,EAAE,QAAQ,EAAE;EACZ,IAAI,KAAK,EAAE,oBAAoB;EAC/B,IAAI,WAAW,EAAE,sHAAsH;EACvI,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACnI,GAAG;EACH,EAAE,MAAM,EAAE;EACV,IAAI,KAAK,EAAE,iBAAiB;EAC5B,IAAI,WAAW,EAAE,6HAA6H;EAC9I,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,WAAW,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACtI,GAAG;EACH,EAAE,SAAS,EAAE;EACb,IAAI,KAAK,EAAE,eAAe;EAC1B,IAAI,WAAW,EAAE,yIAAyI;EAC1J,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACpI,GAAG;EACH,EAAE,gBAAgB,EAAE;EACpB,IAAI,KAAK,EAAE,uBAAuB;EAClC,IAAI,WAAW,EAAE,uIAAuI;EACxJ,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,CAAC,aAAa,EAAE,eAAe,CAAC;EAC9C;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EAC3I,GAAG;EACH,EAAE,aAAa,EAAE;EACjB,IAAI,KAAK,EAAE,mBAAmB;EAC9B,IAAI,WAAW,EAAE,iJAAiJ;EAClK,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,aAAa,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACxI,GAAG;EACH,EAAE,SAAS,EAAE;EACb,IAAI,KAAK,EAAE,cAAc;EACzB,IAAI,WAAW,EAAE,mIAAmI;EACpJ,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACpI,GAAG;EACH,EAAE,OAAO,EAAE;EACX,IAAI,KAAK,EAAE,YAAY;EACvB,IAAI,WAAW,EAAE,yIAAyI;EAC1J,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,OAAO,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EAClI,GAAG;EACH,EAAE,MAAM,EAAE;EACV,IAAI,KAAK,EAAE,gBAAgB;EAC3B,IAAI,WAAW,EAAE,iIAAiI;EAClJ,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,WAAW;EACtB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,KAAK,gBAAgB,CAAC,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;EACrI,GAAG;;EAEH;EACA,EAAE,eAAe,EAAE;EACnB,IAAI,KAAK,EAAE,sBAAsB;EACjC,IAAI,WAAW,EAAE,2IAA2I;EAC5J,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,eAAe,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EAC3F,GAAG;EACH,EAAE,WAAW,EAAE;EACf,IAAI,KAAK,EAAE,kBAAkB;EAC7B,IAAI,WAAW,EAAE,qIAAqI;EACtJ,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,WAAW,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACvF,GAAG;EACH,EAAE,aAAa,EAAE;EACjB,IAAI,KAAK,EAAE,qBAAqB;EAChC,IAAI,WAAW,EAAE,uHAAuH;EACxI,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,aAAa,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACzF,GAAG;EACH,EAAE,SAAS,EAAE;EACb,IAAI,KAAK,EAAE,eAAe;EAC1B,IAAI,WAAW,EAAE,6GAA6G;EAC9H,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,aAAa,CAAC;EAC7B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACrF,GAAG;EACH,EAAE,SAAS,EAAE;EACb,IAAI,KAAK,EAAE,cAAc;EACzB,IAAI,WAAW,EAAE,6GAA6G;EAC9H,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,cAAc,CAAC;EAC9B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACrF,GAAG;EACH,EAAE,QAAQ,EAAE;EACZ,IAAI,KAAK,EAAE,YAAY;EACvB,IAAI,WAAW,EAAE,gHAAgH;EACjI,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,QAAQ,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACpF,GAAG;EACH,EAAE,UAAU,EAAE;EACd,IAAI,KAAK,EAAE,iBAAiB;EAC5B,IAAI,WAAW,EAAE,gIAAgI;EACjJ,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACtF,GAAG;EACH,EAAE,WAAW,EAAE;EACf,IAAI,KAAK,EAAE,iBAAiB;EAC5B,IAAI,WAAW,EAAE,oIAAoI;EACrJ,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,WAAW,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACvF,GAAG;EACH,EAAE,cAAc,EAAE;EAClB,IAAI,KAAK,EAAE,oBAAoB;EAC/B,IAAI,WAAW,EAAE,4GAA4G;EAC7H,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,cAAc,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EAC1F,GAAG;EACH,EAAE,YAAY,EAAE;EAChB,IAAI,KAAK,EAAE,qBAAqB;EAChC,IAAI,WAAW,EAAE,0HAA0H;EAC3I,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,KAAK,gBAAgB,CAAC,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EACxF,GAAG;EACH,EAAE,WAAW,EAAE;EACf,IAAI,KAAK,EAAE,iBAAiB;EAC5B,IAAI,WAAW,EAAE,qHAAqH;EACtI,IAAI,mBAAmB,EAAE,IAAI;EAC7B,IAAI,KAAK,EAAE,MAAM;EACjB,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;EAC1B;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,KAAK,gBAAgB,CAAC,YAAY,CAAC,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE;EACnI,GAAG;;EAEH;EACA,EAAE,YAAY,EAAE;EAChB,IAAI,KAAK,EAAE,yBAAyB;EACpC,IAAI,WAAW,EAAE,gKAAgK;EACjL,IAAI,mBAAmB,EAAE,KAAK;EAC9B,IAAI,KAAK,EAAE,UAAU;EACrB,IAAI,QAAQ,EAAE,EAAE;EAChB;EACA,IAAI,IAAI,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,KAAK,gBAAgB,CAAC,YAAY,CAAC,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE;EACnI;EACA,CAAC;;EAED;EACA,MAAM,gBAAgB,GAAG;EACzB,EAAE,IAAI,EAAE,SAAS;EACjB,EAAE,KAAK,EAAE,wBAAwB;EACjC,EAAE,SAAS,EAAE,oBAAoB;EACjC,EAAE,IAAI,EAAE,oBAAoB;EAC5B,EAAE,QAAQ,EAAE;EACZ,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA,MAAM,kBAAkB,CAAC;EACzB;EACA,EAAE,OAAO,gBAAgB,GAAG;EAC5B;EACA,IAAI,eAAe,EAAE,MAAM;EAC3B,IAAI,mBAAmB,EAAE,MAAM;EAC/B,IAAI,aAAa,EAAE,IAAI;EACvB,IAAI,UAAU,EAAE,GAAG;EACnB,IAAI,QAAQ,EAAE,EAAE;EAChB,IAAI,WAAW,EAAE,UAAU;EAC3B,IAAI,YAAY,EAAE,MAAM;EACxB,IAAI,eAAe,EAAE,IAAI;EACzB,IAAI,2BAA2B,EAAE,KAAK;;EAEtC;EACA,IAAI,cAAc,EAAE,OAAO;EAC3B,IAAI,SAAS,EAAE,OAAO;EACtB,IAAI,uBAAuB,EAAE,KAAK;EAClC,IAAI,qBAAqB,EAAE,GAAG;;EAE9B;EACA,IAAI,gBAAgB,EAAE,EAAE;EACxB,IAAI,gBAAgB,EAAE,EAAE;EACxB,IAAI,iBAAiB,EAAE,EAAE;EACzB,IAAI,iBAAiB,EAAE,EAAE;EACzB,IAAI,aAAa,EAAE,EAAE;EACrB,IAAI,aAAa,EAAE,EAAE;EACrB,IAAI,kBAAkB,EAAE,KAAK;EAC7B,IAAI,gBAAgB,EAAE,IAAI;;EAE1B;EACA,IAAI,cAAc,EAAE,GAAG;EACvB,IAAI,WAAW,EAAE,OAAO;EACxB,IAAI,YAAY,EAAE,IAAI;EACtB,IAAI,uBAAuB,EAAE,EAAE;EAC/B,IAAI,gBAAgB,EAAE,MAAM;EAC5B,IAAI,gBAAgB,EAAE,SAAS;EAC/B,IAAI,qBAAqB,EAAE,UAAU;EACrC,IAAI,iBAAiB,EAAE,GAAG;EAC1B,IAAI,qBAAqB,EAAE;EAC3B,GAAG;;EAEH;EACA;EACA;EACA,EAAE,WAAW,CAAC,OAAO,GAAG,EAAE,EAAE;EAC5B,IAAI,IAAI,CAAC,OAAO,GAAG;EACnB;EACA,MAAM,UAAU,EAAE,OAAO,CAAC,UAAU,IAAI,MAAM;EAC9C,MAAM,GAAG,EAAE,OAAO,CAAC,GAAG,IAAI,EAAE;EAC5B,MAAM,OAAO,EAAE,OAAO,CAAC,OAAO,KAAK,SAAS,GAAG,OAAO,CAAC,OAAO,GAAG,MAAM;EACvE,MAAM,eAAe,EAAE,OAAO,CAAC,eAAe,IAAI,CAAC;EACnD,MAAM,YAAY,EAAE,OAAO,CAAC,YAAY,KAAK,SAAS,GAAG,OAAO,CAAC,YAAY,GAAG,IAAI;;EAEpF;EACA,MAAM,QAAQ,EAAE,OAAO,CAAC,QAAQ,IAAI,UAAU;EAC9C,MAAM,SAAS,EAAE,OAAO,CAAC,SAAS,KAAK,KAAK;EAC5C,MAAM,eAAe,EAAE,OAAO,CAAC,eAAe,IAAI,UAAU;;EAE5D;EACA,MAAM,SAAS,EAAE,OAAO,CAAC,SAAS,IAAI,OAAO;EAC7C,MAAM,QAAQ,EAAE,OAAO,CAAC,QAAQ,IAAI,KAAK;EACzC,MAAM,IAAI,EAAE,OAAO,CAAC,IAAI,IAAI,KAAK;;EAEjC;EACA,MAAM,uBAAuB,EAAE,OAAO,CAAC,uBAAuB,KAAK,SAAS,GAAG,OAAO,CAAC,uBAAuB,GAAG,KAAK;EACtH,MAAM,sBAAsB,EAAE,OAAO,CAAC,sBAAsB,IAAI,MAAM;;EAEtE;EACA,MAAM,SAAS,EAAE,OAAO,CAAC,SAAS,IAAI,IAAI;EAC1C,MAAM,OAAO,EAAE,OAAO,CAAC,OAAO,KAAK,SAAS,GAAG,OAAO,CAAC,OAAO,GAAG,IAAI;EACrE,MAAM,OAAO,EAAE,OAAO,CAAC,OAAO,KAAK,SAAS,GAAG,OAAO,CAAC,OAAO,GAAG,IAAI;EACrE,MAAM,YAAY,EAAE,OAAO,CAAC,YAAY,IAAI,KAAK;EACjD,MAAM,iBAAiB,EAAE,OAAO,CAAC,iBAAiB,KAAK,SAAS,GAAG,OAAO,CAAC,iBAAiB,GAAG,KAAK;;EAEpG;EACA,MAAM,SAAS,EAAE,OAAO,CAAC,SAAS,IAAI,IAAI;;EAE1C;EACA,MAAM,MAAM,EAAE,OAAO,CAAC,MAAM,IAAI,gBAAgB,EAAE;;EAElD;EACA,MAAM,WAAW,EAAE,OAAO,CAAC,WAAW,IAAI,IAAI;EAC9C,MAAM,UAAU,EAAE,OAAO,CAAC,UAAU,IAAI,eAAe;;EAEvD;EACA,MAAM,OAAO,EAAE,OAAO,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;EAC5C,MAAM,UAAU,EAAE,OAAO,CAAC,UAAU,KAAK,MAAM,CAAC,CAAC,CAAC;EAClD,MAAM,UAAU,EAAE,OAAO,CAAC,UAAU,KAAK,MAAM,CAAC,CAAC,CAAC;EAClD,MAAM,OAAO,EAAE,OAAO,CAAC,OAAO,KAAK,CAAC,GAAG,KAAK,OAAO,CAAC,KAAK,CAAC,qBAAqB,EAAE,GAAG,CAAC;EACrF,KAAK;;EAEL,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI;EACpB,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI;EAC1B,IAAI,IAAI,CAAC,oBAAoB,GAAG,IAAI,mBAAmB,EAAE;EACzD,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI;EACxB,IAAI,IAAI,CAAC,cAAc,GAAG,KAAK;;EAE/B;EACA;EACA,IAAI,IAAI,CAAC,YAAY,GAAG,EAAE;EAC1B;EACA,IAAI,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;EAC/B,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;EAC9B,IAAI,IAAI,CAAC,yBAAyB,GAAG,SAAS,CAAC;EAC/C,IAAI,IAAI,CAAC,iBAAiB,GAAG,8BAA8B,CAAC;EAC5D,IAAI,IAAI,CAAC,kBAAkB,GAAG,+BAA+B,CAAC;;EAE9D;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,EAAE;EACnE;EACA,MAAM,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,EAAE;EACpD,IAAI;;EAEJ;EACA,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;EAC7B,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;EAC5B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;EAE9B;EACA,IAAI,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;;EAEzB;EACA;EACA,IAAI,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;EAC9B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;EAC9B,IAAI,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;;EAErC;EACA,IAAI,IAAI,CAAC,mBAAmB,GAAG,IAAI;EACnC,EAAE;;EAEF,EAAE,KAAK,CAAC,GAAG,EAAE;EACb,IAAI,IAAI,CAAC,IAAI,GAAG,GAAG;;EAEnB;EACA,IAAI,IAAI,CAAC,qBAAqB,EAAE;EAChC,IAAI,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EACnD,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,+CAA+C;;EAE/E,IAAI,IAAI,CAAC,SAAS,EAAE;EACpB;;EAEA;EACA,IAAI,IAAI,GAAG,CAAC,aAAa,EAAE,EAAE;EAC7B,MAAM,OAAO,CAAC,GAAG,CAAC,8EAA8E,CAAC;EACjG,MAAM,IAAI,CAAC,qBAAqB,EAAE;EAClC,MAAM,IAAI,CAAC,gBAAgB,EAAE;EAC7B,MAAM,IAAI,CAAC,uBAAuB,EAAE;EACpC;EACA,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;EACnH,QAAQ,UAAU,CAAC,MAAM;EACzB,UAAU,IAAI,CAAC,qBAAqB,EAAE;EACtC,UAAU,IAAI,CAAC,sBAAsB,EAAE;EACvC,UAAU,IAAI,CAAC,kBAAkB,EAAE;EACnC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC;EAChB,MAAM;EACN,IAAI,CAAC,MAAM;EACX,MAAM,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC;EACnE,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM;EAC7B,QAAQ,OAAO,CAAC,GAAG,CAAC,sEAAsE,CAAC;EAC3F,QAAQ,IAAI,CAAC,qBAAqB,EAAE;EACpC,QAAQ,IAAI,CAAC,gBAAgB,EAAE;EAC/B,QAAQ,IAAI,CAAC,uBAAuB,EAAE;EACtC;EACA,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;EACrH,UAAU,UAAU,CAAC,MAAM;EAC3B,YAAY,IAAI,CAAC,qBAAqB,EAAE;EACxC,YAAY,IAAI,CAAC,sBAAsB,EAAE;EACzC,YAAY,IAAI,CAAC,kBAAkB,EAAE;EACrC,UAAU,CAAC,EAAE,GAAG,CAAC,CAAC;EAClB,QAAQ;EACR,MAAM,CAAC,CAAC;EACR,IAAI;;EAEJ,IAAI,OAAO,IAAI,CAAC,UAAU;EAC1B,EAAE;;EAEF,EAAE,QAAQ,GAAG;EACb;EACA,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;EACvB,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;EACjC,QAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;EAChC,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;EACvC,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;EAC/B,MAAM;EACN,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI;EAC1B,IAAI;;EAEJ;EACA,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE;EAClD,IAAI,IAAI,YAAY,EAAE;EACtB,MAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;EACrD,QAAQ,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC;EAC3D,MAAM;EACN,MAAM,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;EACjD,QAAQ,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC;EACvD,MAAM;EACN,IAAI;;EAEJ;EACA,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;EACvD,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;EAC7D,IAAI;;EAEJ,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI;EACxB,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI;EACtB,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI;EAC1B,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI;EACpB,EAAE;;EAEF;EACA;EACA;EACA,EAAE,qBAAqB,GAAG;EAC1B;EACA;EACA;EACA,IAAI,MAAM,cAAc,GAAG,OAAO,UAAU,KAAK,WAAW;EAC5D;EACA,8BAA8B,OAAO,UAAU,CAAC,MAAM,KAAK,UAAU;EACrE,8BAA8B,OAAO,UAAU,CAAC,UAAU,KAAK,UAAU;EACzE,8BAA8B,OAAO,UAAU,CAAC,YAAY,KAAK,UAAU;;EAE3E,IAAI,IAAI,CAAC,cAAc,EAAE;EACzB;EACA,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,SAAS;EACpF,MAAM,MAAM,IAAI,KAAK;EACrB,QAAQ,oEAAoE;EAC5E,gBAAgB,qEAAqE;EACrF,gBAAgB,6CAA6C;EAC7D,gBAAgB,mBAAmB,GAAG;EACtC,OAAO;EACP,IAAI;;EAEJ;EACA;EACA,IAAI,MAAM,MAAM,GAAG,OAAO,UAAU,CAAC,GAAG,KAAK,UAAU;EACvD,IAAI,IAAI,CAAC,MAAM,EAAE;EACjB;EACA,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,SAAS;EACpF,MAAM,MAAM,IAAI,KAAK;EACrB,QAAQ,kFAAkF;EAC1F,gBAAgB,2GAA2G;EAC3H,gBAAgB,iFAAiF;EACjG,gBAAgB,mBAAmB,GAAG;EACtC,OAAO;EACP,IAAI;;EAEJ,IAAI,OAAO,CAAC,GAAG,CAAC,2EAA2E,CAAC;EAC5F,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,yBAAyB,GAAG;EAC9B,IAAI,MAAM,iBAAiB,GAAG,EAAE;;EAEhC;EACA,IAAI,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,OAAO,CAAC,KAAK;EACnE,MAAM,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;EAC7C,QAAQ,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE;EAC7C,MAAM;EACN,MAAM,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,OAAO,EAAE,CAAC;EAChE,IAAI,CAAC,CAAC;;EAEN;EACA,IAAI,IAAI,IAAI,GAAG,EAAE;EACjB,IAAI,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,EAAE,UAAU,CAAC,KAAK;EACzE,MAAM,IAAI,iBAAiB,CAAC,QAAQ,CAAC,EAAE;EACvC;EACA,QAAQ,MAAM,UAAU,GAAG,QAAQ,KAAK,MAAM,GAAG,yBAAyB,GAAG,EAAE;EAC/E,QAAQ,MAAM,OAAO,GAAG,QAAQ,KAAK,MAAM,GAAG,gCAAgC,GAAG,EAAE;;EAEnF,QAAQ,IAAI,IAAI,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC;;EAEzE,QAAQ,iBAAiB,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAI,IAAI;EACpD,UAAU,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW,GAAG,EAAE;EACjF,UAAU,IAAI,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;EAC7F,QAAQ,CAAC,CAAC;;EAEV,QAAQ,IAAI,IAAI,aAAa;EAC7B,MAAM;EACN,IAAI,CAAC,CAAC;;EAEN,IAAI,OAAO,IAAI;EACf,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,aAAa,GAAG;EAClB,IAAI,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,gCAAgC,CAAC;EACxE,IAAI,OAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,kBAAkB,CAAC,gBAAgB;EAC1E,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,cAAc,CAAC,QAAQ,EAAE;EAC3B;EACA,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,KAAK;EACtD;EACA,MAAM,IAAI,KAAK,KAAK,EAAE,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,EAAE;;EAEjE;EACA,MAAM,IAAI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;EAClC;EACA;EACA;EACA;EACA;EACA;EACA,QAAQ,IAAI,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;;EAEjD;EACA,QAAQ,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC;;EAE3D;EACA,QAAQ,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;EAC1D,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,OAAO,KAAK,QAAQ,EAAE;EACvD,UAAU,QAAQ,CAAC,KAAK,GAAG,QAAQ;EACnC,QAAQ;EACR,MAAM;EACN,IAAI,CAAC,CAAC;;EAEN;EACA,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,KAAK;EACtD,MAAM,MAAM,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC;EAC5C,MAAM,IAAI,CAAC,EAAE,EAAE;;EAEf,MAAM,IAAI,EAAE,CAAC,IAAI,KAAK,UAAU,EAAE;EAClC,QAAQ,EAAE,CAAC,OAAO,GAAG,KAAK;EAC1B,MAAM,CAAC,MAAM;EACb,QAAQ,EAAE,CAAC,KAAK,GAAG,KAAK;EACxB,MAAM;;EAEN;EACA,MAAM,EAAE,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;EAC3C,IAAI,CAAC,CAAC;EACN,EAAE;;EAEF;EACA;EACA;EACA;EACA;EACA,EAAE,aAAa,GAAG;EAClB,IAAI,MAAM,QAAQ,GAAG,EAAE;;EAEvB;EACA,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,0DAA0D,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI;EAC3G,MAAM,IAAI,EAAE,CAAC,IAAI,KAAK,UAAU,EAAE;EAClC,QAAQ,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,OAAO;EACpC,MAAM,CAAC,MAAM,IAAI,EAAE,CAAC,KAAK,KAAK,EAAE,EAAE;EAClC;EACA,QAAQ,IAAI,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;EACvC,UAAU,IAAI,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;EACtD;EACA,UAAU,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC;EAC7D,UAAU,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;;EAE5D;EACA,UAAU,IAAI,QAAQ,EAAE,KAAK,KAAK,QAAQ,EAAE;EAC5C,YAAY,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK;EACtC,UAAU;EACV,QAAQ,CAAC,MAAM;EACf,UAAU,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK;EACpC,QAAQ;EACR,MAAM;EACN,IAAI,CAAC,CAAC;;EAEN,IAAI,YAAY,CAAC,OAAO,CAAC,gCAAgC,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EACpF,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,cAAc,GAAG;EACnB,IAAI,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,iCAAiC,CAAC;EACzE,IAAI,IAAI,KAAK,EAAE;EACf,MAAM,IAAI;EACV,QAAQ,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;EAChC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE;EAClB,QAAQ,OAAO,CAAC,IAAI,CAAC,8CAA8C,EAAE,CAAC,CAAC;EACvE,MAAM;EACN,IAAI;EACJ,IAAI,OAAO;EACX,MAAM,IAAI,EAAE,mBAAmB;EAC/B,MAAM,QAAQ,EAAE;EAChB,KAAK;EACL,EAAE;;EAEF;EACA;EACA;EACA,EAAE,cAAc,GAAG;EACnB,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;EACjC,IAAI,IAAI;EACR,MAAM,YAAY,CAAC,OAAO,CAAC,iCAAiC,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;EACrG,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,MAAM,IAAI,CAAC,CAAC,0BAA0B,CAAC,CAAC;EAChH,IAAI,CAAC,CAAC,OAAO,CAAC,EAAE;EAChB,MAAM,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,CAAC,CAAC;EAC/D,IAAI;EACJ,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,kBAAkB,GAAG;EACvB,IAAI,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,gCAAgC,CAAC;EACxE,IAAI,MAAM,QAAQ,GAAG;EACrB,MAAM,gBAAgB,EAAE,KAAK;EAC7B,MAAM,KAAK,EAAE,KAAK;EAClB,MAAM,oBAAoB,EAAE,IAAI;EAChC,MAAM,wBAAwB,EAAE,IAAI;EACpC,KAAK;EACL,IAAI,OAAO,KAAK,GAAG,EAAE,GAAG,QAAQ,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,GAAG,QAAQ;EACnE,EAAE;;EAEF;EACA;EACA;EACA,EAAE,kBAAkB,GAAG;EACvB,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;EAC9B,IAAI,YAAY,CAAC,OAAO,CAAC,gCAAgC,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;EAC/F,EAAE;;EAEF;EACA;EACA;EACA;EACA,EAAE,cAAc,CAAC,SAAS,EAAE;EAC5B,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,EAAE;;EAE7E,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,eAAe,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;EAC9E,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,uBAAuB,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;EACvF,IAAI,MAAM,SAAS,GAAG,MAAM,EAAE,aAAa,CAAC,oBAAoB,CAAC;;EAEjE,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,EAAE;;EAE7B;EACA,IAAI,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;EACvD,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,GAAG,WAAW;;EAEhD;EACA,IAAI,IAAI,OAAO,YAAY,WAAW,EAAE;EACxC,MAAM,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,WAAW,GAAG,MAAM,GAAG,OAAO;EAC5D,IAAI;EACJ,IAAI,IAAI,SAAS,EAAE,SAAS,CAAC,WAAW,GAAG,WAAW,GAAG,GAAG,GAAG,GAAG;;EAElE;EACA,IAAI,IAAI,CAAC,kBAAkB,EAAE;;EAE7B,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,SAAS,CAAC,EAAE,EAAE,WAAW,GAAG,WAAW,GAAG,UAAU,CAAC,CAAC,CAAC;EACxF,EAAE;;EAEF,EAAE,gBAAgB,CAAC,SAAS,EAAE;EAC9B,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,EAAE;;EAE7E,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,eAAe,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;EAC9E,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,uBAAuB,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;EACvF,IAAI,MAAM,SAAS,GAAG,MAAM,EAAE,aAAa,CAAC,oBAAoB,CAAC;;EAEjE,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,EAAE;;EAE7B;EACA,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,GAAG,IAAI;;EAEzC;EACA,IAAI,IAAI,OAAO,YAAY,WAAW,EAAE;EACxC,MAAM,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;EACpC,IAAI;EACJ,IAAI,IAAI,SAAS,EAAE,SAAS,CAAC,WAAW,GAAG,GAAG;;EAE9C;EACA,IAAI,IAAI,CAAC,kBAAkB,EAAE;;EAE7B,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC;EACxD,EAAE;;EAEF,EAAE,SAAS,GAAG;EACd,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;;EAE1B;EACA,IAAI,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EAC/C,IAAI,KAAK,CAAC,SAAS,GAAG,uBAAuB;;EAE7C,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;EACnD,IAAI,MAAM,CAAC,SAAS,GAAG,sBAAsB;EAC7C,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ;EAC1B,IAAI,MAAM,CAAC,KAAK,GAAG,cAAc;EACjC,IAAI,MAAM,CAAC,SAAS,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA,QAAQ,CAAC;;EAET,IAAI,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;EAC/D,IAAI,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC;;EAE7B;EACA,IAAI,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EACxD,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,iCAAiC;EACtE,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;EAC/C,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,CAAC;EACT;;EAEA,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC;;EAEtC;EACA,IAAI,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EAC/C,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,gCAAgC;EAC5D,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;EACtC,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,EAAE,IAAI,CAAC,yBAAyB,EAAE;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;A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","x_google_ignoreList":[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}